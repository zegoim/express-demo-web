!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}("undefined"!=typeof self?self:this,(function(){return function(){var __webpack_modules__={4452:function(e,t,n){var r;e.exports=(r=n(2952),n(5909),n(4905),n(8492),n(3617),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],o=[],s=[],a=[],u=[],c=[],l=[],h=[],d=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;i[n]=p=p>>>8^255&p^99,o[p]=n;var g,m=e[n],_=e[m],y=e[_];s[n]=(g=257*e[p]^16843008*p)<<24|g>>>8,a[n]=g<<16|g>>>16,u[n]=g<<8|g>>>24,c[n]=g,l[p]=(g=16843009*y^65537*_^257*m^16843008*n)<<24|g>>>8,h[p]=g<<16|g>>>16,d[p]=g<<8|g>>>24,f[p]=g,n?(n=m^e[e[e[y^m]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<r;s++)s<n?o[s]=t[s]:(c=o[s-1],s%n?n>6&&s%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=p[s/n|0]<<24),o[s]=o[s-n]^c);for(var a=this._invKeySchedule=[],u=0;u<r;u++){if(s=r-u,u%4)var c=o[s];else c=o[s-4];a[u]=u<4||s<=4?c:l[i[c>>>24]]^h[i[c>>>16&255]]^d[i[c>>>8&255]]^f[i[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,d,f,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],f=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&d]^n[f++],m=r[l>>>24]^i[h>>>16&255]^o[d>>>8&255]^s[255&c]^n[f++],_=r[h>>>24]^i[d>>>16&255]^o[c>>>8&255]^s[255&l]^n[f++],y=r[d>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^n[f++];c=g,l=m,h=_,d=y}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^n[f++],m=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^n[f++],_=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[f++],y=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[f++],e[t]=g,e[t+1]=m,e[t+2]=_,e[t+3]=y},keySize:8});e.AES=t._createHelper(g)}(),r.AES)},3617:function(e,t,n){var r;e.exports=(r=n(2952),n(8492),void(r.lib.Cipher||function(e){var t=r,n=t.lib,i=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,a=t.enc,u=a.Base64,c=t.algo.EvpKDF,l=n.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:_}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),h=(n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var t=d.extend();function n(t,n,r){var i,o=this._iv;o?(i=o,this._iv=e):i=this._prevBlock;for(var s=0;s<r;s++)t[n+s]^=i[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;n.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=e.slice(t,t+i);r.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=o}}),t}(),p=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,s=[],a=0;a<r;a+=4)s.push(i);var u=o.create(s,r);e.concat(u)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},g=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:f,padding:p}),reset:function(){var e;l.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?o.create([1398893684,1701076831]).concat(n).concat(t):t).toString(u)},parse:function(e){var t,n=u.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=o.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},_=n.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),o=i.finalize(t),s=i.cfg;return g.create({ciphertext:o,key:n,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),y=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var i=c.create({keySize:t+n}).compute(e,r),s=o.create(i.words.slice(t),4*n);return i.sigBytes=4*t,g.create({key:i,iv:s,salt:r})}},v=n.PasswordBasedCipher=_.extend({cfg:_.cfg.extend({kdf:y}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var o=_.encrypt.call(this,e,t,i.key,r);return o.mixIn(i),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,_.decrypt.call(this,e,t,i.key,r)}})}()))},2952:function(e,t,n){var r;e.exports=(r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(3828)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},u=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new c.init(t,e)}}),l=s.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*u,o);if(u){for(var h=0;h<u;h+=s)this._doProcessBlock(i,h);n=i.splice(0,u),r.sigBytes-=l}return new c.init(n,l)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)},5909:function(e,t,n){var r;e.exports=(r=n(2952),function(){var e=r.lib.WordArray;function t(t,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[t.charCodeAt(s-1)]<<s%4*2,u=r[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return e.create(i,o)}r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var n=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o<r.length;o++)i[r.charCodeAt(o)]=o}var s=r.charAt(64);if(s){var a=e.indexOf(s);-1!==a&&(n=a)}return t(e,n,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),r.enc.Base64)},2695:function(e,t,n){var r;e.exports=(r=n(2952),function(){var e=r.lib.WordArray;function t(t,n,r){for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r[t.charCodeAt(s-1)]<<s%4*2,u=r[t.charCodeAt(s)]>>>6-s%4*2;i[o>>>2]|=(a|u)<<24-o%4*8,o++}return e.create(i,o)}r.enc.Base64url={stringify:function(e,t=!0){var n=e.words,r=e.sigBytes,i=t?this._safe_map:this._map;e.clamp();for(var o=[],s=0;s<r;s+=3)for(var a=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,u=0;u<4&&s+.75*u<r;u++)o.push(i.charAt(a>>>6*(3-u)&63));var c=i.charAt(64);if(c)for(;o.length%4;)o.push(c);return o.join("")},parse:function(e,n=!0){var r=e.length,i=n?this._safe_map:this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var s=0;s<i.length;s++)o[i.charCodeAt(s)]=s}var a=i.charAt(64);if(a){var u=e.indexOf(a);-1!==u&&(r=u)}return t(e,r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),r.enc.Base64url)},3323:function(e,t,n){var r;e.exports=(r=n(2952),function(){var e=r.lib.WordArray,t=r.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i+=2)r.push(String.fromCharCode(t[i>>>2]>>>16-i%4*8&65535));return r.join("")},parse:function(t){for(var n=t.length,r=[],i=0;i<n;i++)r[i>>>1]|=t.charCodeAt(i)<<16-i%2*16;return e.create(r,2*n)}},t.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],o=0;o<r;o+=2){var s=n(t[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var r=t.length,i=[],o=0;o<r;o++)i[o>>>1]|=n(t.charCodeAt(o)<<16-o%2*16);return e.create(i,2*r)}}}(),r.enc.Utf16)},8492:function(e,t,n){var r,i,o,s,a,u,c;e.exports=(c=n(2952),n(9479),n(3760),s=(i=(r=c).lib).WordArray,u=(a=r.algo).EvpKDF=(o=i.Base).extend({cfg:o.extend({keySize:4,hasher:a.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),o=s.create(),a=o.words,u=r.keySize,c=r.iterations;a.length<u;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<c;l++)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*u,o}}),r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},c.EvpKDF)},4408:function(e,t,n){var r,i,o;e.exports=(o=n(2952),n(3617),r=o.lib.CipherParams,i=o.enc.Hex,o.format.Hex={stringify:function(e){return e.ciphertext.toString(i)},parse:function(e){var t=i.parse(e);return r.create({ciphertext:t})}},o.format.Hex)},3760:function(e,t,n){var r,i;e.exports=(r=n(2952),i=r.enc.Utf8,void(r.algo.HMAC=r.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),s=this._iKey=t.clone(),a=o.words,u=s.words,c=0;c<n;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},8209:function(e,t,n){var r;e.exports=(r=n(2952),n(1988),n(9183),n(3323),n(5909),n(2695),n(4905),n(9479),n(2481),n(3653),n(2133),n(2307),n(9421),n(5824),n(3760),n(7248),n(8492),n(3617),n(2882),n(8277),n(9972),n(509),n(9182),n(4990),n(2593),n(829),n(265),n(8846),n(4408),n(4452),n(1945),n(2528),n(1865),n(5308),r)},9183:function(e,t,n){var r;e.exports=(r=n(2952),function(){if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init,n=e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)};n.prototype=e}}(),r.lib.WordArray)},4905:function(e,t,n){var r;e.exports=(r=n(2952),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],u=e[t+1],f=e[t+2],p=e[t+3],g=e[t+4],m=e[t+5],_=e[t+6],y=e[t+7],v=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],I=e[t+15],R=o[0],k=o[1],N=o[2],O=o[3];R=c(R,k,N,O,s,7,a[0]),O=c(O,R,k,N,u,12,a[1]),N=c(N,O,R,k,f,17,a[2]),k=c(k,N,O,R,p,22,a[3]),R=c(R,k,N,O,g,7,a[4]),O=c(O,R,k,N,m,12,a[5]),N=c(N,O,R,k,_,17,a[6]),k=c(k,N,O,R,y,22,a[7]),R=c(R,k,N,O,v,7,a[8]),O=c(O,R,k,N,b,12,a[9]),N=c(N,O,R,k,S,17,a[10]),k=c(k,N,O,R,E,22,a[11]),R=c(R,k,N,O,T,7,a[12]),O=c(O,R,k,N,w,12,a[13]),N=c(N,O,R,k,C,17,a[14]),R=l(R,k=c(k,N,O,R,I,22,a[15]),N,O,u,5,a[16]),O=l(O,R,k,N,_,9,a[17]),N=l(N,O,R,k,E,14,a[18]),k=l(k,N,O,R,s,20,a[19]),R=l(R,k,N,O,m,5,a[20]),O=l(O,R,k,N,S,9,a[21]),N=l(N,O,R,k,I,14,a[22]),k=l(k,N,O,R,g,20,a[23]),R=l(R,k,N,O,b,5,a[24]),O=l(O,R,k,N,C,9,a[25]),N=l(N,O,R,k,p,14,a[26]),k=l(k,N,O,R,v,20,a[27]),R=l(R,k,N,O,w,5,a[28]),O=l(O,R,k,N,f,9,a[29]),N=l(N,O,R,k,y,14,a[30]),R=h(R,k=l(k,N,O,R,T,20,a[31]),N,O,m,4,a[32]),O=h(O,R,k,N,v,11,a[33]),N=h(N,O,R,k,E,16,a[34]),k=h(k,N,O,R,C,23,a[35]),R=h(R,k,N,O,u,4,a[36]),O=h(O,R,k,N,g,11,a[37]),N=h(N,O,R,k,y,16,a[38]),k=h(k,N,O,R,S,23,a[39]),R=h(R,k,N,O,w,4,a[40]),O=h(O,R,k,N,s,11,a[41]),N=h(N,O,R,k,p,16,a[42]),k=h(k,N,O,R,_,23,a[43]),R=h(R,k,N,O,b,4,a[44]),O=h(O,R,k,N,T,11,a[45]),N=h(N,O,R,k,I,16,a[46]),R=d(R,k=h(k,N,O,R,f,23,a[47]),N,O,s,6,a[48]),O=d(O,R,k,N,y,10,a[49]),N=d(N,O,R,k,C,15,a[50]),k=d(k,N,O,R,m,21,a[51]),R=d(R,k,N,O,T,6,a[52]),O=d(O,R,k,N,p,10,a[53]),N=d(N,O,R,k,S,15,a[54]),k=d(k,N,O,R,u,21,a[55]),R=d(R,k,N,O,v,6,a[56]),O=d(O,R,k,N,I,10,a[57]),N=d(N,O,R,k,_,15,a[58]),k=d(k,N,O,R,w,21,a[59]),R=d(R,k,N,O,g,6,a[60]),O=d(O,R,k,N,E,10,a[61]),N=d(N,O,R,k,f,15,a[62]),k=d(k,N,O,R,b,21,a[63]),o[0]=o[0]+R|0,o[1]=o[1]+k|0,o[2]=o[2]+N|0,o[3]=o[3]+O|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function l(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(u),t.HmacMD5=o._createHmacHelper(u)}(Math),r.MD5)},2882:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),r.mode.CFB=function(){var e=r.lib.BlockCipherMode.extend();function t(e,t,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var s=0;s<n;s++)e[t+s]^=i[s]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i,r),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);t.call(this,e,n,i,r),this._prevBlock=o}}),e}(),r.mode.CFB)},9972:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),
/** @preserve
	 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
	 * derived from CryptoJS.mode.CTR
	 * Jan Hruby jhruby.web@gmail.com
	 */
r.mode.CTRGladman=function(){var e=r.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var i=e.Encryptor=e.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),n(s);var a=s.slice(0);r.encryptBlock(a,0);for(var u=0;u<i;u++)e[t+u]^=a[u]}});return e.Decryptor=i,e}(),r.mode.CTRGladman)},8277:function(e,t,n){var r,i,o;e.exports=(o=n(2952),n(3617),o.mode.CTR=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[r-1]=o[r-1]+1|0;for(var a=0;a<r;a++)e[t+a]^=s[a]}}),r.Decryptor=i,r),o.mode.CTR)},9182:function(e,t,n){var r,i;e.exports=(i=n(2952),n(3617),i.mode.ECB=((r=i.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),i.mode.ECB)},509:function(e,t,n){var r,i,o;e.exports=(o=n(2952),n(3617),o.mode.OFB=(r=o.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<r;s++)e[t+s]^=o[s]}}),r.Decryptor=i,r),o.mode.OFB)},4990:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),r.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,i=r-n%r,o=n+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.pad.Ansix923)},2593:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),r.pad.Iso10126={pad:function(e,t){var n=4*t,i=n-e.sigBytes%n;e.concat(r.lib.WordArray.random(i-1)).concat(r.lib.WordArray.create([i<<24],1))},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.pad.Iso10126)},829:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),r.pad.Iso97971={pad:function(e,t){e.concat(r.lib.WordArray.create([2147483648],1)),r.pad.ZeroPadding.pad(e,t)},unpad:function(e){r.pad.ZeroPadding.unpad(e),e.sigBytes--}},r.pad.Iso97971)},8846:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),r.pad.NoPadding={pad:function(){},unpad:function(){}},r.pad.NoPadding)},265:function(e,t,n){var r;e.exports=(r=n(2952),n(3617),r.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},r.pad.ZeroPadding)},7248:function(e,t,n){var r,i,o,s,a,u,c,l;e.exports=(l=n(2952),n(9479),n(3760),s=(i=(r=l).lib).WordArray,u=(a=r.algo).HMAC,c=a.PBKDF2=(o=i.Base).extend({cfg:o.extend({keySize:4,hasher:a.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=u.create(n.hasher,e),i=s.create(),o=s.create([1]),a=i.words,c=o.words,l=n.keySize,h=n.iterations;a.length<l;){var d=r.update(t).finalize(o);r.reset();for(var f=d.words,p=f.length,g=d,m=1;m<h;m++){g=r.finalize(g),r.reset();for(var _=g.words,y=0;y<p;y++)f[y]^=_[y]}i.concat(d),c[0]++}return i.sigBytes=4*l,i}}),r.PBKDF2=function(e,t,n){return c.create(n).compute(e,t)},l.PBKDF2)},5308:function(e,t,n){var r;e.exports=(r=n(2952),n(5909),n(4905),n(8492),n(3617),function(){var e=r,t=e.lib.StreamCipher,n=[],i=[],o=[],s=e.algo.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)a.call(this);for(i=0;i<8;i++)r[i]^=n[i+4&7];if(t){var o=t.words,s=o[0],u=o[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,d=l<<16|65535&c;for(r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=d,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=d,i=0;i<4;i++)a.call(this)}},_doProcessBlock:function(e,t){var r=this._X;a.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],s=65535&r,a=r>>>16;o[n]=((s*s>>>17)+s*a>>>15)+a*a^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(s)}(),r.RabbitLegacy)},1865:function(e,t,n){var r;e.exports=(r=n(2952),n(5909),n(4905),n(8492),n(3617),function(){var e=r,t=e.lib.StreamCipher,n=[],i=[],o=[],s=e.algo.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)a.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var o=t.words,s=o[0],u=o[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),l=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&l,d=l<<16|65535&c;for(i[0]^=c,i[1]^=h,i[2]^=l,i[3]^=d,i[4]^=c,i[5]^=h,i[6]^=l,i[7]^=d,n=0;n<4;n++)a.call(this)}},_doProcessBlock:function(e,t){var r=this._X;a.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function a(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],s=65535&r,a=r>>>16;o[n]=((s*s>>>17)+s*a>>>15)+a*a^((4294901760&r)*r|0)+((65535&r)*r|0)}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(s)}(),r.Rabbit)},2528:function(e,t,n){var r;e.exports=(r=n(2952),n(5909),n(4905),n(8492),n(3617),function(){var e=r,t=e.lib.StreamCipher,n=e.algo,i=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],i=0;i<256;i++)r[i]=i;i=0;for(var o=0;i<256;i++){var s=i%n,a=r[i];r[i]=r[o=(o+r[i]+(t[s>>>2]>>>24-s%4*8&255))%256],r[o]=a}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,i=0;i<4;i++){var o=e[t=(t+1)%256];e[t]=e[n=(n+e[t])%256],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,r}e.RC4=t._createHelper(i);var s=n.RC4Drop=i.extend({cfg:i.cfg.extend({drop:192}),_doReset:function(){i._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(s)}(),r.RC4)},5824:function(e,t,n){var r;e.exports=(r=n(2952),
/** @preserve
	(c) 2012 by CÃ©dric Mesnil. All rights reserved.

	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	*/
function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),c=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),d=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,f,b,S,E,T,w,C,I,R,k=this._hash.words,N=h.words,O=d.words,L=a.words,A=u.words,x=c.words,P=l.words;for(E=o=k[0],T=s=k[1],w=f=k[2],C=b=k[3],I=S=k[4],n=0;n<80;n+=1)R=o+e[t+L[n]]|0,R+=n<16?p(s,f,b)+N[0]:n<32?g(s,f,b)+N[1]:n<48?m(s,f,b)+N[2]:n<64?_(s,f,b)+N[3]:y(s,f,b)+N[4],R=(R=v(R|=0,x[n]))+S|0,o=S,S=b,b=v(f,10),f=s,s=R,R=E+e[t+A[n]]|0,R+=n<16?y(T,w,C)+O[0]:n<32?_(T,w,C)+O[1]:n<48?m(T,w,C)+O[2]:n<64?g(T,w,C)+O[3]:p(T,w,C)+O[4],R=(R=v(R|=0,P[n]))+I|0,E=I,I=C,C=v(w,10),w=T,T=R;R=k[1]+f+C|0,k[1]=k[2]+b+I|0,k[2]=k[3]+S+E|0,k[3]=k[4]+o+T|0,k[4]=k[0]+s+w|0,k[0]=R},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function g(e,t,n){return e&t|~e&n}function m(e,t,n){return(e|~t)^n}function _(e,t,n){return e&n|t&~n}function y(e,t,n){return e^(t|~n)}function v(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(f),t.HmacRIPEMD160=o._createHmacHelper(f)}(Math),r.RIPEMD160)},9479:function(e,t,n){var r,i,o,s,a,u,c;e.exports=(c=n(2952),o=(i=(r=c).lib).WordArray,a=[],u=r.algo.SHA1=(s=i.Hasher).extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)a[c]=0|e[t+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+u+a[c];h+=c<20?1518500249+(i&o|~i&s):c<40?1859775393+(i^o^s):c<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,u=s,s=o,o=i<<30|i>>>2,i=r,r=h}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=s._createHelper(u),r.HmacSHA1=s._createHmacHelper(u),c.SHA1)},3653:function(e,t,n){var r,i,o,s,a,u;e.exports=(u=n(2952),n(2481),i=(r=u).lib.WordArray,a=(o=r.algo).SHA224=(s=o.SHA256).extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=s._createHelper(a),r.HmacSHA224=s._createHmacHelper(a),u.SHA224)},2481:function(e,t,n){var r;e.exports=(r=n(2952),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.algo,a=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)t(r)&&(i<8&&(a[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],h=n[6],d=n[7],f=0;f<64;f++){if(f<16)c[f]=0|e[t+f];else{var p=c[f-15],g=c[f-2];c[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+c[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+c[f-16]}var m=r&i^r&o^i&o,_=d+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&h)+u[f]+c[f];d=h,h=l,l=a,a=s+_|0,s=o,o=i,i=r,r=_+(((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+d|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(l),t.HmacSHA256=o._createHmacHelper(l)}(Math),r.SHA256)},9421:function(e,t,n){var r;e.exports=(r=n(2952),n(1988),function(e){var t=r,n=t.lib,i=n.WordArray,o=n.Hasher,s=t.x64.Word,a=t.algo,u=[],c=[],l=[];!function(){for(var e=1,t=0,n=0;n<24;n++){u[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)c[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,o=0;o<24;o++){for(var a=0,h=0,d=0;d<7;d++){if(1&i){var f=(1<<d)-1;f<32?h^=1<<f:a^=1<<f-32}128&i?i=i<<1^113:i<<=1}l[o]=s.create(a,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var d=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,i=0;i<r;i++){var o=e[t+2*i],s=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),(L=n[i]).high^=s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),L.low^=o}for(var a=0;a<24;a++){for(var d=0;d<5;d++){for(var f=0,p=0,g=0;g<5;g++)f^=(L=n[d+5*g]).high,p^=L.low;var m=h[d];m.high=f,m.low=p}for(d=0;d<5;d++){var _=h[(d+4)%5],y=h[(d+1)%5],v=y.high,b=y.low;for(f=_.high^(v<<1|b>>>31),p=_.low^(b<<1|v>>>31),g=0;g<5;g++)(L=n[d+5*g]).high^=f,L.low^=p}for(var S=1;S<25;S++){var E=(L=n[S]).high,T=L.low,w=u[S];w<32?(f=E<<w|T>>>32-w,p=T<<w|E>>>32-w):(f=T<<w-32|E>>>64-w,p=E<<w-32|T>>>64-w);var C=h[c[S]];C.high=f,C.low=p}var I=h[0],R=n[0];for(I.high=R.high,I.low=R.low,d=0;d<5;d++)for(g=0;g<5;g++){var k=h[S=d+5*g],N=h[(d+1)%5+5*g],O=h[(d+2)%5+5*g];(L=n[S]).high=k.high^~N.high&O.high,L.low=k.low^~N.low&O.low}var L,A=l[a];(L=n[0]).high^=A.high,L.low^=A.low}},_doFinalize:function(){var t=this._data,n=t.words,r=8*t.sigBytes,o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,c=[],l=0;l<u;l++){var h=s[l],d=h.high,f=h.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),c.push(f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)),c.push(d)}return new i.init(c,a)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(d),t.HmacSHA3=o._createHmacHelper(d)}(Math),r.SHA3)},2307:function(e,t,n){var r,i,o,s,a,u,c,l;e.exports=(l=n(2952),n(1988),n(2133),o=(i=(r=l).x64).Word,s=i.WordArray,c=(a=r.algo).SHA384=(u=a.SHA512).extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=u._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=u._createHelper(c),r.HmacSHA384=u._createHmacHelper(c),l.SHA384)},2133:function(e,t,n){var r;e.exports=(r=n(2952),n(1988),function(){var e=r,t=e.lib.Hasher,n=e.x64,i=n.Word,o=n.WordArray,s=e.algo;function a(){return i.create.apply(i,arguments)}var u=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],c=[];!function(){for(var e=0;e<80;e++)c[e]=a()}();var l=s.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],h=n[6],d=n[7],f=r.high,p=r.low,g=i.high,m=i.low,_=o.high,y=o.low,v=s.high,b=s.low,S=a.high,E=a.low,T=l.high,w=l.low,C=h.high,I=h.low,R=d.high,k=d.low,N=f,O=p,L=g,A=m,x=_,P=y,Z=v,M=b,D=S,U=E,B=T,G=w,W=C,H=I,z=R,V=k,F=0;F<80;F++){var X,Y,K=c[F];if(F<16)Y=K.high=0|e[t+2*F],X=K.low=0|e[t+2*F+1];else{var j=c[F-15],J=j.high,Q=j.low,q=(Q>>>1|J<<31)^(Q>>>8|J<<24)^(Q>>>7|J<<25),$=c[F-2],ee=$.high,te=$.low,ne=(te>>>19|ee<<13)^(te<<3|ee>>>29)^(te>>>6|ee<<26),re=c[F-7],ie=c[F-16],oe=ie.low;K.high=Y=(Y=(Y=((J>>>1|Q<<31)^(J>>>8|Q<<24)^J>>>7)+re.high+((X=q+re.low)>>>0<q>>>0?1:0))+((ee>>>19|te<<13)^(ee<<3|te>>>29)^ee>>>6)+((X+=ne)>>>0<ne>>>0?1:0))+ie.high+((X+=oe)>>>0<oe>>>0?1:0),K.low=X}var se,ae=D&B^~D&W,ue=U&G^~U&H,ce=N&L^N&x^L&x,le=(O>>>28|N<<4)^(O<<30|N>>>2)^(O<<25|N>>>7),he=u[F],de=he.low,fe=z+((D>>>14|U<<18)^(D>>>18|U<<14)^(D<<23|U>>>9))+((se=V+((U>>>14|D<<18)^(U>>>18|D<<14)^(U<<23|D>>>9)))>>>0<V>>>0?1:0),pe=le+(O&A^O&P^A&P);z=W,V=H,W=B,H=G,B=D,G=U,D=Z+(fe=(fe=(fe=fe+ae+((se+=ue)>>>0<ue>>>0?1:0))+he.high+((se+=de)>>>0<de>>>0?1:0))+Y+((se+=X)>>>0<X>>>0?1:0))+((U=M+se|0)>>>0<M>>>0?1:0)|0,Z=x,M=P,x=L,P=A,L=N,A=O,N=fe+(((N>>>28|O<<4)^(N<<30|O>>>2)^(N<<25|O>>>7))+ce+(pe>>>0<le>>>0?1:0))+((O=se+pe|0)>>>0<se>>>0?1:0)|0}p=r.low=p+O,r.high=f+N+(p>>>0<O>>>0?1:0),m=i.low=m+A,i.high=g+L+(m>>>0<A>>>0?1:0),y=o.low=y+P,o.high=_+x+(y>>>0<P>>>0?1:0),b=s.low=b+M,s.high=v+Z+(b>>>0<M>>>0?1:0),E=a.low=E+U,a.high=S+D+(E>>>0<U>>>0?1:0),w=l.low=w+G,l.high=T+B+(w>>>0<G>>>0?1:0),I=h.low=I+H,h.high=C+W+(I>>>0<H>>>0?1:0),k=d.low=k+V,d.high=R+z+(k>>>0<V>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(l),e.HmacSHA512=t._createHmacHelper(l)}(),r.SHA512)},1945:function(e,t,n){var r;e.exports=(r=n(2952),n(5909),n(4905),n(8492),n(3617),function(){var e=r,t=e.lib,n=t.WordArray,i=t.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=s[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var i=this._subKeys=[],o=0;o<16;o++){var c=i[o]=[],l=u[o];for(n=0;n<24;n++)c[n/6|0]|=t[(a[n]-1+l)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(a[n+24]-1+l)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var h=this._invSubKeys=[];for(n=0;n<16;n++)h[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),d.call(this,1,1431655765);for(var r=0;r<16;r++){for(var i=n[r],o=this._lBlock,s=this._rBlock,a=0,u=0;u<8;u++)a|=c[u][((s^i[u])&l[u])>>>0];this._lBlock=s,this._rBlock=o^a}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function f(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=i._createHelper(h);var p=o.TripleDES=i.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=h.createEncryptor(n.create(t)),this._des2=h.createEncryptor(n.create(r)),this._des3=h.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=i._createHelper(p)}(),r.TripleDES)},1988:function(e,t,n){var r;e.exports=(r=n(2952),function(e){var t=r.lib,n=t.Base,i=t.WordArray,o=r.x64={};o.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),o.WordArray=n.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:8*t.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var o=e[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),r)},6129:function(e,t,n){
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/
e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){return i(t[s][1][e]||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,s,a,u,c=[],l=0,h=e.length,d=h,f="string"!==r.getTypeOf(e);l<e.length;)d=h-l,i=f?(t=e[l++],n=l<h?e[l++]:0,l<h?e[l++]:0):(t=e.charCodeAt(l++),n=l<h?e.charCodeAt(l++):0,l<h?e.charCodeAt(l++):0),s=(3&t)<<4|n>>4,a=1<d?(15&n)<<2|i>>6:64,u=2<d?63&i:64,c.push(o.charAt(t>>2)+o.charAt(s)+o.charAt(a)+o.charAt(u));return c.join("")},n.decode=function(e){var t,n,r,s,a,u,c=0,l=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|f):new Array(0|f);c<e.length;)t=o.indexOf(e.charAt(c++))<<2|(s=o.indexOf(e.charAt(c++)))>>4,n=(15&s)<<4|(a=o.indexOf(e.charAt(c++)))>>2,r=(3&a)<<6|(u=o.indexOf(e.charAt(c++))),d[l++]=t,64!==a&&(d[l++]=n),64!==u&&(d[l++]=r);return d}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,s=r+n;e^=-1;for(var a=r;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var o=i,s=r+n;e^=-1;for(var a=r;a<s;a++)e=e>>>8^o[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),s=e("./stream/GenericWorker"),a=r?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new u("Deflate",e)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,s,l){var h,d,f=e.file,p=e.compression,g=l!==a.utf8encode,m=o.transformTo("string",l(f.name)),_=o.transformTo("string",a.utf8encode(f.name)),y=f.comment,v=o.transformTo("string",l(y)),b=o.transformTo("string",a.utf8encode(y)),S=_.length!==f.name.length,E=b.length!==y.length,T="",w="",C="",I=f.dir,R=f.date,k={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(k.crc32=e.crc32,k.compressedSize=e.compressedSize,k.uncompressedSize=e.uncompressedSize);var N=0;t&&(N|=8),g||!S&&!E||(N|=2048);var O=0,L=0;I&&(O|=16),"UNIX"===s?(L=798,O|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,I)):(L=20,O|=function(e){return 63&(e||0)}(f.dosPermissions)),h=R.getUTCHours(),h<<=6,h|=R.getUTCMinutes(),h<<=5,h|=R.getUTCSeconds()/2,d=R.getUTCFullYear()-1980,d<<=4,d|=R.getUTCMonth()+1,d<<=5,d|=R.getUTCDate(),S&&(w=r(1,1)+r(u(m),4)+_,T+="up"+r(w.length,2)+w),E&&(C=r(1,1)+r(u(v),4)+b,T+="uc"+r(C.length,2)+C);var A="";return A+="\n\0",A+=r(N,2),A+=p.magic,A+=r(h,2),A+=r(d,2),A+=r(k.crc32,4),A+=r(k.compressedSize,4),A+=r(k.uncompressedSize,4),A+=r(m.length,2),A+=r(T.length,2),{fileRecord:c.LOCAL_FILE_HEADER+A+m+T,dirRecord:c.CENTRAL_FILE_HEADER+r(L,2)+A+r(v.length,2)+"\0\0\0\0"+r(O,4)+r(i,4)+m+T+v}}var o=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),u=e("../crc32"),c=e("../signature");function l(e,t,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,s),l.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=function(e,t,n,i,s){var a=o.transformTo("string",s(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,this.bytesWritten-e,e,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,n){s++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),a=n.dir,u=n.date;n._compressWorker(i,n.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:a,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),u=e("./nodejsUtils");function c(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new s(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(c(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),o=i.files,s=0;s<o.length;s++){var a=o[s],u=a.fileNameStr,c=r.resolve(a.fileNameStr);n.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(c).unsafeOriginalName=u)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=o.getTypeOf(t),a=o.extend(n||{},u);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=g(e)),a.createFolders&&(r=p(e))&&m.call(this,r,!0),n&&void 0!==n.binary||(a.binary=!("string"===i&&!1===a.binary&&!1===a.base64)),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var h=null;h=t instanceof c||t instanceof s?t:d.isNode&&d.isStream(t)?new f(e,t):o.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var _=new l(e,h,a);this.files[e]=_}var i=e("./utf8"),o=e("./utils"),s=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),u=e("./defaults"),c=e("./compressedObject"),l=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},m=function(e,t){return t=void 0!==t?t:u.createFolders,e=g(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function _(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return r.call(this,e=this.root+e,t,n),this;if(_(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(_(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=m.call(this,this.root+e),n=this.clone();return n.root=t.name,n},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS"),t=h.generateWorker(this,n,n.comment||this.comment||"")}catch(e){(t=new s("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new u(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),s=e("../base64"),a=e("../support"),u=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function l(e,t){return new u.Promise((function(n,i){var o=[],a=e._internalType,u=e._outputType,c=e._mimeType;e.on("data",(function(e,n){o.push(e),t&&t(n)})).on("error",(function(e){o=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return s.encode(t);default:return r.transformTo(e,t)}}(u,function(e,t){var n,r=0,i=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,o),c);n(e)}catch(e){i(e)}o=[]})).resume()}))}function h(e,t,n){var s=t;switch(t){case"blob":case"arraybuffer":s="uint8array";break;case"base64":s="string"}try{this._internalType=s,this._outputType=t,this._mimeType=n,r.checkSupport(s),this._worker=e.pipe(new i(s)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return l(this,e)},on:function(e,t){var n=this;return this._worker.on(e,"data"===e?function(e){t.call(n,e.data,e.meta)}:function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,s,a=e.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(u):new Array(u),o=s=0;s<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,s=e.length,u=new Array(2*s);for(t=n=0;t<s;)if((i=e[t++])<128)u[n++]=i;else if(4<(o=a[i]))u[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<s;)i=i<<6|63&e[t++],o--;1<o?u[n++]=65533:i<65536?u[n++]=i:(u[n++]=55296|(i-=65536)>>10&1023,u[n++]=56320|1023&i)}return u.length!==n&&(u.subarray?u=u.subarray(0,n):u.length=n),r.applyFromCharCode(u)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(c,s),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var s=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),u=t;s!==t.length&&(i.uint8array?(u=t.subarray(0,s),this.leftOver=t.subarray(s,t.length)):(u=t.slice(0,s),this.leftOver=t.slice(s,t.length))),this.push({data:n.utf8decode(u),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(l,s),l.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),s=e("./external");function a(e){return e}function u(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)r.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(i,Math.min(i+n,o)):e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function l(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return c.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=l;var d={};d.string={string:a,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:function(e){return u(e,o.allocBuffer(e.length))}},d.array={string:l,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},d.arraybuffer={string:function(e){return l(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return o.newBufferFrom(e)}},d.nodebuffer={string:l,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return d[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,a,c){return s.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new s.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var l=n.getTypeOf(t);return l?("arraybuffer"===l?t=n.transformTo("uint8array",t):"string"===l&&(c?t=i.decode(t):o&&!0!==a&&(t=function(e){return u(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):s.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),s=e("./zipEntry"),a=e("./support");function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=i.transformTo(a.uint8array?"uint8array":"array",e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)this.reader.setIndex((t=this.files[e]).localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),u=e("./compressions"),c=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||s(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new s.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)r.prototype[c[h]]=l;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}t.exports=function(e){1!==c.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=p((function(){t(i,r)}));"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,c=new this(i);++u<n;)l(e[u],u);return c;function l(e,i){t.resolve(e).then((function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))}),(function(e){r||(r=!0,o.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(i);++s<n;)t.resolve(e[s]).then((function(e){r||(r=!0,o.resolve(a,e))}),(function(e){r||(r=!0,o.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),u=Object.prototype.toString,c=0,l=-1,h=0,d=8;function f(e){if(!(this instanceof f))return new f(e);this.options=i.assign({level:l,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==c)throw new Error(s[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var p;if(p="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,p))!==c)throw new Error(s[n]);this._dict_set=!0}}function p(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(e,t){var n,s,a=this.strm,l=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,a.input="string"==typeof e?o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(l),a.next_out=0,a.avail_out=l),1!==(n=r.deflate(a,s))&&n!==c)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?o.buf2binstring(i.shrinkBuf(a.output,a.next_out)):i.shrinkBuf(a.output,a.next_out))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c):2!==s||(this.onEnd(c),!(a.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=f,n.deflate=p,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,p(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,p(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(e,t){var n,a,u,c,h,d,f=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,f.input="string"==typeof e?o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?new Uint8Array(e):e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(d="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===l.call(g)?new Uint8Array(g):g,n=r.inflateSetDictionary(this.strm,d)),n===s.Z_BUF_ERROR&&!0===m&&(n=s.Z_OK,m=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==s.Z_STREAM_END&&(0!==f.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(f.output,f.next_out),c=f.next_out-u,h=o.buf2string(f.output,u),f.next_out=c,f.avail_out=p-c,c&&i.arraySet(f.output,f.output,u,c,0),this.onData(h)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(m=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(f.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,s;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(s=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)s.set(o=e[t],i),i+=o.length;return s}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,o,s,a=e.length,u=0;for(o=0;o<a;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(u),o=s=0;s<u;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.buf2binstring=function(e){return u(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,a=t||e.length,c=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)c[r++]=i;else if(4<(o=s[i]))c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<a;)i=i<<6|63&e[n++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(c[r++]=55296|(i-=65536)>>10&1023,c[r++]=56320|1023&i)}return u(c,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),u=e("./messages"),c=0,l=4,h=0,d=-2,f=-1,p=4,g=2,m=8,_=9,y=286,v=30,b=19,S=2*y+1,E=15,T=3,w=258,C=w+T+1,I=42,R=113,k=1,N=2,O=3,L=4;function A(e,t){return e.msg=u[t],t}function x(e){return(e<<1)-(4<e?9:0)}function P(e){for(var t=e.length;0<=--t;)e[t]=0}function Z(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function M(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Z(e.strm)}function D(e,t){e.pending_buf[e.pending++]=t}function U(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-C?e.strstart-(e.w_size-C):0,c=e.window,l=e.w_mask,h=e.prev,d=e.strstart+w,f=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===p&&c[n+s-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(r=w-(d-o),o=d-w,s<r){if(e.match_start=t,a<=(s=r))break;f=c[o+s-1],p=c[o+s]}}}while((t=h[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function G(e){var t,n,r,o,u,c,l,h,d,f,p=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-C)){for(i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;r=e.head[--t],e.head[t]=p<=r?r-p:0,--n;);for(t=n=p;r=e.prev[--t],e.prev[t]=p<=r?r-p:0,--n;);o+=p}if(0===e.strm.avail_in)break;if(l=e.window,h=e.strstart+e.lookahead,f=void 0,(d=o)<(f=(c=e.strm).avail_in)&&(f=d),n=0===f?0:(c.avail_in-=f,i.arraySet(l,c.input,c.next_in,f,h),1===c.state.wrap?c.adler=s(c.adler,l,f,h):2===c.state.wrap&&(c.adler=a(c.adler,l,f,h)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=n,e.lookahead+e.insert>=T)for(e.ins_h=e.window[u=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[u+T-1])&e.hash_mask,e.prev[u&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=u,u++,e.insert--,!(e.lookahead+e.insert<T)););}while(e.lookahead<C&&0!==e.strm.avail_in)}function W(e,t){for(var n,r;;){if(e.lookahead<C){if(G(e),e.lookahead<C&&t===c)return k;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-C&&(e.match_length=B(e,n)),e.match_length>=T)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-T),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=T){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=e.strstart<T-1?e.strstart:T-1,t===l?(M(e,!0),0===e.strm.avail_out?O:L):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:N}function H(e,t){for(var n,r,i;;){if(e.lookahead<C){if(G(e),e.lookahead<C&&t===c)return k;if(0===e.lookahead)break}if(n=0,e.lookahead>=T&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=T-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-C&&(e.match_length=B(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===T&&4096<e.strstart-e.match_start)&&(e.match_length=T-1)),e.prev_length>=T&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-T,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-T),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+T-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=T-1,e.strstart++,r&&(M(e,!1),0===e.strm.avail_out))return k}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&M(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return k}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<T-1?e.strstart:T-1,t===l?(M(e,!0),0===e.strm.avail_out?O:L):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:N}function z(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*S),this.dyn_dtree=new i.Buf16(2*(2*v+1)),this.bl_tree=new i.Buf16(2*(2*b+1)),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(E+1),this.heap=new i.Buf16(2*y+1),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),P(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function F(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=g,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?I:R,e.adler=2===t.wrap?0:1,t.last_flush=c,o._tr_init(t),h):A(e,d)}function X(e){var t=F(e);return t===h&&function(e){e.window_size=2*e.w_size,P(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=T-1,e.match_available=0,e.ins_h=0}(e.state),t}function Y(e,t,n,r,o,s){if(!e)return d;var a=1;if(t===f&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),o<1||_<o||n!==m||r<8||15<r||t<0||9<t||s<0||p<s)return A(e,d);8===r&&(r=9);var u=new V;return(e.state=u).strm=e,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+T-1)/T),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=n,X(e)}r=[new z(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(G(e),0===e.lookahead&&t===c)return k;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,M(e,!1),0===e.strm.avail_out))return k;if(e.strstart-e.block_start>=e.w_size-C&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===l?(M(e,!0),0===e.strm.avail_out?O:L):(e.strstart>e.block_start&&M(e,!1),k)})),new z(4,4,8,4,W),new z(4,5,16,8,W),new z(4,6,32,32,W),new z(4,4,16,16,H),new z(8,16,32,32,H),new z(8,16,128,128,H),new z(8,32,128,256,H),new z(32,128,258,1024,H),new z(32,258,258,4096,H)],n.deflateInit=function(e,t){return Y(e,t,m,15,8,0)},n.deflateInit2=Y,n.deflateReset=X,n.deflateResetKeep=F,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},n.deflate=function(e,t){var n,i,s,u;if(!e||!e.state||5<t||t<0)return e?A(e,d):d;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==l)return A(e,0===e.avail_out?-5:d);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===I)if(2===i.wrap)e.adler=0,D(i,31),D(i,139),D(i,8),i.gzhead?(D(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),D(i,255&i.gzhead.time),D(i,i.gzhead.time>>8&255),D(i,i.gzhead.time>>16&255),D(i,i.gzhead.time>>24&255),D(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),D(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(D(i,255&i.gzhead.extra.length),D(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(D(i,0),D(i,0),D(i,0),D(i,0),D(i,0),D(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),D(i,3),i.status=R);else{var f=m+(i.w_bits-8<<4)<<8;f|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(f|=32),f+=31-f%31,i.status=R,U(i,f),0!==i.strstart&&(U(i,e.adler>>>16),U(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),Z(e),s=i.pending,i.pending!==i.pending_buf_size));)D(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),Z(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,D(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),Z(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,D(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Z(e),i.pending+2<=i.pending_buf_size&&(D(i,255&e.adler),D(i,e.adler>>8&255),e.adler=0,i.status=R)):i.status=R),0!==i.pending){if(Z(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&x(t)<=x(n)&&t!==l)return A(e,-5);if(666===i.status&&0!==e.avail_in)return A(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==c&&666!==i.status){var p=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(G(e),0===e.lookahead)){if(t===c)return k;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===l?(M(e,!0),0===e.strm.avail_out?O:L):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:N}(i,t):3===i.strategy?function(e,t){for(var n,r,i,s,a=e.window;;){if(e.lookahead<=w){if(G(e),e.lookahead<=w&&t===c)return k;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=T&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){s=e.strstart+w;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s);e.match_length=w-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=T?(n=o._tr_tally(e,1,e.match_length-T),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(M(e,!1),0===e.strm.avail_out))return k}return e.insert=0,t===l?(M(e,!0),0===e.strm.avail_out?O:L):e.last_lit&&(M(e,!1),0===e.strm.avail_out)?k:N}(i,t):r[i.level].func(i,t);if(p!==O&&p!==L||(i.status=666),p===k||p===O)return 0===e.avail_out&&(i.last_flush=-1),h;if(p===N&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(P(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),Z(e),0===e.avail_out))return i.last_flush=-1,h}return t!==l?h:i.wrap<=0?1:(2===i.wrap?(D(i,255&e.adler),D(i,e.adler>>8&255),D(i,e.adler>>16&255),D(i,e.adler>>24&255),D(i,255&e.total_in),D(i,e.total_in>>8&255),D(i,e.total_in>>16&255),D(i,e.total_in>>24&255)):(U(i,e.adler>>>16),U(i,65535&e.adler)),Z(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==I&&69!==t&&73!==t&&91!==t&&103!==t&&t!==R&&666!==t?A(e,d):(e.state=null,t===R?A(e,-3):h):d},n.deflateSetDictionary=function(e,t){var n,r,o,a,u,c,l,f,p=t.length;if(!e||!e.state)return d;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==I||n.lookahead)return d;for(1===a&&(e.adler=s(e.adler,t,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(P(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new i.Buf8(n.w_size),i.arraySet(f,t,p-n.w_size,n.w_size,0),t=f,p=n.w_size),u=e.avail_in,c=e.next_in,l=e.input,e.avail_in=p,e.next_in=0,e.input=t,G(n);n.lookahead>=T;){for(r=n.strstart,o=n.lookahead-(T-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+T-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=T-1,G(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=T-1,n.match_available=0,e.next_in=c,e.input=l,e.avail_in=u,n.wrap=a,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,s,a,u,c,l,h,d,f,p,g,m,_,y,v,b,S,E,T,w,C,I;C=e.input,i=(r=e.next_in)+(e.avail_in-5),I=e.output,s=(o=e.next_out)-(t-e.avail_out),a=o+(e.avail_out-257),u=(n=e.state).dmax,c=n.wsize,l=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,g=n.lencode,m=n.distcode,_=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=C[r++]<<p,f+=C[r++]<<(p+=8),p+=8),v=g[f&_];t:for(;;){if(f>>>=b=v>>>24,p-=b,0==(b=v>>>16&255))I[o++]=65535&v;else{if(!(16&b)){if(0==(64&b)){v=g[(65535&v)+(f&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}S=65535&v,(b&=15)&&(p<b&&(f+=C[r++]<<p,p+=8),S+=f&(1<<b)-1,f>>>=b,p-=b),p<15&&(f+=C[r++]<<p,f+=C[r++]<<(p+=8),p+=8),v=m[f&y];n:for(;;){if(f>>>=b=v>>>24,p-=b,!(16&(b=v>>>16&255))){if(0==(64&b)){v=m[(65535&v)+(f&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&v,p<(b&=15)&&(f+=C[r++]<<p,(p+=8)<b&&(f+=C[r++]<<p,p+=8)),u<(E+=f&(1<<b)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=b,p-=b,(b=o-s)<E){if(l<(b=E-b)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(w=d,(T=0)===h){if(T+=c-b,b<S){for(S-=b;I[o++]=d[T++],--b;);T=o-E,w=I}}else if(h<b){if(T+=c+h-b,(b-=h)<S){for(S-=b;I[o++]=d[T++],--b;);if(T=0,h<S){for(S-=b=h;I[o++]=d[T++],--b;);T=o-E,w=I}}}else if(T+=h-b,b<S){for(S-=b;I[o++]=d[T++],--b;);T=o-E,w=I}for(;2<S;)I[o++]=w[T++],I[o++]=w[T++],I[o++]=w[T++],S-=3;S&&(I[o++]=w[T++],1<S&&(I[o++]=w[T++]))}else{for(T=o-E;I[o++]=I[T++],I[o++]=I[T++],I[o++]=I[T++],2<(S-=3););S&&(I[o++]=I[T++],1<S&&(I[o++]=I[T++]))}break}}break}}while(r<i&&o<a);r-=S=p>>3,f&=(1<<(p-=S<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),u=1,c=2,l=0,h=-2,d=1,f=852,p=592;function g(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function _(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(f),t.distcode=t.distdyn=new r.Buf32(p),t.sane=1,t.back=-1,l):h}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,_(e)):h}function v(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):h}function b(e,t){var n,r;return e?(r=new m,(e.state=r).window=null,(n=v(e,t))!==l&&(e.state=null),n):h}var S,E,T=!0;function w(e){if(T){var t;for(S=new r.Buf32(512),E=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(u,e.lens,0,288,S,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(c,e.lens,0,32,E,0,e.work,{bits:5}),T=!1}e.lencode=S,e.lenbits=9,e.distcode=E,e.distbits=5}function C(e,t,n,i){var o,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new r.Buf8(s.wsize)),i>=s.wsize?(r.arraySet(s.window,t,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i<(o=s.wsize-s.wnext)&&(o=i),r.arraySet(s.window,t,n-i,o,s.wnext),(i-=o)?(r.arraySet(s.window,t,n-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=y,n.inflateReset2=v,n.inflateResetKeep=_,n.inflateInit=function(e){return b(e,15)},n.inflateInit2=b,n.inflate=function(e,t){var n,f,p,m,_,y,v,b,S,E,T,I,R,k,N,O,L,A,x,P,Z,M,D,U,B=0,G=new r.Buf8(4),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(n=e.state).mode&&(n.mode=13),_=e.next_out,p=e.output,m=e.next_in,f=e.input,b=n.hold,S=n.bits,E=y=e.avail_in,T=v=e.avail_out,M=l;e:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;S<16;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(2&n.wrap&&35615===b){G[n.check=0]=255&b,G[1]=b>>>8&255,n.check=o(n.check,G,2,0),S=b=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",n.mode=30;break}if(S-=4,Z=8+(15&(b>>>=4)),0===n.wbits)n.wbits=Z;else if(Z>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<Z,e.adler=n.check=1,n.mode=512&b?10:12,S=b=0;break;case 2:for(;S<16;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(G[0]=255&b,G[1]=b>>>8&255,n.check=o(n.check,G,2,0)),S=b=0,n.mode=3;case 3:for(;S<32;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}n.head&&(n.head.time=b),512&n.flags&&(G[0]=255&b,G[1]=b>>>8&255,G[2]=b>>>16&255,G[3]=b>>>24&255,n.check=o(n.check,G,4,0)),S=b=0,n.mode=4;case 4:for(;S<16;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(G[0]=255&b,G[1]=b>>>8&255,n.check=o(n.check,G,2,0)),S=b=0,n.mode=5;case 5:if(1024&n.flags){for(;S<16;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(G[0]=255&b,G[1]=b>>>8&255,n.check=o(n.check,G,2,0)),S=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(I=n.length)&&(I=y),I&&(n.head&&(Z=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,f,m,I,Z)),512&n.flags&&(n.check=o(n.check,f,I,m)),y-=I,m+=I,n.length-=I),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(I=0;Z=f[m+I++],n.head&&Z&&n.length<65536&&(n.head.name+=String.fromCharCode(Z)),Z&&I<y;);if(512&n.flags&&(n.check=o(n.check,f,I,m)),y-=I,m+=I,Z)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(I=0;Z=f[m+I++],n.head&&Z&&n.length<65536&&(n.head.comment+=String.fromCharCode(Z)),Z&&I<y;);if(512&n.flags&&(n.check=o(n.check,f,I,m)),y-=I,m+=I,Z)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;S<16;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}S=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;S<32;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}e.adler=n.check=g(b),S=b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=_,e.avail_out=v,e.next_in=m,e.avail_in=y,n.hold=b,n.bits=S,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){b>>>=7&S,S-=7&S,n.mode=27;break}for(;S<3;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}switch(n.last=1&b,S-=1,3&(b>>>=1)){case 0:n.mode=14;break;case 1:if(w(n),n.mode=20,6!==t)break;b>>>=2,S-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}b>>>=2,S-=2;break;case 14:for(b>>>=7&S,S-=7&S;S<32;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,S=b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(I=n.length){if(y<I&&(I=y),v<I&&(I=v),0===I)break e;r.arraySet(p,f,m,I,_),y-=I,m+=I,v-=I,_+=I,n.length-=I;break}n.mode=12;break;case 17:for(;S<14;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(n.nlen=257+(31&b),S-=5,n.ndist=1+(31&(b>>>=5)),S-=5,n.ncode=4+(15&(b>>>=5)),b>>>=4,S-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;S<3;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}n.lens[W[n.have++]]=7&b,b>>>=3,S-=3}for(;n.have<19;)n.lens[W[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M=a(0,n.lens,0,19,n.lencode,0,n.work,D={bits:n.lenbits}),n.lenbits=D.bits,M){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(B=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,L=65535&B,!((N=B>>>24)<=S);){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(L<16)b>>>=N,S-=N,n.lens[n.have++]=L;else{if(16===L){for(U=N+2;S<U;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(b>>>=N,S-=N,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}Z=n.lens[n.have-1],I=3+(3&b),b>>>=2,S-=2}else if(17===L){for(U=N+3;S<U;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}S-=N,Z=0,I=3+(7&(b>>>=N)),b>>>=3,S-=3}else{for(U=N+7;S<U;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}S-=N,Z=0,I=11+(127&(b>>>=N)),b>>>=7,S-=7}if(n.have+I>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;I--;)n.lens[n.have++]=Z}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,M=a(u,n.lens,0,n.nlen,n.lencode,0,n.work,D={bits:n.lenbits}),n.lenbits=D.bits,M){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,M=a(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D={bits:n.distbits}),n.distbits=D.bits,M){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=v){e.next_out=_,e.avail_out=v,e.next_in=m,e.avail_in=y,n.hold=b,n.bits=S,s(e,T),_=e.next_out,p=e.output,v=e.avail_out,m=e.next_in,f=e.input,y=e.avail_in,b=n.hold,S=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(B=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,L=65535&B,!((N=B>>>24)<=S);){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(O&&0==(240&O)){for(A=N,x=O,P=L;O=(B=n.lencode[P+((b&(1<<A+x)-1)>>A)])>>>16&255,L=65535&B,!(A+(N=B>>>24)<=S);){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}b>>>=A,S-=A,n.back+=A}if(b>>>=N,S-=N,n.back+=N,n.length=L,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(U=n.extra;S<U;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,S-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(B=n.distcode[b&(1<<n.distbits)-1])>>>16&255,L=65535&B,!((N=B>>>24)<=S);){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(0==(240&O)){for(A=N,x=O,P=L;O=(B=n.distcode[P+((b&(1<<A+x)-1)>>A)])>>>16&255,L=65535&B,!(A+(N=B>>>24)<=S);){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}b>>>=A,S-=A,n.back+=A}if(b>>>=N,S-=N,n.back+=N,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=L,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(U=n.extra;S<U;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,S-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(n.offset>(I=T-v)){if((I=n.offset-I)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}R=I>n.wnext?n.wsize-(I-=n.wnext):n.wnext-I,I>n.length&&(I=n.length),k=n.window}else k=p,R=_-n.offset,I=n.length;for(v<I&&(I=v),v-=I,n.length-=I;p[_++]=k[R++],--I;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;p[_++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;S<32;){if(0===y)break e;y--,b|=f[m++]<<S,S+=8}if(e.total_out+=T-=v,n.total+=T,T&&(e.adler=n.check=n.flags?o(n.check,p,T,_-T):i(n.check,p,T,_-T)),T=v,(n.flags?b:g(b))!==n.check){e.msg="incorrect data check",n.mode=30;break}S=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;S<32;){if(0===y)break e;y--,b+=f[m++]<<S,S+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}S=b=0}n.mode=29;case 29:M=1;break e;case 30:M=-3;break e;case 31:return-4;default:return h}return e.next_out=_,e.avail_out=v,e.next_in=m,e.avail_in=y,n.hold=b,n.bits=S,(n.wsize||T!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&C(e,e.output,e.next_out,T-e.avail_out)?(n.mode=31,-4):(T-=e.avail_out,e.total_in+=E-=e.avail_in,e.total_out+=T,n.total+=T,n.wrap&&T&&(e.adler=n.check=n.flags?o(n.check,p,T,e.next_out-T):i(n.check,p,T,e.next_out-T)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==E&&0===T||4===t)&&M===l&&(M=-5),M)},n.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,l},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?h:((n.head=t).done=!1,l):h},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?h:11===n.mode&&i(1,t,r,0)!==n.check?-3:C(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,l):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,c,l,h,d){var f,p,g,m,_,y,v,b,S,E=d.bits,T=0,w=0,C=0,I=0,R=0,k=0,N=0,O=0,L=0,A=0,x=null,P=0,Z=new r.Buf16(16),M=new r.Buf16(16),D=null,U=0;for(T=0;T<=15;T++)Z[T]=0;for(w=0;w<u;w++)Z[t[n+w]]++;for(R=E,I=15;1<=I&&0===Z[I];I--);if(I<R&&(R=I),0===I)return c[l++]=20971520,c[l++]=20971520,d.bits=1,0;for(C=1;C<I&&0===Z[C];C++);for(R<C&&(R=C),T=O=1;T<=15;T++)if(O<<=1,(O-=Z[T])<0)return-1;if(0<O&&(0===e||1!==I))return-1;for(M[1]=0,T=1;T<15;T++)M[T+1]=M[T]+Z[T];for(w=0;w<u;w++)0!==t[n+w]&&(h[M[t[n+w]]++]=w);if(y=0===e?(x=D=h,19):1===e?(x=i,P-=257,D=o,U-=257,256):(x=s,D=a,-1),T=C,_=l,N=w=A=0,g=-1,m=(L=1<<(k=R))-1,1===e&&852<L||2===e&&592<L)return 1;for(;;){for(v=T-N,S=h[w]<y?(b=0,h[w]):h[w]>y?(b=D[U+h[w]],x[P+h[w]]):(b=96,0),f=1<<T-N,C=p=1<<k;c[_+(A>>N)+(p-=f)]=v<<24|b<<16|S|0,0!==p;);for(f=1<<T-1;A&f;)f>>=1;if(0!==f?(A&=f-1,A+=f):A=0,w++,0==--Z[T]){if(T===I)break;T=t[n+h[w]]}if(R<T&&(A&m)!==g){for(0===N&&(N=R),_+=C,O=1<<(k=T-N);k+N<I&&!((O-=Z[k+N])<=0);)k++,O<<=1;if(L+=1<<k,1===e&&852<L||2===e&&592<L)return 1;c[g=A&m]=R<<24|k<<16|_-l|0}}return 0!==A&&(c[_+A]=T-N<<24|64<<16|0),d.bits=R,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,o=1;function s(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,u=29,c=256,l=c+1+u,h=30,d=19,f=2*l+1,p=15,g=16,m=7,_=256,y=16,v=17,b=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],w=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=new Array(2*(l+2));s(C);var I=new Array(2*h);s(I);var R=new Array(512);s(R);var k=new Array(256);s(k);var N=new Array(u);s(N);var O,L,A,x=new Array(h);function P(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function Z(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function M(e){return e<256?R[e]:R[256+(e>>>7)]}function D(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,n){e.bi_valid>g-n?(e.bi_buf|=t<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=t>>g-e.bi_valid,e.bi_valid+=n-g):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function B(e,t,n){U(e,n[2*t],n[2*t+1])}function G(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function W(e,t,n){var r,i,o=new Array(p+1),s=0;for(r=1;r<=p;r++)o[r]=s=s+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=G(o[a]++,a))}}function H(e){var t;for(t=0;t<l;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*_]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function z(e){8<e.bi_valid?D(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function V(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function F(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&V(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!V(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function X(e,t,n){var r,i,o,s,a=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?B(e,i,t):(B(e,(o=k[i])+c+1,t),0!==(s=S[o])&&U(e,i-=N[o],s),B(e,o=M(--r),n),0!==(s=E[o])&&U(e,r-=x[o],s)),a<e.last_lit;);B(e,_,t)}function Y(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=f,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)F(e,o,n);for(i=u;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],F(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,F(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,s,a,u=t.dyn_tree,c=t.max_code,l=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,m=t.stat_desc.max_length,_=0;for(o=0;o<=p;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<f;n++)m<(o=u[2*u[2*(r=e.heap[n])+1]+1]+1)&&(o=m,_++),u[2*r+1]=o,c<r||(e.bl_count[o]++,s=0,g<=r&&(s=d[r-g]),e.opt_len+=(a=u[2*r])*(o+s),h&&(e.static_len+=a*(l[2*r+1]+s)));if(0!==_){do{for(o=m-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[m]--,_-=2}while(0<_);for(o=m;0!==o;o--)for(r=e.bl_count[o];0!==r;)c<(i=e.heap[--n])||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}(e,t),W(o,c,e.bl_count)}function K(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<u&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):a<=10?e.bl_tree[2*v]++:e.bl_tree[2*b]++,o=i,c=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function j(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<u&&i===s)){if(a<c)for(;B(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==o&&(B(e,i,e.bl_tree),a--),B(e,y,e.bl_tree),U(e,a-3,2)):a<=10?(B(e,v,e.bl_tree),U(e,a-3,3)):(B(e,b,e.bl_tree),U(e,a-11,7));o=i,c=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}s(x);var J=!1;function Q(e,t,n,i){U(e,(a<<1)+(i?1:0),3),function(e,t,n,i){z(e),i&&(D(e,n),D(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){J||(function(){var e,t,n,r,i,o=new Array(p+1);for(r=n=0;r<u-1;r++)for(N[r]=n,e=0;e<1<<S[r];e++)k[n++]=r;for(k[n-1]=r,r=i=0;r<16;r++)for(x[r]=i,e=0;e<1<<E[r];e++)R[i++]=r;for(i>>=7;r<h;r++)for(x[r]=i<<7,e=0;e<1<<E[r]-7;e++)R[256+i++]=r;for(t=0;t<=p;t++)o[t]=0;for(e=0;e<=143;)C[2*e+1]=8,e++,o[8]++;for(;e<=255;)C[2*e+1]=9,e++,o[9]++;for(;e<=279;)C[2*e+1]=7,e++,o[7]++;for(;e<=287;)C[2*e+1]=8,e++,o[8]++;for(W(C,l+1,o),e=0;e<h;e++)I[2*e+1]=5,I[2*e]=G(e,5);O=new P(C,S,c+1,l,p),L=new P(I,E,0,h,p),A=new P(new Array(0),T,0,d,m)}(),J=!0),e.l_desc=new Z(e.dyn_ltree,O),e.d_desc=new Z(e.dyn_dtree,L),e.bl_desc=new Z(e.bl_tree,A),e.bi_buf=0,e.bi_valid=0,H(e)},n._tr_stored_block=Q,n._tr_flush_block=function(e,t,n,r){var s,a,u=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return o;return i}(e)),Y(e,e.l_desc),Y(e,e.d_desc),u=function(e){var t;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),Y(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*w[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(a=e.static_len+3+7>>>3)<=(s=e.opt_len+3+7>>>3)&&(s=a)):s=a=n+5,n+4<=s&&-1!==t?Q(e,t,n,r):4===e.strategy||a===s?(U(e,2+(r?1:0),3),X(e,C,I)):(U(e,4+(r?1:0),3),function(e,t,n,r){var i;for(U(e,t-257,5),U(e,n-1,5),U(e,r-4,4),i=0;i<r;i++)U(e,e.bl_tree[2*w[i]+1],3);j(e,e.dyn_ltree,t-1),j(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,u+1),X(e,e.dyn_ltree,e.dyn_dtree)),H(e),r&&z(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(k[n]+c+1)]++,e.dyn_dtree[2*M(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){U(e,2,3),B(e,_,C),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,o,s=1,a={},u=!1,c=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){i.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return a[s]={callback:e,args:t},n(s),s++},l.clearImmediate=h}function h(e){delete a[e]}function d(e){if(u)setTimeout(d,0,e);else{var n=a[e];if(n){u=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{h(e),u=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},4407:function(e){var t;self,t=()=>(()=>{var e={453:(e,t,n)=>{"use strict";n.r(t),n.d(t,{InferenceSession:()=>p,Tensor:()=>d,env:()=>s,registerBackend:()=>o});const r={},i=[],o=(e,t,n)=>{if(!t||"function"!=typeof t.init||"function"!=typeof t.createSessionHandler)throw new TypeError("not a valid backend");{const o=r[e];if(void 0===o)r[e]={backend:t,priority:n};else{if(o.priority>n)return;if(o.priority===n&&o.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${n}`)}if(n>=0){const t=i.indexOf(e);-1!==t&&i.splice(t,1);for(let t=0;t<i.length;t++)if(r[i[t]].priority<=n)return void i.splice(t,0,e);i.push(e)}}},s=new class{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}},a="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,u="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from,c=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),l=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);a&&(c.set("int64",BigInt64Array),l.set(BigInt64Array,"int64")),u&&(c.set("uint64",BigUint64Array),l.set(BigUint64Array,"uint64"));class h{constructor(e,t,n){let r,i,o;if("string"==typeof e)if(r=e,o=n,"string"===e){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");i=t}else{const n=c.get(e);if(void 0===n)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t))i=n.from(t);else{if(!(t instanceof n))throw new TypeError(`A ${r} tensor's data must be type of ${n}`);i=t}}else if(o=t,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const t=typeof e[0];if("string"===t)r="string",i=e;else{if("boolean"!==t)throw new TypeError(`Invalid element type of data array: ${t}.`);r="bool",i=Uint8Array.from(e)}}else{const t=l.get(e.constructor);if(void 0===t)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);r=t,i=e}if(void 0===o)o=[i.length];else if(!Array.isArray(o))throw new TypeError("A tensor's dims must be a number array");const s=(e=>{let t=1;for(let n=0;n<e.length;n++){const r=e[n];if("number"!=typeof r||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);t*=r}return t})(o);if(s!==i.length)throw new Error(`Tensor's size(${s}) does not match data length(${i.length}).`);this.dims=o,this.type=r,this.data=i,this.size=s}static bufferToTensor(e,t){if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===t.height||void 0===t.width)throw new Error("Image height and width must be defined");const{height:n,width:r}=t,i=t.norm;let o,s;o=void 0===i||void 0===i.mean?255:i.mean,s=void 0===i||void 0===i.bias?0:i.bias;const a=void 0!==t.bitmapFormat?t.bitmapFormat:"RGBA",u=void 0!==t.tensorFormat&&void 0!==t.tensorFormat?t.tensorFormat:"RGB",c=n*r,l="RGBA"===u?new Float32Array(4*c):new Float32Array(3*c);let d=4,f=0,p=1,g=2,m=3,_=0,y=c,v=2*c,b=-1;"RGB"===a&&(d=3,f=0,p=1,g=2,m=-1),"RGBA"===u?b=3*c:"RBG"===u?(_=0,v=c,y=2*c):"BGR"===u&&(v=0,y=c,_=2*c);for(let t=0;t<c;t++,f+=d,g+=d,p+=d,m+=d)l[_++]=(e[f]+s)/o,l[y++]=(e[p]+s)/o,l[v++]=(e[g]+s)/o,-1!==b&&-1!==m&&(l[b++]=(e[m]+s)/o);return new h("float32",l,"RGBA"===u?[1,4,n,r]:[1,3,n,r])}static async fromImage(e,t){const n="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,r="undefined"!=typeof ImageData&&e instanceof ImageData,i="undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap,o="undefined"!=typeof String&&(e instanceof String||"string"==typeof e);let s,a={};if(n){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");if(null==r)throw new Error("Can not access image data");{let n=e.height,i=e.width;if(void 0!==t&&void 0!==t.resizedHeight&&void 0!==t.resizedWidth&&(n=t.resizedHeight,i=t.resizedWidth),void 0!==t){if(a=t,void 0!==t.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(a.tensorFormat="RGBA",void 0!==t.height&&t.height!==n)throw new Error("Image input config height doesn't match HTMLImageElement height");if(a.height=n,void 0!==t.width&&t.width!==i)throw new Error("Image input config width doesn't match HTMLImageElement width");a.width=i}else a.tensorFormat="RGBA",a.height=n,a.width=i;r.drawImage(e,0,0),s=r.getImageData(0,0,i,n).data}}else{if(!r){if(i){if(void 0===t)throw new Error("Please provide image config with format for Imagebitmap");if(void 0!==t.bitmapFormat)throw new Error("Image input config format must be defined for ImageBitmap");const n=document.createElement("canvas").getContext("2d");if(null!=n){const r=e.height,i=e.width;if(n.drawImage(e,0,0,i,r),s=n.getImageData(0,0,i,r).data,void 0!==t){if(void 0!==t.height&&t.height!==r)throw new Error("Image input config height doesn't match ImageBitmap height");if(a.height=r,void 0!==t.width&&t.width!==i)throw new Error("Image input config width doesn't match ImageBitmap width");a.width=i}else a.height=r,a.width=i;return h.bufferToTensor(s,a)}throw new Error("Can not access image data")}if(o)return new Promise(((n,r)=>{const i=document.createElement("canvas"),o=i.getContext("2d");if(!e||!o)return r();const s=new Image;s.crossOrigin="Anonymous",s.src=e,s.onload=()=>{i.width=s.width,i.height=s.height,o.drawImage(s,0,0,i.width,i.height);const e=o.getImageData(0,0,i.width,i.height);if(void 0!==t){if(void 0!==t.height&&t.height!==i.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(a.height=i.height,void 0!==t.width&&t.width!==i.width)throw new Error("Image input config width doesn't match ImageBitmap width");a.width=i.width}else a.height=i.height,a.width=i.width;n(h.bufferToTensor(e.data,a))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{let n,r;if(void 0!==t&&void 0!==t.resizedWidth&&void 0!==t.resizedHeight?(n=t.resizedHeight,r=t.resizedWidth):(n=e.height,r=e.width),void 0!==t){if(a=t,void 0!==t.bitmapFormat&&"RGBA"!==t.bitmapFormat)throw new Error("Image input config format must be RGBA for ImageData");a.bitmapFormat="RGBA"}else a.bitmapFormat="RGBA";if(a.height=n,a.width=r,void 0!==t){const t=document.createElement("canvas");t.width=r,t.height=n;const i=t.getContext("2d");if(null==i)throw new Error("Can not access image data");i.putImageData(e,0,0),s=i.getImageData(0,0,r,n).data}else s=e.data}}if(void 0!==s)return h.bufferToTensor(s,a);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var t,n;const r=document.createElement("canvas").getContext("2d");let i;if(null==r)throw new Error("Can not access image data");{const o=this.dims[3],s=this.dims[2],a=this.dims[1],u=void 0!==e&&void 0!==e.format?e.format:"RGB",c=void 0!==e&&void 0!==(null===(t=e.norm)||void 0===t?void 0:t.mean)?e.norm.mean:255,l=void 0!==e&&void 0!==(null===(n=e.norm)||void 0===n?void 0:n.bias)?e.norm.bias:0,h=s*o;if(void 0!==e){if(void 0!==e.height&&e.height!==s)throw new Error("Image output config height doesn't match tensor height");if(void 0!==e.width&&e.width!==o)throw new Error("Image output config width doesn't match tensor width");if(void 0!==e.format&&4===a&&"RGBA"!==e.format||3===a&&"RGB"!==e.format&&"BGR"!==e.format)throw new Error("Tensor format doesn't match input tensor dims")}const d=4;let f=0,p=1,g=2,m=3,_=0,y=h,v=2*h,b=-1;"RGBA"===u?(_=0,y=h,v=2*h,b=3*h):"RGB"===u?(_=0,y=h,v=2*h):"RBG"===u&&(_=0,v=h,y=2*h),i=r.createImageData(o,s);for(let e=0;e<s*o;f+=d,p+=d,g+=d,m+=d,e++)i.data[f]=(this.data[_++]-l)*c,i.data[p]=(this.data[y++]-l)*c,i.data[g]=(this.data[v++]-l)*c,i.data[m]=-1===b?255:(this.data[b++]-l)*c}return i}reshape(e){return new h(this.type,this.data,e)}}const d=h;class f{constructor(e){this.handler=e}async run(e,t,n){const r={};let i={};if("object"!=typeof e||null===e||e instanceof d||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if("object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof d)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(const e of t){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);r[e]=null}if("object"==typeof n&&null!==n)i=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{let e=!1;const s=Object.getOwnPropertyNames(t);for(const n of this.outputNames)if(-1!==s.indexOf(n)){const i=t[n];(null===i||i instanceof d)&&(e=!0,o=!1,r[n]=i)}if(e){if("object"==typeof n&&null!==n)i=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else i=t}}else if(void 0!==t)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const t of this.inputNames)if(void 0===e[t])throw new Error(`input '${t}' is missing in 'feeds'.`);if(o)for(const e of this.outputNames)r[e]=null;const s=await this.handler.run(e,r,i),a={};for(const e in s)Object.hasOwnProperty.call(s,e)&&(a[e]=new d(s[e].type,s[e].data,s[e].dims));return a}static async create(e,t,n,o){let s,a={};if("string"==typeof e){if(s=e,"object"==typeof t&&null!==t)a=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(s=e,"object"==typeof t&&null!==t)a=t;else if(void 0!==t)throw new TypeError("'options' must be an object.")}else{if(!(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const r=e;let i=0,u=e.byteLength;if("object"==typeof t&&null!==t)a=t;else if("number"==typeof t){if(i=t,!Number.isSafeInteger(i))throw new RangeError("'byteOffset' must be an integer.");if(i<0||i>=r.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${r.byteLength}).`);if(u=e.byteLength-i,"number"==typeof n){if(u=n,!Number.isSafeInteger(u))throw new RangeError("'byteLength' must be an integer.");if(u<=0||i+u>r.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${r.byteLength-i}].`);if("object"==typeof o&&null!==o)a=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==n)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==t)throw new TypeError("'options' must be an object.");s=new Uint8Array(r,i,u)}}const u=(a.executionProviders||[]).map((e=>"string"==typeof e?e:e.name)),c=await(async e=>{const t=0===e.length?i:e,n=[];for(const e of t){const t=r[e];if(t){if(t.initialized)return t.backend;if(t.aborted)continue;const r=!!t.initPromise;try{return r||(t.initPromise=t.backend.init()),await t.initPromise,t.initialized=!0,t.backend}catch(i){r||n.push({name:e,err:i}),t.aborted=!0}finally{delete t.initPromise}}}throw new Error(`no available backend found. ERR: ${n.map((e=>`[${e.name}] ${e.err}`)).join(", ")}`)})(u),l=await c.createSessionHandler(s,a);return new f(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}const p=f},932:(e,t,n)=>{var r,i=(r=(r="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e={}){var t,i,o;t||(t=void 0!==e?e:{}),t.ready=new Promise((function(e,t){i=e,o=t}));var s,a,u,c=Object.assign({},t),l="./this.program",h="object"==typeof window,d="function"==typeof importScripts,f="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,p="";if(f){var g=n(384),m=n(908);p=d?m.dirname(p)+"/":"//",s=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),g.readFileSync(e,t?void 0:"utf8")),u=e=>((e=s(e,!0)).buffer||(e=new Uint8Array(e)),e),a=(e,t,n)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),g.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},1<process.argv.length&&(l=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(e){throw e})),15>process.versions.node.split(".")[0]&&process.on("unhandledRejection",(function(e){throw e})),t.inspect=function(){return"[Emscripten Module object]"}}else(h||d)&&(d?p=self.location.href:"undefined"!=typeof document&&document.currentScript&&(p=document.currentScript.src),r&&(p=r),p=0!==p.indexOf("blob:")?p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},d&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),a=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var _,y=t.print||console.log.bind(console),v=t.printErr||console.warn.bind(console);Object.assign(t,c),c=null,t.thisProgram&&(l=t.thisProgram),t.wasmBinary&&(_=t.wasmBinary),"object"!=typeof WebAssembly&&G("no native wasm support detected");var b,S,E,T,w,C=!1,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&I)return I.decode(e.subarray(t,n));for(r="";t<n;){var i=e[t++];if(128&i){var o=63&e[t++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|o);else{var s=63&e[t++];65536>(i=224==(240&i)?(15&i)<<12|o<<6|s:(7&i)<<18|o<<12|s<<6|63&e[t++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}return r}function k(e,t){return(e>>>=0)?R(E,e,t):""}function N(e,t,n,r){if(!(0<r))return 0;var i=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),127>=s){if(n>=r)break;t[n++>>>0]=s}else{if(2047>=s){if(n+1>=r)break;t[n++>>>0]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;t[n++>>>0]=224|s>>12}else{if(n+3>=r)break;t[n++>>>0]=240|s>>18,t[n++>>>0]=128|s>>12&63}t[n++>>>0]=128|s>>6&63}t[n++>>>0]=128|63&s}}return t[n>>>0]=0,n-i}function O(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function L(){var e=b.buffer;t.HEAP8=S=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=T=new Int32Array(e),t.HEAPU8=E=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=w=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var A=[],x=[],P=[];function Z(){var e=t.preRun.shift();A.unshift(e)}var M,D=0,U=null,B=null;function G(e){throw t.onAbort&&t.onAbort(e),v(e="Aborted("+e+")"),C=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),o(e),e}function W(e){return e.startsWith("data:application/octet-stream;base64,")}if(!W(M="ort-wasm.wasm")){var H=M;M=t.locateFile?t.locateFile(H,p):p+H}function z(e){try{if(e==M&&_)return new Uint8Array(_);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(e){G(e)}}function V(e,t,n){return function(e){if(!_&&(h||d)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((function(){return z(e)}));if(a)return new Promise((function(t,n){a(e,(function(e){t(new Uint8Array(e))}),n)}))}return Promise.resolve().then((function(){return z(e)}))}(e).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(e){return e})).then(n,(function(e){v("failed to asynchronously prepare wasm: "+e),G(e)}))}function F(e){for(;0<e.length;)e.shift()(t)}function X(e){this.na=e-24,this.xa=function(e){w[this.na+4>>2>>>0]=e},this.ua=function(e){w[this.na+8>>2>>>0]=e},this.va=function(){T[this.na>>2>>>0]=0},this.ta=function(){S[this.na+12>>0>>>0]=0},this.wa=function(){S[this.na+13>>0>>>0]=0},this.ra=function(e,t){this.sa(),this.xa(e),this.ua(t),this.va(),this.ta(),this.wa()},this.sa=function(){w[this.na+16>>2>>>0]=0}}function Y(e){return 0==e%4&&(0!=e%100||0==e%400)}var K=[0,31,60,91,121,152,182,213,244,274,305,335],j=[0,31,59,90,120,151,181,212,243,273,304,334];function J(e){return(Y(e.getFullYear())?K:j)[e.getMonth()]+e.getDate()-1}function Q(e){var t=O(e)+1,n=ae(t);return n&&N(e,S,n,t),n}var q={};function $(){if(!ee){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(e in q)void 0===q[e]?delete t[e]:t[e]=q[e];var n=[];for(e in t)n.push(e+"="+t[e]);ee=n}return ee}var ee,te=[null,[],[]],ne=[31,29,31,30,31,30,31,31,30,31,30,31],re=[31,28,31,30,31,30,31,31,30,31,30,31];function ie(e,t,n,r){function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return i(e,t,"0")}function s(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function a(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.la;for(e=new Date(new Date(e.ma+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Y(e.getFullYear())?ne:re)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=a(new Date(e.getFullYear(),0,4)),n=a(n),0>=s(t,e)?0>=s(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var c=T[r+40>>2>>>0];for(var l in r={Aa:T[r>>2>>>0],za:T[r+4>>2>>>0],oa:T[r+8>>2>>>0],qa:T[r+12>>2>>>0],pa:T[r+16>>2>>>0],ma:T[r+20>>2>>>0],ha:T[r+24>>2>>>0],la:T[r+28>>2>>>0],Ca:T[r+32>>2>>>0],ya:T[r+36>>2>>>0],Ba:c?k(c):""},n=k(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(e){return h[e.ha].substring(0,3)},"%A":function(e){return h[e.ha]},"%b":function(e){return d[e.pa].substring(0,3)},"%B":function(e){return d[e.pa]},"%C":function(e){return o((e.ma+1900)/100|0,2)},"%d":function(e){return o(e.qa,2)},"%e":function(e){return i(e.qa,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.oa,2)},"%I":function(e){return 0==(e=e.oa)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.pa-1;t+=(Y(e.ma+1900)?ne:re)[n++]);return o(e.qa+t,3)},"%m":function(e){return o(e.pa+1,2)},"%M":function(e){return o(e.za,2)},"%n":function(){return"\n"},"%p":function(e){return 0<=e.oa&&12>e.oa?"AM":"PM"},"%S":function(e){return o(e.Aa,2)},"%t":function(){return"\t"},"%u":function(e){return e.ha||7},"%U":function(e){return o(Math.floor((e.la+7-e.ha)/7),2)},"%V":function(e){var t=Math.floor((e.la+7-(e.ha+6)%7)/7);if(2>=(e.ha+371-e.la-2)%7&&t++,t)53==t&&(4==(n=(e.ha+371-e.la)%7)||3==n&&Y(e.ma)||(t=1));else{t=52;var n=(e.ha+7-e.la-1)%7;(4==n||5==n&&Y(e.ma%400-1))&&t++}return o(t,2)},"%w":function(e){return e.ha},"%W":function(e){return o(Math.floor((e.la+7-(e.ha+6)%7)/7),2)},"%y":function(e){return(e.ma+1900).toString().substring(2)},"%Y":function(e){return e.ma+1900},"%z":function(e){var t=0<=(e=e.ya);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Ba},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(e){var t=Array(O(e)+1);return N(e,t,0,t.length),t}(n=n.replace(/\0\0/g,"%")),l.length>t?0:(S.set(l,e>>>0),l.length-1)}var oe={a:function(e,t,n){throw new X(e).ra(t,n),e},m:function(){G("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},e:function(){return 0},J:function(){},w:function(){},y:function(){},p:function(){return 0},H:function(){},C:function(){},G:function(){},g:function(){},x:function(){},t:function(){},I:function(){},v:function(){},K:function(){return!0},i:function(e,t){e=new Date(1e3*(w[e>>>2]+4294967296*T[e+4>>>2])),T[t>>2>>>0]=e.getUTCSeconds(),T[t+4>>2>>>0]=e.getUTCMinutes(),T[t+8>>2>>>0]=e.getUTCHours(),T[t+12>>2>>>0]=e.getUTCDate(),T[t+16>>2>>>0]=e.getUTCMonth(),T[t+20>>2>>>0]=e.getUTCFullYear()-1900,T[t+24>>2>>>0]=e.getUTCDay(),T[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},j:function(e,t){e=new Date(1e3*(w[e>>>2]+4294967296*T[e+4>>>2])),T[t>>2>>>0]=e.getSeconds(),T[t+4>>2>>>0]=e.getMinutes(),T[t+8>>2>>>0]=e.getHours(),T[t+12>>2>>>0]=e.getDate(),T[t+16>>2>>>0]=e.getMonth(),T[t+20>>2>>>0]=e.getFullYear()-1900,T[t+24>>2>>>0]=e.getDay(),T[t+28>>2>>>0]=0|J(e),T[t+36>>2>>>0]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset(),r=new Date(e.getFullYear(),0,1).getTimezoneOffset();T[t+32>>2>>>0]=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n))},k:function(e){var t=new Date(T[e+20>>2>>>0]+1900,T[e+16>>2>>>0],T[e+12>>2>>>0],T[e+8>>2>>>0],T[e+4>>2>>>0],T[e>>2>>>0],0),n=T[e+32>>2>>>0],r=t.getTimezoneOffset(),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(o,i);return 0>n?T[e+32>>2>>>0]=Number(i!=o&&s==r):0<n!=(s==r)&&(i=Math.max(o,i),t.setTime(t.getTime()+6e4*((0<n?s:i)-r))),T[e+24>>2>>>0]=t.getDay(),T[e+28>>2>>>0]=0|J(t),T[e>>2>>>0]=t.getSeconds(),T[e+4>>2>>>0]=t.getMinutes(),T[e+8>>2>>>0]=t.getHours(),T[e+12>>2>>>0]=t.getDate(),T[e+16>>2>>>0]=t.getMonth(),T[e+20>>2>>>0]=t.getYear(),t.getTime()/1e3|0},A:function(){return-52},B:function(){},l:function(e,t,n){function r(e){return(e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/))?e[1]:"GMT"}var i=(new Date).getFullYear(),o=new Date(i,0,1),s=new Date(i,6,1);i=o.getTimezoneOffset();var a=s.getTimezoneOffset();w[e>>2>>>0]=60*Math.max(i,a),T[t>>2>>>0]=Number(i!=a),e=r(o),t=r(s),e=Q(e),t=Q(t),a<i?(w[n>>2>>>0]=e,w[n+4>>2>>>0]=t):(w[n>>2>>>0]=t,w[n+4>>2>>>0]=e)},c:function(){G("")},D:function(){G("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},h:function(){return Date.now()},r:function(){return 4294901760},b:f?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),z:function(e,t,n){E.copyWithin(e>>>0,t>>>0,t+n>>>0)},q:function(e){var t=E.length;if(4294901760<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var i=Math,o=i.min;r=Math.max(e,r),r+=(65536-r%65536)%65536;e:{var s=b.buffer;try{b.grow(o.call(i,4294901760,r)-s.byteLength+65535>>>16),L();var a=1;break e}catch(e){}a=void 0}if(a)return!0}return!1},E:function(e,t){var n=0;return $().forEach((function(r,i){var o=t+n;for(i=w[e+4*i>>2>>>0]=o,o=0;o<r.length;++o)S[i++>>0>>>0]=r.charCodeAt(o);S[i>>0>>>0]=0,n+=r.length+1})),0},F:function(e,t){var n=$();w[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),w[t>>2>>>0]=r,0},d:function(){return 52},f:function(){return 52},n:function(){return 70},s:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var s=w[t>>2>>>0],a=w[t+4>>2>>>0];t+=8;for(var u=0;u<a;u++){var c=E[s+u>>>0],l=te[e];0===c||10===c?((1===e?y:v)(R(l,0)),l.length=0):l.push(c)}i+=a}return w[r>>2>>>0]=i,0},u:ie,o:function(e,t,n,r){return ie(e,t,n,r)}};!function(){function e(e){if(t.asm=e=e.exports,b=t.asm.L,L(),x.unshift(t.asm.M),D--,t.monitorRunDependencies&&t.monitorRunDependencies(D),0==D&&(null!==U&&(clearInterval(U),U=null),B)){var n=B;B=null,n()}return e}var n={a:oe};if(D++,t.monitorRunDependencies&&t.monitorRunDependencies(D),t.instantiateWasm)try{return t.instantiateWasm(n,e)}catch(e){v("Module.instantiateWasm callback failed with error: "+e),o(e)}(function(e,t){var n=M;return _||"function"!=typeof WebAssembly.instantiateStreaming||W(n)||n.startsWith("file://")||f||"function"!=typeof fetch?V(n,e,t):fetch(n,{credentials:"same-origin"}).then((function(r){return WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return y("wasm streaming compile failed: "+r),y("falling back to ArrayBuffer instantiation"),V(n,e,t)}))}))})(n,(function(t){e(t.instance)})).catch(o)}(),t._OrtInit=function(){return(t._OrtInit=t.asm.N).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.O).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.P).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.Q).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.R).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.S).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.T).apply(null,arguments)},t._OrtGetInputCount=function(){return(t._OrtGetInputCount=t.asm.U).apply(null,arguments)},t._OrtGetOutputCount=function(){return(t._OrtGetOutputCount=t.asm.V).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.W).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.X).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm.Y).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.Z).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm._).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.$).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.aa).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.ba).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.ca).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.da).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.ea).apply(null,arguments)};var se,ae=t._malloc=function(){return(ae=t._malloc=t.asm.fa).apply(null,arguments)};function ue(){return(ue=t.asm.ia).apply(null,arguments)}function ce(){return(ce=t.asm.ja).apply(null,arguments)}function le(){return(le=t.asm.ka).apply(null,arguments)}function he(){function e(){if(!se&&(se=!0,t.calledRun=!0,!C)){if(F(x),i(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();P.unshift(e)}F(P)}}if(!(0<D)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)Z();F(A),0<D||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._free=function(){return(t._free=t.asm.ga).apply(null,arguments)},t.UTF8ToString=k,t.stringToUTF8=function(e,t,n){return N(e,E,t,n)},t.lengthBytesUTF8=O,t.stackAlloc=le,t.stackSave=ue,t.stackRestore=ce,B=function e(){se||he(),se||(B=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return he(),e.ready});e.exports=i},200:(e,t,n)=>{"use strict";t.c8=t.rX=void 0;const r=n(453),i=n(381),o=n(157),s=n(306);t.rX=()=>{if(("number"!=typeof r.env.wasm.initTimeout||r.env.wasm.initTimeout<0)&&(r.env.wasm.initTimeout=0),"boolean"!=typeof r.env.wasm.simd&&(r.env.wasm.simd=!0),"boolean"!=typeof r.env.wasm.proxy&&(r.env.wasm.proxy=!1),"number"!=typeof r.env.wasm.numThreads||!Number.isInteger(r.env.wasm.numThreads)||r.env.wasm.numThreads<=0){const e="undefined"==typeof navigator?(0,i.cpus)().length:navigator.hardwareConcurrency;r.env.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}},t.c8=new class{async init(){(0,t.rX)(),await(0,o.initWasm)()}async createSessionHandler(e,t){const n=new s.OnnxruntimeWebAssemblySessionHandler;return await n.loadModel(e,t),Promise.resolve(n)}}},18:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(453),t);const o=n(453);{const e=n(200).c8;(0,o.registerBackend)("cpu",e,10),(0,o.registerBackend)("wasm",e,10),(0,o.registerBackend)("xnnpack",e,9)}},967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterateExtraOptions=void 0,t.iterateExtraOptions=(e,n,r,i)=>{if("object"==typeof e&&null!==e){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach((([e,o])=>{const s=n?n+e:e;if("object"==typeof o)(0,t.iterateExtraOptions)(o,s+".",r,i);else if("string"==typeof o||"number"==typeof o)i(s,o.toString());else{if("boolean"!=typeof o)throw new Error("Can't handle extra config type: "+typeof o);i(s,o?"1":"0")}}))}},157:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=t.initWasm=void 0;const s=n(453),a=o(n(349)),u=n(361);"undefined"!=typeof document&&(null===document||void 0===document||document),t.initWasm=async()=>(0,u.initializeWebAssembly)(s.env.wasm),t.initOrt=async(e,t)=>{a.initOrt(e,t)},t.createSessionAllocate=async e=>a.createSessionAllocate(e),t.createSessionFinalize=async(e,t)=>a.createSessionFinalize(e,t),t.createSession=async(e,t)=>a.createSession(e,t),t.releaseSession=async e=>{a.releaseSession(e)},t.run=async(e,t,n,r,i)=>a.run(e,t,n,r,i),t.endProfiling=async e=>{a.endProfiling(e)}},586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;const r=n(967),i=n(983),o=n(361);t.setRunOptions=e=>{const t=(0,o.getInstance)();let n=0;const s=[],a=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.terminate)&&(a.terminate=!1);let o=0;if(void 0!==(null==e?void 0:e.tag)&&(o=(0,i.allocWasmString)(e.tag,s)),n=t._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,o),0===n)throw new Error("Can't create run options");return void 0!==(null==e?void 0:e.extra)&&(0,r.iterateExtraOptions)(e.extra,"",new WeakSet,((e,r)=>{const o=(0,i.allocWasmString)(e,s),a=(0,i.allocWasmString)(r,s);if(0!==t._OrtAddRunConfigEntry(n,o,a))throw new Error(`Can't set a run config entry: ${e} - ${r}`)})),[n,s]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),s.forEach(t._free),e}}},306:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OnnxruntimeWebAssemblySessionHandler=void 0;const r=n(806),i=n(453),o=n(850),s=n(157);let a;t.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(e){const t=await fetch(e),n=await t.arrayBuffer();return(0,s.createSessionAllocate)(new Uint8Array(n))}async loadModel(e,t){if(a||(await(0,s.initOrt)(i.env.wasm.numThreads,(e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}})(i.env.logLevel)),a=!0),"string"==typeof e)if("undefined"==typeof fetch){const n=await(0,o.promisify)(r.readFile)(e);[this.sessionId,this.inputNames,this.outputNames]=await(0,s.createSession)(n,t)}else{const n=await this.createSessionAllocate(e);[this.sessionId,this.inputNames,this.outputNames]=await(0,s.createSessionFinalize)(n,t)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,s.createSession)(e,t)}async dispose(){return(0,s.releaseSession)(this.sessionId)}async run(e,t,n){const r=[],o=[];Object.entries(e).forEach((e=>{const t=e[0],n=e[1],i=this.inputNames.indexOf(t);if(-1===i)throw new Error(`invalid input '${t}'`);r.push(n),o.push(i)}));const a=[];Object.entries(t).forEach((e=>{const t=e[0],n=this.outputNames.indexOf(t);if(-1===n)throw new Error(`invalid output '${t}'`);a.push(n)}));const u=await(0,s.run)(this.sessionId,o,r.map((e=>[e.type,e.dims,e.data])),a,n),c={};for(let e=0;e<u.length;e++)c[this.outputNames[a[e]]]=new i.Tensor(u[e][0],u[e][2],u[e][1]);return c}startProfiling(){}endProfiling(){(0,s.endProfiling)(this.sessionId)}}},919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;const r=n(967),i=n(983),o=n(361);t.setSessionOptions=e=>{const t=(0,o.getInstance)();let n=0;const s=[],a=e||{};(e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});const t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1")})(a);try{void 0===(null==e?void 0:e.graphOptimizationLevel)&&(a.graphOptimizationLevel="all");const u=(e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}})(a.graphOptimizationLevel);void 0===(null==e?void 0:e.enableCpuMemArena)&&(a.enableCpuMemArena=!0),void 0===(null==e?void 0:e.enableMemPattern)&&(a.enableMemPattern=!0),void 0===(null==e?void 0:e.executionMode)&&(a.executionMode="sequential");const c=(e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}})(a.executionMode);let l=0;if(void 0!==(null==e?void 0:e.logId)&&(l=(0,i.allocWasmString)(e.logId,s)),void 0===(null==e?void 0:e.logSeverityLevel))a.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===(null==e?void 0:e.logVerbosityLevel))a.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===(null==e?void 0:e.enableProfiling)&&(a.enableProfiling=!1);let h=0;if("string"==typeof(null==e?void 0:e.optimizedModelFilePath)&&(h=(0,i.allocWasmString)(e.optimizedModelFilePath,s)),n=t._OrtCreateSessionOptions(u,!!a.enableCpuMemArena,!!a.enableMemPattern,c,!!a.enableProfiling,0,l,a.logSeverityLevel,a.logVerbosityLevel,h),0===n)throw new Error("Can't create session options");return(null==e?void 0:e.executionProviders)&&((e,t,n)=>{for(const r of t){let t="string"==typeof r?r:r.name;switch(t){case"xnnpack":t="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${t}`)}const s=(0,i.allocWasmString)(t,n);if(0!==(0,o.getInstance)()._OrtAppendExecutionProvider(e,s))throw new Error(`Can't append execution provider: ${t}`)}})(n,e.executionProviders,s),void 0!==(null==e?void 0:e.extra)&&(0,r.iterateExtraOptions)(e.extra,"",new WeakSet,((e,r)=>{const o=(0,i.allocWasmString)(e,s),a=(0,i.allocWasmString)(r,s);if(0!==t._OrtAddSessionConfigEntry(n,o,a))throw new Error(`Can't set a session config entry: ${e} - ${r}`)})),[n,s]}catch(e){throw 0!==n&&t._OrtReleaseSessionOptions(n),s.forEach(t._free),e}}},983:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allocWasmString=void 0;const r=n(361);t.allocWasmString=(e,t)=>{const n=(0,r.getInstance)(),i=n.lengthBytesUTF8(e)+1,o=n._malloc(i);return n.stringToUTF8(e,o,i),t.push(o),o}},349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initOrt=void 0;const r=n(586),i=n(919),o=n(983),s=n(361);t.initOrt=(e,t)=>{const n=(0,s.getInstance)()._OrtInit(e,t);if(0!==n)throw new Error(`Can't initialize onnxruntime. error code = ${n}`)};const a=new Map;t.createSessionAllocate=e=>{const t=(0,s.getInstance)(),n=t._malloc(e.byteLength);return t.HEAPU8.set(e,n),[n,e.byteLength]},t.createSessionFinalize=(e,t)=>{const n=(0,s.getInstance)();let r=0,o=0,u=[];try{if([o,u]=(0,i.setSessionOptions)(t),r=n._OrtCreateSession(e[0],e[1],o),0===r)throw new Error("Can't create a session")}finally{n._free(e[0]),n._OrtReleaseSessionOptions(o),u.forEach(n._free)}const c=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),h=[],d=[],f=[],p=[];for(let e=0;e<c;e++){const t=n._OrtGetInputName(r,e);if(0===t)throw new Error("Can't get an input name");d.push(t),h.push(n.UTF8ToString(t))}for(let e=0;e<l;e++){const t=n._OrtGetOutputName(r,e);if(0===t)throw new Error("Can't get an output name");p.push(t),f.push(n.UTF8ToString(t))}return a.set(r,[r,d,p]),[r,h,f]},t.createSession=(e,n)=>{const r=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(r,n)},t.releaseSession=e=>{const t=(0,s.getInstance)(),n=a.get(e);if(!n)throw new Error("invalid session id");const r=n[0],i=n[2];n[1].forEach(t._OrtFree),i.forEach(t._OrtFree),t._OrtReleaseSession(r),a.delete(e)};const u=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},c=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},l=e=>{switch(e){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}};t.run=(e,t,n,i,h)=>{const d=(0,s.getInstance)(),f=a.get(e);if(!f)throw new Error("invalid session id");const p=f[0],g=f[1],m=f[2],_=t.length,y=i.length;let v=0,b=[];const S=[],E=[];try{[v,b]=(0,r.setRunOptions)(h);for(let e=0;e<_;e++){const t=n[e][0],r=n[e][1],i=n[e][2];let s,a;if(Array.isArray(i)){a=4*i.length,s=d._malloc(a),E.push(s);let e=s/4;for(let t=0;t<i.length;t++){if("string"!=typeof i[t])throw new TypeError(`tensor data at index ${t} is not a string`);d.HEAPU32[e++]=(0,o.allocWasmString)(i[t],E)}}else a=i.byteLength,s=d._malloc(a),E.push(s),d.HEAPU8.set(new Uint8Array(i.buffer,i.byteOffset,a),s);const c=d.stackSave(),l=d.stackAlloc(4*r.length);try{let e=l/4;r.forEach((t=>d.HEAP32[e++]=t));const n=d._OrtCreateTensor(u(t),s,a,l,r.length);if(0===n)throw new Error("Can't create a tensor");S.push(n)}finally{d.stackRestore(c)}}const e=d.stackSave(),s=d.stackAlloc(4*_),a=d.stackAlloc(4*_),f=d.stackAlloc(4*y),T=d.stackAlloc(4*y);try{let e=s/4,n=a/4,r=f/4,o=T/4;for(let r=0;r<_;r++)d.HEAPU32[e++]=S[r],d.HEAPU32[n++]=g[t[r]];for(let e=0;e<y;e++)d.HEAPU32[r++]=0,d.HEAPU32[o++]=m[i[e]];let u=d._OrtRun(p,a,s,_,T,y,f,v);const h=[];if(0===u)for(let e=0;e<y;e++){const t=d.HEAPU32[f/4+e],n=d.stackSave(),r=d.stackAlloc(16);let i,o=0;try{if(u=d._OrtGetTensorData(t,r,r+4,r+8,r+12),0!==u)throw new Error(`Can't access output tensor data. error code = ${u}`);let e=r/4;const n=d.HEAPU32[e++];o=d.HEAPU32[e++];const s=d.HEAPU32[e++],a=d.HEAPU32[e++],f=[];for(let e=0;e<a;e++)f.push(d.HEAPU32[s/4+e]);d._OrtFree(s);const p=0===f.length?1:f.reduce(((e,t)=>e*t));if(i=c(n),"string"===i){const e=[];let t=o/4;for(let n=0;n<p;n++){const r=d.HEAPU32[t++];e.push(d.UTF8ToString(r,n===p-1?void 0:d.HEAPU32[t]-r))}h.push([i,f,e])}else{const e=new(l(i))(p);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(d.HEAPU8.subarray(o,o+e.byteLength)),h.push([i,f,e])}}finally{d.stackRestore(n),"string"===i&&o&&d._free(o),d._OrtReleaseTensor(t)}}if(0===u)return h;throw new Error(`failed to call OrtRun(). error code = ${u}.`)}finally{d.stackRestore(e)}}finally{S.forEach(d._OrtReleaseTensor),E.forEach(d._free),d._OrtReleaseRunOptions(v),b.forEach(d._free)}},t.endProfiling=e=>{const t=(0,s.getInstance)(),n=a.get(e);if(!n)throw new Error("invalid session id");const r=t._OrtEndProfiling(n[0]);if(0===r)throw new Error("Can't get an profile file name");t._OrtFree(r)},t.extractTransferableBuffers=e=>{const t=[];for(const n of e){const e=n[2];!Array.isArray(e)&&e.buffer&&t.push(e.buffer)}return t}},361:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0,o(n(449));const a=s(n(932)),u=a.default;let c,l=!1,h=!1,d=!1;const f=(e,t)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm";t.initializeWebAssembly=async e=>{if(l)return Promise.resolve();if(h)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(d)throw new Error("previous call to 'initializeWebAssembly()' failed.");h=!0;const t=e.initTimeout,n=e.simd,r=e.numThreads>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}})(),i=n&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}})(),o="string"==typeof e.wasmPaths?e.wasmPaths:void 0,s=f(!1,r),p=f(i,r),g="object"==typeof e.wasmPaths?e.wasmPaths[p]:void 0;let m=!1;const _=[];if(t>0&&_.push(new Promise((e=>{setTimeout((()=>{m=!0,e()}),t)}))),_.push(new Promise(((e,t)=>{(r?u:a.default)({locateFile:(e,t)=>e===s?null!=g?g:(null!=o?o:t)+p:t+e}).then((t=>{h=!1,l=!0,c=t,e()}),(e=>{h=!1,d=!0,t(e)}))}))),await Promise.race(_),m)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},t.getInstance=()=>{if(l&&c)return c;throw new Error("WebAssembly is not initialized yet.")},t.dispose=()=>{var e;!l||h||d||(h=!0,null===(e=c.PThread)||void 0===e||e.terminateAllThreads(),c=void 0,h=!1,l=!1,d=!0)}},384:()=>{},908:()=>{},806:()=>{},449:()=>{},850:()=>{},381:()=>{}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(18)})(),e.exports=t()},4545:function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e,t){return r=[function(e,t,n){var r=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}function i(e){var t=Math.clz32(e&-e);return e?31-t:t}Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},s={};function a(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,0,!0),i&&(s[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=c(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function u(e,t){if(isNaN(e))return t?y:_;if(t){if(e<0)return y;if(p<=e)return T}else{if(e<=-g)return w;if(g<=e+1)return E}return e<0?u(-e,t).neg():c(e%f|0,e/f|0,t)}function c(e,t,r){return new n(e,t,r)}n.fromInt=a,n.fromNumber=u,n.fromBits=c;var l=Math.pow;function h(e,t,n){if(0===e.length)throw Error("empty string");if(t="number"==typeof t?(n=t,!1):!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?y:_;if((n=n||10)<2||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return h(e.substring(1),t,n).neg();for(var i=u(l(n,8)),o=_,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),n);o=(a<8?(a=u(l(n,a)),o.mul(a)):o=o.mul(i)).add(u(c))}return o.unsigned=t,o}function d(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=h,n.fromValue=d;var f=4294967296,p=f*f,g=p/2,m=a(1<<24),_=a(0),y=(n.ZERO=_,a(0,!0)),v=(n.UZERO=y,a(1)),b=(n.ONE=v,a(1,!0)),S=(n.UONE=b,a(-1)),E=(n.NEG_ONE=S,c(-1,2147483647,!1)),T=(n.MAX_VALUE=E,c(-1,-1,!0)),w=(n.MAX_UNSIGNED_VALUE=T,c(0,-2147483648,!1)),C=(n.MIN_VALUE=w,n.prototype);return C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,n;if(this.isNegative())return this.eq(w)?(n=u(e),n=(t=this.div(n)).mul(n).sub(this),t.toString(e)+n.toInt().toString(e)):"-"+this.neg().toString(e);for(var r=u(l(e,6),this.unsigned),i=this,o="";;){var s=i.div(r),a=(i.sub(s.mul(r)).toInt()>>>0).toString(e);if((i=s).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||0<=this.high},C.isOdd=function(){return 1==(1&this.low)},C.isEven=function(){return 0==(1&this.low)},C.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return 0<this.comp(e)},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return 0<=this.comp(e)},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){var t,n;return r(e)||(e=d(e)),this.eq(e)?0:(t=this.isNegative(),n=e.isNegative(),t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1)},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(v)},C.neg=C.negate,C.add=function(e){r(e)||(e=d(e));var t=0,n=0,i=0,o=0;return n+=(i=i+((o+=(65535&this.low)+(65535&e.low))>>>16)+((this.low>>>16)+(e.low>>>16)))>>>16,c((i&=65535)<<16|(o&=65535),((t+=(n+=(65535&this.high)+(65535&e.high))>>>16)+((this.high>>>16)+(e.high>>>16))&65535)<<16|(n&=65535),this.unsigned)},C.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){var n,i,o,s,a,l,h,f,p,g;return this.isZero()?this:(r(e)||(e=d(e)),t?c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):e.isZero()?this.unsigned?y:_:this.eq(w)?e.isOdd()?w:_:e.eq(w)?this.isOdd()?w:_:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(m)&&e.lt(m)?u(this.toNumber()*e.toNumber(),this.unsigned):(s=e.high>>>16,a=65535&e.high,l=e.low>>>16,g=(g=p=f=h=0)+((f=f+((p+=(o=65535&this.low)*(e=65535&e.low))>>>16)+(i=this.low>>>16)*e)>>>16)+((f=(65535&f)+o*l)>>>16),c((f&=65535)<<16|(p&=65535),(h=(h=(h+=(g+=(n=65535&this.high)*e)>>>16)+((g=(65535&g)+i*l)>>>16)+((g=(65535&g)+o*a)>>>16))+((this.high>>>16)*e+n*l+i*a+o*s)&65535)<<16|(g&=65535),this.unsigned)))},C.mul=C.multiply,C.divide=function(e){if((e=r(e)?e:d(e)).isZero())throw Error("division by zero");var n,i,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:_;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return y;if(e.gt(this.shru(1)))return b;i=y}else{if(this.eq(w))return e.eq(v)||e.eq(S)?w:e.eq(w)?v:(o=this.shr(1).div(e).shl(1)).eq(_)?e.isNegative()?v:S:(n=this.sub(e.mul(o)),o.add(n.div(e)));if(e.eq(w))return this.unsigned?y:_;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=_}for(n=this;n.gte(e);){o=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(o)/Math.LN2),a=s<=48?1:l(2,s-48),h=u(o),f=h.mul(e);f.isNegative()||f.gt(n);)f=(h=u(o-=a,this.unsigned)).mul(e);h.isZero()&&(h=v),i=i.add(h),n=n.sub(f)}return i},C.div=C.divide,C.modulo=function(e){return r(e)||(e=d(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return c(~this.low,~this.high,this.unsigned)},C.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},C.clz=C.countLeadingZeros,C.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},C.ctz=C.countTrailingZeros,C.and=function(e){return r(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return r(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return r(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.rotateLeft=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?c(this.low<<e|this.high>>>(t=32-e),this.high<<e|this.low>>>t,this.unsigned):c(this.high<<(e-=32)|this.low>>>(t=32-e),this.low<<e|this.high>>>t,this.unsigned)},C.rotl=C.rotateLeft,C.rotateRight=function(e){var t;return r(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?c(this.high<<(t=32-e)|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned):c(this.low<<(t=32-(e-=32))|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)},C.rotr=C.rotateRight,C.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},e.default=n,"default"in e?e.default:e}({});void 0!==(t=function(){return r}.apply(t,[]))&&(e.exports=t)},function(e,t,n){(function(t){var r;e.exports=(r=function(e){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),!(r=!(r=!(r="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:r)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:r)&&void 0!==t&&t.crypto?t.crypto:r))try{r=n(14)}catch(s){}var i=Object.create||function(e){return o.prototype=e,e=new o,o.prototype=null,e};function o(){}var s={},a=s.lib={},u=a.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++)t[r+o>>>2]|=(n[o>>>2]>>>24-o%4*8&255)<<24-(r+o)%4*8;else for(var s=0;s<i;s+=4)t[r+s>>>2]=n[s>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new c.init(t,e)}}),l=s.enc={},h=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},d=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},p=a.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,s=this.blockSize,a=o/(4*s),u=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s;if(t=e.min(4*u,o),u){for(var l=0;l<u;l+=s)this._doProcessBlock(i,l);n=i.splice(0,u),r.sigBytes-=t}return new c.init(n,t)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(a.Hasher=p.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),r)}).call(this,n(13))},function(t,n){t.exports=e},function(e,t,n){function r(e){var t;return(o[e]||(t=o[e]={i:e,l:!1,exports:{}},i[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var i,o;e.exports=(i=[function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r;function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}e=e.exports={};try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}var a,u=[],c=!1,l=-1;function h(){c&&a&&(c=!1,a.length?u=a.concat(u):l=-1,u.length)&&d()}function d(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a&&a[l].run();l=-1,t=u.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return(r=clearTimeout)(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||s(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=p,e.addListener=p,e.once=p,e.off=p,e.removeListener=p,e.removeAllListeners=p,e.emit=p,e.prependListener=p,e.prependOnceListener=p,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){(function(t,n,r,i){e.exports=function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o])throw(a=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",a;var a=n[o]={exports:{}};t[o][0].call(a.exports,(function(e){return i(t[o][1][e]||e)}),a,a.exports,e,t,n,r)}return n[o].exports}for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,s,a,u,c=[],l=0,h=e.length,d="string"!==r.getTypeOf(e);l<e.length;)u=h-l,i=d?(t=e[l++],n=l<h?e[l++]:0,l<h?e[l++]:0):(t=e.charCodeAt(l++),n=l<h?e.charCodeAt(l++):0,l<h?e.charCodeAt(l++):0),s=(3&t)<<4|n>>4,a=1<u?(15&n)<<2|i>>6:64,u=2<u?63&i:64,c.push(o.charAt(t>>2)+o.charAt(s)+o.charAt(a)+o.charAt(u));return c.join("")},n.decode=function(e){var t,n,r,s,a,u=0,c=0;if("data:"===e.substr(0,5))throw new Error("Invalid base64 input, it looks like a data url.");var l,h=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&h--,e.charAt(e.length-2)===o.charAt(64)&&h--,h%1!=0)throw new Error("Invalid base64 input, bad content length.");for(l=new(i.uint8array?Uint8Array:Array)(0|h);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(s=o.indexOf(e.charAt(u++)))>>4,n=(15&s)<<4|(s=o.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(a=o.indexOf(e.charAt(u++))),l[c++]=t,64!==s&&(l[c++]=n),64!==a&&(l[c++]=r);return l}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new s("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new s("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}();t.exports=function(e,t){return void 0!==e&&e.length?("string"!==r.getTypeOf(e)?function(e,t,n){var r=i,o=0+n;e^=-1;for(var s=0;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}:function(e,t,n){var r=i,o=0+n;e^=-1;for(var s=0;s<o;s++)e=e>>>8^r[255&(e^t.charCodeAt(s))];return-1^e})(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";e="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:e}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),s=e("./stream/GenericWorker"),a=r?"uint8array":"array";function u(e,t){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(u,s),u.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,e.data),!1)},u.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new u("Deflate",e)},n.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){for(var n="",r=0;r<t;r++)n+=String.fromCharCode(255&e),e>>>=8;return n}function i(e,t,n,i,s,l){var h=e.file,d=e.compression,f=l!==a.utf8encode,p=o.transformTo("string",l(h.name)),g=o.transformTo("string",a.utf8encode(h.name)),m=h.comment,_=(l=o.transformTo("string",l(m)),o.transformTo("string",a.utf8encode(m))),y=g.length!==h.name.length,v=(m=_.length!==m.length,""),b=h.dir,S=h.date,E={crc32:0,compressedSize:0,uncompressedSize:0};return t&&!n||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize),n=0,t&&(n|=8),f||!y&&!m||(n|=2048),e=0,t=0,b&&(e|=16),"UNIX"===s?(t=798,e|=(65535&((f=h.unixPermissions)?f:b?16893:33204))<<16):(t=20,e|=63&(h.dosPermissions||0)),s=S.getUTCHours(),s=(s=((s<<=6)|S.getUTCMinutes())<<5)|S.getUTCSeconds()/2,f=S.getUTCFullYear()-1980,f=(f=((f<<=4)|S.getUTCMonth()+1)<<5)|S.getUTCDate(),y&&(b=r(1,1)+r(u(p),4)+g,v+="up"+r(b.length,2)+b),m&&(h=r(1,1)+r(u(l),4)+_,v+="uc"+r(h.length,2)+h),S="",S=(S=(S=(S=(S=(S=(S=(S=(S=(S+="\n\0")+r(n,2))+d.magic)+r(s,2))+r(f,2))+r(E.crc32,4))+r(E.compressedSize,4))+r(E.uncompressedSize,4))+r(p.length,2))+r(v.length,2),{fileRecord:c.LOCAL_FILE_HEADER+S+p+v,dirRecord:c.CENTRAL_FILE_HEADER+r(t,2)+S+r(l.length,2)+"\0\0\0\0"+r(e,4)+r(i,4)+p+v+l}}var o=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),u=e("../crc32"),c=e("../signature");function l(e,t,n,r){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(l,s),l.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,s.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},l.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;t?(e=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName),this.push({data:e.fileRecord,meta:{percent:0}})):this.accumulate=!0},l.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:(t=e,c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e;n=function(e,t,n,i,s){return s=o.transformTo("string",s(i)),c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName),this.push({data:n,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},l.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(e){var t=this._sources;if(!s.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},l.prototype.lock=function(){s.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),s=0;try{e.forEach((function(e,n){s++;var i=function(e,t){if(t=r[e=e||t])return t;throw new Error(e+" is not a valid compression method !")}(n.options.compression,t.compression),a=n.dir,u=n.date;n._compressWorker(i,n.options.compressionOptions||t.compressionOptions||{}).withStreamInfo("file",{name:e,dir:a,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e,t=new r;for(e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),o=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),u=e("./nodejsUtils");t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new s(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(function(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}(r[o]));return i.Promise.all(n)})).then((function(e){for(var i=(e=e.shift()).files,o=0;o<i.length;o++){var s=i[o],a=s.fileNameStr,u=r.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(u).unsafeOriginalName=a)}return e.zipComment.length&&(n.comment=e.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,n,r){"use strict";n.exports={isNode:void 0!==t,newBufferFrom:function(e,n){if(t.from&&t.from!==Uint8Array.from)return t.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new t(e,n)},allocBuffer:function(e){return t.alloc?t.alloc(e):((e=new t(e)).fill(0),e)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r=s.getTypeOf(t),o=s.extend(n||{},c);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=g(e)),o.createFolders&&(u=function(e){var t=(e="/"===e.slice(-1)?e.substring(0,e.length-1):e).lastIndexOf("/");return 0<t?e.substring(0,t):""}(e))&&i.call(this,u,!0);var u="string"===r&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!u),(t instanceof l&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE"),r=t instanceof l||t instanceof a?t:f.isNode&&f.isStream(t)?new p(e,t):s.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64),n=new h(e,r,o),this.files[e]=n}function i(e,t){return t=void 0!==t?t:c.createFolders,e=g(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]}var o=e("./utf8"),s=e("./utils"),a=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),h=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),g=function(e){return"/"!==e.slice(-1)&&(e+="/"),e};function m(e){return"[object RegExp]"===Object.prototype.toString.call(e)}t.exports={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){var i;return 1!==arguments.length?(r.call(this,e=this.root+e,t,n),this):m(e)?(i=e,this.filter((function(e,t){return!t.dir&&i.test(e)}))):(t=this.files[this.root+e])&&!t.dir?t:null},folder:function(e){var t,n;return e?m(e)?this.filter((function(t,n){return n.dir&&e.test(t)})):(t=i.call(this,t=this.root+e),(n=this.clone()).root=t.name,n):this},remove:function(e){var t=this.files[e=this.root+e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t={};try{if((t=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");s.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var n=d.generateWorker(this,t,t.comment||this.comment||"")}catch(e){(n=new a("error")).error(e)}return new u(n,t.type||"string",t.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=(e=e.charCodeAt(3),this.readData(4));return t===i[0]&&n===i[1]&&r===i[2]&&e===i[3]},i.prototype.readData=function(e){var t;return this.checkOffset(e),0===e?[]:(t=this.data.slice(this.zero+this.index,this.zero+this.index+e),this.index+=e,t)},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){var t;return this.checkOffset(e),0===e?new Uint8Array(0):(t=this.data.subarray(this.zero+this.index,this.zero+this.index+e),this.index+=e,t)},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),u=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new u(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){e&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+e.data.length),i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished)||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0)},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){var e;return!(!this.isPaused||this.isFinished||(e=this.isPaused=!1,this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),e))},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,n,r){"use strict";var i=e("../utils"),o=e("./ConvertWorker"),s=e("./GenericWorker"),a=e("../base64"),u=e("../support"),c=e("../external"),l=null;if(u.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,n){var r=t;switch(t){case"blob":case"arraybuffer":r="uint8array";break;case"base64":r="string"}try{this._internalType=r,this._outputType=t,this._mimeType=n,i.checkSupport(r),this._worker=e.pipe(new o(r)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return n=this,r=e,new c.Promise((function(e,o){var s=[],u=n._internalType,c=n._outputType,l=n._mimeType;n.on("data",(function(e,t){s.push(e),r&&r(t)})).on("error",(function(e){s=[],o(e)})).on("end",(function(){try{var n=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return i.transformTo(e,t)}}(c,function(e,n){for(var r=0,i=null,o=0,s=0;s<n.length;s++)o+=n[s].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(i=new Uint8Array(o),s=0;s<n.length;s++)i.set(n[s],r),r+=n[s].length;return i;case"nodebuffer":return t.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(u,s),l);e(n)}catch(n){o(n)}s=[]})).resume()}));var n,r},on:function(e,t){var n=this;return this._worker.on(e,"data"===e?function(e){t.call(n,e.data,e.meta)}:function(){i.delay(t,arguments,n)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,r){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var i=new ArrayBuffer(0);try{r.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),r.blob=0===o.getBlob("application/zip").size}catch(e){r.blob=!1}}}try{r.nodestream=!!e("readable-stream").Readable}catch(e){r.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),u=0;u<256;u++)a[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function l(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){if(i.nodebuffer)return o.newBufferFrom(e,"utf-8");for(var t,n,r,s,a=e,u=a.length,c=0,l=0;l<u;l++)55296==(64512&(n=a.charCodeAt(l)))&&l+1<u&&56320==(64512&(r=a.charCodeAt(l+1)))&&(n=65536+(n-55296<<10)+(r-56320),l++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new(i.uint8array?Uint8Array:Array)(c),l=s=0;s<c;l++)55296==(64512&(n=a.charCodeAt(l)))&&l+1<u&&56320==(64512&(r=a.charCodeAt(l+1)))&&(n=65536+(n-55296<<10)+(r-56320),l++),n<128?t[s++]=n:(n<2048?t[s++]=192|n>>>6:(n<65536?t[s++]=224|n>>>12:(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63),t[s++]=128|n>>>6&63),t[s++]=128|63&n);return t},n.utf8decode=function(e){if(i.nodebuffer)return r.transformTo("nodebuffer",e).toString("utf-8");for(var t,n,o,s=e=r.transformTo(i.uint8array?"uint8array":"array",e),u=s.length,c=new Array(2*u),l=t=0;l<u;)if((n=s[l++])<128)c[t++]=n;else if(4<(o=a[n]))c[t++]=65533,l+=o-1;else{for(n&=2===o?31:3===o?15:7;1<o&&l<u;)n=n<<6|63&s[l++],o--;1<o?c[t++]=65533:n<65536?c[t++]=n:(c[t++]=55296|(n-=65536)>>10&1023,c[t++]=56320|1023&n)}return c.length!==t&&(c.subarray?c=c.subarray(0,t):c.length=t),r.applyFromCharCode(c)},r.inherits(c,s),c.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data),o=(this.leftOver&&this.leftOver.length&&(i.uint8array?(o=t,(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)):t=this.leftOver.concat(t),this.leftOver=null),function(e,t){for(var n=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=n&&128==(192&e[n]);)n--;return!(n<0||0===n)&&n+a[e[n]]>t?n:t}(t)),s=t;o!==t.length&&(i.uint8array?(s=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(s=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(s),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(l,s),l.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,r){"use strict";var i=e("./support"),o=e("./base64"),s=e("./nodejsUtils"),a=e("./external");function u(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),r.newBlob=function(e,t){r.checkSupport("blob");try{return new Blob([e],{type:t})}catch(r){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)r.push(String.fromCharCode.apply(null,"array"===t||"nodebuffer"===t?e.slice(i,Math.min(i+n,o)):e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,n=r.getTypeOf(e),i=!0;if("uint8array"===n?i=l.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}r.applyFromCharCode=h;var f={};f.string={string:u,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},f.array={string:h,array:u,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},f.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:u,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:h,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:u,nodebuffer:function(e){return s.newBufferFrom(e)}},f.nodebuffer={string:h,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:u},r.transformTo=function(e,t){if(t=t||"",!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return f[n][e](t)},r.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&s.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){for(var t,n="",r=0;r<(e||"").length;r++)n+="\\x"+((t=e.charCodeAt(r))<16?"0":"")+t.toString(16).toUpperCase();return n},r.delay=function(e,t,r){n((function(){e.apply(r||null,t||[])}))},r.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},r.extend=function(){for(var e,t={},n=0;n<arguments.length;n++)for(e in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],e)&&void 0===t[e]&&(t[e]=arguments[n][e]);return t},r.prepareContent=function(e,t,n,s,u){return a.Promise.resolve(t).then((function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var l=r.getTypeOf(t);return l?("arraybuffer"===l?t=r.transformTo("uint8array",t):"string"===l&&(u?t=o.decode(t):n&&!0!==s&&(t=c(l=t,new(i.uint8array?Uint8Array:Array)(l.length)))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),s=e("./zipEntry"),a=e("./support");function u(e){this.files=[],this.loadOptions=e}u.prototype={checkSignature:function(e){var t;if(!this.reader.readAndCheckSignature(e))throw this.reader.index-=4,t=this.reader.readString(4),new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")},isSignature:function(e,t){var n=this.reader.index;return this.reader.setIndex(e),e=this.reader.readString(4)===t,this.reader.setIndex(n),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array";t=i.transformTo(t,e),this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){for(var e,t=0;t<this.files.length;t++)this.reader.setIndex((e=this.files[t]).localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}if(e=this.centralDirOffset+this.centralDirSize,0<(e=t-(e=this.zip64?e+20+(12+this.zip64EndOfCentralSize):e)))this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),u=e("./compressions"),c=e("./support");function l(e,t){this.options=e,this.loadOptions=t}l.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in u)if(Object.prototype.hasOwnProperty.call(u,t)&&u[t].magic===e)return u[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){var e;this.extraFields[1]&&(e=r(this.extraFields[1].value),this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS)&&(this.diskNumberStart=e.readInt(4))},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e,t=c.uint8array?"uint8array":"array";this.useUTF8()?(this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment)):(null!==(e=this.findExtraFieldUnicodePath())?this.fileNameStr=e:(e=i.transformTo(t,this.fileName),this.fileNameStr=this.loadOptions.decodeFileName(e)),null!==(e=this.findExtraFieldUnicodeComment())?this.fileCommentStr=e:(e=i.transformTo(t,this.fileComment),this.fileCommentStr=this.loadOptions.decodeFileName(e)))},findExtraFieldUnicodePath:function(){var e,t=this.extraFields[28789];return t&&1===(e=r(t.value)).readInt(1)&&s(this.fileName)===e.readInt(4)?a.utf8decode(e.readData(t.length-5)):null},findExtraFieldUnicodeComment:function(){var e,t=this.extraFields[25461];return t&&1===(e=r(t.value)).readInt(1)&&s(this.fileComment)===e.readInt(4)?a.utf8decode(e.readData(t.length-5)):null}},t.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),u=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n,o=("binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker(),!this._dataBinary);o&&!r&&(t=t.pipe(new s.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new s.Utf8DecodeWorker))}catch(e){(t=new u("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){var n;return this._data instanceof a&&this._data.compression.magic===e.magic?this._data.getCompressedWorker():(n=this._decompressWorker(),this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t))},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof u?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)r.prototype[c[h]]=l;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var n,r,i,o,s=e.MutationObserver||e.WebKitMutationObserver,a=s?(r=0,s=new s(c),i=e.document.createTextNode(""),s.observe(i,{characterData:!0}),function(){i.data=r=++r%2}):e.setImmediate||void 0===e.MessageChannel?"document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)}:((o=new e.MessageChannel).port1.onmessage=c,function(){o.port2.postMessage(0)}),u=[];function c(){var e,t;n=!0;for(var r=u.length;r;){for(t=u,u=[],e=-1;++e<r;)t[e]();r=u.length}n=!1}t.exports=function(e){1!==u.push(e)||n||a()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var s=p((function(){t(i,r)}));"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){var t;return"function"!=typeof e?this:(t=this.constructor,this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))})))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){var n;return"function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s?this:(n=new this.constructor(i),this.state!==u?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n)},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);if(n=n.value)f(e,n);else{e.state=a,e.outcome=t;for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},c.reject=function(e){var t=new this(i);return o.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,c=new this(i);++u<n;)!function(e,i){t.resolve(e).then((function(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))}),(function(e){r||(r=!0,o.reject(c,e))}))}(e[u],u);return c},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var r=-1,s=new this(i);++r<t;)this.resolve(e[r]).then((function(e){n||(n=!0,o.resolve(s,e))}),(function(e){n||(n=!0,o.reject(s,e))}));return s}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),u=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0,r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(0!==t)throw new Error(s[t]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){if(e="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(t=r.deflateSetDictionary(this.strm,e)))throw new Error(s[t]);this._dict_set=!0}}function l(e,t){if((t=new c(t)).push(e,!0),t.err)throw t.msg||s[t.err];return t.result}c.prototype.push=function(e,t){var n,s,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;s=t===~~t?t:!0===t?4:0,a.input="string"==typeof e?o.string2buf(e):"[object ArrayBuffer]"===u.call(e)?new Uint8Array(e):e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(c),a.next_out=0,a.avail_out=c),1!==(n=r.deflate(a,s))&&0!==n)return this.onEnd(n),!(this.ended=!0)}while(0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||this.onData("string"===this.options.to?o.buf2binstring(i.shrinkBuf(a.output,a.next_out)):i.shrinkBuf(a.output,a.next_out)),(0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==s||(this.onEnd(0),!(a.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=l,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,l(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,l(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),u=e("./zlib/zstream"),c=e("./zlib/gzheader"),l=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;if(t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits)&&(t.windowBits=-15),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0,(e=r.inflateInit2(this.strm,t.windowBits))!==s.Z_OK)throw new Error(a[e]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function d(e,t){if((t=new h(t)).push(e,!0),t.err)throw t.msg||a[t.err];return t.result}h.prototype.push=function(e,t){var n,a,u,c,h,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?s.Z_FINISH:s.Z_NO_FLUSH,d.input="string"==typeof e?o.binstring2buf(e):"[object ArrayBuffer]"===l.call(e)?new Uint8Array(e):e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(n=r.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(h="string"==typeof p?o.string2buf(p):"[object ArrayBuffer]"===l.call(p)?new Uint8Array(p):p,n=r.inflateSetDictionary(this.strm,h)),n===s.Z_BUF_ERROR&&!0===g&&(n=s.Z_OK,g=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0)}while(!d.next_out||0!==d.avail_out&&n!==s.Z_STREAM_END&&(0!==d.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(h=o.utf8border(d.output,d.next_out),u=d.next_out-h,c=o.buf2string(d.output,h),d.next_out=u,d.avail_out=f-u,u&&i.arraySet(d.output,d.output,h,u,0),this.onData(c)):this.onData(i.shrinkBuf(d.output,d.next_out))),0===d.avail_in&&0===d.avail_out&&(g=!0),(0<d.avail_in||0===d.avail_out)&&n!==s.Z_STREAM_END);return(a=n===s.Z_STREAM_END?s.Z_FINISH:a)===s.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(d.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===s.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array,i=(n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)},{arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){for(var t,n,r,i,o=t=0,s=e.length;o<s;o++)t+=e[o].length;for(i=new Uint8Array(t),o=n=0,s=e.length;o<s;o++)i.set(r=e[o],n),n+=r.length;return i}}),o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function u(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n}s[254]=s[254]=1,n.string2buf=function(e){for(var t,n,i,o,s=e.length,a=0,u=0;u<s;u++)55296==(64512&(n=e.charCodeAt(u)))&&u+1<s&&56320==(64512&(i=e.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(i-56320),u++),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(a),u=o=0;o<a;u++)55296==(64512&(n=e.charCodeAt(u)))&&u+1<s&&56320==(64512&(i=e.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(i-56320),u++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return u(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){for(var n,r,i,o=t||e.length,a=new Array(2*o),c=n=0;c<o;)if((r=e[c++])<128)a[n++]=r;else if(4<(i=s[r]))a[n++]=65533,c+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&c<o;)r=r<<6|63&e[c++],i--;1<i?a[n++]=65533:r<65536?a[n++]=r:(a[n++]=55296|(r-=65536)>>10&1023,a[n++]=56320|1023&r)}return u(a,n)},n.utf8border=function(e,t){for(var n=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=n&&128==(192&e[n]);)n--;return!(n<0||0===n)&&n+s[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}();t.exports=function(e,t,n,i){var o=r,s=i+n;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),o=e("./trees"),s=e("./adler32"),a=e("./crc32"),u=e("./messages"),c=-2,l=258,h=262,d=113;function f(e,t){return e.msg=u[t],t}function p(e){return(e<<1)-(4<e?9:0)}function g(e){for(var t=e.length;0<=--t;)e[t]=0}function m(e){var t=e.state,n=t.pending;0!==(n=n>e.avail_out?e.avail_out:n)&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending)&&(t.pending_out=0)}function _(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,m(e.strm)}function y(e,t){e.pending_buf[e.pending++]=t}function v(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function b(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,c=e.window,d=e.w_mask,f=e.prev,p=e.strstart+l,g=c[o+s-1],m=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===m&&c[n+s-1]===g&&c[n]===c[o]&&c[++n]===c[o+1]){for(o+=2,n++;c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p;);if(r=l-(p-o),o=p-l,s<r){if(e.match_start=t,a<=(s=r))break;g=c[o+s-1],m=c[o+s]}}}while((t=f[t&d])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function S(e){var t,n,r,o,u,c,l,d,f,p=e.w_size;do{if(d=e.window_size-e.lookahead-e.strstart,e.strstart>=p+(p-h)){for(i.arraySet(e.window,e.window,p,p,0),e.match_start-=p,e.strstart-=p,e.block_start-=p,t=n=e.hash_size;r=e.head[--t],e.head[t]=p<=r?r-p:0,--n;);for(t=n=p;r=e.prev[--t],e.prev[t]=p<=r?r-p:0,--n;);d+=p}if(0===e.strm.avail_in)break;if(c=e.window,l=e.strstart+e.lookahead,f=void 0,n=0===(f=d<(f=(u=e.strm).avail_in)?d:f)?0:(u.avail_in-=f,i.arraySet(c,u.input,u.next_in,f,l),1===u.state.wrap?u.adler=s(u.adler,c,f,l):2===u.state.wrap&&(u.adler=a(u.adler,c,f,l)),u.next_in+=f,u.total_in+=f,f),e.lookahead+=n,3<=e.lookahead+e.insert)for(e.ins_h=e.window[o=e.strstart-e.insert],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function E(e,t){for(var n,r;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-h&&(e.match_length=b(e,n)),3<=e.match_length)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function T(e,t){for(var n,r,i;;){if(e.lookahead<h){if(S(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-h&&(e.match_length=b(e,n),e.match_length<=5)&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2),3<=e.prev_length&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(_(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&_(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}function w(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function C(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),g(this.dyn_ltree),g(this.dyn_dtree),g(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),g(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),g(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function I(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,o._tr_init(t),0):f(e,c)}function R(e){var t=I(e);return 0===t&&((e=e.state).window_size=2*e.w_size,g(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),t}function k(e,t,n,r,o,s){if(!e)return c;var a=1;if(-1===t&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),o<1||9<o||8!==n||r<8||15<r||t<0||9<t||s<0||4<s)return f(e,c);8===r&&(r=9);var u=new C;return(e.state=u).strm=e,u.wrap=a,u.gzhead=null,u.w_bits=r,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=+u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=n,R(e)}r=[new w(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,_(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&_(e,!1),1)})),new w(4,4,8,4,E),new w(4,5,16,8,E),new w(4,6,32,32,E),new w(4,4,16,16,T),new w(8,16,32,32,T),new w(8,16,128,128,T),new w(8,32,128,256,T),new w(32,128,258,1024,T),new w(32,258,258,4096,T)],n.deflateInit=function(e,t){return k(e,t,8,15,8,0)},n.deflateInit2=k,n.deflateReset=R,n.deflateResetKeep=I,n.deflateSetHeader=function(e,t){return e&&e.state&&2===e.state.wrap?(e.state.gzhead=t,0):c},n.deflate=function(e,t){var n,i,s,u;if(!e||!e.state||5<t||t<0)return e?f(e,c):c;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&4!==t)return f(e,0===e.avail_out?-5:c);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status&&(2===i.wrap?(e.adler=0,y(i,31),y(i,139),y(i,8),i.gzhead?(y(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),y(i,255&i.gzhead.time),y(i,i.gzhead.time>>8&255),y(i,i.gzhead.time>>16&255),y(i,i.gzhead.time>>24&255),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(y(i,255&i.gzhead.extra.length),y(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(y(i,0),y(i,0),y(i,0),y(i,0),y(i,0),y(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),y(i,3),i.status=d)):(h=8+(i.w_bits-8<<4)<<8,h|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(h|=32),h+=31-h%31,i.status=d,v(i,h),0!==i.strstart&&(v(i,e.adler>>>16),v(i,65535&e.adler)),e.adler=1)),69===i.status)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),m(e),s=i.pending,i.pending!==i.pending_buf_size));)y(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),m(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}}while(u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,y(i,u),0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),m(e),s=i.pending,i.pending===i.pending_buf_size)){u=1;break}}while(u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,y(i,u),0!==u);i.gzhead.hcrc&&i.pending>s&&(e.adler=a(e.adler,i.pending_buf,i.pending-s,s)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&m(e),i.pending+2<=i.pending_buf_size&&(y(i,255&e.adler),y(i,e.adler>>8&255),e.adler=0,i.status=d)):i.status=d),0!==i.pending){if(m(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return f(e,-5);if(666===i.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&666!==i.status){var h=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,r,i,s,a=e.window;;){if(e.lookahead<=l){if(S(e),e.lookahead<=l&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){for(s=e.strstart+l;r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<s;);e.match_length=l-(s-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=o._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(_(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(_(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(_(e,!1),0===e.strm.avail_out)?1:2}(i,t):r[i.level].func(i,t);if(3!==h&&4!==h||(i.status=666),1===h||3===h)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===h&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t)&&(g(i.head),0===i.lookahead)&&(i.strstart=0,i.block_start=0,i.insert=0),m(e),0===e.avail_out))return i.last_flush=-1,0}return 4===t&&(i.wrap<=0||(2===i.wrap?(y(i,255&e.adler),y(i,e.adler>>8&255),y(i,e.adler>>16&255),y(i,e.adler>>24&255),y(i,255&e.total_in),y(i,e.total_in>>8&255),y(i,e.total_in>>16&255),y(i,e.total_in>>24&255)):(v(i,e.adler>>>16),v(i,65535&e.adler)),m(e),0<i.wrap&&(i.wrap=-i.wrap),0===i.pending))?1:0},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?f(e,c):(e.state=null,t===d?f(e,-3):0):c},n.deflateSetDictionary=function(e,t){var n,r,o,a,u,l,h,d=t.length;if(!e||!e.state)return c;if(2===(a=(n=e.state).wrap)||1===a&&42!==n.status||n.lookahead)return c;for(1===a&&(e.adler=s(e.adler,t,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(g(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,t,d-n.w_size,n.w_size,0),t=h,d=n.w_size),h=e.avail_in,u=e.next_in,l=e.input,e.avail_in=d,e.next_in=0,e.input=t,S(n);3<=n.lookahead;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,S(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=u,e.input=l,e.avail_in=h,n.wrap=a,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,o,s,a,u=e.state,c=e.next_in,l=e.input,h=c+(e.avail_in-5),d=e.next_out,f=e.output,p=d-(t-e.avail_out),g=d+(e.avail_out-257),m=u.dmax,_=u.wsize,y=u.whave,v=u.wnext,b=u.window,S=u.hold,E=u.bits,T=u.lencode,w=u.distcode,C=(1<<u.lenbits)-1,I=(1<<u.distbits)-1;e:do{for(E<15&&(S+=l[c++]<<E,S+=l[c++]<<(E+=8),E+=8),n=T[S&C];;){if(S>>>=r=n>>>24,E-=r,0==(r=n>>>16&255))f[d++]=65535&n;else{if(!(16&r)){if(0==(64&r)){n=T[(65535&n)+(S&(1<<r)-1)];continue}if(32&r){u.mode=12;break e}e.msg="invalid literal/length code",u.mode=30;break e}for(i=65535&n,(r&=15)&&(E<r&&(S+=l[c++]<<E,E+=8),i+=S&(1<<r)-1,S>>>=r,E-=r),E<15&&(S+=l[c++]<<E,S+=l[c++]<<(E+=8),E+=8),n=w[S&I];;){if(S>>>=r=n>>>24,E-=r,!(16&(r=n>>>16&255))){if(0==(64&r)){n=w[(65535&n)+(S&(1<<r)-1)];continue}e.msg="invalid distance code",u.mode=30;break e}if(o=65535&n,E<(r&=15)&&(S+=l[c++]<<E,(E+=8)<r)&&(S+=l[c++]<<E,E+=8),m<(o+=S&(1<<r)-1)){e.msg="invalid distance too far back",u.mode=30;break e}if(S>>>=r,E-=r,(r=d-p)<o){if(y<(r=o-r)&&u.sane){e.msg="invalid distance too far back",u.mode=30;break e}if(a=b,(s=0)===v){if(s+=_-r,r<i){for(i-=r;f[d++]=b[s++],--r;);s=d-o,a=f}}else if(v<r){if(s+=_+v-r,(r-=v)<i){for(i-=r;f[d++]=b[s++],--r;);if(s=0,v<i){for(i-=r=v;f[d++]=b[s++],--r;);s=d-o,a=f}}}else if(s+=v-r,r<i){for(i-=r;f[d++]=b[s++],--r;);s=d-o,a=f}for(;2<i;)f[d++]=a[s++],f[d++]=a[s++],f[d++]=a[s++],i-=3;i&&(f[d++]=a[s++],1<i)&&(f[d++]=a[s++])}else{for(s=d-o;f[d++]=f[s++],f[d++]=f[s++],f[d++]=f[s++],2<(i-=3););i&&(f[d++]=f[s++],1<i)&&(f[d++]=f[s++])}break}}break}}while(c<h&&d<g);c-=i=E>>3,S&=(1<<(E-=i<<3))-1,e.next_in=c,e.next_out=d,e.avail_in=c<h?h-c+5:5-(c-h),e.avail_out=d<g?g-d+257:257-(d-g),u.hold=S,u.bits=E}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),u=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function h(e){var t;return e&&e.state?(e.total_in=e.total_out=(t=e.state).total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(852),t.distcode=t.distdyn=new r.Buf32(592),t.sane=1,t.back=-1,0):u}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,h(e)):u}function f(e,t){var n,r;return!e||!e.state||(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t))?u:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,d(e))}function p(e,t){var n;return e?(n=new l,(e.state=n).window=null,0!==(n=f(e,t))&&(e.state=null),n):u}var g,m,_=!0;function y(e,t,n,i){var o;return null===(e=e.state).window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new r.Buf8(e.wsize)),i>=e.wsize?(r.arraySet(e.window,t,n-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(i<(o=e.wsize-e.wnext)&&(o=i),r.arraySet(e.window,t,n-i,o,e.wnext),(i-=o)?(r.arraySet(e.window,t,n-i,i,0),e.wnext=i,e.whave=e.wsize):(e.wnext+=o,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=o))),0}n.inflateReset=d,n.inflateReset2=f,n.inflateResetKeep=h,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,l,h,d,f,p,v,b,S,E,T,w,C,I,R,k,N,O,L,A,x,P,Z,M,D=0,U=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return u;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,h=e.output,d=e.next_in,l=e.input,b=n.hold,S=n.bits,E=p=e.avail_in,T=v=e.avail_out,P=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap)n.mode=13;else{for(;S<16;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(2&n.wrap&&35615===b)U[n.check=0]=255&b,U[1]=b>>>8&255,n.check=o(n.check,U,2,0),S=b=0,n.mode=2;else if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&b)<<8)+(b>>8))%31)e.msg="incorrect header check",n.mode=30;else if(8!=(15&b))e.msg="unknown compression method",n.mode=30;else{if(S-=4,x=8+(15&(b>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,e.adler=n.check=1,n.mode=512&b?10:12,S=b=0}}break;case 2:for(;S<16;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(n.flags=b,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=b>>8&1),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,n.check=o(n.check,U,2,0)),S=b=0,n.mode=3;case 3:for(;S<32;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}n.head&&(n.head.time=b),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,U[2]=b>>>16&255,U[3]=b>>>24&255,n.check=o(n.check,U,4,0)),S=b=0,n.mode=4;case 4:for(;S<16;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}n.head&&(n.head.xflags=255&b,n.head.os=b>>8),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,n.check=o(n.check,U,2,0)),S=b=0,n.mode=5;case 5:if(1024&n.flags){for(;S<16;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}n.length=b,n.head&&(n.head.extra_len=b),512&n.flags&&(U[0]=255&b,U[1]=b>>>8&255,n.check=o(n.check,U,2,0)),S=b=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((w=p<(w=n.length)?p:w)&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,l,d,w,x)),512&n.flags&&(n.check=o(n.check,l,w,d)),p-=w,d+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(w=0;x=l[d+w++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x)),x&&w<p;);if(512&n.flags&&(n.check=o(n.check,l,w,d)),p-=w,d+=w,x)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(w=0;x=l[d+w++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x)),x&&w<p;);if(512&n.flags&&(n.check=o(n.check,l,w,d)),p-=w,d+=w,x)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;S<16;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(b!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}S=b=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;S<32;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}e.adler=n.check=c(b),S=b=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=v,e.next_in=d,e.avail_in=p,n.hold=b,n.bits=S,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last)b>>>=7&S,S-=7&S,n.mode=27;else{for(;S<3;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}switch(n.last=1&b,--S,3&(b>>>=1)){case 0:n.mode=14;break;case 1:G=W=void 0;var G,W=n;if(_){for(g=new r.Buf32(512),m=new r.Buf32(32),G=0;G<144;)W.lens[G++]=8;for(;G<256;)W.lens[G++]=9;for(;G<280;)W.lens[G++]=7;for(;G<288;)W.lens[G++]=8;for(a(1,W.lens,0,288,g,0,W.work,{bits:9}),G=0;G<32;)W.lens[G++]=5;a(2,W.lens,0,32,m,0,W.work,{bits:5}),_=!1}if(W.lencode=g,W.lenbits=9,W.distcode=m,W.distbits=5,n.mode=20,6!==t)break;b>>>=2,S-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}b>>>=2,S-=2}break;case 14:for(b>>>=7&S,S-=7&S;S<32;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&b,S=b=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(0===(w=v<(w=p<w?p:w)?v:w))break e;r.arraySet(h,l,d,w,f),p-=w,d+=w,v-=w,f+=w,n.length-=w}else n.mode=12;break;case 17:for(;S<14;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(n.nlen=257+(31&b),S-=5,n.ndist=1+(31&(b>>>=5)),S-=5,n.ncode=4+(15&(b>>>=5)),b>>>=4,S-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;S<3;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}n.lens[B[n.have++]]=7&b,b>>>=3,S-=3}for(;n.have<19;)n.lens[B[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P=a(0,n.lens,0,19,n.lencode,0,n.work,Z={bits:n.lenbits}),n.lenbits=Z.bits,P){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;k=(D=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,N=65535&D,!((R=D>>>24)<=S);){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(N<16)b>>>=R,S-=R,n.lens[n.have++]=N;else{if(16===N){for(M=R+2;S<M;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(b>>>=R,S-=R,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],w=3+(3&b),b>>>=2,S-=2}else if(17===N){for(M=R+3;S<M;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}x=0,w=3+(7&(b>>>=R)),b>>>=3,S=S-R-3}else{for(M=R+7;S<M;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}x=0,w=11+(127&(b>>>=R)),b>>>=7,S=S-R-7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P=a(1,n.lens,0,n.nlen,n.lencode,0,n.work,Z={bits:n.lenbits}),n.lenbits=Z.bits,P){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P=a(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Z={bits:n.distbits}),n.distbits=Z.bits,P){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=v){e.next_out=f,e.avail_out=v,e.next_in=d,e.avail_in=p,n.hold=b,n.bits=S,s(e,T),f=e.next_out,h=e.output,v=e.avail_out,d=e.next_in,l=e.input,p=e.avail_in,b=n.hold,S=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;k=(D=n.lencode[b&(1<<n.lenbits)-1])>>>16&255,N=65535&D,!((R=D>>>24)<=S);){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(k&&0==(240&k)){for(O=R,L=k,A=N;k=(D=n.lencode[A+((b&(1<<O+L)-1)>>O)])>>>16&255,N=65535&D,!(O+(R=D>>>24)<=S);){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}b>>>=O,S-=O,n.back+=O}if(b>>>=R,S-=R,n.back+=R,n.length=N,0===k){n.mode=26;break}if(32&k){n.back=-1,n.mode=12;break}if(64&k){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&k,n.mode=22;case 22:if(n.extra){for(M=n.extra;S<M;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,S-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;k=(D=n.distcode[b&(1<<n.distbits)-1])>>>16&255,N=65535&D,!((R=D>>>24)<=S);){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(0==(240&k)){for(O=R,L=k,A=N;k=(D=n.distcode[A+((b&(1<<O+L)-1)>>O)])>>>16&255,N=65535&D,!(O+(R=D>>>24)<=S);){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}b>>>=O,S-=O,n.back+=O}if(b>>>=R,S-=R,n.back+=R,64&k){e.msg="invalid distance code",n.mode=30;break}n.offset=N,n.extra=15&k,n.mode=24;case 24:if(n.extra){for(M=n.extra;S<M;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,S-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===v)break e;if(n.offset>(w=T-v)){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=w>n.wnext?n.wsize-(w-=n.wnext):n.wnext-w,w>n.length&&(w=n.length),I=n.window}else I=h,C=f-n.offset,w=n.length;for(v-=w=v<w?v:w,n.length-=w;h[f++]=I[C++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===v)break e;h[f++]=n.length,v--,n.mode=21;break;case 27:if(n.wrap){for(;S<32;){if(0===p)break e;p--,b|=l[d++]<<S,S+=8}if(e.total_out+=T-=v,n.total+=T,T&&(e.adler=n.check=(n.flags?o:i)(n.check,h,T,f-T)),T=v,(n.flags?b:c(b))!==n.check){e.msg="incorrect data check",n.mode=30;break}S=b=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;S<32;){if(0===p)break e;p--,b+=l[d++]<<S,S+=8}if(b!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}S=b=0}n.mode=29;case 29:P=1;break e;case 30:P=-3;break e;case 31:return-4;default:return u}return e.next_out=f,e.avail_out=v,e.next_in=d,e.avail_in=p,n.hold=b,n.bits=S,(n.wsize||T!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,T-e.avail_out)?(n.mode=31,-4):(T-=e.avail_out,e.total_in+=E-=e.avail_in,e.total_out+=T,n.total+=T,n.wrap&&T&&(e.adler=n.check=(n.flags?o:i)(n.check,h,T,e.next_out-T)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),P=(0==E&&0===T||4===t)&&0===P?-5:P)},n.inflateEnd=function(e){var t;return e&&e.state?((t=e.state).window&&(t.window=null),e.state=null,0):u},n.inflateGetHeader=function(e,t){return e&&e.state&&0!=(2&(e=e.state).wrap)?((e.head=t).done=!1,0):u},n.inflateSetDictionary=function(e,t){var n,r=t.length;return!e||!e.state||0!==(n=e.state).wrap&&11!==n.mode?u:11===n.mode&&i(1,t,r,0)!==n.check?-3:y(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0)},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,c,l,h,d){var f,p,g,m,_,y,v,b,S,E=d.bits,T=0,w=0,C=0,I=0,R=0,k=0,N=0,O=0,L=0,A=0,x=null,P=0,Z=new r.Buf16(16),M=new r.Buf16(16),D=null,U=0;for(T=0;T<=15;T++)Z[T]=0;for(w=0;w<u;w++)Z[t[n+w]]++;for(R=E,I=15;1<=I&&0===Z[I];I--);if(I<R&&(R=I),0===I)c[l++]=20971520,c[l++]=20971520,d.bits=1;else{for(C=1;C<I&&0===Z[C];C++);for(R<C&&(R=C),T=O=1;T<=15;T++)if((O=(O<<1)-Z[T])<0)return-1;if(0<O&&(0===e||1!==I))return-1;for(M[1]=0,T=1;T<15;T++)M[T+1]=M[T]+Z[T];for(w=0;w<u;w++)0!==t[n+w]&&(h[M[t[n+w]]++]=w);if(y=0===e?(x=D=h,19):1===e?(x=i,P-=257,D=o,U-=257,256):(x=s,D=a,-1),T=C,_=l,N=w=A=0,g=-1,m=(L=1<<(k=R))-1,1===e&&852<L||2===e&&592<L)return 1;for(;;){for(S=h[w]<y?(b=0,h[w]):h[w]>y?(b=D[U+h[w]],x[P+h[w]]):(b=96,0),f=1<<(v=T-N),C=p=1<<k;c[_+(A>>N)+(p-=f)]=v<<24|b<<16|S|0,0!==p;);for(f=1<<T-1;A&f;)f>>=1;if(A=0!==f?(A&f-1)+f:0,w++,0==--Z[T]){if(T===I)break;T=t[n+h[w]]}if(R<T&&(A&m)!==g){for(_+=C,O=1<<(k=T-(N=0===N?R:N));k+N<I&&!((O-=Z[k+N])<=0);)k++,O<<=1;if(L+=1<<k,1===e&&852<L||2===e&&592<L)return 1;c[g=A&m]=R<<24|k<<16|_-l|0}}0!==A&&(c[_+A]=T-N<<24|64<<16|0),d.bits=R}return 0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common");function i(e){for(var t=e.length;0<=--t;)e[t]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],s=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576),l=(i(c),new Array(60)),h=(i(l),new Array(512)),d=(i(h),new Array(256)),f=(i(d),new Array(29));i(f);var p,g,m,_=new Array(30);function y(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function b(e){return e<256?h[e]:h[256+(e>>>7)]}function S(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function E(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function T(e,t,n){E(e,n[2*t],n[2*t+1])}function w(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function C(e,t,n){for(var r,i=new Array(16),o=0,s=1;s<=15;s++)i[s]=o=o+n[s-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=w(i[a]++,a))}}function I(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function R(e){8<e.bi_valid?S(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function k(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function N(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&k(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!k(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function O(e,t,n){var r,i,a,u,c=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0==r?T(e,i,t):(T(e,(a=d[i])+256+1,t),0!==(u=o[a])&&E(e,i-=f[a],u),T(e,a=b(--r),n),0!==(u=s[a])&&E(e,r-=_[a],u)),c<e.last_lit;);T(e,256,t)}function L(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)N(e,o,n);for(i=u;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],N(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,N(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var l,h,d,f,p,g=e,m=t.dyn_tree,_=t.max_code,y=t.stat_desc.static_tree,v=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,S=t.stat_desc.extra_base,E=t.stat_desc.max_length,T=0,w=0;w<=15;w++)g.bl_count[w]=0;for(m[2*g.heap[g.heap_max]+1]=0,l=g.heap_max+1;l<573;l++)E<(w=m[2*m[2*(h=g.heap[l])+1]+1]+1)&&(w=E,T++),m[2*h+1]=w,_<h||(g.bl_count[w]++,f=0,S<=h&&(f=b[h-S]),g.opt_len+=(p=m[2*h])*(w+f),v&&(g.static_len+=p*(y[2*h+1]+f)));if(0!==T){do{for(w=E-1;0===g.bl_count[w];)w--}while(g.bl_count[w]--,g.bl_count[w+1]+=2,g.bl_count[E]--,0<(T-=2));for(w=E;0!==w;w--)for(h=g.bl_count[w];0!==h;)_<(d=g.heap[--l])||(m[2*d+1]!==w&&(g.opt_len+=(w-m[2*d+1])*m[2*d],m[2*d+1]=w),h--)}C(o,c,e.bl_count)}function A(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<u&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,c=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function x(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<u&&i===s)){if(a<c)for(;T(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==o&&(T(e,i,e.bl_tree),a--),T(e,16,e.bl_tree),E(e,a-3,2)):a<=10?(T(e,17,e.bl_tree),E(e,a-3,3)):(T(e,18,e.bl_tree),E(e,a-11,7));o=i,c=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}i(_);var P=!1;function Z(e,t,n,i){E(e,0+(i?1:0),3),i=t,t=n,R(n=e),S(n,t),S(n,~t),r.arraySet(n.pending_buf,n.window,i,t,n.pending),n.pending+=t}n._tr_init=function(e){if(!P){for(var t,n,r,i,u=new Array(16),b=r=0;b<28;b++)for(f[b]=r,t=0;t<1<<o[b];t++)d[r++]=b;for(d[r-1]=b,b=i=0;b<16;b++)for(_[b]=i,t=0;t<1<<s[b];t++)h[i++]=b;for(i>>=7;b<30;b++)for(_[b]=i<<7,t=0;t<1<<s[b]-7;t++)h[256+i++]=b;for(n=0;n<=15;n++)u[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,u[8]++;for(;t<=255;)c[2*t+1]=9,t++,u[9]++;for(;t<=279;)c[2*t+1]=7,t++,u[7]++;for(;t<=287;)c[2*t+1]=8,t++,u[8]++;for(C(c,287,u),t=0;t<30;t++)l[2*t+1]=5,l[2*t]=w(t,5);p=new y(c,o,257,286,15),g=new y(l,s,0,30,15),m=new y(new Array(0),a,0,19,7),P=!0}e.l_desc=new v(e.dyn_ltree,p),e.d_desc=new v(e.dyn_dtree,g),e.bl_desc=new v(e.bl_tree,m),e.bi_buf=0,e.bi_valid=0,I(e)},n._tr_stored_block=Z,n._tr_flush_block=function(e,t,n,r){var i,o,s,a=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),L(e,e.l_desc),L(e,e.d_desc),a=function(e){var t;for(A(e,e.dyn_ltree,e.l_desc.max_code),A(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*u[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(o=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=o)):i=o=n+5,n+4<=i&&-1!==t)Z(e,t,n,r);else if(4===e.strategy||o===i)E(e,2+(r?1:0),3),O(e,c,l);else{E(e,4+(r?1:0),3);var h=e,d=(t=e.l_desc.max_code+1,n=e.d_desc.max_code+1,a+1);for(E(h,t-257,5),E(h,n-1,5),E(h,d-4,4),s=0;s<d;s++)E(h,h.bl_tree[2*u[s]+1],3);x(h,h.dyn_ltree,t-1),x(h,h.dyn_dtree,n-1),O(e,e.dyn_ltree,e.dyn_dtree)}I(e),r&&R(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(d[n]+256+1)]++,e.dyn_dtree[2*b(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){E(e,2,3),T(e,256,c),16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e){"use strict";var t,n,r,o,s,a,u,c,l;function h(e){delete s[e]}function d(e){if(a)setTimeout(d,0,e);else{var t=s[e];if(t){a=!0;try{var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(void 0,r)}}finally{h(e),a=!1}}}}function f(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&d(+t.data.slice(r.length))}e.setImmediate||(o=1,a=!(s={}),u=e.document,c=(c=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&c.setTimeout?c:e,l="[object process]"==={}.toString.call(e.process)?function(e){i.nextTick((function(){d(e)}))}:function(){var t,n;if(e.postMessage&&!e.importScripts)return t=!0,n=e.onmessage,e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}()?(r="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(t){e.postMessage(r+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){n.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(t=u.documentElement,function(e){var n=u.createElement("script");n.onreadystatechange=function(){d(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}):function(e){setTimeout(d,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return s[o]={callback:e,args:t},l(o),o++},c.clearImmediate=h)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)}).call(this,n(4).Buffer,n(8).setImmediate,n(0),n(1))},,function(e,t,n){"use strict";(function(e){var r=n(5),i=n(6),o=n(7);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(e=null===e?new u(t):e).length=t,e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"!=typeof e)return c(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var i=e,s=t,c=n;if(c<0||s.byteLength<c)throw new RangeError("'offset' is out of bounds");if(s.byteLength<c+(r||0))throw new RangeError("'length' is out of bounds");return s=void 0===c&&void 0===r?new Uint8Array(s):void 0===r?new Uint8Array(s,c):new Uint8Array(s,c,r),u.TYPED_ARRAY_SUPPORT?(i=s).__proto__=u.prototype:i=d(i,s),i}if("string"==typeof t){if(c=e,r=t,u.isEncoding(s="string"==typeof(s=n)&&""!==s?s:"utf8"))return(r=(c=a(c,i=0|p(r,s))).write(r,s))!==i?c.slice(0,r):c;throw new TypeError('"encoding" must be a valid string encoding')}var l;if(n=e,u.isBuffer(r=t))return 0!==(n=a(n,l=0|f(r.length))).length&&r.copy(n,0,0,l),n;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(l=r.length)!=l?a(n,0):d(n,r);if("Buffer"===r.type&&o(r.data))return d(n,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var i,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var s=t,a=n,u=this.length;(!a||a<0||u<a)&&(a=u);for(var c="",l=s=!s||s<0?0:s;l<a;++l)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(this[l]);return c;case"utf8":case"utf-8":return b(this,t,n);case"ascii":u=t;var h=n,d="";h=Math.min(this.length,h);for(var f=u;f<h;++f)d+=String.fromCharCode(127&this[f]);return d;case"latin1":case"binary":s=t;var p=n,g="";p=Math.min(this.length,p);for(var m=s;m<p;++m)g+=String.fromCharCode(this[m]);return g;case"base64":return _=this,i=n,0===(y=t)&&i===_.length?r.fromByteArray(_):r.fromByteArray(_.slice(y,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var _=t,y=n,v=this.slice(_,y),S="",E=0;E<v.length;E+=2)S+=String.fromCharCode(v[E]+256*v[E+1]);return S;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var h=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){h=!1;break}if(h)return l}return-1}function v(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:s=e[i+2],128==(192&(o=e[i+1]))&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:s=e[i+2],a=e[i+3],128==(192&(o=e[i+1]))&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,h=1):65535<l&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}var d=r,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=4096));return p}function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function T(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function w(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function C(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,o){return o||C(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return o||C(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.Buffer=u,t.SlowBuffer=function(e){return u.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}),u.alloc=function(e,t,n){return l(e),e<=0||void 0===t?a(null,e):"string"==typeof n?a(null,e).fill(t,n):a(null,e).fill(t)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=u.allocUnsafe(t),r=0,i=0;i<e.length;++i){var s=e[i];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?b(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(u.isBuffer(e))return this===e||0===u.compare(this,e);throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n)&&(e+=" ... "),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u,c=!1;;)switch(r){case"hex":var l=e,h=t,d=n,f=(h=Number(h)||0,this.length-h);if((!d||(d=Number(d))>f)&&(d=f),(f=l.length)%2!=0)throw new TypeError("Invalid hex string");f/2<d&&(d=f/2);for(var p=0;p<d;++p){var g=parseInt(l.substr(2*p,2),16);if(isNaN(g))return p;this[h+p]=g}return p;case"utf8":case"utf-8":return u=n,L(N(e,(a=this).length-(f=t)),a,f,u);case"ascii":case"latin1":case"binary":return v(this,e,t,n);case"base64":return a=this,u=t,s=n,L(O(e),a,u,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o=n,L(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,this.length-(s=t)),this,s,o);default:if(c)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),c=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=u.prototype;else for(var r=t-e,i=new u(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){return t||S(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},u.prototype.readInt16BE=function(e,t){return t||S(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},u.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):w(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||E(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||E(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length&&(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=u.isBuffer(e)?e:N(new u(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var k=/[^+\/0-9A-Za-z-_]/g;function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function O(e){return r.toByteArray(function(e){if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(k,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(0))},function(e,t,n){"use strict";t.byteLength=function(e){return 3*((e=u(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){for(var t,n=(r=u(e))[0],r=r[1],s=new o(3*(n+r)/4-r),a=0,c=0<r?n-4:n,l=0;l<c;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===r&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,s[a++]=255&t),1===r&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(e,t,n){for(var i,o=[],s=t;s<n;s+=3)o.push(r[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(e,s,a<s+16383?a:s+16383));return 1==i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2==i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,d=n?-1:1;for(i=e[t+h],h+=d,o=i&(1<<-l)-1,i>>=-l,l+=a;0<l;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,r),o-=c}return(i?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?h/r:h*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*o}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(9),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e){"use strict";var n,r,i,o,s,a,u,c,l,h;function d(e){delete a[e]}function f(e){if(u)setTimeout(f,0,e);else{var t=a[e];if(t){u=!0;try{var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(void 0,r)}}finally{d(e),u=!1}}}}e.setImmediate||(s=1,u=!(a={}),c=e.document,l=(l=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&l.setTimeout?l:e,h="[object process]"==={}.toString.call(e.process)?function(e){t.nextTick((function(){f(e)}))}:function(){var t,n;if(e.postMessage&&!e.importScripts)return t=!0,n=e.onmessage,e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}()?(i="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(f,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return a[s]={callback:e,args:t},h(s),s++},l.clearImmediate=d)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(0),n(1))},function(e,t,n){"use strict";n.r(t),n.d(t,"ZegoLogger",(function(){return xe})),n.d(t,"ZegoDataReport",(function(){return f})),n.d(t,"createZegoWebSocket",(function(){return h})),n.d(t,"LoggerStateCenter",(function(){return s})),a.getInstance=function(){return a.instance||(a.instance=new a).init(),a.instance},a.prototype.init=function(){},Object.defineProperty(a.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ENV",{get:function(){return this._ENV},set:function(e){this._ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e},enumerable:!1,configurable:!0}),a.instance=new a;var r,i,o,s=a;function a(){this._testEnvironment=!0,this._ENV=0,this._debug=!0}(t=r=r||{})[t.BROWSER=0]="BROWSER",t[t.WEIXINMINI=1]="WEIXINMINI",(i=i||{})[i.DEFAULT=0]="DEFAULT",(t=o=o||{})[t.DISABLE=0]="DISABLE",t[t.WEBSOCKET=1]="WEBSOCKET",t[t.HTTPS=2]="HTTPS";var u={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},c=(l.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},l.prototype.onopen=function(e){},l.prototype.onerror=function(e){},l.prototype.onclose=function(e){},l.prototype.onmessage=function(e){},l.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},l.prototype.close=function(){this._websocket&&this._websocket.close()},l);function l(e,t){this.url=e,this.readyState=3,this.init()}function h(e,t){return new(t%2===r.BROWSER?WebSocket:c)(e)}var d=function(){return(d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},f=(p.prototype.newReport=function(e,t){this.dataStatistics[e]={event_time:Date.now(),time_consumed:0,seq:e,error:0,message:"success",event:t,events:[]}},p.prototype.addMsgExt=function(e,t){this.dataStatistics[e]?this.dataStatistics[e].msg_ext=t:console.warn("".concat(e," not exist"))},p.prototype.addMsgInfo=function(e,t){this.dataStatistics[e]?Object.assign(this.dataStatistics[e],t):console.warn("".concat(e," not exist"))},p.prototype.eventStart=function(e,t){this.dataStatistics[e]?null!=this.dataStatistics[e].events?this.dataStatistics[e].events.push({event:t,event_time:Date.now(),time_consumed:0}):this.logger.warn("zd.es.0 no events"):this.logger.warn("zd.es.0 no seq match")},p.prototype.eventEnd=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r&&0!==r.length){for(var i=r.length-1;0<=i;i--)if(r[i].event==t&&0==r[i].time_consumed){r[i].time_consumed=Date.now()-r[i].event_time;break}}else this.logger.info("zd.ee.0 no events")}else this.logger.info("zd.ee.0 no seq match")},p.prototype.eventEndWithMsg=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r){for(var i=r.length-1;0<=i;i--)if(r[i].event==t&&0==r[i].time_consumed){r[i].time_consumed=Date.now()-r[i].event_time,null==r[i].msg_ext&&(r[i].msg_ext={}),r[i].msg_ext=d({},n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},p.prototype.eventEndWithMsgInfo=function(e,t,n){if(this.dataStatistics[e]){var r=this.dataStatistics[e].events;if(r){for(var i=r.length-1;0<=i;i--)if(r[i].event==t&&0==r[i].time_consumed){r[i].time_consumed=Date.now()-r[i].event_time,Object.assign(r[i],n);break}}else this.logger.warn("zd.ee.0 no events")}else this.logger.warn("zd.ee.0 no seq match")},p.prototype.addEventInfo=function(e,t,n,r){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(null!=i){for(var o=i.length-1;0<=o;o--)if(i[o].event==t&&null!=i[o].time_consumed){null==i[o].msg_ext?i[o].msg_ext={}:i[o].msg_ext&&(i[o].msg_ext[n]=r);break}}else this.logger.warn("zd.aei.0 no events")}else this.logger.warn("zd.aei.0 no seq match")},p.prototype.addEventMsg=function(e,t,n,r){if(this.dataStatistics[e]){var i=this.dataStatistics[e].events;if(null!=i){for(var o=i.length-1;0<=o;o--)if(i[o].event==t){i[o][n]=r;break}}else this.logger.warn("zd.aem.0 no events")}else this.logger.warn("zd.aem.0 no seq match")},p.prototype.addEvent=function(e,t,n){this.dataStatistics[e]?this.dataStatistics[e].events&&this.dataStatistics[e].events.push(n?{event:t,event_time:Date.now(),msg_ext:n}:{event:t,event_time:Date.now()}):this.logger.warn("zd.ae.0 no seq match")},p.prototype.uploadReport=function(e,t,n,r){var i=this.dataStatistics[e];null!=i&&(t&&(i.event=t),i.time_consumed=Date.now()-i.event_time,n&&this.addMsgInfo(e,{error:n.code,message:n.message||n.msg+" "+(r||"")}),this.logger.report(i),delete this.dataStatistics[e])},p);function p(e){this.dataStatistics={},this.logger=e}var g,m=["00","01","02","03","04","05","06","07","08","09"];function _(){var e=new Date;return[e.getFullYear()+"/",(m[e.getMonth()+1]||e.getMonth()+1)+"/",(m[e.getDate()]||e.getDate())+" ",(m[e.getHours()]||e.getHours())+":",(m[e.getMinutes()]||e.getMinutes())+":",m[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}function y(e){this.cache=e}(t=g=g||{}).WEBSOCKET_STATE_CHANGE="zl.net.wsc",t.OPEN_WS="zl.net.opws",Object.defineProperty(we.prototype,"url",{get:function(){return this.configState.url},set:function(e){this.configState.url=e},enumerable:!1,configurable:!0}),Object.defineProperty(we.prototype,"strategy",{get:function(){return this.senderBuilder.strategy},enumerable:!1,configurable:!0}),we.prototype.setStrategy=function(e){this.senderBuilder.setStrategy(e),this.sender=this.senderBuilder.build()},we.prototype.addRemoteWsLog=function(e){if(this.configState.env!=r.BROWSER)throw new Error("cannot use net strategy on  mini program");var t;this.closed()&&(t=this.url,this.url="",this.openWebSocketLogServer(t)),this.cache.push(e),this.connected()&&this.sender&&this.sender.active()},we.prototype.stopWebSocketServer=function(){this.websocket&&(this.websocket.onclose=null,this.websocket.onerror=null,this.websocket.close(),this.websocket=null)},we.prototype.updateSender=function(){this.websocket instanceof WebSocket&&this.configState.useStrategy&&(this.senderBuilder.setWs(this.websocket),this.senderBuilder.setCache(this.cache),this.sender=this.senderBuilder.build())},we.prototype.updateWebSocketState=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.websocketState,i="";switch(e){case"onconnecting":this.websocketState="never_opened"===this.websocketState?"first_connecting":"reconnecting";break;case"onopen":this.websocketState="connected";break;case"onclosed":this.websocketState="closed";var o=t[0];o&&(i+=" close code=".concat(o.code));break;case"onerror":this.websocketState="error"}e=g.WEBSOCKET_STATE_CHANGE+" log ws state change: ".concat(r," -> ").concat(this.websocketState),i&&(e+=i),this.innerLogger.info(e)},we.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&((this.url&&""!==this.url||"never_opened"===this.websocketState)&&this.innerLogger.info(g.OPEN_WS+" log url change to: ".concat(e)),this.url=e)&&(this.stopWebSocketServer(),this.websocket=h(e,this.configState.env),this.updateSender(),this.updateWebSocketState("onconnecting"),this.websocket.onopen=function(){var e;t.configState.useStrategy&&null!=(e=t.sender)&&e.active(),t.updateWebSocketState("onopen")},this.websocket.onclose=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.warn("onclose   websocket error:",e),t.updateWebSocketState.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}(["onclosed"],e,!1))},this.websocket.onmessage=function(){},this.websocket.onerror=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.warn("open log websocket error:",e),t.updateWebSocketState("onerror")})},we.prototype.closed=function(){return null==this.websocket||2==this.websocket.readyState||3==this.websocket.readyState},we.prototype.connected=function(){return null!==this.websocket&&1==this.websocket.readyState},we.prototype.connecting=function(){return null!==this.websocket&&0==this.websocket.readyState},we.prototype.wsSend=function(e){this.websocket&&this.websocket.send(e)},we.prototype.destroy=function(){this.websocket=null};var v,b=we,S=(Te.prototype.active=function(){var e=this;this.ws&&1===this.ws.readyState&&0!==this.cache.size()&&this.strategy.canSendLog()&&(this.strategy.getLog().forEach((function(t){e.ws.send(t)})),this.strategy.onSendLog())},Te),E=(v=function(e,t){return(v=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e){function t(t){return e.call(this,t)||this}var n=t,r=e;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=n}return v(n,r),n.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i),t.prototype.getLog=function(){return this.cache.clear()},t.prototype.canSendLog=function(){return 0<this.cache.size()},t.prototype.onSendLog=function(){},t}(y));ne=function(e,t){return(ne=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ne(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(Ee,te=y),Ee.prototype.canSendLog=function(){return!this.locked&&0<this.cache.size()},Ee.prototype.getLog=function(){for(var e=[],t=0;t<this.maxPacketLen-4e3;){var n=this.cache.getOneLogPacket();if(!n||n.length<=0)break;t+=n.length||0,e.push(n)}return e},Ee.prototype.onSendLog=function(){var e=this;this.locked=!0,setTimeout((function(){e.locked=!1,e.onCanSendActive&&e.onCanSendActive()}),this.maxDelay)},ee=function(e,t){return(ee=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(Se,$=t=Ee);var T=Se,w=(q=function(e,t){return(q=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(){return null!==Q&&Q.apply(this,arguments)||this});if("function"!=typeof(L=Q=t)&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function C(){this.constructor=w}q(w,L),w.prototype=null===L?Object.create(L):(C.prototype=L.prototype,new C),J=function(e,t){return(J=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};var I=function(){return null!==j&&j.apply(this,arguments)||this};if("function"!=typeof(L=j=t)&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function R(){this.constructor=I}function k(){this.url="",this.env=r.BROWSER,this.useStrategy=!0,this.token="",this.deviceid=O.id()}J(I,L),I.prototype=null===L?Object.create(L):(R.prototype=L.prototype,new R),K=function(e,t){return(K=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}K(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}((function(){return null!==Y&&Y.apply(this,arguments)||this}),Y=t),Object.defineProperty(be.prototype,"strategy",{get:function(){return this._strategy},enumerable:!1,configurable:!0}),be.prototype.setWs=function(e){this.ws=e},be.prototype.setCache=function(e){this.cache=e},be.prototype.setStrategy=function(e){e&&(this._strategy=e)},be.prototype.build=function(){if(this.ws&&this.cache)return new S(this.ws,this.cache,this._strategy!==i.DEFAULT?new E(this.cache):new T(this.cache));throw new Error("cannot build log sender")};var N=be,O=(ve.isEnvSupport=function(){return!(!window||!window.localStorage)},ve.bin2hex=function(e){for(var t,n="",r=0,i=(e+="").length;r<i;r++)n+=(t=e.charCodeAt(r).toString(16)).length<2?"0"+t:t;return n},ve.getCanvasFingerprint=function(e){var t=document.createElement("canvas"),n=((n=t.getContext("2d")).textBaseline="top",n.font="14px 'Arial'",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText(e,2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(e,4,17),t.toDataURL().replace("data:image/png;base64,",""));return e=atob(n),this.bin2hex(e.slice(-16,-12))},ve.generateUUID=function(){var e,t,n;return(t=localStorage.getItem(this.storageKey))||(e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(36)})),n=this.getCanvasFingerprint("hello, zego")+t.slice(8),localStorage.setItem(this.storageKey,n),t)},ve.id=function(){var e;return ve.isEnvSupport()?((e=localStorage.getItem(this.storageKey))||(e=ve.generateUUID(),localStorage.setItem(this.storageKey,e)),e):""},ve.storageKey="z_deviceID",ve),L=(Object.defineProperty(ye.prototype,"buffer",{get:function(){return this.queue},set:function(e){this.queue=e},enumerable:!1,configurable:!0}),ye.prototype.push=function(e){if(!e)throw new Error("item null!");e&&this.queue.push(e)},ye.prototype.pop=function(){return this.queue.shift()},ye.prototype.front=function(){return this.queue[0]},ye);function A(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function x(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}X=function(e,t){return(X=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)};var P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Z=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}X(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(_e,F=L),_e.prototype.size=function(){return this.queue.length},_e.prototype.getOneLogPacket=function(){for(var e="";0<this.queue.length;){if(4e3<(e+this.queue[0]).length)return e;var t=JSON.parse(this.queue[0]);t=P(P({},t),{userid:t.userid||this.configState.roomid,roomid:t.roomid||this.configState.roomid,userName:t.userName||this.configState.userName}),e=e+JSON.stringify(t)+"\n",this.queue.shift()}return""===e?void 0:e},_e.prototype.clear=function(){for(var e=[];0<this.queue.length;){var t=this.getOneLogPacket();if(!t)break;e.push(t)}return e},_e),M=(me.prototype.save=function(e){return this.dbSaver.save(this.tableName,{log:e})},me.prototype.queryList=function(e){return this.dbSaver.queryByCursor(this.tableName,e)},me.prototype.delete=function(e){return this.dbSaver.deleteItems(this.tableName,e)},me.prototype.storedBytesSize=function(){var e=this;return new Promise((function(t,n){return r=e,o=function(){var e,r;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(i){return e=this.dbSaver.openCursor(this.tableName),r=0,e.onsuccess=function(e){(e=null==(e=e.target)?void 0:e.result)?(r+=e.value.log.length,e.continue()):t(r)},e.onerror=function(e){n(e)},[2]}))},new(i=(i=void 0)||Promise)((function(e,t){function n(e){try{a(o.next(e))}catch(e){t(e)}}function s(e){try{a(o.throw(e))}catch(e){t(e)}}function a(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i((function(e){e(r)}))).then(n,s)}a((o=o.apply(r,[])).next())}));var r,i,o}))},me.prototype.lines=function(){return this.dbSaver.lines(this.tableName)},me.prototype.deleteByCount=function(e){return this.dbSaver.deleteByCount(this.tableName,e)},me.prototype.deleteAll=function(){return this.dbSaver.deleteAll(this.tableName)},me),D=(ge.prototype.openDB=function(e){return A(this,void 0,void 0,(function(){var t,n,r=this;return x(this,(function(i){switch(i.label){case 0:return t=window.indexedDB.open(e.database,e.version),n=this,[4,new Promise((function(n){t.onupgradeneeded=function(t){var n=t.target&&t.target.result;e.tableList.forEach((function(e){var t;n.objectStoreNames.contains(e.tableName)||(t=n.createObjectStore(e.tableName,{keyPath:"id",autoIncrement:!0}),e.tableItems.forEach((function(e){e.index&&t.createIndex(e.itemName,e.itemName,{unique:e.unique})})))}))},t.onsuccess=function(e){r.db=e=e.target&&e.target.result,n(t)}}))];case 1:return n.dbRequest=i.sent(),[2]}}))}))},ge.prototype.checkConn=function(){if(!this.dbRequest&&!this.db)throw new Error("indexDB not open")},ge.prototype.save=function(e,t){var n=this;return new Promise((function(r,i){return A(n,void 0,void 0,(function(){var n,o;return x(this,(function(s){return this.checkConn(),n=this.db.transaction([e],"readwrite").objectStore(e),(o=n.add(t)).onsuccess=function(e){r(o.result)},o.onerror=function(e){i("save item fail")},[2]}))}))}))},ge.prototype.update=function(e,t){var n=this;return new Promise((function(e,t){n.checkConn(),e()}))},ge.prototype.queryById=function(e,t){var n=this;return new Promise((function(r,i){return A(n,void 0,void 0,(function(){var n,o;return x(this,(function(s){return this.checkConn(),n=this.db.transaction([e]).objectStore(e),(o=n.get(t)).onsuccess=function(e){r(o.result?o.result:null)},o.onerror=function(e){i()},[2]}))}))}))},ge.prototype.queryByCursor=function(e,t){var n=this;return new Promise((function(r,i){return A(n,void 0,void 0,(function(){var n,o;return x(this,(function(s){return this.checkConn(),o=this.db.transaction([e]).objectStore(e),n=[],(o=o.openCursor()).onsuccess=function(e){(e=null==(e=e.target)?void 0:e.result)&&(!t||n.length<t)?(n.push(e.value),e.continue()):r(n)},o.onerror=function(e){i()},[2]}))}))}))},ge.prototype.lines=function(e){var t=this;return new Promise((function(n,r){return A(t,void 0,void 0,(function(){var t,i;return x(this,(function(o){return this.checkConn(),t=(t=this.db.transaction([e]).objectStore(e)).openCursor(),i=0,t.onsuccess=function(e){(e=null==(e=e.target)?void 0:e.result)?(i++,e.continue()):n(i)},t.onerror=function(e){r()},[2]}))}))}))},ge.prototype.openCursor=function(e){return this.checkConn(),this.db.transaction([e]).objectStore(e).openCursor()},ge.prototype.deleteById=function(e,t){var n=this;return new Promise((function(r,i){return A(n,void 0,void 0,(function(){var n;return x(this,(function(o){return this.checkConn(),(n=(n=this.db.transaction([e],"readwrite").objectStore(e)).delete(t)).onsuccess=function(e){r()},n.onerror=function(e){i()},[2]}))}))}))},ge.prototype.deleteByCount=function(e,t){var n=this;return new Promise((function(r,i){return A(n,void 0,void 0,(function(){var n,i;return x(this,(function(o){switch(o.label){case 0:this.checkConn(),n=8192,o.label=1;case 1:return 0<t?[4,this.queryByCursor(e,Math.min(t,n))]:[3,4];case 2:return 0===(i=o.sent()).length?[3,4]:(t-=n,[4,this.deleteItems(e,i)]);case 3:return o.sent(),[3,1];case 4:return r(),[2]}}))}))}))},ge.prototype.deleteAll=function(e){var t=this;return new Promise((function(n,r){return A(t,void 0,void 0,(function(){var t;return x(this,(function(i){return this.checkConn(),(t=(t=this.db.transaction([e],"readwrite").objectStore(e)).clear()).onsuccess=function(e){n()},t.onerror=function(e){r()},[2]}))}))}))},ge.prototype.deleteItems=function(e,t){var n=this;return new Promise((function(r){return A(n,void 0,void 0,(function(){var n;return x(this,(function(i){switch(i.label){case 0:return this.checkConn(),n=this.db.transaction([e],"readwrite").objectStore(e),[4,Promise.all(t.map((function(e){return new Promise((function(t,r){var i=n.delete(e.id);i.onsuccess=function(e){t()},i.onerror=function(e){r()}}))})))];case 1:return i.sent(),r(),[2]}}))}))}))},ge),U={version:1,database:"zego_logger_db",tableList:[{tableName:"zego_log",tableItems:[{itemName:"log",index:!1,unique:!1}]}]};function B(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function G(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function W(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function H(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}V=function(e,t){return(V=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}V(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(pe,z=L);var z,V,F,X,Y,K,j,J,Q,q,$,ee,te,ne,re=pe,ie=function(){return(ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},oe=(fe.prototype.pushTask=function(e,t,n,r,i){e={task:e},t&&(e=ie(ie({},e),{args:t})),n&&(e=ie(ie({},e),{successCallback:n})),r&&(e=ie(ie({},e),{errorCallback:r})),i&&(e=ie(ie({},e),{completeCallback:i})),this.queue.push(e)},fe.prototype.runTaskQueueItem=function(e){return B(this,void 0,void 0,(function(){var t,n;return G(this,(function(r){switch(r.label){case 0:t=null,r.label=1;case 1:return r.trys.push([1,4,5,6]),e&&e.args?t=e.task.apply(e,e.args):e&&(t=e.task()),t instanceof Promise?[4,t]:[3,3];case 2:t=r.sent(),r.label=3;case 3:return e.successCallback&&e.successCallback(t),[3,6];case 4:if(n=r.sent(),e.errorCallback)return e.errorCallback(n),[3,6];throw n;case 5:return e.completeCallback&&e.completeCallback(),[7];case 6:return[2]}}))}))},fe.prototype.runATask=function(){return B(this,void 0,void 0,(function(){var e;return G(this,(function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:(e=this.queue.shift())?[4,this.runTaskQueueItem(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},fe.prototype.runAllTask=function(){return B(this,void 0,void 0,(function(){var e;return G(this,(function(t){switch(t.label){case 0:return 0<this.queue.length?(e=this.queue.shift())?[4,this.runTaskQueueItem(e)]:[3,2]:[3,3];case 1:t.sent(),t.label=2;case 2:return[3,0];case 3:return[2]}}))}))},fe.prototype.size=function(){return this.queue.length},fe),se=(t=n(2),n.n(t)),ae=(de.prototype.writeLine=function(e){e&&""!==e&&this.cacheLines.push(e)},de.prototype.saveAs=function(e,t){var n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=t,n.click()},de.prototype.createZip=function(){return e=this,n=function(){var e,t;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(n){switch(n.label){case 0:e=new se.a,t="",0<this.cacheLines.length&&(t=this.cacheLines.join("\n"),this.cacheLines=[]),t=new Blob([t],{type:"text/plain;charset=utf-8"}),e.file("log.txt",t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.generateAsync({type:"blob"})];case 2:return[2,n.sent()];case 3:throw t=n.sent(),console.error("create zip file failed",t),t;case 4:return[2]}}))},new(t=(t=void 0)||Promise)((function(r,i){function o(e){try{a(n.next(e))}catch(e){i(e)}}function s(e){try{a(n.throw(e))}catch(e){i(e)}}function a(e){var n;e.done?r(e.value):((n=e.value)instanceof t?n:new t((function(e){e(n)}))).then(o,s)}a((n=n.apply(e,[])).next())}));var e,t,n},de),ue=(he.prototype.isUploadFieldReady=function(){return!!(this.configState.appid&&this.configState.userid&&""!==this.configState.userid&&this.configState.token&&""!==this.configState.token&&this.configState.deviceid&&""!==this.configState.deviceid)},he.prototype.setUploadUrl=function(e){this.uploadUrl=e},he.prototype.upload=function(e){return W(this,void 0,void 0,(function(){var t=this;return H(this,(function(n){if(this.isUploadFieldReady())return[2,new Promise((function(n,r){return W(t,void 0,void 0,(function(){var t,i=this;return H(this,(function(o){switch(o.label){case 0:return t=function(){return W(i,void 0,void 0,(function(){var t,n,i=this;return H(this,(function(o){switch(o.label){case 0:this.updateLocked=!0,(t=new FormData).append("logs",e),t.append("hello",this.configState.appid.toString()),t.append("appid",this.configState.appid.toString()),t.append("uin",this.configState.userid.toString()),t.append("timestamp",(new Date).getTime().toString()),t.append("token",this.configState.token),t.append("deviceid",this.configState.deviceid),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,ce.post(this.uploadUrl,t)];case 2:if(0!==(n=o.sent()).code)throw new Error("upload logs failed, error=".concat(JSON.stringify(n)));return[3,5];case 3:return n=o.sent(),r(n),[3,5];case 4:return setTimeout((function(){return W(i,void 0,void 0,(function(){return H(this,(function(e){switch(e.label){case 0:return this.updateLocked=!1,[4,this.taskQueue.runATask()];case 1:return e.sent(),[2]}}))}))}),100),[7];case 5:return[2]}}))}))},this.updateLocked?(this.taskQueue.pushTask(t,[],(function(){n()}),(function(e){r(e)})),[3,3]):[3,1];case 1:return[4,t()];case 2:o.sent(),n(),o.label=3;case 3:return[2]}}))}))}))];throw new Error("cannot upload logs, please login room before you upload logs.")}))}))},he),ce=(le.post=function(e,t){return new Promise((function(n,r){try{var i=new XMLHttpRequest;i.open("POST",e,!0),i.responseType="json",i.send(t),i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(200===i.status?n(i.response):r("request fail. status="+i.status))}}catch(n){r(n)}}))},le);function le(){}function he(e){this.configState=e,this.defaultDomain="detaillog-global.zego.im",this.uploadUrl="https://".concat(this.defaultDomain,"/log/userupload"),this.taskQueue=new oe,this.updateLocked=!1}function de(){this.cacheLines=[]}function fe(){this.queue=[]}function pe(){return null!==z&&z.apply(this,arguments)||this}function ge(){}function me(e){this.dbSaver=e,this.tableName="zego_log"}function _e(e){var t=F.call(this)||this;return t.configState=e,t}function ye(){this.queue=[]}function ve(){}function be(){this._strategy=i.DEFAULT}function Se(e){return(e=$.call(this,e)||this).maxDelay=10,e.maxPacketLen=20480,e}function Ee(){var e=null!==te&&te.apply(this,arguments)||this;return e.maxDelay=10,e.maxPacketLen=20480,e.locked=!1,e}function Te(e,t,n){this.ws=e,this.cache=t,this.strategy=n,this.strategy.onCanSendActive=this.active.bind(this)}function we(e,t,n){this.cache=e,this.configState=t,this.innerLogger=n,this.websocket=null,this.websocketState="never_opened",this.senderBuilder=new N,this.sender=null}function Ce(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function Ie(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function Re(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function ke(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((i=0<(i=o.trys).length&&i[i.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var Ne=function(){return(Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Oe=(Me.prototype.build=function(e){var t=Ne(Ne({},JSON.parse(e)),{sdkid:this.sdkid});if(++this.buildedCount%100==0)return(e=JSON.stringify(t)).substring(1,e.length-1);for(n in t)this.excludedKeys.includes(n)||(t[n]===this.logCtx[n]?delete t[n]:this.logCtx[n]=t[n]);var n,r=[];for(n in t)this.excludedKeys.includes(n)?r.push(t[n]):r.push("".concat(n,":").concat(t[n]));return r.join(",")},Me.prototype.buildFullMessageLog=function(e){return e=JSON.parse(e),e=Ne(Ne(Ne({},this.logCtx),e),{sdkid:this.sdkid}),JSON.stringify(e)},Me),Le=(Object.defineProperty(Ze.prototype,"dbOpened",{get:function(){return this._dbOpened},enumerable:!1,configurable:!0}),Object.defineProperty(Ze.prototype,"dbTryOpened",{get:function(){return this._dbTryOpen},enumerable:!1,configurable:!0}),Ze.prototype.makeStorageSpace=function(){return Ce(this,void 0,void 0,(function(){var e;return Ie(this,(function(t){switch(t.label){case 0:return[4,this.logModel.lines()];case 1:return 153600<(e=t.sent())?[4,this.logModel.deleteByCount(e/2)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},Ze.prototype.makeStorageSpaceUpload=function(){return Ce(this,void 0,void 0,(function(){var e,t=this;return Ie(this,(function(n){return this.zipLogEnabled?(e=function(){return Ce(t,void 0,void 0,(function(){return Ie(this,(function(e){switch(e.label){case 0:return[4,this.logModel.lines()];case 1:return 3072<e.sent()?[4,this.startASdkUploadTask()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},[2,new Promise((function(n,r){return Ce(t,void 0,void 0,(function(){var t;return Ie(this,(function(i){switch(i.label){case 0:return this.dbOpened?[3,1]:(this.dbTaskQueue.pushTask(e,[],(function(){n()}),(function(e){r(e)})),[3,5]);case 1:return i.trys.push([1,3,,4]),[4,e()];case 2:return i.sent(),[3,4];case 3:return t=i.sent(),r(t),[2];case 4:n(),i.label=5;case 5:return[2]}}))}))}))]):[2]}))}))},Ze.prototype.openDB=function(){return Ce(this,void 0,void 0,(function(){return Ie(this,(function(e){switch(e.label){case 0:return this._dbTryOpen?[2]:(this._dbTryOpen=!0,[4,this.dbSaver.openDB(U)]);case 1:return e.sent(),this._dbOpened=!0,[4,this.makeStorageSpace()];case 2:return e.sent(),[4,this.dbTaskQueue.runAllTask()];case 3:return e.sent(),[4,this.uploadTaskQueue.runATask()];case 4:return e.sent(),this.activeSaving(),[2]}}))}))},Ze.prototype.shouldOpenDB=function(){return this.zipLogEnabled&&Ze.isEnvSupport()&&!this._dbOpened&&!this._dbTryOpen},Ze.prototype.enable=function(){this.zipLogEnabled||(this.zipLogEnabled=!0,this.shouldOpenDB()&&this.openDB())},Ze.prototype.saveLog=function(e){this.shouldOpenDB()&&this.openDB(),this.cache.push(this.zipLogBuilder.build(e)),this.activeSaving()},Ze.prototype.removeLogList=function(e){return Ce(this,void 0,void 0,(function(){return Ie(this,(function(t){switch(t.label){case 0:return 0===e.length?[2]:[4,this.logModel.delete(e)];case 1:return t.sent(),[2]}}))}))},Ze.prototype.empty=function(){return Ce(this,void 0,void 0,(function(){return Ie(this,(function(e){switch(e.label){case 0:return[4,this.logModel.queryList(1)];case 1:return[2,0===e.sent().length]}}))}))},Ze.prototype.activeSaving=function(){var e,t=this;this.zipLogEnabled&&this.dbOpened&&!this.activating&&(this.activating=!0,(e=function(){var n=t.cache.front();n?t.logModel.save(n).then((function(){t.cache.pop(),e()})).catch((function(e){t.activating=!1,console.error(e)})):t.activating=!1})())},Ze.isEnvSupport=function(){return!(!window||!("indexedDB"in window))},Ze.prototype.uploadTask=function(){return Ce(this,void 0,void 0,(function(){var e,t,n;return Ie(this,(function(r){switch(r.label){case 0:return[4,this.logModel.lines()];case 1:e=r.sent(),t=function(){var t,r,i;return Ie(this,(function(o){switch(o.label){case 0:return[4,n.logModel.queryList(Math.min(3145728,e))];case 1:return t=o.sent(),e-=3145728,t.length<=0?[2,"break"]:(r=new ae,t.forEach((function(e){r.writeLine(e.log)})),[4,r.createZip()]);case 2:return i=o.sent(),[4,n.zipLogUploader.upload(i)];case 3:return o.sent(),[4,n.logModel.delete(t)];case 4:return o.sent(),[2]}}))},n=this,r.label=2;case 2:return 0<e?[5,t()]:[3,4];case 3:return"break"===r.sent()?[3,4]:[3,2];case 4:return[2]}}))}))},Ze.prototype.startASdkUploadTask=function(){var e=this;return new Promise((function(t,n){return Ce(e,void 0,void 0,(function(){var e=this;return Ie(this,(function(r){return this.uploadTaskQueue.pushTask((function(){return Ce(e,void 0,void 0,(function(){return Ie(this,(function(e){switch(e.label){case 0:return[4,this.uploadTask()];case 1:return e.sent(),[2]}}))}))}),[],(function(){t()}),(function(e){n(e)}),(function(){0<e.uploadTaskQueue.size()&&e.uploadTaskQueue.runATask()})),this.dbOpened&&1===this.uploadTaskQueue.size()&&this.uploadTaskQueue.runATask(),[2]}))}))}))},Ze.prototype.startAUserUploadTask=function(){var e=this;return new Promise((function(t,n){return Ce(e,void 0,void 0,(function(){var e=this;return Ie(this,(function(r){return this.userLastUploadSuccess=!1,this.userUploading=!0,this.uploadTaskQueue.pushTask((function(){return Ce(e,void 0,void 0,(function(){return Ie(this,(function(e){switch(e.label){case 0:return this.userUploading=!0,[4,this.uploadTask()];case 1:return e.sent(),[2]}}))}))}),[],(function(){e.userLastUploadSuccess=!0,e.userUploading=!1,t()}),(function(t){e.userUploading=!1,n(t)}),(function(){0<e.uploadTaskQueue.size()&&e.uploadTaskQueue.runATask()})),this.dbOpened&&1===this.uploadTaskQueue.size()&&this.uploadTaskQueue.runATask(),[2]}))}))}))},Ze.prototype.setUploadUrl=function(e){this.zipLogUploader.setUploadUrl(e)},Ze.prototype.startUpload=function(){return Ce(this,void 0,void 0,(function(){return Ie(this,(function(e){switch(e.label){case 0:if(!this.zipLogEnabled)throw new Error("zip logs upload is not enabled.");if(0!==this.userLastUploadTime&&performance.now()-this.userLastUploadTime<6e4&&this.userLastUploadSuccess||this.userUploading)throw new Error("Logs upload failed. Do not report frequently.");return this.userLastUploadTime=performance.now(),[4,this.startAUserUploadTask()];case 1:return e.sent(),[2]}}))}))},Ze.prototype.destroy=function(){},Ze),Ae=function(){return(Ae=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},xe=(Object.defineProperty(Pe.prototype,"url",{get:function(){return this.configState.url||""},set:function(e){this.configState.url=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"logType",{get:function(){return this.configState.logType||o.DISABLE},set:function(e){this.configState.logType=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"env",{get:function(){return this.configState.env},set:function(e){this.configState.env=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"appid",{get:function(){return this.configState.appid},set:function(e){this.configState.appid=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"roomid",{get:function(){return this.configState.roomid},set:function(e){this.configState.roomid=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"sessionid",{get:function(){return this.configState.sessionid},set:function(e){this.configState.sessionid=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"userid",{get:function(){return this.configState.userid},set:function(e){this.configState.userid=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"userName",{get:function(){return this.configState.userName},set:function(e){this.configState.userName=e},enumerable:!1,configurable:!0}),Object.defineProperty(Pe.prototype,"version",{get:function(){return this.configState.userName},set:function(e){this.configState.version=e},enumerable:!1,configurable:!0}),Pe.prototype.setLogLevel=function(e){return void 0!==(e=u[e])&&(this.logLevel=e,!0)},Pe.prototype.setRemoteLogLevel=function(e){return void 0!==(e=u[e])&&(this.logRemoteLevel=e,!0)},Pe.prototype.setSessionInfo=function(e,t,n,r,i,o){this.appid=e,this.roomid=t,this.sessionid=n,this.userid=r,this.userName=i,this.version=o},Pe.prototype.setTokenInfo=function(e,t){this.configState.token=e,t&&(this.configState.userid=t)},Pe.prototype.setZipLogConfig=function(e,t){1===e&&this.zipLogContext?this.zipLogContext.enable():0==e&&t&&this.zipLogContext&&(this.zipLogContext.destroy(),this.zipLogContext=null)},Pe.prototype.setZipLogUploadUrl=function(e){this.zipLogContext&&this.zipLogContext.setUploadUrl(e)},Pe.prototype.makeZipLogSpaceUpload=function(){return Re(this,void 0,void 0,(function(){return ke(this,(function(e){switch(e.label){case 0:return this.zipLogContext?[4,this.zipLogContext.makeStorageSpaceUpload()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},Pe.prototype.uploadStorageLog=function(){return Re(this,void 0,void 0,(function(){return ke(this,(function(e){switch(e.label){case 0:return this.zipLogContext?[4,this.zipLogContext.startUpload()]:[3,2];case 1:return e.sent(),[3,3];case 2:throw new Error("cannot use zip log module");case 3:return[2]}}))}))},Pe.prototype.report=function(e){e=this.logReportParamList(u.REPORT,e),this.logLevel!==u.DISABLE&&this.logLevel<=u.REPORT&&console.debug(e),this.RemoteLog(u.REPORT,e,!0)},Pe.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(u.DEBUG,e.join(""));this.logLevel!==u.DISABLE&&this.logLevel<=u.DEBUG&&console.debug(n),this.log(u.DEBUG,n)},Pe.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(u.INFO,e.join(""));this.logLevel!==u.DISABLE&&this.logLevel<=u.INFO&&console.info(n),this.log(u.INFO,n)},Pe.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(u.WARN,e.join(""));this.logLevel!==u.DISABLE&&this.logLevel<=u.WARN&&console.warn(n),this.log(u.WARN,n)},Pe.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.logParamList(u.ERROR,e.join(""));this.logLevel!==u.DISABLE&&this.logLevel<=u.ERROR&&(console.error(n),this.env%2===r.BROWSER&&window&&this.stateCenter.debug&&window.alert(e.join("").substr(e.join("").indexOf(" ")+1,4500))),this.log(u.ERROR,n)},Pe.prototype.log=function(e,t){this.logRemoteLevel!==u.DISABLE&&this.logRemoteLevel<=e&&(this.RemoteLog(e,t),this.zipLogContext)&&this.zipLogContext.saveLog(t)},Pe.prototype.setLogServer=function(e){if(this.isDestroy)return!1;try{return e.startsWith("wss:")?(this.logType=o.WEBSOCKET,this.netContext.openWebSocketLogServer(e)):e.startsWith("https:")?(this.logType=o.HTTPS,this.openHttpsLogServer(e)):this.logType=o.DISABLE,!0}catch(e){return this.error(JSON.stringify(e)),!1}},Pe.prototype.stopLogServer=function(){this.logType==o.WEBSOCKET?this.stopWebSocketServer():this.logType==o.HTTPS&&(this.SendHttpsLog(),this.stopHttpsServer()),this.logType=o.DISABLE},Pe.prototype.stopWebSocketServer=function(){this.netContext.stopWebSocketServer()},Pe.prototype.openHttpsLogServer=function(e){var t=this;(this.url=e)&&(this.stopHttpsServer(),this.logUploadTimer||(this.logUploadTimer=setInterval((function(){t.SendHttpsLog()}),this.logUploadInterval)))},Pe.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},Pe.prototype.RemoteLog=function(e,t,n){return void 0===n&&(n=!1),Re(this,void 0,void 0,(function(){return ke(this,(function(r){if(""!=this.url&&!this.isDestroy)if(this.logType==o.WEBSOCKET)this.RemoteWebSocketLog(e,t);else if(this.logType==o.HTTPS)this.RemoteHttpsLog(e,t,n);else if(this.logLevel!==u.DISABLE&&this.logLevel<=e)for(this.logCache.push(t);this.logCache.size()>this.logCacheMax;)this.logCache.pop();return[2]}))}))},Pe.prototype.clearLogCache=function(){var e=this;this.netContext.connected()&&this.logCache.clear().forEach((function(t){e.netContext.wsSend(t)}))},Pe.prototype.clearCache=function(){0!==this.logCache.size()&&this.clearLogCache()},Pe.prototype.saveLog=function(e){this.logCache.size()<this.logCacheMax&&this.logCache.push(e)},Pe.prototype.websocketSendLog=function(e){this.netContext.connected()?this.netContext.wsSend(e):this.saveLog(e)},Pe.prototype.RemoteWebSocketLog=function(e,t){return Re(this,void 0,void 0,(function(){var e;return ke(this,(function(n){return"string"==typeof t&&4e3<t.length?console.info("log over maximum, ignore"):this.configState.useStrategy&&this.env==r.BROWSER?this.netContext.addRemoteWsLog(t):this.netContext.closed()?(e=this.url,this.url="",this.setLogServer(e),this.saveLog(t)):this.netContext.connecting()?this.saveLog(t):this.netContext.connected()&&(this.clearCache(),this.websocketSendLog(t)),[2]}))}))},Pe.prototype.RemoteHttpsLog=function(e,t,n){this.logCache.push(t),(this.logCache.size()>=this.logCacheMax||!0===n)&&this.SendHttpsLog()},Pe.prototype.logParamList=function(e,t){var n={time:n=_(),level:e,action:(t=[t.substr(0,t.indexOf(" "))||t,t.substr(t.indexOf(" ")+1,4500)||t])[0],content:t[1],appid:this.appid,roomid:this.roomid,userid:this.userid,userName:this.userName,sessionid:this.sessionid};return JSON.stringify(n)},Pe.prototype.logReportParamList=function(e,t){var n=_(),i=this.env%2===r.BROWSER?"rtc":"ali";return t=Ae(Ae({},t),{time:n,level:e,console:i,appid:this.appid,room_id:this.roomid,roomid:this.roomid,userid:this.userid,id_name:this.userid,userName:this.userName,sessionid:this.sessionid,sdk_version:this.version,test_environment:this.stateCenter.testEnvironment,version:this.version,event_id:this.appid+"_"+this.userid+"_"+t.event_time+"_"+t.seq}),JSON.stringify(t)},Pe.prototype.SendHttpsLog=function(){0!=this.logCache.size()&&(this.env%2===r.BROWSER?this.SendHttpsLogWeb():this.SendHttpsLogWeChatMini())},Pe.prototype.SendHttpsLogWeb=function(){var e=this,t=this.logCache.buffer.join("\n"),n=this.logCache.buffer,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState){if(200==r.status){if(0==r.responseText.length)return;try{var t=JSON.parse(r.responseText).interval;"number"==typeof t&&e.logUploadInterval!==t&&(e.timeInterval=t,e.openHttpsLogServer(e.url))}catch(t){e.logCache.buffer=n.concat(e.logCache.buffer),console.log("send result failed "+t)}}else e.logCache.buffer=n.concat(e.logCache.buffer),console.log("send failed "+r.status);n=null}},r.open("POST",this.url,!0),0==this.env?r.send(t):1==this.env&&(r.setRequestHeader("content-type","application/json"),r.send(JSON.stringify({user_id:this.userid,log:t}))),this.logCache.buffer=[]},Pe.prototype.SendHttpsLogWeChatMini=function(){},Pe.prototype.destroy=function(){this.stopLogServer(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),s.instance=void 0,this.netContext.destroy(),this.zipLogContext&&this.zipLogContext.destroy(),this.url=""},Pe.logVersion="1.4.0",Pe);function Pe(e){var t=this;this.logLevel=u.INFO,this.logRemoteLevel=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.existUserID=!1,this.isDestroy=!1,this.logCacheMax=8192,this.innerLogger={debug:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.debug.apply(t,e)},info:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.info.apply(t,e)},warn:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.warn.apply(t,e)},error:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.error.apply(t,e)}},this.stateCenter=s.getInstance(),this.configState=new k,this.configState.env=e,this.logCache=new Z(this.configState),this.netContext=new b(this.logCache,this.configState,this.innerLogger),this.env==r.BROWSER&&Le.isEnvSupport()&&(this.zipLogContext=new Le(this.configState))}function Ze(e){this.configState=e,this.dbSaver=new D,this.logModel=new M(this.dbSaver),this._dbOpened=!1,this._dbTryOpen=!1,this.cache=new re,this.activating=!1,this.dbTaskQueue=new oe,this.uploadTaskQueue=new oe,this.zipLogEnabled=!1,this.userLastUploadTime=0,this.userLastUploadSuccess=!1,this.userUploading=!1,this.zipLogUploader=new ue(this.configState),this.zipLogBuilder=new Oe(this.configState)}function Me(e){this.configState=e,this.logCtx={},this.excludedKeys=["time","action","content","sdkid"],this.buildedCount=0,this.sdkid=crypto.getRandomValues(new Uint8Array(5)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():62<t?"-":"_")),"")}}],o={},r.m=i,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=10))},function(e,t,n){e.exports=function(e){for(var t=Math,n=e,r=n.lib,i=r.WordArray,o=r.Hasher,s=n.algo,a=[],u=0;u<64;u++)a[u]=4294967296*t.abs(t.sin(u+1))|0;var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this._hash.words,s=e[t+0],u=e[t+1],c=e[t+2],p=e[t+3],g=e[t+4],m=e[t+5],_=e[t+6],y=e[t+7],v=e[t+8],b=e[t+9],S=e[t+10],E=e[t+11],T=e[t+12],w=e[t+13],C=e[t+14],I=e[t+15],R=o[0],k=o[1],N=o[2],O=o[3];R=l(R,k,N,O,s,7,a[0]),O=l(O,R,k,N,u,12,a[1]),N=l(N,O,R,k,c,17,a[2]),k=l(k,N,O,R,p,22,a[3]),R=l(R,k,N,O,g,7,a[4]),O=l(O,R,k,N,m,12,a[5]),N=l(N,O,R,k,_,17,a[6]),k=l(k,N,O,R,y,22,a[7]),R=l(R,k,N,O,v,7,a[8]),O=l(O,R,k,N,b,12,a[9]),N=l(N,O,R,k,S,17,a[10]),k=l(k,N,O,R,E,22,a[11]),R=l(R,k,N,O,T,7,a[12]),O=l(O,R,k,N,w,12,a[13]),N=l(N,O,R,k,C,17,a[14]),R=h(R,k=l(k,N,O,R,I,22,a[15]),N,O,u,5,a[16]),O=h(O,R,k,N,_,9,a[17]),N=h(N,O,R,k,E,14,a[18]),k=h(k,N,O,R,s,20,a[19]),R=h(R,k,N,O,m,5,a[20]),O=h(O,R,k,N,S,9,a[21]),N=h(N,O,R,k,I,14,a[22]),k=h(k,N,O,R,g,20,a[23]),R=h(R,k,N,O,b,5,a[24]),O=h(O,R,k,N,C,9,a[25]),N=h(N,O,R,k,p,14,a[26]),k=h(k,N,O,R,v,20,a[27]),R=h(R,k,N,O,w,5,a[28]),O=h(O,R,k,N,c,9,a[29]),N=h(N,O,R,k,y,14,a[30]),R=d(R,k=h(k,N,O,R,T,20,a[31]),N,O,m,4,a[32]),O=d(O,R,k,N,v,11,a[33]),N=d(N,O,R,k,E,16,a[34]),k=d(k,N,O,R,C,23,a[35]),R=d(R,k,N,O,u,4,a[36]),O=d(O,R,k,N,g,11,a[37]),N=d(N,O,R,k,y,16,a[38]),k=d(k,N,O,R,S,23,a[39]),R=d(R,k,N,O,w,4,a[40]),O=d(O,R,k,N,s,11,a[41]),N=d(N,O,R,k,p,16,a[42]),k=d(k,N,O,R,_,23,a[43]),R=d(R,k,N,O,b,4,a[44]),O=d(O,R,k,N,T,11,a[45]),N=d(N,O,R,k,I,16,a[46]),R=f(R,k=d(k,N,O,R,c,23,a[47]),N,O,s,6,a[48]),O=f(O,R,k,N,y,10,a[49]),N=f(N,O,R,k,C,15,a[50]),k=f(k,N,O,R,m,21,a[51]),R=f(R,k,N,O,T,6,a[52]),O=f(O,R,k,N,p,10,a[53]),N=f(N,O,R,k,S,15,a[54]),k=f(k,N,O,R,u,21,a[55]),R=f(R,k,N,O,v,6,a[56]),O=f(O,R,k,N,I,10,a[57]),N=f(N,O,R,k,_,15,a[58]),k=f(k,N,O,R,w,21,a[59]),R=f(R,k,N,O,g,6,a[60]),O=f(O,R,k,N,E,10,a[61]),N=f(N,O,R,k,c,15,a[62]),k=f(k,N,O,R,b,21,a[63]),o[0]=o[0]+R|0,o[1]=o[1]+k|0,o[2]=o[2]+N|0,o[3]=o[3]+O|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296),s=r;n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,c=0;c<4;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,i,o,s){var a=e+(t&n|~t&r)+i+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,r,i,o,s){var a=e+(t&r|n&~r)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,n,r,i,o,s){var a=e+(t^n^r)+i+s;return(a<<o|a>>>32-o)+t}function f(e,t,n,r,i,o,s){var a=e+(n^(t|~r))+i+s;return(a<<o|a>>>32-o)+t}return n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c),e.MD5}(n(1))},function(e,t,n){e.exports=function(e){for(var t=e,n=t.lib.BlockCipher,r=t.algo,i=[],o=[],s=[],a=[],u=[],c=[],l=[],h=[],d=[],f=[],p=[],g=0;g<256;g++)p[g]=g<128?g<<1:g<<1^283;var m=0,_=0;for(g=0;g<256;g++){var y=_^_<<1^_<<2^_<<3^_<<4;i[m]=y=y>>>8^255&y^99,o[y]=m;var v=p[m],b=p[v],S=p[b],E=257*p[y]^16843008*y;s[m]=E<<24|E>>>8,a[m]=E<<16|E>>>16,u[m]=E<<8|E>>>24,c[m]=E,l[y]=(E=16843009*S^65537*b^257*v^16843008*m)<<24|E>>>8,h[y]=E<<16|E>>>16,d[y]=E<<8|E>>>24,f[y]=E,m?(m=v^p[p[p[S^v]]],_^=p[p[_]]):m=_=1}var T=[0,1,2,4,8,16,32,64,128,27,54],w=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<r;s++)s<n?o[s]=t[s]:(c=o[s-1],s%n?n>6&&s%n==4&&(c=i[c>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c]):(c=i[(c=c<<8|c>>>24)>>>24]<<24|i[c>>>16&255]<<16|i[c>>>8&255]<<8|i[255&c],c^=T[s/n|0]<<24),o[s]=o[s-n]^c);for(var a=this._invKeySchedule=[],u=0;u<r;u++){if(s=r-u,u%4)var c=o[s];else c=o[s-4];a[u]=u<4||s<=4?c:l[i[c>>>24]]^h[i[c>>>16&255]]^d[i[c>>>8&255]]^f[i[255&c]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,d,f,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,o,s,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],d=e[t+3]^n[3],f=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&d]^n[f++],m=r[l>>>24]^i[h>>>16&255]^o[d>>>8&255]^s[255&c]^n[f++],_=r[h>>>24]^i[d>>>16&255]^o[c>>>8&255]^s[255&l]^n[f++],y=r[d>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^n[f++];c=g,l=m,h=_,d=y}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^n[f++],m=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&c])^n[f++],_=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[f++],y=(a[d>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[f++],e[t]=g,e[t+1]=m,e[t+2]=_,e[t+3]=y},keySize:8});return t.AES=n._createHelper(w),e.AES}(n(1),(n(15),n(4),n(9),n(18)))},function(e,t,n){e.exports=n(1).enc.Utf8},function(e,t,n){function r(e){var t;return(c[e]||(t=c[e]={i:e,l:!1,exports:{}},u[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var i,o,s,a,u,c;e.exports=(i=n(8),o=n(4),s=n(5),a=n(6),u=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=t.ENUM_CONNECT_STATE=t.ENUM_NETWORK_STATE=t.SOCKET_DISCONNECT=t.errorList=t.Queue=t.getSeq=t.E_CLIENT_TYPE=t.ENUM_LOG_LEVEL=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.0.2",(i=t.ZEGO_ENV||(t.ZEGO_ENV={}))[i.BROWSER=0]="BROWSER",i[i.WEIXINMINI=1]="WEIXINMINI",(i=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[i.IE=0]="IE",i[i.FIREFOX=1]="FIREFOX",i[i.CHROME=2]="CHROME",i[i.SAFARI=3]="SAFARI",i[i.OPERA=4]="OPERA",i[i.WEIXIN=5]="WEIXIN",i[i.WEIXINMINI=6]="WEIXINMINI",i[i.UNKOWN=7]="UNKOWN",(i=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[i.DISABLE=0]="DISABLE",i[i.WEBSOCKET=1]="WEBSOCKET",i[i.HTTPS=2]="HTTPS",t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},(i=t.E_CLIENT_TYPE||(t.E_CLIENT_TYPE={}))[i.ClientType_None=0]="ClientType_None",i[i.ClientType_H5=1]="ClientType_H5",i[i.ClientType_SmallPragram=2]="ClientType_SmallPragram",i[i.ClientType_Webrtc=3]="ClientType_Webrtc",t.getSeq=(r=1,function(){return r++}),o.prototype.isEmpty=function(){return 0==this.items.length},o.prototype.enqueue=function(e){this.items.push(e)},o.prototype.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},o.prototype.front=function(){return this.isEmpty()?"No elements in Queue":this.items[0]},o.prototype.size=function(){return this.items.length},o.prototype.clear=function(){this.items=[]},o.prototype.all=function(){return this.items};var r,i=o;function o(){this.items=[],this.items=[]}t.Queue=i,t.errorList={TIMEOUT:{code:100001,msg:"network timeout"},DATAEXIST:{code:100002,msg:"data exist"},BROKEN:{code:100003,msg:"network broken"}},t.SOCKET_DISCONNECT=-1,(i=t.ENUM_NETWORK_STATE||(t.ENUM_NETWORK_STATE={}))[i.offline=0]="offline",i[i.online=1]="online",(i=t.ENUM_CONNECT_STATE||(t.ENUM_CONNECT_STATE={}))[i.disconnected=0]="disconnected",i[i.connecting=1]="connecting",i[i.connected=2]="connected",Object.defineProperty(a.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),a.prototype.hasNext=function(){return this.next&&this.next.id},a.prototype.hasPrev=function(){return this.prev&&this.prev.id};var s=a;function a(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function u(){this.start=new s,this.end=new s,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=s,u.prototype.insertBefore=function(e,t){return(t=new s(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},u.prototype.addLast=function(e){return this.insertBefore(this.end,e)},u.prototype.add=function(e){return this.addLast(e)},u.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},u.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},u.prototype.size=function(){return this._numNodes},u.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},u.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},u.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},u.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},u.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},u.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},u.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},u.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},u.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},u.prototype.push=function(e){return this.addLast(e)},u.prototype.unshift=function(e){this.insertBefore(0<this._numNodes?this.start.next:this.end,e)},u.prototype.pop=function(){return this.removeLast()},u.prototype.shift=function(){return this.removeFirst()},t.LinkedList=u},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=t.suppressInstrumentation=t.ROOT_CONTEXT=t.BaseContext=t.setSpan=t.getSpanContext=t.getSpan=t.createContextKey=void 0,n(16));function s(e){return Symbol.for(e)}var a=(t.createContextKey=s)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),u=s("OpenTelemetry Context Key SPAN");function c(e){return e.getValue(u)||void 0}function l(e){this.name=e,this.contextManager=new o.StackContextManager}t.getSpan=c,t.getSpanContext=function(e){return null==(e=c(e))?void 0:e.context()},t.setSpan=function(e,t){return e.setValue(u,t)},t.BaseContext=n=function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}},t.ROOT_CONTEXT=new n,t.suppressInstrumentation=function(e){return e.setValue(a,!0)},l.getInstance=function(e){return void 0===e&&(e="context"),this._instance||(this._instance=new l(e)),this._instance},l.prototype.active=function(){return this.contextManager.active()},l.prototype.with=function(e,t,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(r=this._getContextManager()).with.apply(r,i([e,t,n],o))},l.prototype._getContextManager=function(){return this.contextManager},t.ContextAPI=l},function(e,t,n){"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=t.TraceFlags=t.SpanKind=t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR",(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER",(i=r=t.TraceFlags||(t.TraceFlags={}))[i.NONE=0]="NONE",i[i.SAMPLED=1]="SAMPLED",t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:r.NONE}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ZegoLog=void 0,i.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.log(n)},i.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.debug(n)},i.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.info(n)},i.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.warn(n)},i.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join("");console.error(n)};var r=i;function i(){}r=new(t.ZegoLog=r),t.log=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FAIL_TIME=t.FAIL_MAX_COUNT=t.FAIL_COUNT=t.STORE_SIZE=t.CACHE_SIZE=t.BUCKET_CONFIG=t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={importantLevel:0,reportSize:3e3,reportNum:10,bps:16e3,netTimeout:10},t.BUCKET_CONFIG={bucketSize:1e4,tokensPerInterval:1600},t.CACHE_SIZE={totalAvailCache:102400,cacheMaxSize:2e4,cacheDelPer:.2},t.STORE_SIZE={totalDBSize:2048e3,storeDelPer:.2},t.FAIL_COUNT=5,t.FAIL_MAX_COUNT=10,t.FAIL_TIME=30},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.calculateMemSize=t.analyzeKey=t.getCurrentTime=t.getCurrentEnv=t.getBrowser=void 0,n(0)),o=r(n(31)),s=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,o=e.indexOf("Chrome")&&window.chrome,s=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?i.ZEGO_BROWSER_TYPE.IE:n?i.ZEGO_BROWSER_TYPE.FIREFOX:r?i.ZEGO_BROWSER_TYPE.OPERA:o?i.ZEGO_BROWSER_TYPE.CHROME:s?i.ZEGO_BROWSER_TYPE.SAFARI:e?i.ZEGO_BROWSER_TYPE.WEIXIN:i.ZEGO_BROWSER_TYPE.UNKOWN},t.getCurrentEnv=function(){var e=window.navigator.userAgent;return new Promise((function(t){-1==e.indexOf("MicroMessage")?t(i.ZEGO_ENV.BROWSER):wx.miniProgram.getEnv((function(e){}))}))},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(s[e.getMonth()+1]||e.getMonth()+1)+"/",(s[e.getDate()]||e.getDate())+" ",(s[e.getHours()]||e.getHours())+":",(s[e.getMinutes()]||e.getMinutes())+":",s[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.calculateMemSize=function(e){return o.default(e)},t.uuid=function(e,t){var n,r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||i.length,e)for(n=0;n<e;n++)o[n]=i[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(r=0|16*Math.random(),o[n]=i[19==n?3&r|8:r]);return o.join("")}},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};function o(e){var t,n,i;if(null!=e&&Array.isArray(e))try{for(var o=r(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(null!=a)if(i){if(typeof a!==i)return!1}else i=typeof a}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeAttributes=t.isAttributeValue=void 0,t.isAttributeValue=o,t.sanitizeAttributes=function(e){var t,n,s={};if(null!=e&&"object"==typeof e)try{for(var a=r(Object.entries(e)),u=a.next();!u.done;u=a.next()){var c=i(u.value,2),l=c[0],h=c[1];o(h)&&(s[l]=Array.isArray(h)?h.slice():h)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IdGenerator=void 0;var r=Array(32);function i(e){return function(){for(var t=0;t<2*e;t++)r[t]=Math.floor(16*Math.random())+48,58<=r[t]&&(r[t]+=39);return String.fromCharCode.apply(null,r.slice(0,2*e))}}t.IdGenerator=function(){this.generateTraceId=i(16),this.generateSpanId=i(8),this.generateEventId=i(4)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=t.SDK_INFO=t.SemanticResourceAttributes=void 0,t.SemanticResourceAttributes={PROCESS_RUNTIME_NAME:"process.runtime.name",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version"},t.SDK_INFO=((r={})[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]="opentelemetry",r[t.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]="browser",r[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]="webjs",r[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.VERSION,r),i.empty=function(){return i.EMPTY},i.createTelemetrySDKResource=function(){var e;return new i(((e={})[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE],e[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_NAME],e[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]=t.SDK_INFO[t.SemanticResourceAttributes.TELEMETRY_SDK_VERSION],e))},i.prototype.merge=function(e){return e&&Object.keys(e.attributes).length?new i(Object.assign({},this.attributes,e.attributes)):this},i.EMPTY=new i({});var r=i;function i(e){this.attributes=e}t.Resource=r},function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.Span=void 0,n(6)),s=n(1),a=n(2),u=n(7),c=n(17);function l(e,t,n,r,i,o,s,c){void 0===c&&(c=[]),this.attributes={},this.links=[],this.events=[],this.status={code:a.SpanStatusCode.UNSET},this.endTime=0,this._ended=!1,this._duration=0,this.exported=!0,this.contextAPI=e.context,this.reporter=e.reporter,this.spanProcessor=e.spanProcessor,this.parentTracer=e,this.name=n,this.level=r,this.spanContext=i,this.parentSpanId=s,this.kind=o,this.links=c,this.startTime=Date.now(),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._traceParams=e.getActiveTraceParams(),this._idGenerator=new u.IdGenerator}l.prototype.context=function(){return this.spanContext},l.prototype.setAttribute=function(e,t){return null==t||0===e.length||!o.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]=t),this},l.prototype.appendAttribute=function(e,t){return null==t||0===e.length||!o.isAttributeValue(t)||Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)||(this.attributes[e]&&Array.isArray(this.attributes[e])?this.attributes[e].push(t):this.attributes[e]=[t]),this},l.prototype.setAttributes=function(e){var t,n;try{for(var o=r(Object.entries(e)),s=o.next();!s.done;s=o.next()){var a=i(s.value,2);this.setAttribute(a[0],a[1])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},l.prototype.addEvent=function(e,t,n){this.events.length>=this._traceParams.numberOfEventsPerSpan&&this.events.shift();var r=this._idGenerator.generateEventId();return c.isTimeInput(t)&&(void 0===n&&(n=t),t=void 0),void 0===n&&(n=c.hrTime()),this.events.push({name:e,attributes:t,time:c.timeInputToHrTime(n),event_id:r}),this},l.prototype.setStatus=function(e){return this.status=e,this},l.prototype.updateName=function(e){return this.name=e,this},l.prototype.end=function(e){var t,n=this;this._isSpanEnded()||(this._ended=!0,this.resource=this.parentTracer.resource,this.spanProcessor.spanBeforeEnd&&this.spanProcessor.spanBeforeEnd(this),t=c.getCurrentTime(),this.setAttribute("e_time_s",t),this.endTime=Date.now(),this._duration=this.endTime-this.startTime,this.contextAPI.with(s.suppressInstrumentation(this.contextAPI.active()),(function(){var t=n.toReporterSpan(n);n.spanProcessor.spanEnd&&n.spanProcessor.spanEnd(t,n.level),t.droped||!1===e||(delete t.droped,n.reporter.report(JSON.stringify(t),n.level))})))},l.prototype.spanReport=function(){var e=this.toReporterSpan(this);this.reporter.report(JSON.stringify(e),this.level)},l.prototype.isRecording=function(){return!1===this._ended},Object.defineProperty(l.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),l.prototype._isSpanEnded=function(){return this._ended},l.prototype.toReporterSpan=function(e){var t=[],n=(e.events.forEach((function(e){var n={};Object.keys(e).forEach((function(t){"name"===t&&(n[t]=e[t]),"time"===t&&(n.timestamp=c.hrTimeToMilliseconds(e[t])),"attributes"===t&&(n.tags=e[t])})),t.push(n)})),[]);return e.links.forEach((function(e){n.push({span_id:e.context.spanId,trace_id:e.context.traceId})})),{trace_id:e.spanContext.traceId,parent_span_id:e.parentSpanId,name:e.name,span_id:e.spanContext.spanId,kind:e.kind,start_time:e.startTime,end_time:e.endTime,duration:e.duration,logs:t,tags:e.attributes,links:n}},t.Span=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSpan=void 0;var r=n(3),i=n(9);function o(e,t){this.spanId=e,this.span=t}o.prototype.setAttribute=function(e,t){var n=this;return this.span?this.span.setAttribute(e,t):this._activeSpan().then((function(){n.span&&n.span.setAttribute(e,t)})),this},o.prototype.setAttributes=function(e){var t=this;return this.span?this.span.setAttributes(e):this._activeSpan().then((function(){t.span&&t.span.setAttributes(e)})),this},o.prototype.appendAttribute=function(e,t){var n=this;return this.span?this.span.appendAttribute(e,t):this._activeSpan().then((function(){n.span&&n.span.appendAttribute(e,t)})),this},o.prototype.addEvent=function(e,t,n){var r=this;return this.span?this.span.addEvent(e,t,n):this._activeSpan().then((function(){r.span&&r.span.addEvent(e,t,n)})),this},o.prototype.setStatus=function(e){var t=this;return this.span?this.span.setStatus(e):this._activeSpan().then((function(){t.span&&t.span.setStatus(e)})),this},o.prototype.updateName=function(e){var t=this;return this.span?this.span.updateName(e):this._activeSpan().then((function(){t.span&&t.span.updateName(e)})),this},o.prototype.end=function(e){var t=this;void 0===e&&(e=!0),this.span?this.span.end(e):this._activeSpan(!0).then((function(){t.span&&t.span.end(e),t._spanEnd()}))},o.prototype.setSpanActive=function(e){this.activeCallback=e},o.prototype.setSpanEnd=function(e){this.endCallback=e},o.prototype.spanReport=function(){var e;null!=(e=this.span)&&e.spanReport()},o.prototype._spanEnd=function(){this._isSpanNoop()||(this.removeStoreItem(this.spanId),this.endCallback&&this.endCallback(this.spanInfo))},o.prototype._isSpanNoop=function(){return"noop"===this.spanId},o.prototype._activeSpan=function(e){var t=this;return void 0===e&&(e=!1),new Promise((function(n,r){t.store.getItem(t.spanId).then((function(r){var s=new i.Span(o.tracer,o.tracer.context.active(),r.name,r.level,r.spanContext,r.kind,r.parentSpanId,r.links);s.setStatus(r.status),s.setAttributes(r.attributes),t.span=s,t.activeCallback&&t.activeCallback(t.spanId,e),n()})).catch((function(e){r(e)}))}))},o.prototype.removeStoreItem=function(e){var t=this;this.store.getItem(e).then((function(n){n&&t.store.removeItem(e).then((function(){r.log.log("remove suc")})).catch((function(e){r.log.warn("remove fail")}))}))},t.ZegoSpan=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=t.ZEGO_ENV=void 0;var r,i,o=n(12),s=((i=r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[i.BROWSER=0]="BROWSER",i[i.WEIXINMINI=1]="WEIXINMINI",n(3)),a=(u.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.getStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},u.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,i){try{wx.setStorageSync(n.keyPrefix+e,t),r()}catch(r){i(r)}}))},u.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.removeStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},u.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},u.prototype.keys=function(){var e=this;return new Promise((function(t,n){try{var r=wx.getStorageInfoSync().keys,i=(s.log.warn("keys",r),[]);r.forEach((function(t){0==t.indexOf(e.keyPrefix)&&i.push(t.replace(e.keyPrefix,""))})),s.log.warn("keyArr",JSON.stringify(i)),i.sort(),t(i)}catch(t){n(t)}}))},u);function u(e){this.storeName=e,this.keyPrefix=e+"/"}t.ZegoWechatMiniStore=a,t.createZegoStore=function(e,t,n){return t===r.BROWSER?o.createInstance({name:e+":"+(n||"store")}):new a(e)}},function(e,t){e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=t.ZegoTracer=t.ZegoSpan=void 0;var r=n(14),i=(Object.defineProperty(t,"ZegoTracer",{enumerable:!0,get:function(){return r.ZegoTracer}}),n(46)),o=(Object.defineProperty(t,"DynamicCode",{enumerable:!0,get:function(){return i.DynamicCode}}),n(10));Object.defineProperty(t,"ZegoSpan",{enumerable:!0,get:function(){return o.ZegoSpan}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoTracer=void 0;var r=n(15),i=n(21),o=n(10),s=n(22),a=n(3),u=n(1),c=n(8),l=n(23),h=n(39),d=n(11),f=n(44),p=n(45);function g(){this._maxTracingSpanSize=s.DEFAULT_MAX_SPAN_SIZE,this.level=0,this.log=new f.ZegoLog,this.stateCenter=new p.StateCenter(this.log)}g.prototype.init=function(e){this.options=e,this.name=e.product,this.reporter=new l.ZegoDataReport(this.name,this.stateCenter),this.reporter.init({appID:e.appID,env:e.env||0,importantLevel:e.importantLevel,levels:e.levels,deviceID:e.deviceID,bps:e.bps,serverUrl:e.serverUrl}),this.tracer=new r.Tracer({name:this.name,version:e.version},{resource:new c.Resource(e.resources)},this.reporter,{spanStart:e.spanStart,spanBeforeEnd:e.spanBeforeEnd,spanEnd:e.spanEnd}),this.reporter.setProcessData(this.tracer.resource.attributes),this.initRoot(this.options),this.dyStore=d.createZegoStore(e.product+"_"+e.appID+"_dy",e.env||0)},g.prototype.initRoot=function(e){this.rootSpan=this.tracer.startSpan("root",0);var t=u.setSpan(this.tracer.context.active(),this.rootSpan);this.tracer.context._getContextManager()._currentContext=t,this.rootSpan.end()},g.prototype.createSpan=function(e,t,n){var r,c;return e<=this.level?(r=u.setSpan(this.tracer.context.active(),n&&n.parent?n.parent.span:this.rootSpan),c=[],n&&n.linkSpans&&(n.linkSpans.forEach((function(e){c.push({context:e.span.context()})})),delete n.linkSpans),t=this.tracer.startSpan(t,e,Object.assign({},n,{links:c}),r),e=new o.ZegoSpan(t.spanContext.spanId,t),o.ZegoSpan.tracer=this.tracer,e):(a.log.warn("createSpan level not fix"),new o.ZegoSpan(s.NOOP_SPAN_ID,new i.NoopSpan))},g.prototype.setLogger=function(e){this.stateCenter.logger=e},g.prototype.setTimeOffset=function(e){this.reporter.setTimeOffset(e)},g.prototype.setWaitNtpTimeout=function(e){this.reporter.setWaitNtpTimeout(e)},g.prototype.setLogLevel=function(e){return this.stateCenter._log.setLogLevel(e)},g.prototype.startReport=function(e){return this.reporter.startReport(e)},g.prototype.setConfig=function(e){this.reporter.setConfig(e)},g.prototype.loadJs=function(e,t,n,r,i,o){return h.loadJS(e,this.dyStore,t,n,r,i,o)},g.prototype.flush=function(e){this.reporter.flush(e)},g.prototype.setUnloadState=function(e){this.reporter.setUnloadState(e)},g.prototype.shutdown=function(){this.reporter.saveDataBeforeUnload()},g.prototype.destroy=function(){this.reporter.uninit()},g.prototype.setSampleConfig=function(e){this.level=e.level||this.level},g.prototype.setResource=function(e){this.tracer.setResource(e),this.reporter.setProcessData(this.tracer.resource.attributes)},g.prototype.setNetStateCheck=function(){this.reporter.setNetStateCheck()},t.ZegoTracer=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tracer=void 0;var r=n(6),i=n(1),o=n(2),s=n(7),a=n(8),u=n(9),c=n(18),l=n(19);function h(e,t,n,r){var o=l.mergeConfig(t);this._traceParams=o.traceParams,this._idGenerator=new s.IdGenerator,this.resource=null!=(o=t.resource)?o:a.Resource.createTelemetrySDKResource(),this.instrumentationLibrary=e,t=Math.random().toString(36).slice(-6),this.context=new i.ContextAPI(t),this.reporter=n,this.spanProcessor=r||{}}h.prototype.startSpan=function(e,t,n,s){var a,l,h,d=function(e,t){if(!e.root)return i.getSpanContext(t)}(n=void 0===n?{}:n,s=void 0===s?this.context.active():s),f=this._idGenerator.generateSpanId(),p=(d&&c.isSpanContextValid(d)?(a=d.traceId,l=d.traceState,h=d.spanId):a=this._idGenerator.generateTraceId(),d=null!=(d=n.kind)?d:o.SpanKind.INTERNAL,null!=(p=n.links)?p:[]),g=(n=r.sanitizeAttributes(n.attributes),o.TraceFlags.NONE);return(s=new u.Span(this,s,e,t,{traceId:a,spanId:f,traceFlags:g,traceState:l},d,h,p)).setAttributes(n),this.spanProcessor.spanStart&&this.spanProcessor.spanStart(s),s},h.prototype.setResource=function(e){this.resource=this.resource.merge(new a.Resource(e))},h.prototype.getActiveTraceParams=function(){return this._traceParams},t.Tracer=h},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.StackContextManager=void 0,n(1));function s(){this._enabled=!1,this._currentContext=o.ROOT_CONTEXT}s.prototype._bindFunction=function(e,t){function n(){for(var n=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.with(t,(function(){return e.apply(n,i)}))}void 0===t&&(t=o.ROOT_CONTEXT);var r=this;return Object.defineProperty(n,"length",{enumerable:!1,configurable:!0,writable:!1,value:e.length}),n},s.prototype.active=function(){return this._currentContext},s.prototype.bind=function(e,t){return void 0===(t=void 0===t?o.ROOT_CONTEXT:t)&&(t=this.active()),"function"==typeof e?this._bindFunction(e,t):e},s.prototype.disable=function(){return this._currentContext=o.ROOT_CONTEXT,this._enabled=!1,this},s.prototype.enable=function(){return this._enabled||(this._enabled=!0,this._currentContext=o.ROOT_CONTEXT),this},s.prototype.with=function(e,t,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];var a=this._currentContext;this._currentContext=e||o.ROOT_CONTEXT;try{return t.call.apply(t,i([n],r))}finally{this._currentContext=a}},t.StackContextManager=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentTime=t.isTimeInput=t.hrTimeToMilliseconds=t.hrTimeDuration=t.timeInputToHrTime=t.isTimeInputHrTime=t.hrTime=void 0;var r=Math.pow(10,9),i=["00","01","02","03","04","05","06","07","08","09"];function o(e){e/=1e3;var t=Math.trunc(e);return[t,Number((e-t).toFixed(9))*r]}function s(){var e,t=performance.timeOrigin;return"number"!=typeof t?(e=performance).timing&&e.timing.fetchStart:t}function a(e){var t=o(s()),n=(e=o("number"==typeof e?e:performance.now()),t[0]+e[0]);return r<(t=t[1]+e[1])&&(t-=r,n+=1),[n,t]}function u(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}t.hrTime=a,t.isTimeInputHrTime=u,t.timeInputToHrTime=function(e){if(u(e))return e;if("number"==typeof e)return(e<s()?a:o)(e);if(e instanceof Date)return o(e.getTime());throw TypeError("Invalid input type")},t.hrTimeDuration=function(e,t){var n=t[0]-e[0];return(t=t[1]-e[1])<0&&(--n,t+=r),[n,t]},t.hrTimeToMilliseconds=function(e){return Math.round(1e3*e[0]+e[1]/1e6)},t.isTimeInput=function(e){return u(e)||"number"==typeof e||e instanceof Date},t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(i[e.getMonth()+1]||e.getMonth()+1)+"/",(i[e.getDate()]||e.getDate())+" ",(i[e.getHours()]||e.getHours())+":",(i[e.getMinutes()]||e.getMinutes())+":",i[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0,n=n(2);var r=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(e){return r.test(e)&&e!==t.INVALID_TRACEID}function s(e){return i.test(e)&&e!==t.INVALID_SPANID}t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE},t.isValidTraceId=o,t.isValidSpanId=s,t.isSpanContextValid=function(e){return o(e.traceId)&&s(e.spanId)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeConfig=void 0;var r=n(20);t.mergeConfig=function(e){var t=Object.assign({},r.DEFAULT_CONFIG,e);return t.traceParams=Object.assign({},r.DEFAULT_CONFIG.traceParams,e.traceParams||{}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={traceParams:{numberOfAttributesPerSpan:128,numberOfLinksPerSpan:128,numberOfEventsPerSpan:128}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpan=void 0;var r=n(2);function i(e){void 0===e&&(e=r.INVALID_SPAN_CONTEXT),this._spanContext=e}i.prototype.context=function(){return this._spanContext},i.prototype.setAttribute=function(e,t){return this},i.prototype.appendAttribute=function(e,t){return this},i.prototype.setAttributes=function(e){return this},i.prototype.addEvent=function(e,t,n){return this},i.prototype.setStatus=function(e){return this},i.prototype.updateName=function(e){return this},i.prototype.end=function(e){},i.prototype.isRecording=function(){return!1},i.prototype.spanReport=function(){},i.prototype.recordException=function(e,t){},t.NoopSpan=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_SPAN_ID=t.SCHEDULED_DELAY_MILLIS=t.DEFAULT_MAX_SPAN_SIZE=t.readSpanKeys=void 0,t.readSpanKeys=["name","level","kind","spanContext","parentSpanId","startTime","endTime","status","attributes","links","events","duration","ended","resource","instrumentationLibrary"],t.DEFAULT_MAX_SPAN_SIZE=1e3,t.SCHEDULED_DELAY_MILLIS=3e3,t.NOOP_SPAN_ID="noop"},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=t.call(e,o)}catch(a){u=[6,a],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(s(arguments[t]));return e},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoDataReport=void 0,n(0)),l=n(24),h=n(30),d=n(38),f=n(5),p=n(4);function g(e,t){this.stateCenter=t,this.QUEUE_MAX=100,this.cacheMaxSize=p.CACHE_SIZE.cacheMaxSize,this.cacheDelPer=p.CACHE_SIZE.cacheDelPer,this.state="normal",this.forceDataTotalLen=0,this.reportPackagesSize=0,this.staticConfig={totalAvailCache:p.CACHE_SIZE.totalAvailCache,totalDBSize:p.STORE_SIZE.totalDBSize,bps:1600},this.dataInDb=[],this.listenerList={progressUpdate:[],forceResult:[],postFail:[],dataDroped:[]},this.tempBuffer=[],this.traceType={MEM_I_API:0,MEM_O_DONE:0,MEM_O_DUMP:0,MEM_I_LOAD:0,DB_O_DROP:0,DB_O_DONE:0,DB_I_BACKUP:0},this.isPaused=!1,this.pro="json",this.isLoadReportData=!1,this.dropCount=0,this.timeInterval=!1,this.isWaitNtpTimeout=!1,this.waitNtpTimeout=2e3,this.postDataState="",this.product=e,this.reportMap=new Map}g.prototype.init=function(e){return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){switch(n.label){case 0:return this.config=r(r({},p.DEFAULT_CONFIG),e),this.config.env%2!=1&&this.bindWindowListener(),this.zegoService=new l.ZegoService(this.config.env||c.ZEGO_ENV.BROWSER,this.config.bps||p.DEFAULT_CONFIG.bps,this.product,this.pro,this.stateCenter),this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token||"",appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.config.serverUrl&&this.zegoService.setLogServer(this.config.serverUrl),this.zegoService.setPostSucCallback(this.product,this.postSucHandler.bind(this)),this.zegoService.setPostFailCallback(this.product,(function(e){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this.stateCenter.logger.warn("zt.zd.i fail"),this.postDataState="fail",this.dropCount++,this.storePackagesDataToDB(e),[4,this.storePendingDataToDB(1)];case 1:return t.sent(),this._actionListener("postFail"),[2]}}))}))})),this.initPendingQueue(),this.storeHandler=new h.ZegoStoreHandler(this.product+"_"+this.config.appID+"_datareporter",f.uuid(6),this.config,this.traceType,this.staticConfig,this.stateCenter),this.storeHandler.setDropCallBack((function(e){t.traceType.DB_O_DROP+=f.calculateMemSize(e),t._actionListener("dataDroped",e)})),[4,this.storeHandler.loadPendingData()];case 1:return n.sent(),this.storeHandler.init().then((function(){t.loadReportData()})).catch((function(e){console.warn(e)})),this.startReportTimer(),this.setWaitNtpTimer(),this.checkCacheDataTimer(),[2]}}))}))},g.prototype.uninit=function(){this.isWaitNtpTimeout=!1,this.ntpTimer&&(clearTimeout(this.ntpTimer),this.ntpTimer=null),this.zegoService.destroy()},g.prototype.setConfig=function(e){"object"==typeof e&&"number"==typeof e.bps&&(this.config.bps=e.bps,this.zegoService.setBps(this.config.bps)),"object"==typeof e&&"number"==typeof e.totalDBSize&&(this.staticConfig.totalDBSize=e.totalDBSize),"object"==typeof e&&"string"==typeof e.serverUrl&&""!==e.serverUrl&&(this.config.serverUrl=e.serverUrl,this.zegoService.setLogServer(this.config.serverUrl))},g.prototype.pause=function(){this.isPaused=!0},g.prototype.resume=function(){this.isPaused=!1;var e=(t=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=t.size;this.checkPendingQueue(e,t)},g.prototype.startReport=function(e){var t=e.get("userID"),n=e.get("token");return!(!t||"string"!=typeof t||!n||"string"!=typeof n||(this.startCommonField=e,this.config.userID=t,this.config.token=n,this.zegoService.setLogUrlParams({product:this.product,signature:this.config.token,appid:this.config.appID,id_name:this.config.userID||"",deviceid:this.config.deviceID||""}),this.isWithNtp()&&this.bufferDump(),(t=e.get("serverUrl"))&&(this.config.serverUrl=t,this.zegoService.setLogServer(this.config.serverUrl)),this.isConfigOK(this.config)&&(e=(n=this.pendingQueue.getPendingDataInfo()).pendingDataSize,t=n.size,this.checkPendingQueue(e,t)),0))},g.prototype.setTimeOffset=function(e){var t=this;this.clientTimeOffset=e,this.tempBuffer.forEach((function(e){(e=e.data).tags.time_offset||(e.tags.time_offset=t.clientTimeOffset)})),this.config.userID&&this.bufferDump()},g.prototype.setProcessData=function(e){this.stateCenter.processData=e},g.prototype.on=function(e,t){return this._bindListener(e,t)},g.prototype.off=function(e,t){return this._deleteListener(e,t)},g.prototype.report=function(e,t){var n;if(15e3<e.length)return!1;try{n=JSON.parse(e)}catch(e){return!1}return this.stateCenter._log.debug(e+" "+t),(null!=n&&n.id_name||null!=(e=null==n?void 0:n.tags)&&e.id_name||this.config.userID)&&this.isWithNtp()?(null!=n&&n.id_name||null!=(e=null==n?void 0:n.tags)&&e.id_name?this.clientTimeOffset&&(n.tags.time_offset=this.clientTimeOffset):(this.clientTimeOffset&&(n.tags.time_offset=this.clientTimeOffset),n.tags.id_name=this.config.userID),this.dumpData(JSON.stringify(n),t)):this.tempBuffer.push({data:n,level:t}),!0},g.prototype.setUnloadState=function(e){this.unloadLevel=e,this.state="unload"},g.prototype.dumpData=function(e,t){var n=this,r=f.calculateMemSize(e),i=(this.traceType.MEM_I_API+=r,c.getSeq()),o=(new Date).getTime(),s={seq:i,content:e,level:t,timestamp:o};"unload"===this.state?void 0!==this.unloadLevel&&t<=this.unloadLevel?(this.storeHandler.saveDataToStorage(s),this.pendingQueue.enqueue(s,t)):this.stateCenter._log.debug("level is low"):t<=this.config.importantLevel?(s.key=t+"_"+o+"_"+i,this.dataInDb.push(s.key),this.storeHandler.storeData(s).then((function(e){n.pendingQueue.enqueue(s,t),n.traceType.DB_I_BACKUP+=r})).catch((function(e){var r=n.dataInDb.findIndex((function(e){return e===s.key}));-1<r&&n.dataInDb.splice(r,1),n.pendingQueue.enqueue(s,t)}))):this.pendingQueue.enqueue(s,t),"force"===this.state&&(o=f.calculateMemSize(e),this.forceDataTotalLen+=o)},g.prototype.isWithNtp=function(){return this.isWaitNtpTimeout||void 0!==this.clientTimeOffset},g.prototype.bufferDump=function(){var e,t=this.tempBuffer.shift();t&&(e=t.data,t=t.level,e.tags.id_name=this.config.userID,this.dumpData(JSON.stringify(e),t),this.bufferDump())},g.prototype.isConfigOK=function(e){return""!==e.userID&&""!==e.token&&""!==e.server},g.prototype.testSize=function(e){},g.prototype.flush=function(e){var t;"force"!==this.state&&(this.state="force",t=16e6,"object"==typeof e&&"number"==typeof e.bps&&(t=e.bps),this.zegoService.setBps(t),this.forceDataTotalLen=this.storeHandler.storeSize+this.pendingQueue.pendingDataSize+this.reportPackagesSize,t=(e=this.pendingQueue.getPendingDataInfo()).pendingDataSize,e=e.size,0<t?this.checkPendingQueue(t,e):this.loadReportData())},g.prototype.setWaitNtpTimeout=function(e){this.waitNtpTimeout=e},g.prototype.setWaitNtpTimer=function(){var e=this;this.ntpTimer=setTimeout((function(){e.isWaitNtpTimeout=!0,e.config.userID&&e.bufferDump()}),this.waitNtpTimeout)},g.prototype.startReportTimer=function(){var e=this,t=(this.stateCenter._log.debug("startReportTimer "+new Date),this.timeInterval=!0,(n=this.pendingQueue.getPendingDataInfo()).pendingDataSize),n=n.size;this.checkPendingQueue(t,n),this.reportTimer=window.setTimeout((function(){e.startReportTimer()}),3e4)},g.prototype.checkCacheDataTimer=function(){return i(this,void 0,void 0,(function(){var e,t,n=this;return o(this,(function(r){switch(r.label){case 0:return t=this.pendingQueue.getPendingDataInfo(),e=t.pendingDataSize,t=t.size,e>this.config.reportSize||t>this.config.reportNum?[4,this.checkPendingQueue(e,t)]:[3,2];case 1:return r.sent(),[3,3];case 2:this.loadReportData(),r.label=3;case 3:return this.checkDataTimer=window.setTimeout((function(){n.checkCacheDataTimer()}),15e3),[2]}}))}))},g.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i);navigator.userAgent.indexOf("Firefox"),window.addEventListener(t?"pagehide":"beforeunload",(function(){window.event&&(window.event.cancelBubble=!0),e.saveDataBeforeUnload()}))},g.prototype.saveDataBeforeUnload=function(){var e=(e=this.pendingQueue.readStoreData(1)).storeArr,t=(this.storeHandler.resetCommonStore(),[]);t.push.apply(t,a(e)),e=this.zegoService.readReportQueueData(),t.push.apply(t,a(e)),0<t.length&&this.storeHandler.storePendingData(t)},g.prototype.setNetStateCheck=function(){"fail"===this.postDataState&&this.zegoService.handleNetConnect()},g.prototype.postSucHandler=function(e,t,n){return i(this,void 0,void 0,(function(){var n,r,i,s,a,u=this;return o(this,(function(o){switch(o.label){case 0:for(this.stateCenter._log.debug("post suc"),this.postDataState="suc",e.forEach((function(e){u.traceType.MEM_O_DONE+=f.calculateMemSize(e.content)})),n=function(t){var n=e[t];r.storeHandler.removeDataItem(n).then((function(e){n.key&&u.reportMap.delete(n.key)})).catch((function(e){}))},r=this,i=0;i<e.length;i++)n(i);return this.reportPackagesSize-=t,a=this.pendingQueue.getPendingDataInfo(),s=a.pendingDataSize,a=a.size,s>this.config.reportSize||a>this.config.reportNum?[4,this.checkPendingQueue(s,a)]:[3,2];case 1:return o.sent(),[3,3];case 2:this.loadReportData(),o.label=3;case 3:return"force"===this.state&&0==this.reportPackagesSize&&(s=this.reportPackagesSize+this.pendingQueue.pendingDataSize+this.storeHandler.storeSize,a=1-Number((s/this.forceDataTotalLen).toFixed(2)),this.listenerList.progressUpdate&&this._actionListener("progressUpdate",a),0<this.storeHandler.storeSize)&&this.loadReportData((function(e){0===e&&(u.state="normal",u.zegoService.setBps(u.config.bps||p.DEFAULT_CONFIG.bps),u.listenerList.forceSuccessCallback)&&u._actionListener("forceResult","SUCCESS")})),[2]}}))}))},g.prototype.checkPendingQueue=function(e,t){return i(this,void 0,void 0,(function(){var n,r,i,s,a;return o(this,(function(o){switch(o.label){case 0:return e>this.config.reportSize||t>this.config.reportNum||["force","unload"].includes(this.state)||this.timeInterval?(this.timeInterval=!1,!this.isPaused&&this.config.userID&&this.config.token&&this.config.serverUrl?[3,3]:(this.stateCenter._log.debug("isPaused "+this.isPaused+" "+this.userID+" "+this.config.token+" "+this.config.serverUrl),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,2])):[3,7];case 1:o.sent(),o.label=2;case 2:return[2];case 3:return this.zegoService.reportAllowed()?[3,6]:(this.zegoService.resumeReport(),e>=this.cacheMaxSize||this.staticConfig.totalAvailCache<=0?[4,this.storePendingDataToDB(this.cacheDelPer)]:[3,5]);case 4:o.sent(),o.label=5;case 5:return[2];case 6:if(i=this.pendingQueue.readReportData(this.config.reportSize),n=i.totalLen,i=i.reportDataArr,n<=0)return[2];for(i=this.setCommonField(i),this.zegoService.report(r=i.packageArr,i=i.packageLen,this.product,"unload"===this.state),s=0;s<r.length;s++)this.reportMap.set((a=r[s]).key,a);this.reportPackagesSize+=i,this.pendingQueue.refresh(n),o.label=7;case 7:return[2]}}))}))},g.prototype.initPendingQueue=function(){var e=this;this.pendingQueue=new d.PendingQueue(this.config.levels,this.product,this.staticConfig,this.stateCenter),this.pendingQueue.setListener({enCallback:function(t,n,r){return i(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.checkPendingQueue(r,n)];case 1:return e.sent(),[2]}}))}))}})},g.prototype.loadDBDataToMem=function(){var e=this;this.storeHandler.readStoreDataItem().then((function(t){var n=f.calculateMemSize(t.content);e.traceType.MEM_I_LOAD+=n,e.pendingQueue.enqueue(t,t.level)})).catch((function(e){}))},g.prototype.storePendingDataToDB=function(e){return i(this,void 0,void 0,(function(){var t,n,r,i,s,a,c,l,h;return o(this,(function(d){switch(d.label){case 0:n=this.pendingQueue.readStoreData(e),t=n.totalLen,n=n.storeArr,r=function(e){var n,r;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,i.storeDataItem(e,t)];case 1:return o.sent(),n=e.level+"_"+e.timestamp+"_"+e.seq,-1<(r=i.dataInDb.findIndex((function(e){return e===n})))&&i.dataInDb.splice(r,1),[3,3];case 2:return o.sent(),[3,3];case 3:return[2]}}))},i=this,d.label=1;case 1:d.trys.push([1,6,7,8]),s=u(n),a=s.next(),d.label=2;case 2:return a.done?[3,5]:[5,r(c=a.value)];case 3:d.sent(),d.label=4;case 4:return a=s.next(),[3,2];case 5:return[3,8];case 6:return c=d.sent(),l={error:c},[3,8];case 7:try{a&&!a.done&&(h=s.return)&&h.call(s)}finally{if(l)throw l.error}return[7];case 8:return[2]}}))}))},g.prototype.storePackagesDataToDB=function(e){var t=this;e.length&&e.forEach((function(e){t.storeHandler.storeData(e).then((function(n){var r=f.calculateMemSize(e.content);t.traceType.MEM_O_DUMP+=r})).catch((function(e){}))}))},g.prototype.storeDataItem=function(e,t){var n=this;return new Promise((function(t,r){return i(n,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.storeHandler.storeData(e)];case 1:return i.sent(),n=f.calculateMemSize(e.content),this.traceType.MEM_O_DUMP+=n,t(),[3,3];case 2:return n=i.sent(),r(n),[3,3];case 3:return[2]}}))}))}))},g.prototype.loadReportData=function(e){var t=this;this.storeHandler.storeSize<=0||this.isLoadReportData||(this.isLoadReportData=!0,this.storeHandler.loadDBData(this.config.reportSize,5,Math.floor(this.cacheMaxSize/3),(function(e){return-1<t.dataInDb.indexOf(e)})).then((function(n){t.isLoadReportData=!1,n.datas.forEach((function(e){var n;t.reportMap.has(e.key)||t.pendingQueue.findInQueue(e)||(n=f.calculateMemSize(e.content),t.traceType.MEM_I_LOAD+=n,t.pendingQueue.enqueue(e,e.level),t.dataInDb.push(e.key))})),e&&e(n.len)})).catch((function(e){t.isLoadReportData=!1})))},g.prototype.setCommonField=function(e){var t=this,n=0;return e.forEach((function(e){var r,i,o=JSON.parse(e.content);if(t.startCommonField)try{for(var a=u(t.startCommonField),c=a.next();!c.done;c=a.next()){var l=s(c.value,2),h=l[0];"userID"!==h&&"token"!==h&&"serverUrl"!==h&&(o[h]=l[1])}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}n+=f.calculateMemSize(o),e.content=JSON.stringify(o)})),{packageArr:e,packageLen:n}},g.prototype._bindListener=function(e,t){return!!this.listenerList[e]&&"function"==typeof t&&(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0)},g.prototype._deleteListener=function(e,t){var n;return!!this.listenerList[e]&&(n=this.listenerList[e],t?n.splice(n.indexOf(t),1):this.listenerList[e]=[],!0)},g.prototype._actionListener=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.listenerList[e]&&this.listenerList[e].forEach((function(e){try{e.apply(void 0,a(t))}catch(e){}}))},t.ZegoDataReport=g},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoService=void 0,n(0)),s=n(25),a=n(29),u=n(4);function c(e,t,n,r,i){var a,u,c,l=this;this.env=e,this.product=n,this.pro=r,this.stateCenter=i,this.isDestroy=!1,this.websocket=null,this.packageLen=0,this.packagesDataSize=0,this.PACKAGE_MAX_LEN=5,this.msgID=0,this.logUploadTimer=null,this.logUploadInterval=1e4,this.logCacheSend=[],this.logCacheMax=100,this.reportDataCheckInterval=1e3,this.postSucCallbackList={},this.postFailCallbackList={},this.failCount=0,this.failStartTime=0,this.netWorkFail=!1,this.networkState=o.ENUM_NETWORK_STATE.online,this.state=o.ENUM_CONNECT_STATE.disconnected,this.wsFrequentShutdownCounter=(u=a=0,c=function(){u=a=0},{onOpen:function(){a=performance.now()},onClose:function(){0<a&&(performance.now()-a<100?(u++,l.stateCenter.logger.info("zt.rzs.wfsc frequently shutdown.")):c())},isOutOfMaxTimes:function(){return 10<=u}}),this.bindWindowListener(),this.networkState=o.ENUM_NETWORK_STATE.online,this.service=new s.LogService(e,n,r,i),this.setBps(t),this.reportQueue=new o.Queue}c.prototype.destroy=function(){var e;null!=(e=this.websocket)&&e.close(),this.service.closeSocket(),this.logUploadTimer&&clearTimeout(this.logUploadTimer),this.reportQueue.clear(),this.isDestroy=!0},c.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.networkState=o.ENUM_NETWORK_STATE.offline})),window.addEventListener("online",(function(t){e.handleNetConnect()}))},c.prototype.handleNetConnect=function(){this.networkState=o.ENUM_NETWORK_STATE.online;var e=this.url;this.url="",this.setLogServer(e),this.netWorkFail=!1},c.prototype.setLogServer=function(e){try{return e.startsWith("wss:")||e.startsWith("ws:")?(this.logType=o.ENUM_REMOTE_TYPE.WEBSOCKET,this.openWebSocketLogServer(e)):e.startsWith("https:")||e.startsWith("http:")?(this.logType=o.ENUM_REMOTE_TYPE.HTTPS,this.openHttpsLogServer(e)):this.logType=o.ENUM_REMOTE_TYPE.DISABLE,!0}catch(e){return!1}},c.prototype.setLogUrlParams=function(e){this.logParams=e},c.prototype.openWebSocketLogServer=function(e){var t=this;this.url!=e&&(this.url=e)&&(this.stopWebSocketServer(),this.logParams.id_name)&&(this.wsFrequentShutdownCounter.isOutOfMaxTimes()?(this.stateCenter.logger.warn("zt.rzs.owsls frequently shutdown too many times. cannot create socket anymore."),this.state=o.ENUM_CONNECT_STATE.disconnected):(this.state=o.ENUM_CONNECT_STATE.connecting,e=e+"?product="+this.logParams.product+"&appid="+this.logParams.appid+"&token="+encodeURIComponent(this.logParams.signature)+"&deviceid="+this.logParams.deviceid+"&id_name="+this.logParams.id_name,this.service.createSocket(e),this.service.openHandler((function(){t.service.onPush(),t.service.startCheck(),t.stateCenter.logger.info("zt.rzs.owsls socket open"),t.openHandler(),t.wsFrequentShutdownCounter.onOpen()})),this.service.closeHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket close "+JSON.stringify(e.code||e)),t.state=o.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket(),t.wsFrequentShutdownCounter.onClose()})),this.service.errorHandler((function(e){t.stateCenter.logger.warn("zt.rzs.owsls socket error "+JSON.stringify(e.code||e)),t.state=o.ENUM_CONNECT_STATE.disconnected,t.service.closeSocket()}))))},c.prototype.stopWebSocketServer=function(){this.service.closeSocket()},c.prototype.openHttpsLogServer=function(e){(this.url=e)&&this.stopHttpsServer()},c.prototype.stopHttpsServer=function(){this.logUploadTimer&&(clearInterval(this.logUploadTimer),this.logUploadTimer=null)},c.prototype.SendHttpsLog=function(e,t,n,r){this.env===o.ZEGO_ENV.BROWSER?this.SendHttpsLogWeb(e,t,n,r):this.SendHttpsLogWeChatMini(e,t,n,r)},c.prototype.SendHttpsLogWeb=function(e,t,n,r){var i=this,o=(e=JSON.stringify({body:{data:e}}),new XMLHttpRequest);o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status){if(0!=o.responseText.length)try{var e=JSON.parse(o.responseText).interval;"number"==typeof e&&i.logUploadInterval!==e&&i.openHttpsLogServer(i.url),n&&n()}catch(e){r&&r()}}else r&&r()},o.open("POST",this.url,!0),o.send(e)},c.prototype.SendHttpsLogWeChatMini=function(e,t,n,r){var i=this;e={appid:this.logParams.appid+"",timestamp:(new Date).getTime()+"",token:this.logParams.signature,id_name:this.logParams.id_name,product:this.logParams.product,message_id:++this.msgID,req_sdk:1,s:JSON.stringify({speed_detail:e})},wx.request({url:this.url,data:JSON.stringify(e),method:"POST",success:function(e){0!=e.data.length&&("number"==typeof(e=e&&e.data&&e.data.interval)&&i.logUploadInterval!==e&&i.openHttpsLogServer(i.url),n)&&n()},fail:function(e){r&&r()}})},c.prototype.openHandler=function(){this.state=o.ENUM_CONNECT_STATE.connected,this.startReport()},c.prototype.setPostSucCallback=function(e,t){this.postSucCallbackList[e]=t},c.prototype.setPostFailCallback=function(e,t){this.postFailCallbackList[e]=t},c.prototype.reportAllowed=function(){return this.packageLen<this.PACKAGE_MAX_LEN},c.prototype.report=function(e,t,n,r){this.packageLen++,this.packagesDataSize+=t,this.reportQueue.enqueue({reportDatas:e,dataLen:t,product:n}),this.netWorkFail=!1,this.failCount=0,this.failStartTime=0,this.startReport(r)},c.prototype.setBps=function(e){this.tokenBucket=new a.TokenBucket(u.BUCKET_CONFIG.bucketSize,e/8,"sec")},c.prototype.startReport=function(e){var t,n,r,i,s=this;this.isDestroy||(this.logType===o.ENUM_REMOTE_TYPE.WEBSOCKET&&this.state===o.ENUM_CONNECT_STATE.disconnected?(t=this.url,this.url="",this.setLogServer(t)):0<this.reportQueue.size()&&(t=this.reportQueue.dequeue(),n=t.reportDatas,r=t.dataLen,i=t.product,new Date,e?this.sendReport(n,r,i):this.tokenBucket.removeTokens(r,(function(){s.sendReport(n,r,i)}))))},c.prototype.failTooMuch=function(){if(this.failCount<=0)return!1;1==this.failCount&&(this.failStartTime=Date.now());var e=(Date.now()-this.failStartTime)/1e3;return this.failCount>=u.FAIL_COUNT&&e>u.FAIL_TIME||this.failCount>=u.FAIL_MAX_COUNT},c.prototype.sendReport=function(e,t,n){var r=this;this.reportData(e,t,n,(function(){r.failCount=0,r.failStartTime=0,r.packageLen--,r.packagesDataSize-=t,r.postSucCallbackList[n]&&r.postSucCallbackList[n](e,t,n)}),(function(i){var o;r.reportQueue.enqueue({reportDatas:e,dataLen:t,product:n}),r.failCount++,r.failTooMuch()?(r.netWorkFail=!0,o=r.decodeReportQueue(),Object.keys(r.postFailCallbackList).forEach((function(e){r.postFailCallbackList[n](o[e])}))):r.startReport()}))},c.prototype.resumeReport=function(){!0===this.netWorkFail&&this.networkState===o.ENUM_NETWORK_STATE.online&&(this.netWorkFail=!1,this.startReport())},c.prototype.reportData=function(e,t,n,r,i){var s=this,a=[];e.forEach((function(e){a.push(JSON.parse(e.content))})),this.logType==o.ENUM_REMOTE_TYPE.WEBSOCKET?this.networkState===o.ENUM_NETWORK_STATE.offline?i&&i(o.errorList.BROKEN):this.service.sendMessage("report",a,r,(function(e){var t;s.state===o.ENUM_CONNECT_STATE.disconnected&&e===o.SOCKET_DISCONNECT&&(t=s.url,s.url="",s.setLogServer(t)),i&&i(e)})):this.logType==o.ENUM_REMOTE_TYPE.HTTPS&&this.SendHttpsLog(a,t,r,(function(){i&&i()}))},c.prototype.unsigned2signed=function(e){var t=parseInt(e,10);if(256<t)return t%256;for(var n=[];0<t;)n.push(t%2!=0?1:0),t=Number(t/2);for(n.reverse();n.length<8;)n.unshift(0);var r="";if(1==(n=n.join("")).substr(0,1)){for(var i=1;i<n.length;i++)1==n.substr(i,1)?r+=0:r+=1;return"-"+(parseInt(r,2)+1)}for(i=0;i<n.length;i++)r+=n.substr(i,1);return parseInt(r,2)},c.prototype.decodeReportQueue=function(){for(var e={},t=this.reportQueue.size(),n=0;n<t;n++){var r,o=(r=this.reportQueue.dequeue()).reportDatas,s=r.dataLen;e[r=r.product]||(e[r]=[]),e[r]=i(e[r],o),this.reportQueue.enqueue({reportDatas:o,dataLen:s,product:r})}return e},c.prototype.readReportQueueData=function(){for(var e=[],t=this.reportQueue.size(),n=0;n<t;n++){var r=this.reportQueue.dequeue();e.push.apply(e,i(r.reportDatas))}return e},t.ZegoService=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogService=void 0;var r=n(26),i=n(4),o=n(0);function s(e,t,n,i){this.env=e,this.product=t,this.pro=n,this.stateCenter=i,this.service=new r.ZegoSocketService(this.env,this.product,this.pro,this.stateCenter),this.cmdSeq=0,this.responseRouters={}}s.prototype.handleSendCommandMsgRsp=function(e){var t,n,r=this,i=this.service.sendCommandMap[e.messageId||(null==(i=null==e?void 0:e.data)?void 0:i.message_id)];null!=i&&(n=i._data,delete this.service.sendCommandMap[e.messageId||(null==(t=null==e?void 0:e.data)?void 0:t.message_id)],this.service.sendCommandList.remove(i),0===e.code?setTimeout((function(){n&&null!=n.success&&n.success(e,r.cmdSeq)}),0):setTimeout((function(){n&&null!=n.error&&n.error(e,r.cmdSeq)}),0))},s.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){e.handleSendCommandMsgRsp(t)}},s.prototype.closeHandler=function(e){this.service.closeHandler(e)},s.prototype.openHandler=function(e){this.service.openHandler(e)},s.prototype.errorHandler=function(e){this.service.errorHandler(e)},s.prototype.getHeader=function(e){return{Protocol:"req",cmd:e,appid:123,seq:++this.cmdSeq,session_id:""}},s.prototype.startCheck=function(){this.service.startCheck()},s.prototype.stopCheck=function(){this.service.stopCheck()},s.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},s.prototype.createSocket=function(e){this.service.createSocket(e),this.responseRouters={}},s.prototype.closeSocket=function(){this.service.closeSocket()},s.prototype.sendMessage=function(e,t,n,r,s,a){return this.service.isDisConnect()?(r&&r(o.SOCKET_DISCONNECT),0):(s=s||this.getHeader(e),this.service.sendMessage(s,t,n,r,{timeOut:1e3*i.DEFAULT_CONFIG.netTimeout}))},s.prototype.on=function(e,t){this.responseRouters[e]=t},t.LogService=s},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSocketService=void 0,n(27)),o=n(0),s=n(28);function a(e,t,n,r){this.product=t,this.pro=n,this.stateCenter=r,this.socket=null,this.sendCommandList=new o.LinkedList,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=3e4,this.sendDataCheckInterval=2e3,this.ENV=e}a.prototype.createSocket=function(e){this.socket=i.createZegoWebSocket(e,this.ENV),this.socket.binaryType="arraybuffer"},a.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},a.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},a.prototype.sendMessage=function(e,t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o={timeOut:6e3});var a=r(r({},this.stateCenter.processData),{time_upload:Date.now()});return a={data:t={message_id:e.seq,product:this.product,s:JSON.stringify({speed_detail:t,process:a})},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:o.timeOut,success:n,error:i},o=this.sendCommandList.push(a),this.sendCommandMap[a.seq]=o,this.socket&&"pb"!==this.pro&&(this.stateCenter._log.debug("upload data",JSON.stringify(t)),n=s.deflate(JSON.stringify(t),{to:"string"}),this.socket.send(n)),e.seq},a.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(o.errorList.TIMEOUT,t._data.data.message_id,t._data.data.s)}),0),t=e.getFirst()},a.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),i=0;!(null==n||n._data&&n._data.sendTime+n._data.timeOut>r||(n._data&&delete t[n._data.data.message_id],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+this.sendDataDropTimeout<r||n&&n._data&&n._data.error&&n._data.error(o.errorList.TIMEOUT,n._data.data.message_id,n._data.data.s),++i>=this.sendDataCheckOnceCount));)n=e.getFirst()},a.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},a.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},a.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.responseHandler(),e(n)})},a.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t.data))),e.onMessage(t)})},a.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},a.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},a.prototype.onMessage=function(e){},t.ZegoSocketService=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoWebSocket=t.ZegoWeiXinMiniWebSocket=void 0;var r=n(0),i=(o.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},o.prototype.onopen=function(e){},o.prototype.onerror=function(e){},o.prototype.onclose=function(e){},o.prototype.onmessage=function(e){},o.prototype.send=function(e){this._websocket&&this._websocket.send({data:e})},o.prototype.close=function(){this._websocket&&this._websocket.close()},o);function o(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}t.ZegoWeiXinMiniWebSocket=i,t.createZegoWebSocket=function(e,t){return new(t===r.ZEGO_ENV.BROWSER?WebSocket:i)(e)}},function(e,t,n){!function(e){"use strict";function t(e){for(var t=e.length;0<=--t;)e[t]=0}var n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),r=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576),a=(t(s),new Array(60)),u=(t(a),new Array(512)),c=(t(u),new Array(256)),l=(t(c),new Array(29));t(l);var h,d,f,p=new Array(30);function g(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function m(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function _(e){for(var t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0}function y(e){8<e.bi_valid?Z(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function b(e,t,i){var o,s,a,u,h=0;if(0!==e.sym_next)for(;o=255&e.pending_buf[e.sym_buf+h++],o+=(255&e.pending_buf[e.sym_buf+h++])<<8,s=e.pending_buf[e.sym_buf+h++],0==o?D(e,s,t):(D(e,(a=c[s])+256+1,t),0!==(u=n[a])&&M(e,s-=l[a],u),a=P(--o),D(e,a,i),0!==(u=r[a])&&M(e,o-=p[a],u)),h<e.sym_next;);D(e,256,t)}function S(e,t){var n,r,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)G(e,o,n);for(i=u;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,G(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1];for(var l,h,d,f,p,g=e,m=t.dyn_tree,_=t.max_code,y=t.stat_desc.static_tree,v=t.stat_desc.has_stree,b=t.stat_desc.extra_bits,S=t.stat_desc.extra_base,E=t.stat_desc.max_length,T=0,w=0;w<=15;w++)g.bl_count[w]=0;for(m[2*g.heap[g.heap_max]+1]=0,l=g.heap_max+1;l<573;l++)(w=m[2*m[2*(h=g.heap[l])+1]+1]+1)>E&&(w=E,T++),m[2*h+1]=w,_<h||(g.bl_count[w]++,f=0,S<=h&&(f=b[h-S]),g.opt_len+=(p=m[2*h])*(w+f),v&&(g.static_len+=p*(y[2*h+1]+f)));if(0!==T){do{for(w=E-1;0===g.bl_count[w];)w--}while(g.bl_count[w]--,g.bl_count[w+1]+=2,g.bl_count[E]--,0<(T-=2));for(w=E;0!==w;w--)for(h=g.bl_count[w];0!==h;)(d=g.heap[--l])>_||(m[2*d+1]!==w&&(g.opt_len+=(w-m[2*d+1])*m[2*d],m[2*d+1]=w),h--)}B(o,c,e.bl_count)}function E(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++a<u&&i===s||(a<c?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=i,c=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4))}function T(e,t,n){var r,i,o=-1,s=t[1],a=0,u=7,c=4;for(0===s&&(u=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++a<u&&i===s)){if(a<c)for(;D(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==o&&(D(e,i,e.bl_tree),a--),D(e,16,e.bl_tree),M(e,a-3,2)):a<=10?(D(e,17,e.bl_tree),M(e,a-3,3)):(D(e,18,e.bl_tree),M(e,a-11,7));o=i,c=(a=0)===s?(u=138,3):i===s?(u=6,3):(u=7,4)}}function w(e,t,n,r){M(e,0+(r?1:0),3),y(e),Z(e,n),Z(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n}function C(e,t){return e.msg=X[t],t}function I(e){return 2*e-(4<e?9:0)}function R(e,t){j(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Te(e.strm)}function k(e,t){e.pending_buf[e.pending++]=t}function N(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function O(e,t){var n,r,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-me?e.strstart-(e.w_size-me):0,c=e.window,l=e.w_mask,h=e.prev,d=e.strstart+ge,f=c[o+s-1],p=c[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(n=t)+s]===p&&c[n+s-1]===f&&c[n]===c[o]&&c[++n]===c[o+1]){for(o+=2,n++;c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d;);if(r=ge-(d-o),o=d-ge,s<r){if(e.match_start=t,a<=(s=r))break;f=c[o+s-1],p=c[o+s]}}}while((t=h[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function L(e,t){for(var n,r,i,o=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,a=e.strm.avail_in;n=65535,!(e.strm.avail_out<(i=e.bi_valid+42>>3)||(n=(i=e.strm.avail_out-i)<(n=n>(r=e.strstart-e.block_start)+e.strm.avail_in?r+e.strm.avail_in:n)?i:n)<o&&(0===n&&t!==te||t===q||n!==r+e.strm.avail_in)||(s=t===te&&n===r+e.strm.avail_in?1:0,K(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Te(e.strm),r&&(n<r&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(we(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n),0!==s)););return(a-=e.strm.avail_in)&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart)&&(e.insert=e.strstart),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==q&&t!==te&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(e.strm.avail_in>(i=e.window_size-e.strstart)&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart)&&(e.insert=e.strstart),(i=i>e.strm.avail_in?e.strm.avail_in:i)&&(we(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),o=(i=65535<e.pending_buf_size-(i=e.bi_valid+42>>3)?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((r=e.strstart-e.block_start)>=o||(r||t===te)&&t!==q&&0===e.strm.avail_in&&r<=i)&&(K(e,e.block_start,n=i<r?i:r,s=t===te&&0===e.strm.avail_in&&n===r?1:0),e.block_start+=n,Te(e.strm)),s?3:1)}function A(e,t){for(var n,r;;){if(e.lookahead<me){if(Ce(e),e.lookahead<me&&t===q)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=Ee(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-me&&(e.match_length=O(e,n)),3<=e.match_length)if(r=J(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&3<=e.lookahead){for(e.match_length--;e.strstart++,e.ins_h=Ee(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ee(e,e.ins_h,e.window[e.strstart+1]);else r=J(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?1:2}function x(e,t){for(var n,r,i;;){if(e.lookahead<me){if(Ce(e),e.lookahead<me&&t===q)return 1;if(0===e.lookahead)break}if(n=0,3<=e.lookahead&&(e.ins_h=Ee(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-me&&(e.match_length=O(e,n),e.match_length<=5)&&(e.strategy===ce||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2),3<=e.prev_length&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-3,r=J(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=Ee(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(R(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=J(e,0,e.window[e.strstart-1]))&&R(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=J(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?1:2}t(p);var P=function(e){return e<256?u[e]:u[256+(e>>>7)]},Z=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},M=function(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Z(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},D=function(e,t,n){M(e,n[2*t],n[2*t+1])},U=function(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1},B=function(e,t,n){for(var r,i=new Array(16),o=0,s=1;s<=15;s++)i[s]=o=o+n[s-1]<<1;for(r=0;r<=t;r++){var a=e[2*r+1];0!==a&&(e[2*r]=U(i[a]++,a))}},G=function(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&v(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!v(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},W=!1,H=w,z=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0},V=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}()),F=function(e,t,n,r){var i=V,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},X={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Y={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},K=H,j=function(e,t,n,r){var i,u,c,l=0;if(0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){for(var t=4093624447,n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),S(e,e.l_desc),S(e,e.d_desc),l=function(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*o[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(u=e.static_len+3+7>>>3)<=(i=e.opt_len+3+7>>>3)&&(i=u)):i=u=n+5,n+4<=i&&-1!==t)w(e,t,n,r);else if(4===e.strategy||u===i)M(e,2+(r?1:0),3),b(e,s,a);else{M(e,4+(r?1:0),3);var h=e,d=(t=e.l_desc.max_code+1,n=e.d_desc.max_code+1,l+1);for(M(h,t-257,5),M(h,n-1,5),M(h,d-4,4),c=0;c<d;c++)M(h,h.bl_tree[2*o[c]+1],3);T(h,h.dyn_ltree,t-1),T(h,h.dyn_dtree,n-1),b(e,e.dyn_ltree,e.dyn_dtree)}_(e),r&&y(e)},J=function(e,t,n){return e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(c[n]+256+1)]++,e.dyn_dtree[2*P(t)]++),e.sym_next===e.sym_end},Q=function(e){M(e,2,3),D(e,256,s),16===e.bi_valid?(Z(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},q=Y.Z_NO_FLUSH,$=Y.Z_PARTIAL_FLUSH,ee=Y.Z_FULL_FLUSH,te=Y.Z_FINISH,ne=Y.Z_BLOCK,re=Y.Z_OK,ie=Y.Z_STREAM_END,oe=Y.Z_STREAM_ERROR,se=Y.Z_DATA_ERROR,ae=Y.Z_BUF_ERROR,ue=Y.Z_DEFAULT_COMPRESSION,ce=Y.Z_FILTERED,le=Y.Z_HUFFMAN_ONLY,he=Y.Z_RLE,de=Y.Z_FIXED,fe=Y.Z_UNKNOWN,pe=Y.Z_DEFLATED,ge=258,me=262,_e=42,ye=113,ve=666,be=function(e){for(var t=e.length;0<=--t;)e[t]=0},Se=function(e){for(var t,n,r=e.w_size,i=t=e.hash_size;n=e.head[--i],e.head[i]=r<=n?n-r:0,--t;);for(i=t=r;n=e.prev[--i],e.prev[i]=r<=n?n-r:0,--t;);},Ee=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},Te=function(e){var t=e.state,n=t.pending;0!==(n=n>e.avail_out?e.avail_out:n)&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending)&&(t.pending_out=0)},we=function(e,t,n,r){var i=e.avail_in;return 0===(i=r<i?r:i)?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=z(e.adler,t,i,n):2===e.state.wrap&&(e.adler=F(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Ce=function(e){var t,n,r=e.w_size;do{if(t=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-me)&&(e.window.set(e.window.subarray(r,r+r-t),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),Se(e),t+=r),0===e.strm.avail_in)break;if(t=we(e.strm,e.window,e.strstart+e.lookahead,t),e.lookahead+=t,3<=e.lookahead+e.insert)for(e.ins_h=e.window[n=e.strstart-e.insert],e.ins_h=Ee(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Ee(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<me&&0!==e.strm.avail_in)};function Ie(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}var Re=[new Ie(0,0,0,0,L),new Ie(4,4,8,4,A),new Ie(4,5,16,8,A),new Ie(4,6,32,32,A),new Ie(4,4,16,16,x),new Ie(8,16,32,32,x),new Ie(8,16,128,128,x),new Ie(8,32,128,256,x),new Ie(32,128,258,1024,x),new Ie(32,258,258,4096,x)];function ke(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),be(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ne=function(e){var t;return!e||!(t=e.state)||t.strm!==e||t.status!==_e&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ye&&t.status!==ve?1:0},Oe=function(e){if(Ne(e))return C(e,oe);e.total_in=e.total_out=0,e.data_type=fe;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?_e:ye,e.adler=2===t.wrap?0:1,t.last_flush=-2,function(e){if(!W){for(var t,o,y,v=new Array(16),b=0,S=0;S<28;S++)for(l[S]=b,t=0;t<1<<n[S];t++)c[b++]=S;for(c[b-1]=S,S=y=0;S<16;S++)for(p[S]=y,t=0;t<1<<r[S];t++)u[y++]=S;for(y>>=7;S<30;S++)for(p[S]=y<<7,t=0;t<1<<r[S]-7;t++)u[256+y++]=S;for(o=0;o<=15;o++)v[o]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,v[8]++;for(;t<=255;)s[2*t+1]=9,t++,v[9]++;for(;t<=279;)s[2*t+1]=7,t++,v[7]++;for(;t<=287;)s[2*t+1]=8,t++,v[8]++;for(B(s,287,v),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=U(t,5);h=new g(s,n,257,286,15),d=new g(a,r,0,30,15),f=new g(new Array(0),i,0,19,7),W=!0}e.l_desc=new m(e.dyn_ltree,h),e.d_desc=new m(e.dyn_dtree,d),e.bl_desc=new m(e.bl_tree,f),e.bi_buf=0,e.bi_valid=0,_(e)}(t),re},Le=function(e,t,n,r,i,o){if(!e)return oe;var s=1;if(t===ue&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),i<1||9<i||n!==pe||r<8||15<r||t<0||9<t||o<0||de<o||8===r&&1!==s)return C(e,oe);8===r&&(r=9);var a=new ke;return(e.state=a).strm=e,a.status=_e,a.wrap=s,a.gzhead=null,a.w_bits=r,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=i+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<i+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=t,a.strategy=o,a.method=n,(r=Oe(s=e))===re&&((s=s.state).window_size=2*s.w_size,be(s.head),s.max_lazy_match=Re[s.level].max_lazy,s.good_match=Re[s.level].good_length,s.nice_match=Re[s.level].nice_length,s.max_chain_length=Re[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),r};function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){}for(var xe=new Uint8Array(256),Pe=0;Pe<256;Pe++)xe[Pe]=252<=Pe?6:248<=Pe?5:240<=Pe?4:224<=Pe?3:192<=Pe?2:1;function Ze(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);for(var t,n,r,i,o=e.length,s=0,a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=i=0;i<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:(n<2048?t[i++]=192|n>>>6:(n<65536?t[i++]=224|n>>>12:(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63),t[i++]=128|n>>>6&63),t[i++]=128|63&n);return t}function Me(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}xe[254]=xe[254]=1;var De=Object.prototype.toString,Ue=Y.Z_NO_FLUSH,Be=Y.Z_SYNC_FLUSH,Ge=Y.Z_FULL_FLUSH,We=Y.Z_FINISH,He=Y.Z_OK,ze=Y.Z_STREAM_END,Ve=Y.Z_DEFAULT_COMPRESSION,Fe=Y.Z_DEFAULT_STRATEGY,Xe=Y.Z_DEFLATED;function Ye(e){this.options=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==Ae(n))throw new TypeError(n+"must be non-object");for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e}({level:Ve,method:Xe,chunkSize:16384,windowBits:15,memLevel:8,strategy:Fe},e||{});var t,n=((e=this.options).raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Me,this.strm.avail_out=0,Le(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy));if(n!==He)throw new Error(X[n]);if(e.header&&(t=e.header,Ne(r=this.strm)||2!==r.state.wrap||(r.state.gzhead=t)),e.dictionary){var r="string"==typeof e.dictionary?Ze(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if((n=function(e,t){var n=t.length;if(Ne(e))return oe;var r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==_e||r.lookahead)return oe;1===i&&(e.adler=z(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(0===i&&(be(r.head),r.strstart=0,r.block_start=0,r.insert=0),(o=new Uint8Array(r.w_size)).set(t.subarray(n-r.w_size,n),0),t=o,n=r.w_size);var o=e.avail_in,s=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ce(r);3<=r.lookahead;){for(var u=r.strstart,c=r.lookahead-2;r.ins_h=Ee(r,r.ins_h,r.window[u+3-1]),r.prev[u&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=u,u++,--c;);r.strstart=u,r.lookahead=2,Ce(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=a,e.avail_in=o,r.wrap=i,re}(this.strm,r))!==He)throw new Error(X[n]);this._dict_set=!0}}function Ke(e,t){if((t=new Ye(t)).push(e,!0),t.err)throw t.msg||X[t.err];return t.result}function je(e,t){return(t=t||{}).raw=!0,Ke(e,t)}function Je(e,t){return(t=t||{}).gzip=!0,Ke(e,t)}Ye.prototype.push=function(e,t){var n,r,i,o,s=this.strm,a=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?We:Ue,s.input="string"==typeof e?Ze(e):"[object ArrayBuffer]"===De.call(e)?new Uint8Array(e):e,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),(r===Be||r===Ge)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if((n=function(e,t){if(Ne(e)||ne<t||t<0)return e?C(e,oe):oe;var n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===ve&&t!==te)return C(e,0===e.avail_out?ae:oe);var r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Te(e),0===e.avail_out)return n.last_flush=-1,re}else if(0===e.avail_in&&I(t)<=I(r)&&t!==te)return C(e,ae);if(n.status===ve&&0!==e.avail_in)return C(e,ae);if(n.status===_e&&0===n.wrap&&(n.status=ye),n.status===_e&&(r=pe+(n.w_bits-8<<4)<<8,r|=(n.strategy>=le||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(r|=32),N(n,r+=31-r%31),0!==n.strstart&&(N(n,e.adler>>>16),N(n,65535&e.adler)),e.adler=1,n.status=ye,Te(e),0!==n.pending))return n.last_flush=-1,re;if(57===n.status)if(e.adler=0,k(n,31),k(n,139),k(n,8),n.gzhead)k(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),k(n,255&n.gzhead.time),k(n,n.gzhead.time>>8&255),k(n,n.gzhead.time>>16&255),k(n,n.gzhead.time>>24&255),k(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),k(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(k(n,255&n.gzhead.extra.length),k(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=F(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(k(n,0),k(n,0),k(n,0),k(n,0),k(n,0),k(n,9===n.level?2:n.strategy>=le||n.level<2?4:0),k(n,3),n.status=ye,Te(e),0!==n.pending)return n.last_flush=-1,re;if(69===n.status){if(n.gzhead.extra){for(var i=n.pending,o=(65535&n.gzhead.extra.length)-n.gzindex;n.pending+o>n.pending_buf_size;){var s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=F(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,Te(e),0!==n.pending)return n.last_flush=-1,re;i=0,o-=s}r=new Uint8Array(n.gzhead.extra),n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+o),n.pending),n.pending+=o,n.gzhead.hcrc&&n.pending>i&&(e.adler=F(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){var a,u=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>u&&(e.adler=F(e.adler,n.pending_buf,n.pending-u,u)),Te(e),0!==n.pending)return n.last_flush=-1,re;u=0}}while(a=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,k(n,a),0!=a);n.gzhead.hcrc&&n.pending>u&&(e.adler=F(e.adler,n.pending_buf,n.pending-u,u)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){var c,l=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>l&&(e.adler=F(e.adler,n.pending_buf,n.pending-l,l)),Te(e),0!==n.pending)return n.last_flush=-1,re;l=0}}while(c=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,k(n,c),0!=c);n.gzhead.hcrc&&n.pending>l&&(e.adler=F(e.adler,n.pending_buf,n.pending-l,l))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Te(e),0!==n.pending))return n.last_flush=-1,re;k(n,255&e.adler),k(n,e.adler>>8&255),e.adler=0}if(n.status=ye,Te(e),0!==n.pending)return n.last_flush=-1,re}if(0!==e.avail_in||0!==n.lookahead||t!==q&&n.status!==ve){if(r=0===n.level?L(n,t):n.strategy===le?function(e,t){for(var n;;){if(0===e.lookahead&&(Ce(e),0===e.lookahead)){if(t===q)return 1;break}if(e.match_length=0,n=J(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?1:2}(n,t):n.strategy===he?function(e,t){for(var n,r,i,o,s=e.window;;){if(e.lookahead<=ge){if(Ce(e),e.lookahead<=ge&&t===q)return 1;if(0===e.lookahead)break}if(e.match_length=0,3<=e.lookahead&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){for(o=e.strstart+ge;r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<o;);e.match_length=ge-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(3<=e.match_length?(n=J(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=J(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(R(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(R(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(R(e,!1),0===e.strm.avail_out)?1:2}(n,t):Re[n.level].func(n,t),3!==r&&4!==r||(n.status=ve),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),re;if(2===r&&(t===$?Q(n):t!==ne&&(K(n,0,0,!1),t===ee)&&(be(n.head),0===n.lookahead)&&(n.strstart=0,n.block_start=0,n.insert=0),Te(e),0===e.avail_out))return n.last_flush=-1,re}return t===te&&(n.wrap<=0||(2===n.wrap?(k(n,255&e.adler),k(n,e.adler>>8&255),k(n,e.adler>>16&255),k(n,e.adler>>24&255),k(n,255&e.total_in),k(n,e.total_in>>8&255),k(n,e.total_in>>16&255),k(n,e.total_in>>24&255)):(N(n,e.adler>>>16),N(n,65535&e.adler)),Te(e),0<n.wrap&&(n.wrap=-n.wrap),0===n.pending))?ie:re}(s,r))===ze)return 0<s.next_out&&this.onData(s.output.subarray(0,s.next_out)),o=void 0,n=Ne(i=this.strm)?oe:(o=i.state.status,i.state=null,o===ye?C(i,se):re),this.onEnd(n),this.ended=!0,n===He;if(0!==s.avail_out){if(0<r&&0<s.next_out)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},Ye.prototype.onData=function(e){this.chunks.push(e)},Ye.prototype.onEnd=function(e){e===He&&(this.result=function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),o=0,s=0,a=e.length;o<a;o++){var u=e[o];i.set(u,s),s+=u.length}return i}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Qe={Deflate:Ye,deflate:H=Ke,deflateRaw:je,gzip:Je,constants:Y};e.Deflate=Ye,e.constants=Y,e.default=Qe,e.deflate=H,e.deflateRaw=je,e.gzip=Je,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";function r(e,t,n,r){if(this.bucketSize=1,this.tokensPerInterval=1,this.interval=1e3,this.parentBucket=null,this.content=0,this.lastDrip=0,this.bucketSize=e,this.tokensPerInterval=t,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+n)}else this.interval=n;this.parentBucket=r,this.content=0,this.lastDrip=+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.TokenBucket=void 0,r.prototype.removeTokens=function(e,t){var n=this;return this.bucketSize?e>this.bucketSize?(setTimeout(t.bind(null,"Requested tokens "+e+" exceeds bucket size "+this.bucketSize,null),0),!1):(this.drip(),e>this.content?r():this.parentBucket?this.parentBucket.removeTokens(e,(function(i,o){return i?t(i,null):e>n.content?r():(n.content-=e,void t(null,Math.min(o,n.content)))})):(this.content-=e,setTimeout(t.bind(null,null,this.content),0),!0)):(setTimeout(t.bind(null,null,e,Number.POSITIVE_INFINITY),0),!0);function r(){var r=Math.ceil(n.interval/n.tokensPerInterval*(e-n.content));return setTimeout((function(){n.removeTokens(e,t)}),r),!1}},r.prototype.tryRemoveTokens=function(e){if(this.bucketSize){if(e>this.bucketSize)return!1;if(this.drip(),e>this.content)return!1;if(this.parentBucket&&!this.parentBucket.tryRemoveTokens(e))return!1;this.content-=e}return!0},r.prototype.drip=function(){var e,t;this.tokensPerInterval?(t=+new Date,e=Math.max(t-this.lastDrip,0),this.lastDrip=t,t=e*(this.tokensPerInterval/this.interval),this.content=Math.min(this.content+t,this.bucketSize)):this.content=this.bucketSize},t.TokenBucket=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=t.call(e,o)}catch(a){u=[6,a],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoStoreHandler=void 0,n(11)),a=n(5),u=n(4),c=o(n(12));function l(e,t,n,r,i,o){this.name=e,this.storeName=t,this.config=n,this.traceType=r,this.staticConfig=i,this.stateCenter=o,this.storeSize=0,this.storeTime=0,this.storeDelPer=u.STORE_SIZE.storeDelPer,this.updateTimeFreq=6e4,this.storeSleepInterval=6e5,this.droping=!1,this.bufferData=[],this.updateTimer=null,this.interSymbol="#",this.drops=[],this.storesKeys="",this.transStores=[],this.store=s.createZegoStore(e,n.env,t),this.commonStore=s.createZegoStore("data_common",n.env,"reporter")}Object.defineProperty(l.prototype,"KEY",{get:function(){return"z_t_"+this.config.appID},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"STORES_KEY",{get:function(){return"z_store_keys"},enumerable:!1,configurable:!0}),l.prototype.init=function(){return r(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),this.setCommonStoreState(),[4,this.transferStoreData()];case 1:return n.sent(),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 2:return(e=n.sent())?[3,4]:[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,t={storeSize:this.storeSize,lock:0,pros:1})];case 3:return n.sent(),[3,5];case 4:t="string"==typeof e?JSON.parse(e):e,this.storeSize=t.storeSize,n.label=5;case 5:return[3,7];case 6:return n.sent(),[3,7];case 7:return[2]}}))}))},l.prototype.uninit=function(){this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)},l.prototype.setCommonStoreState=function(){var e=this,t=(this.getStorage(this.STORES_KEY)||"").split(";");this.transStores=t.filter((function(t){return t.includes(e.config.appID+"")})),t=t.filter((function(t){return!t.includes(e.config.appID+"")})),this.storesKeys=t.join(";")},l.prototype.resetCommonStore=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return this.saveStorage(this.STORES_KEY,this.storesKeys+(0<this.storesKeys.length?";":"")+this.name+this.interSymbol+this.storeName),[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:0})];case 1:return e.sent(),[2]}}))}))},l.prototype.transferStoreData=function(){return r(this,void 0,void 0,(function(){var e,t,n,o,u=this;return i(this,(function(c){switch(c.label){case 0:return[4,this.commonStore.keys()];case 1:e=c.sent(),t=function(t){var o,c,l,h,d,f,p,g;return i(this,(function(m){switch(m.label){case 0:return(o=e[t])===n.name+n.interSymbol+n.storeName?[3,9]:[4,n.commonStore.getItem(o)];case 1:return(c="string"==typeof(c=m.sent())?JSON.parse(c):c).lock||c.pros&&!n.transStores.includes(o)?[3,9]:(h=o.split(n.interSymbol),[4,(d=s.createZegoStore(l=h[0],n.config.env,h=h[1])).keys()]);case 2:return 0!=(f=m.sent()).length?[3,3]:[3,8];case 3:return c.lock=1,[4,n.commonStore.setItem(o,c)];case 4:m.sent(),p=function(e){var t,o,s;return i(this,(function(c){switch(c.label){case 0:return[4,d.getItem(t=f[e])];case 1:return o=c.sent(),-1!==t.indexOf("pending")?o&&JSON.parse(o).forEach((function(e){return r(u,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})):(s=a.analyzeKey(t),n.storeData({level:s.level,timestamp:s.timestamp,seq:s=s.seq,content:o})),setTimeout((function(){return r(u,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,d.removeItem(t)];case 1:return e.sent(),[2]}}))}))}),300),[2]}}))},g=0,m.label=5;case 5:return g<f.length?[5,p(g)]:[3,8];case 6:m.sent(),m.label=7;case 7:return g++,[3,5];case 8:n.drops.push({name:l,storeName:h}),m.label=9;case 9:return[2]}}))},n=this,o=0,c.label=2;case 2:return o<e.length?[5,t(o)]:[3,5];case 3:c.sent(),c.label=4;case 4:return o++,[3,2];case 5:return this.transportStorageData(),setTimeout((function(){return r(u,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:if(!(e<this.drops.length))return[3,7];t=(n=this.drops[e]).name,n=n.storeName,r.label=2;case 2:return r.trys.push([2,5,,6]),[4,this.dropInstance(t,n)];case 3:return r.sent(),[4,this.commonStore.removeItem(t+this.interSymbol+n)];case 4:case 5:return r.sent(),[3,6];case 6:return e++,[3,1];case 7:return[2]}}))}))}),1e3),[2]}}))}))},l.prototype.dropInstance=function(e,t){return new Promise((function(n,r){c.default.dropInstance({name:e+":"+t}).then((function(){n()})).catch((function(e){r(e)}))}))},l.prototype.setDropCallBack=function(e){this.dropCallBack=e},l.prototype.storeData=function(e){var t=this;return new Promise((function(n,o){return r(t,void 0,void 0,(function(){var t,r,o,s,u=this;return i(this,(function(i){switch(i.label){case 0:r=e.content,o=(t=e.level)+"_"+(o=e.timestamp)+"_"+e.seq,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.store.getItem(o)];case 2:return i.sent()?(n(),[2]):[3,4];case 3:return i.sent(),[3,4];case 4:if(this.droping)return this.bufferData.push(e),[2];if(s=a.calculateMemSize(o)+a.calculateMemSize(r),this.staticConfig.totalDBSize-s<=0)return this.dropDBData(t,o,r).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),n(),[2];i.label=5;case 5:return i.trys.push([5,8,,9]),[4,this.store.setItem(o,r)];case 6:return i.sent(),this.storeSize+=s,this.staticConfig.totalDBSize-=s,[4,this.refreshStoreInfo()];case 7:return i.sent(),n(),[3,9];case 8:return"QuotaExceededError"===i.sent().name&&this.dropDBData(t,o,r).then((function(){u.droping=!1,u.bufferDump()})).catch((function(e){})),[3,9];case 9:return[2]}}))}))}))},l.prototype.loadPendingData=function(){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return[4,this.store.keys()];case 1:return t.sent().forEach((function(t){return r(e,void 0,void 0,(function(){var e,n=this;return i(this,(function(o){switch(o.label){case 0:return-1===t.indexOf("pending")?[3,3]:[4,this.store.getItem(t)];case 1:return(e=o.sent())?(JSON.parse(e).forEach((function(e){return r(n,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.storeData(e)];case 1:return t.sent(),[2]}}))}))})),[4,this.store.removeItem(t)]):[3,3];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))})),[2]}}))}))},l.prototype.storePendingData=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.store.setItem("pending"+(new Date).getTime(),JSON.stringify(e))];case 1:return t.sent(),[2]}}))}))},l.prototype.bufferDump=function(){return r(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return(e=this.bufferData.pop())?[4,this.storeData(e)]:[3,2];case 1:t.sent(),this.bufferDump(),t.label=2;case 2:return[2]}}))}))},l.prototype.dropDBData=function(e,t,n){return r(this,void 0,void 0,(function(){var e=this;return i(this,(function(o){return this.droping=!0,[2,new Promise((function(o,s){return r(e,void 0,void 0,(function(){var e,r,u,c,l;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,10,,11]),[4,this.store.keys()];case 1:(e=i.sent()).reverse(),r=Math.ceil(e.length*this.storeDelPer),u=0,i.label=2;case 2:return u<r?[4,this.store.getItem(e[u])]:[3,7];case 3:return null==(c=i.sent())?[3,6]:[4,this.store.removeItem(e[u])];case 4:return i.sent(),l=a.calculateMemSize(e[u])+a.calculateMemSize(c),this.staticConfig.totalDBSize+=l,this.storeSize-=l,[4,this.refreshStoreInfo()];case 5:i.sent(),this.dropCallBack(c),i.label=6;case 6:return u++,[3,2];case 7:return[4,this.store.setItem(t,n)];case 8:return i.sent(),this.storeSize+=a.calculateMemSize(t)+a.calculateMemSize(n),[4,this.refreshStoreInfo()];case 9:return i.sent(),o(),[3,11];case 10:return l=i.sent(),s(l),[3,11];case 11:return[2]}}))}))}))]}))}))},l.prototype.removeDataItem=function(e){var t=this;return new Promise((function(n,o){return r(t,void 0,void 0,(function(){var t,r,s,u,c;return i(this,(function(i){switch(i.label){case 0:t=(t=e.level)+"_"+(s=e.timestamp)+"_"+(u=e.seq),i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this.store.getItem(t)];case 2:return(r=i.sent())?[4,this.store.removeItem(t)]:[3,5];case 3:return i.sent(),s=a.calculateMemSize(1==this.config.env?JSON.parse(r):r),u=a.calculateMemSize(t)+s,this.storeSize-=u,this.staticConfig.totalDBSize+=u,this.traceType.DB_O_DONE+=u,[4,this.refreshStoreInfo()];case 4:i.sent(),n(),i.label=5;case 5:return[3,7];case 6:return c=i.sent(),o(c),[3,7];case 7:return[2]}}))}))}))},l.prototype.refreshStoreInfo=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,this.commonStore.getItem(this.name+this.interSymbol+this.storeName)];case 1:return e.sent()?[4,this.commonStore.setItem(this.name+this.interSymbol+this.storeName,{storeSize:this.storeSize,lock:0,pros:1})]:[3,3];case 2:e.sent(),e.label=3;case 3:return[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},l.prototype.readStoreDataItem=function(){var e=this;return new Promise((function(t,n){return r(e,void 0,void 0,(function(){var e,r,o,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,this.store.keys()];case 1:return e=i.sent(),[4,this.store.getItem(e[0])];case 2:return r=i.sent(),o=a.analyzeKey(e[0]),t({level:s=o.level,timestamp:o.timestamp,seq:o=o.seq,content:r}),[3,4];case 3:return s=i.sent(),n(s),[3,4];case 4:return[2]}}))}))}))},l.prototype.loadDBData=function(e,t,n,o){var s=this;return new Promise((function(u,c){return r(s,void 0,void 0,(function(){var r,s,l,h,d,f,p,g,m,_;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),[4,this.store.keys()];case 1:r=i.sent(),s=[],f=d=h=l=0,i.label=2;case 2:return f<r.length?o(r[f])?[3,4]:[4,this.store.getItem(r[f])]:[3,5];case 3:if(null==(p=i.sent()))return[3,4];if(g=a.analyzeKey(r[f]),s.push({level:m=g.level,timestamp:_=g.timestamp,seq:g=g.seq,content:p,key:r[f]}),m=a.calculateMemSize(p),h+=m,e<=(l+=m)&&(l=0,d++),t<=d&&n<=h)return[3,5];i.label=4;case 4:return f++,[3,2];case 5:return u({datas:s,len:h}),[3,7];case 6:return _=i.sent(),c(_),[3,7];case 7:return[2]}}))}))}))},l.prototype.sortKeys=function(e,t){void 0===t&&(t=!1),e.sort((function(e,t){return e=e.split("_"),+(t=t.split("_"))[0]-+e[0]||+t[1]-+e[1]||+t[2]-+e[2]})),t&&e.reverse()},l.prototype.saveStorage=function(e,t){try{localStorage.setItem(e,t)}catch(e){this.stateCenter._log.debug("storage set err")}},l.prototype.getStorage=function(e){try{return localStorage.getItem(e)}catch(e){this.stateCenter._log.debug("storage get err")}},l.prototype.saveDataToStorage=function(e){try{this.saveStorage(this.KEY+"_"+e.level+"_"+e.timestamp+"_"+e.seq,e.content)}catch(e){this.stateCenter._log.debug("saveDataToStorage "+JSON.stringify(e))}},l.prototype.transportStorageData=function(){for(var e=[],t=0;t<localStorage.length;t++){var n,r,i,o,s=localStorage.key(t);this.stateCenter._log.debug("transportStorageData "+s),null!=s&&s.startsWith(this.KEY)&&(i=s.replace(this.KEY+"_",""),n=(i=a.analyzeKey(i)).level,r=i.timestamp,i=i.seq,"string"==typeof(o=this.getStorage(s))&&this.storeData({level:n,timestamp:r,seq:i,content:o}),e.push(s))}setTimeout((function(){for(var t=0;t<e.length;t++)localStorage.removeItem(e[t])}),100)},t.ZegoStoreHandler=l},function(e,t,n){"use strict";var r=n(32),i=n(33).Buffer;function o(e){return function(t){if(i.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*r.STRING;case"boolean":return r.BOOLEAN;case"number":return r.NUMBER;case"symbol":return Symbol.keyFor&&Symbol.keyFor(t)?Symbol.keyFor(t).length*r.STRING:(t.toString().length-8)*r.STRING;case"object":if(Array.isArray(t))return t.map(o(e)).reduce((function(e,t){return e+t}),0);var n=e,s=t;if(null==s)return 0;for(var a=0,u=function(e){var t,n=[];for(t in e)n.push(t);return Object.getOwnPropertySymbols&&(e=Object.getOwnPropertySymbols(e),Array.prototype.push.apply(n,e)),n}(s),c=0;c<u.length;c++){var l=u[c];if("object"==typeof s[l]&&null!==s[l]){if(n.has(s[l]))continue;n.add(s[l])}a+=o(n)(l);try{a+=o(n)(s[l])}catch(n){n instanceof RangeError&&(a=0)}}return a;default:return 0}}}e.exports=function(e){return o(new WeakSet)(e)}},function(e,t){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},function(e,t,n){"use strict";(function(e){var r=n(35),i=n(36),o=n(37);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(e=null===e?new u(t):e).length=t,e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"!=typeof e)return c(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var i=e,s=t,c=n;if(c<0||s.byteLength<c)throw new RangeError("'offset' is out of bounds");if(s.byteLength<c+(r||0))throw new RangeError("'length' is out of bounds");return s=void 0===c&&void 0===r?new Uint8Array(s):void 0===r?new Uint8Array(s,c):new Uint8Array(s,c,r),u.TYPED_ARRAY_SUPPORT?(i=s).__proto__=u.prototype:i=d(i,s),i}if("string"!=typeof t){if(c=e,u.isBuffer(r=t))return 0!==(c=a(c,s=0|f(r.length))).length&&r.copy(c,0,0,s),c;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(s=r.length)!=s?a(c,0):d(c,r);if("Buffer"===r.type&&o(r.data))return d(c,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(i=e,r=t,u.isEncoding(e="string"==typeof(e=n)&&""!==e?e:"utf8"))return(r=(i=a(i,t=0|p(r,e))).write(r,e))!==t?i.slice(0,r):i;throw new TypeError('"encoding" must be a valid string encoding')}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=a(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return O(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):_(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var h=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){h=!1;break}if(h)return l}return-1}function y(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,h=239<c?4:223<c?3:191<c?2:1;if(i+h<=n)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:s=e[i+2],128==(192&(o=e[i+1]))&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:s=e[i+2],a=e[i+3],128==(192&(o=e[i+1]))&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,h=1):65535<l&&(r.push((l-=65536)>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}var d=r,f=d.length;if(f<=b)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=b));return p}t.Buffer=u,t.SlowBuffer=function(e){return u.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0}),u.alloc=function(e,t,n){return l(e),e<=0||void 0===t?a(null,e):"string"==typeof n?a(null,e).fill(t,n):a(null,e).fill(t)},u.allocUnsafe=function(e){return h(null,e)},u.allocUnsafeSlow=function(e){return h(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=u.allocUnsafe(t),r=0,i=0;i<e.length;++i){var s=e[i];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?v(this,0,e):function(e,t,n){var i,o,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=t,u=n,c=this.length;(!u||u<0||c<u)&&(u=c);for(var l="",h=a=!a||a<0?0:a;h<u;++h)l+=(o=this[h])<16?"0"+o.toString(16):o.toString(16);return l;case"utf8":case"utf-8":return v(this,t,n);case"ascii":c=t;for(var d=n,f="",p=(d=Math.min(this.length,d),c);p<d;++p)f+=String.fromCharCode(127&this[p]);return f;case"latin1":case"binary":a=t;for(var g=n,m="",_=(g=Math.min(this.length,g),a);_<g;++_)m+=String.fromCharCode(this[_]);return m;case"base64":return y=this,i=n,0===(b=t)&&i===y.length?r.fromByteArray(y):r.fromByteArray(y.slice(b,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var y=t,b=n,S=this.slice(y,b),E="",T=0;T<S.length;T+=2)E+=String.fromCharCode(S[T]+256*S[T+1]);return E;default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(u.isBuffer(e))return this===e||0===u.compare(this,e);throw new TypeError("Argument must be a Buffer")},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n)&&(e+=" ... "),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),h=0;h<a;++h)if(c[h]!==l[h]){o=c[h],s=l[h];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u,c=!1;;)switch(r){case"hex":var l,h=e,d=n,f=(l=Number(t)||0,this.length-l);if((!d||f<(d=Number(d)))&&(d=f),(f=h.length)%2!=0)throw new TypeError("Invalid hex string");f/2<d&&(d=f/2);for(var p=0;p<d;++p){var g=parseInt(h.substr(2*p,2),16);if(isNaN(g))return p;this[l+p]=g}return p;case"utf8":case"utf-8":return s=n,L(N(e,(o=this).length-(f=t)),o,f,s);case"ascii":case"latin1":case"binary":return y(this,e,t,n);case"base64":return o=this,s=t,a=n,L(O(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=n,L(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,this.length-(a=t)),this,a,u);default:if(c)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),c=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,n,r,i,o){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function T(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function w(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function C(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,o){return o||C(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,o){return o||C(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=u.prototype;else for(var r=t-e,i=new u(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||S(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||S(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||S(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||S(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},u.prototype.readInt8=function(e,t){return t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){return t||S(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},u.prototype.readInt16BE=function(e,t){return t||S(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},u.prototype.readInt32LE=function(e,t){return t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||S(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||S(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||E(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):w(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||E(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||E(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):T(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):T(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):w(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||E(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):w(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length&&(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(!(n<=t))if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=u.isBuffer(e)?e:N(new u(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var k=/[^+\/0-9A-Za-z-_]/g;function N(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function O(e){return r.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(34))},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){return 3*((e=u(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){for(var t,n=(r=u(e))[0],r=r[1],s=new o(3*(n+r)/4-r),a=0,c=0<r?n-4:n,l=0;l<c;l+=4)t=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===r&&(t=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4,s[a++]=255&t),1===r&&(t=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(e,t){for(var n,i=[],o=s;o<t;o+=3)i.push(r[(n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return i.join("")}(e,a<s+16383?a:s+16383));return 1==i?o.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2==i&&o.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,d=n?-1:1;for(i=e[t+h],h+=d,o=i&(1<<-l)-1,i>>=-l,l+=a;0<l;o=256*o+e[t+h],h+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+h],h+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(i?-1:1);s+=Math.pow(2,r),o-=c}return(i?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1;for(o=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?h/r:h*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*o}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.PendingQueue=void 0,n(0)),s=n(5);function a(e,t,n,r){var i=this;this.levels=e,this.product=t,this.staticConfig=n,this.stateCenter=r,this.byteLength=0,this.size=0,this.pendingDataSize=0,this.cacheMap=new Map,e.forEach((function(e){i.cacheMap.set(e,new o.Queue)}))}a.prototype.enqueue=function(e,t){(t=this.cacheMap.get(t))&&!t.all().find((function(t){return t.content==e.content}))&&(t.enqueue(e),t=s.calculateMemSize(e.content),this.pendingDataSize+=t,this.size++,this.staticConfig.totalAvailCache-=t,this.enCallback)&&this.enCallback(this.byteLength,this.size,this.pendingDataSize)},a.prototype.dequeue=function(e){return e=null==(e=this.cacheMap.get(e))?void 0:e.dequeue(),this.size--,this.deCallback&&this.deCallback(),e},a.prototype.findInQueue=function(e){var t=null==(t=this.cacheMap.get(e.level))?void 0:t.all();return null==t?void 0:t.find((function(t){return t.key===e.key}))},a.prototype.readReportData=function(e){var t=i(this.cacheMap.entries());return t=this.readData(t,e,!0),this.reset(),{totalLen:t.totalLen,reportDataArr:t.resArr}},a.prototype.readStoreData=function(e){e=Math.ceil(this.pendingDataSize*e);var t=i(this.cacheMap.entries()).reverse();return t=this.readData(t,e,!1),this.refresh(t.totalLen),{totalLen:t.totalLen,storeArr:t.resArr}},a.prototype.readData=function(e,t,n){var i=[],o=0;e:for(var a=0;a<e.length;a++)for(var u=r(e[a],2),c=u[0],l=u[1];l.size();){var h=this.dequeue(c);if(i.push(h),t<(o+=s.calculateMemSize(h.content)))break e}return{totalLen:o,resArr:i}},a.prototype.decodeReportData=function(e){var t=this;e.forEach((function(e){t.enqueue(e,e.level)}))},a.prototype.setListener=function(e){this.enCallback=e.enCallback,this.deCallback=e.deCallback},a.prototype.getPendingDataInfo=function(){return{pendingDataSize:this.pendingDataSize,size:this.size}},a.prototype.refresh=function(e){this.pendingDataSize-=e,this.staticConfig.totalAvailCache+=e},a.prototype.reset=function(){this.byteLength=0},t.PendingQueue=a},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=t.call(e,o)}catch(a){u=[6,a],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.loadJS=void 0,n(40));function s(e,t,n){return(e=o.decrypt(e,t))&&o.hashMd5(e)===n?e:""}t.loadJS=function(e,t,n,o,a,u,c){var l=this;return new Promise((function(h,d){return r(l,void 0,void 0,(function(){var l,f,p,g,m;return i(this,(function(_){switch(_.label){case 0:if(l="dy",e)return[3,7];_.label=1;case 1:return _.trys.push([1,5,,6]),[4,t.getItem("code")];case 2:return f=_.sent(),[4,t.getItem("key")];case 3:return p=_.sent(),[4,t.getItem("hash")];case 4:g=_.sent();var y=s(f,p,g)||u,v=l,b=c,S=document.getElementsByTagName("HEAD").item(0),E=document.createElement("script");E.language="javascript",E.type="text/javascript",E.id=v,E.param=b;try{E.appendChild(document.createTextNode(y))}catch(v){E.text=y}return S.appendChild(E),h(),[3,6];case 5:return _.sent(),d(),[3,6];case 6:return[2];case 7:if(window.ActiveXObject)try{m=new ActiveXObject("Msxml2.XMLHTTP")}catch(_){m=new ActiveXObject("Microsoft.XMLHTTP")}else window.XMLHttpRequest&&(m=new XMLHttpRequest);return m.open("GET",n,!0),m.send(null),m.onreadystatechange=function(){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:if(4!=m.readyState)return[3,10];if(!(200<=m.status&&m.status<300||0==m.status||304==m.status))return[3,8];e.label=1;case 1:return e.trys.push([1,6,,7]),s(m.responseText,o,a)?[4,t.setItem("code",m.responseText)]:[3,5];case 2:return e.sent(),[4,t.setItem("key",o)];case 3:return e.sent(),[4,t.setItem("hash",a)];case 4:e.sent(),e.label=5;case 5:return h(),[3,7];case 6:return e.sent(),d(),[3,7];case 7:return[2];case 8:return d(),[2];case 9:return[3,11];case 10:case 11:return[2]}}))}))},[2]}}))}))}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.hashMd5=t.decrypt=void 0,r(n(41))),o=r(n(42)),s=r(n(43));t.decrypt=function(e,t){var n="";try{n=o.default.decrypt(e,t).toString(s.default)}catch(e){}return n},t.hashMd5=function(e){return i.default(e).toString()}},function(e,t){e.exports=o},function(e,t){e.exports=s},function(e,t){e.exports=a},function(e,t,n){"use strict";function r(){this.logLevel=t.ENUM_LOG_LEVEL.DISABLE}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=t.ENUM_LOG_LEVEL=void 0,t.ENUM_LOG_LEVEL={DEBUG:0,INFO:1,WARN:2,ERROR:3,REPORT:99,DISABLE:100,debug:0,info:1,warn:2,error:3,report:99,disable:100},r.prototype.setLogLevel=function(e){return void 0!==(e=t.ENUM_LOG_LEVEL[e])&&(this.logLevel=e,!0)},r.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.DEBUG&&console.debug(r)},r.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.log(r)},r.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.INFO&&console.info(r)},r.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.WARN&&console.warn(r)},r.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.join(" ");this.logLevel!==t.ENUM_LOG_LEVEL.DISABLE&&this.logLevel<=t.ENUM_LOG_LEVEL.ERROR&&console.error(r)},t.ZegoLog=r},function(e,t,n){"use strict";function r(e){this.logger=e,this._log=e}Object.defineProperty(t,"__esModule",{value:!0}),t.StateCenter=void 0,r.prototype.isLogin=function(){return!0},t.StateCenter=r},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicCode=void 0,n(3));function s(){this.init()}s.prototype.init=function(){window.dyObj={}},s.prototype.runExecution=function(e,t,n){e=new(Function.bind.apply(Function,i([void 0],e,[n])));try{e.apply(void 0,i(t))}catch(e){o.log.error(e)}},t.DynamicCode=s}],c={},r.m=u,r.c=c,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13))},function(e,n){e.exports=t},function(e,t,n){var r,i,o,s,a;e.exports=(e=n(1),n(16),n(17),r=(o=(n=e).lib).Base,i=o.WordArray,s=(o=n.algo).MD5,a=o.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,o=r.hasher.create(),s=i.create(),a=s.words,u=r.keySize,c=r.iterations;a.length<u;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();for(var l=1;l<c;l++)n=o.finalize(n),o.reset();s.concat(n)}return s.sigBytes=4*u,s}}),n.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)},e.EvpKDF)},function(e,t,n){function r(e){var t;return(a[e]||(t=a[e]={i:e,l:!1,exports:{}},s[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var i,o,s,a;e.exports=(i=n(0),o=n(2),s=[function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t,n){"use strict";var r,i,o,s,a,u,c,l;n.r(t),n.d(t,"ZegoConnectionAgent",(function(){return Ce})),n.d(t,"NetAgentPCRequest",(function(){return ge})),n.d(t,"NetAgentHttpRequest",(function(){return Se})),n.d(t,"BusinessService",(function(){return o})),n.d(t,"BrokenType",(function(){return g})),n.d(t,"NET_ACCESS_CONFIG",(function(){return ue})),n.d(t,"ConnectedType",(function(){return p})),n.d(t,"DisconnectedType",(function(){return f})),n.d(t,"Mode",(function(){return a})),n.d(t,"Method",(function(){return d})),(t=r=r||{})[t.offline=0]="offline",t[t.online=1]="online",(t=i=i||{})[t.MSG_TYPE_STREAM_CLOSED=2]="MSG_TYPE_STREAM_CLOSED",t[t.MSG_TYPE_CLOSE_CONNECTION=3]="MSG_TYPE_CLOSE_CONNECTION",t[t.MSG_TYPE_HTTP_REQUEST=4]="MSG_TYPE_HTTP_REQUEST",t[t.MSG_TYPE_HTTP_RESPONSE=5]="MSG_TYPE_HTTP_RESPONSE",t[t.MSG_TYPE_HB_REQUEST=12]="MSG_TYPE_HB_REQUEST",t[t.MSG_TYPE_HB_RESPONSE=13]="MSG_TYPE_HB_RESPONSE",t[t.MSG_TYPE_GET_CONFIG_REQUEST=14]="MSG_TYPE_GET_CONFIG_REQUEST",t[t.MSG_TYPE_GET_CONFIG_RESPONSE=15]="MSG_TYPE_GET_CONFIG_RESPONSE",t[t.MSG_TYPE_HTTP_REQUEST_ACK=16]="MSG_TYPE_HTTP_REQUEST_ACK",t[t.MSG_TYPE_PC_UPWARD_MESSAGE=17]="MSG_TYPE_PC_UPWARD_MESSAGE",t[t.MSG_TYPE_PC_UPWARD_MESSAGE_ACK=18]="MSG_TYPE_PC_UPWARD_MESSAGE_ACK",t[t.MSG_TYPE_PC_ESTABLISHED=19]="MSG_TYPE_PC_ESTABLISHED",t[t.MSG_TYPE_PC_BROKEN=20]="MSG_TYPE_PC_BROKEN",t[t.MSG_TYPE_PC_DOWNWARD_MESSAGE=21]="MSG_TYPE_PC_DOWNWARD_MESSAGE",t[t.MSG_TYPE_REDIRECT=22]="MSG_TYPE_REDIRECT",t[t.MSG_TYPE_GET_APPCONFIG_REQUEST=23]="MSG_TYPE_GET_APPCONFIG_REQUEST",t[t.MSG_TYPE_GET_APPCONFIG_RESPONSE=24]="MSG_TYPE_GET_APPCONFIG_RESPONSE",t[t.MSG_TYPE_PUSH_APPCONFIG=25]="MSG_TYPE_PUSH_APPCONFIG",t[t.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST=26]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST",t[t.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE=27]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE",t[t.MSG_TYPE_PUSH_EXCEPTION=30]="MSG_TYPE_PUSH_EXCEPTION",t[t.MSG_TYPE_HTTP_REQUEST2=33]="MSG_TYPE_HTTP_REQUEST2",t[t.MSG_TYPE_REDIRECT2=34]="MSG_TYPE_REDIRECT2",t[t.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2=35]="MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2",t[t.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2=36]="MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2",t[t.MSG_TYPE_GET_SVRADDR_REQUEST=39]="MSG_TYPE_GET_SVRADDR_REQUEST",t[t.MSG_TYPE_GET_SVRADDR_RESPONSE=40]="MSG_TYPE_GET_SVRADDR_RESPONSE",(t=y=y||{})[t.ACCESSHUB_INVALID_FRAME=2e4]="ACCESSHUB_INVALID_FRAME",t[t.ACCESSHUB_NEED_ENCRYPT=20001]="ACCESSHUB_NEED_ENCRYPT",t[t.ACCESSHUB_DECRYPT=20002]="ACCESSHUB_DECRYPT",t[t.ACCESSHUB_MSGTYPE=20003]="ACCESSHUB_MSGTYPE",t[t.ACCESSHUB_UNMARSHAL=20004]="ACCESSHUB_UNMARSHAL",t[t.ACCESSHUB_TIMEOUT=20005]="ACCESSHUB_TIMEOUT",t[t.ACCESSHUB_CONNECT=20006]="ACCESSHUB_CONNECT",t[t.ACCESSHUB_BROKEN=20007]="ACCESSHUB_BROKEN",t[t.ACCESSHUB_INTERNAL_ERROR=20008]="ACCESSHUB_INTERNAL_ERROR",t[t.ACCESSHUB_MARSHAL=20009]="ACCESSHUB_MARSHAL",t[t.ACCESSHUB_UNSUPPORTED_SERVICE=20010]="ACCESSHUB_UNSUPPORTED_SERVICE",t[t.ACCESSHUB_TOO_FREQUENTLY=20011]="ACCESSHUB_TOO_FREQUENTLY",t[t.ACCESSHUB_INVALID_APPID=20012]="ACCESSHUB_INVALID_APPID",t[t.ACCESSHUB_HB_TIMEOUT=20013]="ACCESSHUB_HB_TIMEOUT",t[t.ACCESSHUB_INVALID_SIGNATURE=20014]="ACCESSHUB_INVALID_SIGNATURE",(t=o=o||{})[t.SERVICE_UNSET=0]="SERVICE_UNSET",t[t.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",t[t.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",t[t.SERVICE_MIX=3]="SERVICE_MIX",t[t.SERVICE_ZEUS=4]="SERVICE_ZEUS",t[t.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",t[t.SERVICE_L3=6]="SERVICE_L3",t[t.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",t[t.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",t[t.SERVICE_ZIM=9]="SERVICE_ZIM",t[t.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",t[t.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",t[t.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",t[t.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",t[t.SERVICE_QUALITY=14]="SERVICE_QUALITY",t[t.SERVICE_SECURITY=15]="SERVICE_SECURITY",t[t.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",t[t.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",t[t.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",t[t.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",t[t.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",t[t.SERVICE_CDN=21]="SERVICE_CDN",t[t.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",t[t.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",t[t.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",t[t.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",t[t.SERVICE_ECHO=26]="SERVICE_ECHO",t[t.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",t[t.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(t=s=s||{})[t.ZEGOCONN_RUN_ENV_UNSET=0]="ZEGOCONN_RUN_ENV_UNSET",t[t.ZEGOCONN_RUN_ENV_BROWSER=1]="ZEGOCONN_RUN_ENV_BROWSER",t[t.ZEGOCONN_RUN_ENV_APPLET=2]="ZEGOCONN_RUN_ENV_APPLET",(t=a=a||{})[t.Mode_UNSET=0]="Mode_UNSET",t[t.MODE_ONLINE=1]="MODE_ONLINE",t[t.MODE_TEST=2]="MODE_TEST",t[t.MODE_ALPHA=3]="MODE_ALPHA",(t=u=u||{})[t.HTTP=0]="HTTP",t[t.PC=1]="PC",t[t.OTHER=2]="OTHER",(t=c=c||{})[t.NONE=0]="NONE",t[t.BROKEN=1]="BROKEN",t[t.DISCONNECT=2]="DISCONNECT",(t=l=l||{})[t.CONNECTED=0]="CONNECTED",t[t.DISCONNECT=1]="DISCONNECT",t[t.BROKEN=2]="BROKEN";var h,d,f,p,g,m=[y.ACCESSHUB_INVALID_APPID,y.ACCESSHUB_INVALID_SIGNATURE],_=((t=h=h||{})[t.ACTION_RESERVED=0]="ACTION_RESERVED",t[t.ACTION_DISPATCH=1]="ACTION_DISPATCH",t[t.ACTION_RETRY=2]="ACTION_RETRY",t[t.ACTION_NEXT_NODE=3]="ACTION_NEXT_NODE",t[t.ACTION_ABORT=4]="ACTION_ABORT",t[t.ACTION_NEXT_GROUP=5]="ACTION_NEXT_GROUP",(y=d=d||{})[y.METHOD_UNSET=0]="METHOD_UNSET",y[y.METHOD_GET=1]="METHOD_GET",y[y.METHOD_POST=2]="METHOD_POST",y[y.METHOD_PUT=3]="METHOD_PUT",y[y.METHOD_PATCH=4]="METHOD_PATCH",y[y.METHOD_DELETE=5]="METHOD_DELETE",y[y.METHOD_HEAD=6]="METHOD_HEAD",y[y.METHOD_OPTIONS=7]="METHOD_OPTIONS",(t=f=f||{})[t.CLOSE=0]="CLOSE",t[t.TEMP=1]="TEMP",t[t.TIMEOUT=2]="TIMEOUT",(y=p=p||{})[y.AUTO=0]="AUTO",y[y.MANUAL=1]="MANUAL",(t=g=g||{})[t.EMPTY=0]="EMPTY",t[t.CLOSE=1]="CLOSE",{2:"stream_closed",3:"close_connection",4:"http_request",5:"http_response",12:"hb_request",13:"hb_response",14:"get_config_request",15:"get_config_response",16:"http_request_ack",17:"pc_upward_message",18:"pc_upward_message_ack",19:"pc_established",20:"pc_broken",21:"pc_downward_message",22:"redirect",23:"get_appconfig_request",24:"get_appconfig_response",25:"push_appconfig",26:"accesshub_dispatch_request",27:"accesshub_dispatch_response",30:"push_exception",33:"http_request2",34:"redirect2",35:"accesshub_dispatch_request2",36:"accesshub_dispatch_response2",39:"get_svraddr_request",40:"get_svraddr_response"}),y=n(0),v=n.n(y),b=(t=n(1),n(1));const S=b.roots.default||(b.roots.default={}),E=n(0);b.util.Long=E,b.util.Long.fromBits=b.util.Long?b.util.Long.fromBits:function(){return 0};for(var T=b.types?b.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},w=b.types?b.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},C=Object.keys(T),I={$:function(e){return I[e]?I[e].call(this):S[e].decode?S[e].decode(this,this.uint32()):I.$.call(this,"int32")}},R={$:function(e,t,n){var r=T[e];return void 0===r?S[e].encode?(this.uint32((n<<3|2)>>0).fork(),S[e].encode(t,this).ldelim()):R.$.call(this,"int32",t,n):R[e].call(this.uint32(n<<3|r),t)}},k=0;k<C.length;k++)I[C[k]]=b.Reader.prototype[C[k]],R[C[k]]=b.Writer.prototype[C[k]];!function e(t,n,r,i){for(var o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];if(t[a].$m&&Object.keys(t[a].$m).every((function(e){return Number(e)}))){if(r[a])throw Error(`nested type ${r}.${a} has already exist`);r[a]=function(t,r){function i(e){for(var n in t)"{"===(n=t[n])[1].charAt(0)?this[n[0]]={}:"["!==n[1].charAt(0)&&"<"!==n[1].charAt(0)||(this[n[0]]=[]);if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)null!=e[r[i]]&&(this[r[i]]=e[r[i]])}var o,s={};for(o in t){var a=t[o],u=a[1];"{"===u.charAt(0)?(i.prototype[a[0]]=b.util.emptyObject,s[u]={$m:u.substring(1).split(",").map((function(e,t){return["$"+(t+1),e,null]})).reduce((function(e,t,n){return e[n+1]=t,e}),{})}):i.prototype[a[0]]="["===u.charAt(0)||"<"===u.charAt(0)?b.util.emptyArray:"bytes"===u?b.util.newBuffer([]):a[2]&&a[2].hasOwnProperty("low")&&a[2].hasOwnProperty("high")?b.util.Long.fromBits(a[2].low,a[2].high,a[2].unsigned):a[2]}return i.decode=function(e,n){e instanceof b.Reader||(e=b.Reader.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i;e.pos<r;){var s=e.uint32(),a=s>>>3;if(0<a&&t[a]){var u=t[a][0],c=t[a][1];if("{"===c.charAt(0))o[u]===b.util.emptyObject&&(o[u]={}),a=i.$namespace[c].decode(e,e.uint32()),o[u][a.$1]=a.$2;else if("["===c.charAt(0)||"<"===c.charAt(0))if(c=c.substring(1),o[u]&&o[u].length||(o[u]=[]),void 0!==w[c]&&2==(7&s))for(var l=e.uint32()+e.pos;e.pos<l;)o[u].push(I.$.call(e,c));else o[u].push(I.$.call(e,c));else o[u]=I.$.call(e,c)}else e.skipType(7&s)}return o},i.encode=function(e,n){for(var r in n=n||b.Writer.create(),t){var o=t[r][0];if("{"===(c=t[r][1]).charAt(0)){if(null!=e[o]&&e.hasOwnProperty(o))for(var s=0,a=Object.keys(e[o]);s<a.length;++s)n.uint32((r<<3|2)>>0).fork(),i.$namespace[c].encode({$1:a[s],$2:e[o][a[s]]},n).ldelim()}else if("["===c.charAt(0)||"<"===c.charAt(0)){var u="<"===c.charAt(0),c=c.substring(1),l=e[o];if(null!=l&&l.length)if(u&&void 0!==w[c]){for(n.uint32((r<<3|2)>>0).fork(),s=0;s<l.length;s++)R[c].call(n,l[s]);n.ldelim()}else for(s=0;s<l.length;s++)R.$.call(n,c,l[s],r)}else null!=e[o]&&e.hasOwnProperty(o)&&R.$.call(n,c,e[o],r)}return n},Object.keys(s).length&&(i.$namespace=e(s,n+"."+r,i.$namespace||{},!0)),i}(t[a].$m,a)}else t[a].$s?r[a]=function(e,t){function r(e,t,n){b.rpc.Service.call(this,e,t,n)}return(r.prototype=Object.create(b.rpc.Service.prototype)).constructor=r,Object.keys(e).forEach((function(i){var o=e[i];function s(e,t){return this.rpcCall(s,S[o[0]],S[o[1]],e,t)}Object.defineProperty(s,"name",{value:i}),Object.defineProperty(s,"path",{value:n+"."+t}),r.prototype[i]=s})),r}(t[a].$s,a):t[a].$e&&Object.values(t[a].$e).every((function(e){return Number(e)===e}))&&(r[a]=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[n[t[r]]=e[t[r]]]=t[r];return n}(t[a].$e));r[a]&&!i&&(S[n+"."+a]=r[a]),delete t[a].$m,delete t[a].$s,delete t[a].$e,r[a]=e(t[a],n?n+"."+a:a,r[a]||{})}return r}({PB:{proto_accesshub:{AccesshubAddr:{$m:{1:["ipv4","fixed32",0],2:["ipv6","PB.proto_accesshub.IPV6Addr",null],3:["quic_port","uint32",0],4:["wss_port","uint32",0]}},AccesshubDispatchGroup:{$m:{1:["group","string",""],2:["quic_nodes","<string",null],3:["mtcp_nodes","<string",null],4:["wss_nodes","<string",null]}},AccesshubDispatchGroup2:{$m:{1:["group","string",""],2:["nodes","<PB.proto_accesshub.AccesshubAddr",null],3:["nodes_dual","<PB.proto_accesshub.AccesshubAddr",null]}},AccesshubDispatchRequest2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","PB.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","PB.proto_accesshub.SdkType",0],7:["zegoconn_version","uint32",0],8:["zegoconn_run_env","PB.proto_accesshub.ZegoconnRunEnv",0],9:["device_id","string",""],10:["client_ip","string",""],11:["geofencing_type","uint32",0],12:["geofencings","[uint32",null],13:["addr_type","uint32",0]}},AccesshubDispatchResponse2:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","PB.proto_accesshub.AccesshubDispatchResponseData2",null]}},AccesshubDispatchResponseData2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["rand","string",""],3:["secret","string",""],4:["groups","<PB.proto_accesshub.AccesshubDispatchGroup2",null],5:["wss_groups","<PB.proto_accesshub.WssAccesshubDispatchGroup",null],6:["ttl","uint32",0]}},BackendConnType:{$e:{BACKEND_CONN_TYPE_UNSET:0,BACKEND_CONN_TYPE_TCP:1,BACKEND_CONN_TYPE_WSS:2}},CloseConnection:{$m:{1:["reason","int32",0],2:["msg","string",""],3:["action","int32",0]},Action:{$e:{ACTION_RESERVED:0,ACTION_DISPATCH:1,ACTION_RETRY:2,ACTION_NEXT_NODE:3,ACTION_ABORT:4,ACTION_NEXT_GROUP:5}}},ConnectionClosed:{$m:{1:["code","int32",0],2:["msg","string",""]}},ErrorCode:{$e:{OK:0,DISPATCH_NO_AVAILABLE_NODE:1e4,DISPATCH_INTERNAL_ERROR:10001,DISPATCH_INVALID_FRAME:10002,DISPATCH_UNMARSHAL:10003,DISPATCH_MSGTYPE:10004,DISPATCH_MARSHAL:10005,DISPATCH_TOO_FREQUENTLY:10006,DISPATCH_EMPTY_GEOFENCING:10007,ACCESSHUB_INVALID_FRAME:2e4,ACCESSHUB_NEED_ENCRYPT:20001,ACCESSHUB_DECRYPT:20002,ACCESSHUB_MSGTYPE:20003,ACCESSHUB_UNMARSHAL:20004,ACCESSHUB_TIMEOUT:20005,ACCESSHUB_CONNECT:20006,ACCESSHUB_BROKEN:20007,ACCESSHUB_INTERNAL_ERROR:20008,ACCESSHUB_MARSHAL:20009,ACCESSHUB_UNSUPPORTED_SERVICE:20010,ACCESSHUB_TOO_FREQUENTLY:20011,ACCESSHUB_INVALID_APPID:20012,ACCESSHUB_HB_TIMEOUT:20013,ACCESSHUB_INVALID_SIGNATURE:20014,ACCESSHUB_AUTH_FAILED:20015,ACCESSHUB_UNSUPPORTED_INTERFACE:20016,ACCESSHUB_EMPTY_GEOFENCING:20017,ACCESSHUB_ACCESS_DENIED:20018,ACCESSHUB_SPECIAL_CUSTOMER:20019,ACCESSHUB_GET_STREAM_FAILED:3e4,ACCESSHUB_GET_CONN_FAILED:30001,ACCESSHUB_DO_HTTP_REQUEST_FAILED:30002,ACCESSHUB_UNMARSHAL_HB_FAILED:30003,ACCESSHUB_DO_BACKEND_DISPATCH_FAILED:30004}},GeoFencing:{$e:{CN:2,NA:3,EU:4,AS:5,IN:6,NCN:7}},GeoFencingType:{$e:{NONE:0,UNION:1,EXCLUDE:2}},GetAppConfigRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","PB.proto_accesshub.Mode",0],5:["id_name","string",""],6:["config_key","string",""],7:["ts","uint64",{low:0,high:0,unsigned:!0}],8:["signature","bytes",[]],9:["lite_sign","string",""],10:["token","string",""],11:["sdk_type","PB.proto_accesshub.SdkType",0],12:["zegoconn_version","uint32",0],13:["zegoconn_run_env","PB.proto_accesshub.ZegoconnRunEnv",0],14:["device_id","string",""],15:["etag","uint32",0],16:["is_special_customer","uint32",0]}},GetAppConfigResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","PB.proto_accesshub.GetAppConfigResponseData",null]}},GetAppConfigResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["data","bytes",[]],3:["ts","uint64",{low:0,high:0,unsigned:!0}],4:["etag","uint32",0]}},GetConfigRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","string",""],5:["id_name","string",""],6:["reqid","string",""],7:["zegoconn_version","uint32",0],8:["sdk_type","PB.proto_accesshub.SdkType",0],9:["zegoconn_run_env","PB.proto_accesshub.ZegoconnRunEnv",0],10:["device_id","string",""],11:["mode_no","PB.proto_accesshub.Mode",0],12:["geofencing_type","uint32",0],13:["geofencings","[uint32",null]}},GetConfigResponse:{$m:{1:["code","int32",0],2:["message","string",""],3:["data","PB.proto_accesshub.GetConfigResponseData",null]}},GetConfigResponseData:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["quic_hb_interval","uint32",0],3:["quic_hb_timeout","uint32",0],4:["logic_hb_interval","uint32",0],5:["logic_hb_timeout","uint32",0],6:["pc_establish_timeout","uint32",0],7:["sdk_link_detect_interval","uint32",0],8:["sdk_link_detect_duration","uint32",0],9:["client_outer_ip","string",""],10:["ntp_time","uint64",{low:0,high:0,unsigned:!0}],11:["root_rsa_certs_ver","uint32",0],12:["geofencing_id","uint32",0],13:["svraddr_ver","uint32",0],14:["root_ecc_certs_ver","uint32",0]}},HBRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["ts","int64",{low:0,high:0,unsigned:!1}]}},HBResponse:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["ts","int64",{low:0,high:0,unsigned:!1}],3:["ntp_time","uint64",{low:0,high:0,unsigned:!0}]}},HTTPRequest:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","string",""],5:["id_name","string",""],6:["reqid","string",""],7:["stick","string",""],8:["service","string",""],9:["location","string",""],10:["method","string",""],11:["headers","<PB.proto_accesshub.HTTPRequest.HTTPHeader",null],12:["body","bytes",[]],13:["ack","bool",!1],14:["mode_no","PB.proto_accesshub.Mode",0],15:["service_no","PB.proto_accesshub.Service",0],16:["method_no","PB.proto_accesshub.Method",0],17:["sdk_type","PB.proto_accesshub.SdkType",0],18:["zegoconn_run_env","PB.proto_accesshub.ZegoconnRunEnv",0],19:["zegoconn_version","uint32",0],20:["device_id","string",""],21:["reduce_resp_header","uint32",0]},HTTPHeader:{$m:{1:["name","string",""],2:["val","string",""]}}},HTTPRequest2:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode","PB.proto_accesshub.Mode",0],5:["id_name","string",""],6:["sdk_type","PB.proto_accesshub.SdkType",0],7:["zegoconn_run_env","PB.proto_accesshub.ZegoconnRunEnv",0],8:["zegoconn_version","uint32",0],9:["headers","<PB.proto_accesshub.HTTPRequest.HTTPHeader",null],10:["method","PB.proto_accesshub.Method",0],11:["interface_id","uint32",0],12:["res_id","string",""],13:["params","string",""],14:["body","bytes",[]],15:["ack","bool",!1],16:["device_id","string",""],17:["ts","uint64",{low:0,high:0,unsigned:!0}],18:["signature","bytes",[]],19:["token","string",""],20:["lite_sign","string",""],21:["reduce_resp_header","uint32",0]}},HTTPRequestAck:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},HTTPRequestDroped:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["reason","int32",0],3:["msg","string",""]}},HTTPResponse:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["headers","<PB.proto_accesshub.HTTPRequest.HTTPHeader",null],3:["status_code","int32",0],4:["body","bytes",[]]}},IPAddr:{$m:{1:["ipv4","fixed32",0],2:["ipv6","PB.proto_accesshub.IPV6Addr",null]}},IPV6Addr:{$m:{1:["high","fixed64",{low:0,high:0,unsigned:!1}],2:["low","fixed64",{low:0,high:0,unsigned:!1}]}},MessageType:{$e:{MSG_TYPE_EMPTY:0,MSG_TYPE_CONNECTION_CLOSED:1,MSG_TYPE_STREAM_CLOSED:2,MSG_TYPE_CLOSE_CONNECTION:3,MSG_TYPE_HTTP_REQUEST:4,MSG_TYPE_HTTP_RESPONSE:5,MSG_TYPE_HTTP_REQUEST_DROPED:6,MSG_TYPE_PROXY_CONNECT:7,MSG_TYPE_PROXY_CONNECTED:8,MSG_TYPE_PROXY_CONNECTION_CLOSED:9,MSG_TYPE_PROXY_SEND_DATA:10,MSG_TYPE_PROXY_RECV_DATA:11,MSG_TYPE_HB_REQUEST:12,MSG_TYPE_HB_RESPONSE:13,MSG_TYPE_GET_CONFIG_REQUEST:14,MSG_TYPE_GET_CONFIG_RESPONSE:15,MSG_TYPE_HTTP_REQUEST_ACK:16,MSG_TYPE_PC_UPWARD_MESSAGE:17,MSG_TYPE_PC_UPWARD_MESSAGE_ACK:18,MSG_TYPE_PC_ESTABLISHED:19,MSG_TYPE_PC_BROKEN:20,MSG_TYPE_PC_DOWNWARD_MESSAGE:21,MSG_TYPE_REDIRECT:22,MSG_TYPE_GET_APPCONFIG_REQUEST:23,MSG_TYPE_GET_APPCONFIG_RESPONSE:24,MSG_TYPE_PUSH_APPCONFIG:25,MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST:26,MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE:27,MSG_TYPE_GET_IM_CONFIG_REQUEST:28,MSG_TYPE_GET_IM_CONFIG_RESPONSE:29,MSG_TYPE_PUSH_EXCEPTION:30,MSG_TYPE_RESOLVE_DOMAIN_REQUEST:31,MSG_TYPE_RESOLVE_DOMAIN_RESPONSE:32,MSG_TYPE_HTTP_REQUEST2:33,MSG_TYPE_REDIRECT2:34,MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2:35,MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2:36,MSG_TYPE_GET_ROOTCERTS_REQUEST:37,MSG_TYPE_GET_ROOTCERTS_RESPONSE:38,MSG_TYPE_GET_SVRADDR_REQUEST:39,MSG_TYPE_GET_SVRADDR_RESPONSE:40,MSG_TYPE_UA_DISPATCH_REQUEST:50,MSG_TYPE_UA_DISPATCH_RESPONSE:51,MSG_TYPE_UA_ECHO_REQUEST:52,MSG_TYPE_UA_ECHO_RESPONSE:53,MSG_TYPE_NODE_REGISTER_REQUEST:100,MSG_TYPE_NODE_REGISTER_RESPONSE:101,MSG_TYPE_NODE_HB_REQUEST:102,MSG_TYPE_NODE_HB_RESPONSE:103}},Method:{$e:{METHOD_UNSET:0,METHOD_GET:1,METHOD_POST:2,METHOD_PUT:3,METHOD_PATCH:4,METHOD_DELETE:5,METHOD_HEAD:6,METHOD_OPTIONS:7}},Mode:{$e:{Mode_UNSET:0,MODE_ONLINE:1,MODE_TEST:2,MODE_ALPHA:3}},PCBroken:{$m:{}},PCDownwardMessage:{$m:{1:["payload","bytes",[]],2:["wss_message_type","uint32",0],3:["ts","uint64",{low:0,high:0,unsigned:!0}]}},PCEstablished:{$m:{1:["elapse","uint32",0],2:["from","uint32",0]}},PCUpwardMessage:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}],2:["appid","uint32",0],3:["biz_type","uint32",0],4:["mode_no","PB.proto_accesshub.Mode",0],5:["id_name","string",""],6:["service_no","PB.proto_accesshub.Service",0],7:["ack","bool",!1],8:["payload","bytes",[]],9:["sdk_type","PB.proto_accesshub.SdkType",0],10:["wss_message_type","uint32",0],11:["wss_path","string",""],12:["wss_raw_query","string",""],13:["zegoconn_version","uint32",0],14:["zegoconn_run_env","PB.proto_accesshub.ZegoconnRunEnv",0],15:["backend_conn_type","PB.proto_accesshub.BackendConnType",0],16:["device_id","string",""],17:["geofencing_type","uint32",0],18:["geofencings","[uint32",null],19:["addr_type","uint32",0]}},PCUpwardMessageAck:{$m:{1:["txid","uint64",{low:0,high:0,unsigned:!0}]}},ProxyConnectionClosed:{$m:{1:["code","int32",0],2:["msg","string",""],3:["connected","int32",0]}},PushAppConfig:{$m:{1:["config_key","string",""],2:["data","bytes",[]]}},PushException:{$m:{1:["reason","int32",0],2:["msg","string",""],3:["txid","uint64",{low:0,high:0,unsigned:!0}]}},Redirect2:{$m:{1:["rand","string",""],2:["secret","string",""],3:["groups","<PB.proto_accesshub.AccesshubDispatchGroup2",null],4:["wss_groups","<PB.proto_accesshub.WssAccesshubDispatchGroup",null],5:["ttl","uint32",0]}},SdkType:{$e:{SDK_TYPE_UNSET:0,SDK_TYPE_NATIVE:1,SDK_TYPE_WSS_WEB:3}},Service:{$e:{SERVICE_UNSET:0,SERVICE_MEDIAGW:1,SERVICE_LIVEROOM:2,SERVICE_MIX:3,SERVICE_ZEUS:4,SERVICE_ZPUSH:5,SERVICE_L3:6,SERVICE_TALKLINE:7,SERVICE_EDUSUITE:8,SERVICE_ZIM:9,SERVICE_ClOUD_SETTING:10,SERVICE_ZEUSHB:11,SERVICE_USER_LOGIC:12,SERVICE_UNIFYDISPATCH:13,SERVICE_QUALITY:14,SERVICE_SECURITY:15,SERVICE_KTVCPR:16,SERVICE_SWITCH4LIVEROOM:17,SERVICE_WEBRTC_SIGNAL:18,SERVICE_L3_WEBRTC_SIGNAL:19,SERVICE_VIDEOCPR:20,SERVICE_CDN:21,SERVICE_CLOUDRECORD:22,SERVICE_INNER_ECHO:23,SERVICE_OUTER_ECHO:24,SERVICE_LOCALHOST_ECHO:25,SERVICE_ECHO:26,SERVICE_DOCSERVICE:27,SERVICE_AUTHSVR:28,SERVICE_WEBLIVEROOM:29,SERVICE_WHITEBOARD:30,SERVICE_METAWORLD:31,SERVICE_ZEGOLAND:32}},StreamClosed:{$m:{1:["code","int32",0],2:["msg","string",""]}},WssAccesshubDispatchGroup:{$m:{1:["group","string",""],2:["host","string",""],3:["main_domain","string",""]}},ZegoconnRunEnv:{$e:{ZEGOCONN_RUN_ENV_UNSET:0,ZEGOCONN_RUN_ENV_BROWSER:1,ZEGOCONN_RUN_ENV_APPLET:2}}},proto_initconfig:{AppConfig:{$m:{1:["test_id","int32",0],2:["domain","string",""],3:["flexible_domain","string",""],4:["replace_flexible_domain","string",""]}},InitConfig:{$m:{1:["app_config","PB.proto_initconfig.AppConfig",null],4:["speedlog_config","PB.proto_initconfig.SpeedlogConfig",null],5:["media_config","PB.proto_initconfig.MediaConfig",null]}},MediaConfig:{$m:{1:["play_config","PB.proto_initconfig.MediaPlayConfig",null],2:["publish_config","PB.proto_initconfig.MediaPublishConfig",null]}},MediaPlayConfig:{$m:{5:["resource_info","<PB.proto_initconfig.MediaResourceInfo",null]}},MediaPublishConfig:{$m:{2:["resource_info","<PB.proto_initconfig.MediaResourceInfo",null],5:["enable_subject_segmentation","int32",0],6:["object_segmentation_platform","int32",0]}},MediaResourceInfo:{$m:{1:["resource_type","PB.proto_initconfig.ResourceType",0],2:["service_info","<PB.proto_initconfig.MediaServiceProtocolInfo",null]}},MediaServiceProtocolInfo:{$m:{1:["config_id","string",""],2:["protocol","PB.proto_initconfig.ProtocolType",0],3:["url_template","string",""],4:["resolve_type","PB.proto_initconfig.ResolveType",0],5:["push_cdn_authentication","int32",0],6:["cdn_quic_version","<int32",null]}},ProtocolType:{$e:{UDP:0,RTMP:1,FLV:2,HLS:3,WEBRTC:4}},ResolveType:{$e:{LOCAL_DNS:0,DISPATCH:1}},ResourceType:{$e:{CDN:0,RTC:1,L3:2,CDN_PLUS:3,CDN_PLUS_BACKUP:4}},SpeedlogConfig:{$m:{1:["report_count","int32",0],2:["report_retry_interval","int32",0],3:["push_quality_sample_count","int32",0],4:["pull_quality_sample_count","int32",0],5:["hardware_report_cycle","int32",0],6:["room_user_max_count","int32",0],7:["room_stream_max_count","int32",0],8:["charge_info_report_cycle","int32",0],9:["charge_info_report_mode","int32",0],10:["disable_report_pull","<PB.proto_initconfig.ResourceType",null],11:["report_max_bytes","int32",0],12:["push_quality_report_freq","int32",0],13:["pull_quality_report_freq","int32",0],14:["charge_info_report_no_playing","int32",0]}}}}},"",S,!1),b.util.global.PB=S.PB;var N=S.PB,O=function(){return(O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};t.util.Long=v.a,t.configure(),U.prototype.encodeRequest=function(e,t,n){var r=(i=this.protoMap[e])[0],i=i[1];return i=(r=this.encode(this.protoInstance[r][i],t)).length,(t=new Uint8Array(13+i))[0]=175,t[1]=0,t[2]=e>>8,t[3]=e-(t[2]<<8),t.set(new Uint8Array(Int32Array.from([i]).buffer).reverse(),4),t.set(new Uint8Array(Int32Array.from([n]).buffer).reverse(),8),t[12]=0,t.set(r,13),t},U.prototype.decodeResponse=function(e){var t=(e[2]<<8)+e[3],n=new DataView(e.buffer).getUint32(8),r=e.slice(13);try{var i=this.protoMap[t];return[n,t,this.decode(this.protoInstance[i[0]][i[1]],r)]}catch(e){return[n,t,{code:1}]}},U.prototype.decodeConfigMessage=function(e){return this.decode(this.protoInstance.proto_initconfig.InitConfig,e)},U.prototype.encode=function(e,t){return e.encode(new e(t)).finish()},U.prototype.decode=function(e,t){return O({},e.decode(t))};var L,A=U,x=(Object.defineProperty(D.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),D.prototype.hasNext=function(){return this.next&&this.next.id},D.prototype.hasPrev=function(){return this.prev&&this.prev.id},D),P=(M.prototype.insertBefore=function(e,t){return(t=new x(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},M.prototype.addLast=function(e){return this.insertBefore(this.end,e)},M.prototype.add=function(e){return this.addLast(e)},M.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},M.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},M.prototype.size=function(){return this._numNodes},M.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},M.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},M.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},M.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},M.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},M.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},M.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},M.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},M.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},M.prototype.push=function(e){return this.addLast(e)},M.prototype.unshift=function(e){this.insertBefore(0<this._numNodes?this.start.next:this.end,e)},M.prototype.pop=function(){return this.removeLast()},M.prototype.shift=function(){return this.removeFirst()},M);function Z(){this.txid=0,this.linkRetryTime=60,this.updatedMsgTime=0,this.connectServer=""}function M(){this.start=new x,this.end=new x,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}function D(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function U(){var e;this.protoInstance=N,this.protoMap=((e={})[i.MSG_TYPE_STREAM_CLOSED]=["proto_accesshub","ConnectionClosed"],e[i.MSG_TYPE_CLOSE_CONNECTION]=["proto_accesshub","CloseConnection"],e[i.MSG_TYPE_HTTP_REQUEST]=["proto_accesshub","HTTPRequest"],e[i.MSG_TYPE_HTTP_RESPONSE]=["proto_accesshub","HTTPResponse"],e[i.MSG_TYPE_HTTP_REQUEST2]=["proto_accesshub","HTTPRequest2"],e[i.MSG_TYPE_HB_REQUEST]=["proto_accesshub","HBRequest"],e[i.MSG_TYPE_HB_RESPONSE]=["proto_accesshub","HBResponse"],e[i.MSG_TYPE_GET_CONFIG_REQUEST]=["proto_accesshub","GetConfigRequest"],e[i.MSG_TYPE_GET_CONFIG_RESPONSE]=["proto_accesshub","GetConfigResponse"],e[i.MSG_TYPE_GET_SVRADDR_REQUEST]=["proto_accesshub","GetSvraddrRequest"],e[i.MSG_TYPE_GET_SVRADDR_RESPONSE]=["proto_accesshub","GetSvraddrResponse"],e[i.MSG_TYPE_HTTP_REQUEST_ACK]=["proto_accesshub","HTTPRequestAck"],e[i.MSG_TYPE_PC_UPWARD_MESSAGE]=["proto_accesshub","PCUpwardMessage"],e[i.MSG_TYPE_PC_UPWARD_MESSAGE_ACK]=["proto_accesshub","PCUpwardMessageAck"],e[i.MSG_TYPE_PC_ESTABLISHED]=["proto_accesshub","PCEstablished"],e[i.MSG_TYPE_PC_BROKEN]=["proto_accesshub","PCBroken"],e[i.MSG_TYPE_PC_DOWNWARD_MESSAGE]=["proto_accesshub","PCDownwardMessage"],e[i.MSG_TYPE_REDIRECT]=["proto_accesshub","Redirect"],e[i.MSG_TYPE_REDIRECT2]=["proto_accesshub","Redirect2"],e[i.MSG_TYPE_GET_APPCONFIG_REQUEST]=["proto_accesshub","GetAppConfigRequest"],e[i.MSG_TYPE_GET_APPCONFIG_RESPONSE]=["proto_accesshub","GetAppConfigResponse"],e[i.MSG_TYPE_PUSH_APPCONFIG]=["proto_accesshub","PushAppConfig"],e[i.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST]=["proto_accesshub","AccesshubDispatchRequest"],e[i.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE]=["proto_accesshub","AccesshubDispatchResponse"],e[i.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2]=["proto_accesshub","AccesshubDispatchRequest2"],e[i.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2]=["proto_accesshub","AccesshubDispatchResponse2"],e[i.MSG_TYPE_PUSH_EXCEPTION]=["proto_accesshub","PushException"],e)}Z.prototype.createSocket=function(e){},Z.prototype.setState=function(e){},Z.prototype.initEvent=function(e,t,n,r){},Z.prototype.sendMessage=function(e,t,n,r,i,o,s,a){void 0===r&&(r=!0),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null)},y=Z,(n=L=L||{})[n.BROWSER=0]="BROWSER",n[n.WEIXINMINI=1]="WEIXINMINI",G.prototype.init=function(){var e=this;this._websocket&&(this.readyState=0,this._websocket.onOpen((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onopen&&(e.onopen(t),e._websocket.onClose((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onclose&&e.onclose(t)})),e._websocket.onMessage((function(t){"function"==typeof e.onmessage&&e.onmessage(t)})))})),this._websocket.onError((function(t){e.readyState=e._websocket.readyState,"function"==typeof e.onerror&&e.onerror(t)})))},G.prototype.onopen=function(e){},G.prototype.onerror=function(e){},G.prototype.onclose=function(e){},G.prototype.onmessage=function(e){},G.prototype.send=function(e){e instanceof Uint8Array&&(e=new Uint8Array(e).buffer),this._websocket&&this._websocket.send({data:e})},G.prototype.close=function(){this._websocket&&this._websocket.close()};var B=G;function G(e,t){this.url=e,this.readyState=3,this._websocket=wx.connectSocket({url:e}),this.init()}function W(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function H(e){var t=unescape||window.unescape;return Uint8Array.from(Array.from(t(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))}function z(e){var t=escape||window.escape;return decodeURIComponent(t(String.fromCharCode.apply(String,Array.from(e))))}function V(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Ue.prototype.createSocket=function(e){this.socket=new(this.ENV%2%2===L.BROWSER?WebSocket:B)(e)},Ue.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.socket.binaryType="arraybuffer",t.responseHandler(),e(n)})},Ue.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},Ue.prototype.onMessage=function(e){},Ue.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},Ue.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},Ue.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},Ue.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},Ue.prototype.sendMessage=function(e){this.isDisConnect()||this.socket&&this.socket.send(e)};var F,X=Ue,Y={TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},NET_CONNECT_TIMEOUT:{code:1100006,msg:"net connect timeout"}},K="zn.zca.gc",j="zn.zca.gac",J="zn.zca.rd",Q="zn.nab.du",q="zn.nab.gac",$="zn.nhb.s",ee="zn.rlh.at",te="zn.rlh.sm",ne="zn.wl.cs.0",re="zn.wl.bse",ie="zn.napr.sr",oe="zn.napr.ope",se="zn.nahr.sr",ae="zn.nahr.sr2",ue={domains:["accesshub-wss.zego.im"],mode:"online",modeNo:a.MODE_ONLINE,sdkType:3,connectVer:30,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},ce=(F=function(e,t){return(F=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(){return(ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)}),le=function(e){function t(t,n,r,o,s){var a=e.call(this)||this;return a.appID=t,a.env=n,a.protobuf=r,a.logger=o,a.stateCenter=s,a.socketService=new X(a.env),a.urlIndex=0,a.updatedMsgTime=0,a.unUpdateMsgTimeTypes=[i.MSG_TYPE_HB_REQUEST,i.MSG_TYPE_HB_RESPONSE,i.MSG_TYPE_GET_CONFIG_REQUEST,i.MSG_TYPE_GET_CONFIG_RESPONSE,i.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2,i.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2],a.netLinkState=0,a.sendCommandList=new P,a.unSendCommandList=new P,a.sendCommandMap={},a.unSendCommandMap={},a.sendDataCheckOnceCount=100,a.sendDataDropTimeout=1e4,a.sendDataCheckInterval=2e3,a.timeout=5e3,a.connectInterval=1e4,a.connectTimer=null,a.connectRsp={},a.unlogTypes=[12,13],a.tryServers=[],a.tryConnectEvents=[],a.connectStartTime=0,a.updatedMsgTime=Date.now(),a}var n=t,r=e;if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=n}return F(n,r),n.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o),t.prototype.initEvent=function(e,t,n,r){this.onConnectedEvent=e,this.onDisConnectedEvent=t,this.onConnectingEvent=n,this.onPushEvent=r},t.prototype.createSocket=function(e){this.servers=e,this.urlIndex=0},t.prototype.destroySocket=function(e){this.logger.info("zn.wl.ds.0 call "+e),this.socketService.closeSocket(),this.netLinkState=0,e!==c.NONE&&this.onDisConnectedEvent&&this.onDisConnectedEvent(e===c.BROKEN),this.resetConnect()},t.prototype.refreshServers=function(e){this.servers=W(W([],e,!0),this.servers,!0)},t.prototype.connectSocket=function(e,t,n){var r=this,i=(void 0===e&&(e=!0),this.logger.info(ne+" call"),this.connectRsp.suc=t,!1),o=(this.connectRsp.fail=function(){n&&(i?r.logger.info(ne+" fail cb has exec"):(n(),i=!0))},e&&(this.urlIndex=(this.urlIndex+1)%this.servers.length),this.servers[this.urlIndex]);return this.connectServer=o,this.logger.info(ne+" server "+o),this.tryServers.push(o),this.connectStartTime=Date.now(),this.closeSocket(),this.netLinkState=1,this.socketService.createSocket(o),this.onConnectingEvent&&this.onConnectingEvent(!0),this.bindSocketEvent(),this.connectTimer=setTimeout((function(){r.logger.info(ne+" timeout"),r.connectEvent(o,Y.NET_CONNECT_TIMEOUT.code),r.connectRsp.fail&&r.connectRsp.fail()}),this.connectInterval),!0},t.prototype.bindSocketEvent=function(){var e=this;this.openHandler((function(){e.logger.info(re+" open"),e.resetConnect(),e.connectRsp.suc&&e.connectRsp.suc(),e.netLinkState=2,e.connectEvent(e.connectServer,0),e.onConnectedEvent&&e.onConnectedEvent(e.tryServers,e.tryConnectEvents),e.tryConnectEvents=[],e.checkUnSendMsgs(e.unSendCommandList),e.startCheck()})),this.closeHandler((function(t){e.logger.warn(re+" close "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||Y.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=0})),this.errorHandler((function(t){e.logger.warn(re+" error "+JSON.stringify(t.code||t)),e.resetConnect(),e.connectRsp.fail&&e.connectRsp.fail(),e.connectEvent(e.connectServer,(null==t?void 0:t.code)||Y.NET_CONNECT_TIMEOUT.code),e.onDisConnectedEvent&&e.onDisConnectedEvent(!0),e.netLinkState=0})),this.onMessage()},t.prototype.closeSocket=function(){this.logger.info("zn.wl.cs.1 call"),this.socketService.closeSocket(),this.netLinkState=0},t.prototype.connectEvent=function(e,t){var n;this.connectStartTime&&(n=Date.now()-this.connectStartTime,this.tryConnectEvents.push({url:e,time_consumed:n,connect_type:3,error:t}))},t.prototype.resetConnect=function(){this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),this.stopCheck()},t.prototype.isConnect=function(){return 2===this.netLinkState},t.prototype.isDisConnect=function(){return!this.socketService||this.socketService.isDisConnect()},t.prototype.isConnecting=function(){return 1===this.netLinkState},t.prototype.setState=function(e){this.netLinkState=e},t.prototype.closeHandler=function(e){this.socketService.closeHandler(e)},t.prototype.openHandler=function(e){this.socketService.openHandler(e)},t.prototype.errorHandler=function(e){this.socketService.errorHandler(e)},t.prototype.sendMessage=function(e,t,n,r,o,a,u,c){void 0===r&&(r=!0),void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=null),void 0===(c=void 0===c?{}:c).timeout&&(c.timeout=5e3),void 0===c.isInSendMap&&(c.isInSendMap=!0),void 0===c.isMsgCache&&(c.isMsgCache=!0),this.txid++;var l={appid:this.appID,biz_type:0,mode_no:(null==(l=this.stateCenter.appInfo)?void 0:l.mode)||ue.modeNo,id_name:this.stateCenter.userId,sdk_type:ue.sdkType,zegoconn_run_env:0===this.env?s.ZEGOCONN_RUN_ENV_BROWSER:s.ZEGOCONN_RUN_ENV_APPLET,zegoconn_version:(null==(l=this.stateCenter.appInfo)?void 0:l.connVer)||ue.connectVer};null!=(h=this.stateCenter.appInfo)&&h.deviceID&&(l.device_id=null==(h=this.stateCenter.appInfo)?void 0:h.deviceID);var h=ce(ce({txid:this.txid},r?l:{}),n);r={data:h,txid:this.txid,sendTime:Date.now(),streamID:t,type:e,timeOut:c.timeout||this.timeout,ack:n.ack,success:o,error:a,ackFunc:u,isSend:!0,isCheck:e!==i.MSG_TYPE_PC_UPWARD_MESSAGE,extras:c.extras},c.isInSendMap&&(l=this.sendCommandList.push(r),this.sendCommandMap[this.txid]=l),10!==h.service&&14!==h.interface_id&&this.unUpdateMsgTimeTypes.includes(e)||(this.updatedMsgTime=Date.now()),-1===this.unlogTypes.indexOf(e)&&this.logger.info("zn.wl.sm type: "+e+"-"+_[e]+" streamID: "+t+" txid: "+this.txid),this.isConnect()?this.sendUint8Data(e,h,t,c.extras):c.isMsgCache&&(r.isSend=!1,n=this.unSendCommandList.push(r),this.unSendCommandMap[this.txid]=n)},t.prototype.checkUnSendMsgs=function(e){for(var t,n=e.getFirst();null!=n;)e.remove(n),n._data&&!1===(null==(t=n._data)?void 0:t.isSend)&&n._data.type&&n._data.streamID&&n._data.data&&(this.sendUint8Data(n._data.type,n._data.data,n._data.streamID),n._data.isSend=!0),n=e.getFirst()},t.prototype.Uint8ToArrayBuffer=function(e){return e.buffer.slice(e.byteOffset,e.byteLength+e.byteOffset)},t.prototype.sendUint8Data=function(e,t,n,r){e=this.protobuf.encodeRequest(e,t,n),this.socketService.sendMessage(this.Uint8ToArrayBuffer(e))},t.prototype.onMessage=function(){var e=this;this.socketService.onMessage=function(t){t=new Uint8Array(t);var n,r,i=(r=e.protobuf.decodeResponse(t))[0],o=r[1],s=((r=r[2]).txid&&v.a.isLong(r.txid)&&r.txid.toNumber&&(r.txid=r.txid.toNumber()),e.unUpdateMsgTimeTypes.includes(o)||(e.updatedMsgTime=Date.now()),(null==r?void 0:r.txid)||(null==(s=null==r?void 0:r.data)?void 0:s.txid));-1===e.unlogTypes.indexOf(o)&&(n=s?", txid: ".concat(s):"",e.logger.info("zn.wl.om"+" streamID: ".concat(i,", msgType: ").concat(o,"-").concat(_[o])+n)),s&&e.isRspMsg(s)?e.handleSendCommandMsgRsp(i,o,s,r,{size:t.length}):e.onPushEvent(i,o,r,{size:t.length})}},t.prototype.isRspMsg=function(e){return void 0!==this.sendCommandMap[e]},t.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},t.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},t.prototype.checkMessageListTimeout=function(e,t){for(var n,r=e.getFirst(),i=Date.now(),o=0,s=this;null!=r&&"break"!==function(){var a,u,c;return r._data&&r._data.sendTime+r._data.timeOut>i||(r._data&&delete t[r._data.data.txid],e.remove(r),r._data&&null==r._data.error||r._data&&r._data.sendTime+s.sendDataDropTimeout<i||(a=r&&r._data&&r._data.error,u=r&&r._data&&r._data.txid,c=r&&r._data&&(null==(n=r._data)?void 0:n.isCheck),setTimeout((function(){c&&a&&a({},u,Y.TIMEOUT)}),0)),++o>=s.sendDataCheckOnceCount)?"break":void(r=e.getFirst())}(););},t.prototype.checkSendMessageList=function(e){for(var t,n=e.getFirst();null!=n&&n._data;)!function(){var r,i,o;e.remove(n),n._data.isSend&&n._data.error&&(r=n&&n._data&&n._data.error,i=n&&n._data&&n._data.txid,o=n&&n._data&&(null==(t=n._data)?void 0:t.isCheck),setTimeout((function(){o&&r&&r({},i,Y.TIMEOUT)}),0)),n=e.getFirst()}()},t.prototype.handleSendCommandMsgRsp=function(e,t,n,r,o){var s,a=this.sendCommandMap[n];null!=a&&(null!=(s=a._data)&&s.ack||(delete this.sendCommandMap[n],this.sendCommandList.remove(a)),r.code&&0!==r.code?s&&null!=s.error&&s.error(r,n):t===i.MSG_TYPE_PUSH_EXCEPTION?(r.code=r.reason,r.message=r.msg,delete r.reason,delete r.msg,s&&null!=s.error&&s.error(r,n)):t===i.MSG_TYPE_HTTP_REQUEST_ACK?s&&null!=s.ackFunc&&s.ackFunc(r,n):s&&null!=s.success&&s.success(r,n,o))},t}(y),he=(De.prototype.getConfig=function(e,t){var n;this.logger.info("zn.nab.gc call"),this.streamManager.createStream(u.OTHER).sendMessage(i.MSG_TYPE_GET_CONFIG_REQUEST,{geofencing_type:null==(n=this.stateCenter.appInfo.geoFencing)?void 0:n.type,geofencings:null==(n=this.stateCenter.appInfo.geoFencing)?void 0:n.list},e,t)},De.prototype.dispatchURL=function(e,t){var n,r=this;this.logger.info(Q+" call"),this.streamManager.createStream(u.OTHER).sendMessage(i.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2,{geofencing_type:null==(n=this.stateCenter.appInfo.geoFencing)?void 0:n.type,geofencings:null==(n=this.stateCenter.appInfo.geoFencing)?void 0:n.list},(function(t){r.logger.info(Q+" suc "),e&&e(t)}),(function(e,n,i){r.logger.info(Q+" fail"),t&&t(i||e)}))},De.prototype.getAppConfig=function(e,t,n,r,o){var s=this;return new Promise((function(a,c){function l(e,t,n){n?(s.logger.error(q+" fail "+JSON.stringify(n)),c(n)):0===e.code?(s.logger.info(q+" suc"),n=s.decodeConfigMessage(e.data.data),a({code:0,data:n,etag:e.data.etag})):(s.logger.error(q+" fail "+e.code),c({code:e.code}))}s.logger.info(q+" call");var h={id_name:t,config_key:e,token:n,mode_no:(null==(h=s.stateCenter.appInfo)?void 0:h.mode)||ue.modeNo,etag:o};s.streamManager.createStream(u.OTHER).sendMessage(i.MSG_TYPE_GET_APPCONFIG_REQUEST,h,l,l,null,{timeout:r})}))},De.prototype.decodeConfigMessage=function(e){return this.protobuf.decodeConfigMessage(e)},De),de=(Me.prototype.init=function(e){var t=this;this.logger.info("zn.nhb.ii call"),this.hbStream||(this.hbStream=this.streamManager.createStream(u.OTHER)),1<=e.data.logic_hb_interval&&e.data.logic_hb_interval<=10&&(this.hbInterval=e.data.logic_hb_interval),3<=e.data.logic_hb_timeout&&e.data.logic_hb_timeout<=30&&(this.hbTimeout=e.data.logic_hb_timeout),this.tryHbCount=0,this.hbTimeoutMaxCount=this.hbTimeout/this.hbInterval,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){t.start()}),1e3*this.hbInterval)},Me.prototype.start=function(){var e,t,n,r=this;this.logger.debug($+" call "),this.tryHbCount++>this.hbTimeoutMaxCount?(this.logger.error($+" come to try limit"),this.reset(),this.netHbLogout(Y.NET_HB_TIMEOUT)):(e=(new Date).getTime(),t=function(t,n,i){var o=(new Date).getTime()-e;r.logger.debug($+" hb callback "+o),i&&0!==(null==i?void 0:i.code)?r.logger.info($+" fail "+JSON.stringify(i)):(null!=t&&t.ntp_time&&(i="number"==typeof(o=t.ntp_time)?o:o.toNumber(),t=(new Date).getTime(),r.stateCenter.updateNTP(e,i,t)),r.tryHbCount=0)},n={ts:Date.now()},this.hbStream.sendMessage(i.MSG_TYPE_HB_REQUEST,n,t,t,null),this.hbStream.isFirst=!1,this.hbTimer&&clearTimeout(this.hbTimer),this.hbTimer=setTimeout((function(){r.start()}),1e3*this.hbInterval))},Me.prototype.netHbLogout=function(e){},Me.prototype.reset=function(){this.hbTimer&&(clearTimeout(this.hbTimer),this.hbTimer=null),this.tryHbCount=0},Me),fe=(Ze.prototype.addEventHandler=function(e,t){if(this.handlerListMap[e]||(this.handlerListMap[e]=[]),"function"!=typeof t)throw new Error("Params callBack is not a Function");return this.handlerListMap[e]&&-1==this.handlerListMap[e].indexOf(t)&&this.handlerListMap[e].push(t),!0},Ze.prototype.removeEventHandler=function(e,t){return!!this.handlerListMap[e]&&(this.handlerListMap[e]=t?this.handlerListMap[e].filter((function(e){return e!==t})):[],!0)},Ze.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.handlerListMap[e]&&this.handlerListMap[e].forEach((function(n){try{n.apply(void 0,t)}catch(n){console.error('Fail to execute callback of event "'.concat(e,'" : ').concat(n))}}))},Ze),pe=function(){return(pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ge=(Pe.prototype.sendRequest=function(e,t,n,r){var o=this,s=e.payload,a=(null!=(a=this.option)&&a.encode&&(s=H(e.payload)),{service_no:this.service,ack:e.ack,payload:s,wss_message_type:null!=(s=null==(a=this.option)?void 0:a.messageType)?s:ue.wssMessageType,wss_path:null==(a=this.option)?void 0:a.path,wss_raw_query:null==(s=this.option)?void 0:s.query,zegoconn_version:ue.connectVer});this.netPcStream.isConnect()||(this.logger.info(ie+" pc is not connect"),this.eventManager.emit("connectStart")),this.netPcStream.sendMessage(i.MSG_TYPE_PC_UPWARD_MESSAGE,a,(function(){o.logger.info(ie+" suc"),n&&n()}),(function(e){o.logger.error(ie+" fail"),t&&t(e)}),null,{isInSendMap:"boolean"==typeof e.isInSendMap&&e.isInSendMap,extras:r,isMsgCache:null==(s=this.option)?void 0:s.isMsgCache})},Pe.prototype.onPushEvent=function(e,t,n){var r;switch(this.logger.info(oe+" msgType: ".concat(e)),e){case i.MSG_TYPE_PC_ESTABLISHED:this.netPcStream.isFirst=!1,this.pcEstablished(t,this.netPcStream.StreamID);break;case i.MSG_TYPE_PC_BROKEN:this.pcBroken();break;case i.MSG_TYPE_PC_DOWNWARD_MESSAGE:this.logger.info(oe+" ".concat(this.service," down ").concat((null==t?void 0:t.ts)&&t.ts.toNumber&&t.ts.toNumber()||t.ts));var o=t.payload;null!=(r=this.option)&&r.encode&&(o=z(t.payload)),this.eventManager.emit("downLoadMessage",o,n);break;case i.MSG_TYPE_PUSH_EXCEPTION:this.logger.info(oe+" ".concat(this.service," exception ").concat(JSON.stringify(t))),this.eventManager.emit("exception",t,n)}},Pe.prototype.on=function(e,t){return this.eventManager.addEventHandler(e,t)},Pe.prototype.off=function(e,t){this.eventManager.removeEventHandler(e,t)},Pe.prototype.pcEstablished=function(e,t){this.logger.info("zn.napr.pe call "+JSON.stringify(e)),this.setConnectState(l.CONNECTED);var n=p.MANUAL;this.lastConnectState===l.BROKEN&&this.connectState===l.CONNECTED&&(n=p.AUTO),this.eventManager.emit("connected",n),this.reportEvent("pcConnectedEvent",{proxy_link_sources:null==e?void 0:e.from,connect_stream:t}),this.brokenTimer&&clearTimeout(this.brokenTimer)},Pe.prototype.pcBroken=function(){var e=this;this.logger.info("zn.napr.pb call"),this.setConnectState(l.BROKEN),this.eventManager.emit("broken"),this.reportEvent("pcBrokenEvent"),this.brokenTimer=setTimeout((function(){e.eventManager.emit("disconnected",f.TEMP),e.reportEvent("pcDisconnectedEvent")}),1e3*this.pcEstablishTimeout)},Pe.prototype.resetBrokenTimer=function(){this.brokenTimer&&clearTimeout(this.brokenTimer)},Pe.prototype._close=function(e,t){var n;this.logger.info("zn.napr.cr call "+this.service+" "+this.connectState),this.connectState!==l.DISCONNECT&&(this.netPcStream.closeStream(0,""),this.resetBrokenTimer(),n=this.streamManager.getStreamID(),this.netPcStream.refresh(n),this.eventManager.emit(e,t),n="","broken"===e?n="pcBrokenEvent":"disconnected"===e&&(n="pcDisconnectedEvent"),n)&&this.reportEvent(n),this.setConnectState(l.DISCONNECT)},Pe.prototype.closePc=function(){this._close("broken")},Pe.prototype.closeRequest=function(){this._close("disconnected",f.CLOSE)},Pe.prototype.setConnectState=function(e){this.connectState!==e&&(this.lastConnectState=this.connectState,this.connectState=e)},Pe.prototype.reportEvent=function(e,t){this.eventManager.emit(e,pe({service_no:this.service},t))},Pe),me=(xe.prototype.getRequest=function(e,t){return e=new ge(this.logger,e,this.streamManager,this.pcEstablishTimeout,t),this.pcStreamRequests.push(e),e},xe.prototype.updateConnectState=function(e,t,n){this.logger.info("zn.naprm.ucs call "+e+" "+t),this.pcStreamRequests.forEach((function(r){e===l.BROKEN?(r.eventManager.emit("broken"),r.reportEvent("pcBrokenEvent")):e===l.DISCONNECT&&(r.eventManager.emit("disconnected",t,n),r.reportEvent("pcDisconnectedEvent"))}))},xe.prototype.closePCs=function(){this.pcStreamRequests.forEach((function(e){e.closePc()}))},xe.prototype.setEstablishTimeout=function(e){this.pcEstablishTimeout=e},xe),_e=(Ae.prototype.initLink=function(e){this.link=e},Ae.prototype.startMaxTime=function(){var e=this;this.logger.info(te+" call"),this.maxTimer||(this.logger.info(te+" start max timer"),this.maxTimer=setTimeout((function(){e.logger.warn(te+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.link.destroySocket(c.NONE),e.stopMaxTime(),e.invalid(),e.onactive(!1,Y.NET_SOCKET_TIMEOUT)}),1e3*this.RETRY_MAX_TIME))},Ae.prototype.stopMaxTime=function(){this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},Ae.prototype.active=function(e,t,n){var i=this;if(void 0===n&&(n=!1),this.logger.info(ee+" call "+e+" "+(t=void 0!==t&&t)),this.retryTimer)return this.logger.info(ee+" has actived, ignore"),!1;var o=this.stateCenter.networkState==r.offline;if(o){if(this.logger.info(ee+"  check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return this.logger.warn(ee+" network is broken, stop retry"),!1}else this.retryNetCount=0;return this.link.isConnecting()&&!n?(this.logger.info(ee+" link is connecting, ignore"),!1):this.isOverTime?(this.logger.info(ee+" retry over time, stop retry"),!1):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n),this.logger.info(ee+" interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){i.link.destroySocket(c.BROKEN),i.link.connectSocket(e,(function(){i.logger.info(ee+" suc"),i.stateCenter.networkState=r.online,i.stopMaxTime(),i.invalid(),i.onactive(!0)}),(function(){i.logger.info(ee+" fail"),i.maxTimer||i.startMaxTime(),i.active(!0,!1,!0)})),i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=null,o?i.retryNetCount++:i.retryActiveCount++}),t?0:1e3*this.retryActiveInterval),!0)},Ae.prototype.onactive=function(){for(var e=0;e<arguments.length;e++);},Ae.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},Ae.prototype.invalid=function(){this.logger.info("zn.rlh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},Ae),ye=(Le.prototype.updateNTP=function(e,t,n){var r;n<e||(r=n-e,this.timeOffset=Math.round((t-e+(t-n))/2),e=Math.round(t+r/2),(!this.networkRTT||r<this.networkRTT)&&(this.networkRTT=r,this.ntpTimeInfo={performanceTime:Math.round(performance.now()),ntp:e}))},Le),ve=(Oe.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.log(n)},Oe.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.debug(n)},Oe.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.info(n)},Oe.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.warn(n)},Oe.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.error(n)},Oe),be=function(){return(be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Se=(Ne.prototype.sendRequest=function(e,t,n,r,o){var s=this,a=e.disableLog;e={service_no:this.service,ack:e.ack,headers:e.headers,body:H(JSON.stringify(e.body)),id_name:e.idName,method_no:e.method_no,stick:e.stick,location:e.location,reduce_resp_header:e.reduceRspHeaders?1:0},this.netHttpStream.sendMessage(i.MSG_TYPE_HTTP_REQUEST,e,(function(e){s.closeStream();var n=("gzip"===(null==(n=(null==e?void 0:e.headers).find((function(e){return"Content-Encoding"===(null==e?void 0:e.name)})))?void 0:n.val)?a||s.logger.info(se+" gzip"):e.body&&(n=z(e.body),e.body=n),be(be({},e),{body:void 0}));a||s.logger.info(se+" suc "+JSON.stringify(n)),t&&t(e)}),(function(e,t,r){s.closeStream(),a||s.logger.error(se+" fail"),n&&n(r||e)}),(function(e){a||s.logger.error(se+" ack"),r&&r(e)}),o),this.netHttpStream.isFirst=!1},Ne.prototype.sendRequest2=function(e,t,n,r,o){var s=this,a=1===e.format?H(JSON.stringify(e.body)):e.body;a={ack:e.ack,body:a,id_name:e.idName,method:e.method,interface_id:e.interfaceID,token:e.token,reduce_resp_header:e.reduceRspHeaders?1:0},e.headers&&(a.headers=e.headers),e.resID&&(a.res_id=e.resID),e.urlParams&&(a.params=e.urlParams),e.mode&&(a.mode=e.mode),this.netHttpStream.sendMessage(i.MSG_TYPE_HTTP_REQUEST2,a,(function(r,i){s.closeStream();var o=(null==r?void 0:r.headers).find((function(e){return"Content-Encoding"===(null==e?void 0:e.name)}));if(200===r.status_code){if("gzip"===(null==o?void 0:o.val))s.logger.info(ae+" gzip");else if(r.body&&1===e.format)try{a=z(r.body),r.body=a}catch(i){s.logger.info(ae+" decode "+JSON.stringify(i))}o=be(be({},r),{body:void 0}),s.logger.info(ae+" suc "+JSON.stringify(o)),t&&t(r,i)}else{try{var a=z(r.body);r.body=a}catch(i){s.logger.info(ae+" status "+r.status_code+" "+JSON.stringify(i))}n&&n(r)}}),(function(e,t,r){s.closeStream(),s.logger.error(ae+" fail"),n&&n(r||e)}),(function(e){s.logger.error(ae+" ack"),r&&r(e)}),o),this.netHttpStream.isFirst=!1},Ne.prototype.closeStream=function(){this.logger.info("zn.nahr.cs call"),this.netHttpStream.closeStream(0,"")},Ne),Ee=(Object.defineProperty(ke.prototype,"StreamID",{get:function(){return this.streamID},enumerable:!1,configurable:!0}),ke.prototype.refresh=function(e){this.streamID=e,this.isFirst=!0},ke.prototype.sendMessage=function(e,t,n,r,i,o){var s=this;void 0===n&&(n=null),void 0===r&&(r=null),this.zegoLink.sendMessage(e,this.streamID,t,this.isFirst,(function(e,t,r){s.type!==u.PC&&(s.isFree=!0),n&&n(e,r)}),(function(e,t,n){s.type!==u.PC&&(s.isFree=!0),r&&r(e,t,n)}),i=void 0===i?null:i,o=void 0===o?{timeout:5e3,isInSendMap:!0}:o)},ke.prototype.onPushEvent=function(e,t,n){},ke.prototype.closeStream=function(e,t){this.zegoLink.sendMessage(i.MSG_TYPE_STREAM_CLOSED,this.streamID,{code:e,msg:t})},ke.prototype.isConnect=function(){return this.zegoLink.isConnect()},ke),Te=(Re.prototype.createStream=function(e){var t=new Ee(e,this.streamID++,this.zegoLink);return e===u.PC&&this.pcStreams.push(t),t},Re.prototype.onPushEvent=function(e,t,n,r){var i=this.pcStreams.find((function(t){return t.StreamID===e}));i&&i.onPushEvent(t,n,r)},Re.prototype.getStreamID=function(){return this.streamID++},Re),we=function(){return(we=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ce=(Object.defineProperty(Ie.prototype,"clientIP",{get:function(){return this.stateCenter.clientIP},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"timeOffset",{get:function(){return this.stateCenter.timeOffset},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"linkConnectState",{get:function(){return this._linkConnectState},set:function(e){this.lastLinkConnectState=this._linkConnectState,this._linkConnectState=e},enumerable:!1,configurable:!0}),Ie.prototype.init=function(){this.logger=new ve,this.protobuf=new A,this.stateCenter=new ye,this.eventManager=new fe,this.checkLinkMsg(),this.inited=!0},Ie.prototype.unInit=function(){this.inited=!1},Ie.prototype.setAppInfo=function(e){this.logger.info("zn.sai.0 "+JSON.stringify(e)),this.stateCenter.appInfo=e,this.stateCenter.networkState=!navigator||navigator.onLine?r.online:r.offline,0===e.env?this.bindWindowListener():1===e.env&&this.bindWxListener(),this.zegoLink=new le(e.appID,e.env,this.protobuf,this.logger,this.stateCenter),this.zegoLink.initEvent(this.onConnectedEvent,this.onDisConnectedEvent,this.onConnectingEvent,this.onPushEvent),this.streamManager=new Te(this.zegoLink),this.businessRequestMgr=new he(this.streamManager,this.protobuf,this.logger,this.stateCenter),this.netHeartBeatHandler=new de(this.streamManager,this.logger,this.stateCenter),this.netAgentPCRequestMgr=new me(this.streamManager,this.logger),this.heartBeatHandler()},Ie.prototype.setUserInfo=function(e){this.stateCenter.userId=e},Ie.prototype.setNetAgentDefaultServers=function(e){this.connectServers=V([],e,!0)},Ie.prototype.setNetAgentSpecifiedServers=function(e){this.logger.info("zn.sss.0 "+JSON.stringify(e)),this.stateCenter.specified=!0,this.specifiedServers=V([],e,!0)},Ie.prototype.setBackupDomains=function(e){this.primaryDomains=e},Ie.prototype.setDispatchConnectServers=function(e){this.connect(e)},Ie.prototype.startHttpRequest=function(e,t,n,r,i){var o=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new Se(this.logger,this.streamManager,e.service).sendRequest(e,(function(n){o.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,status_code:n.status_code,err_code:0}),t&&t(n)}),(function(t){o.eventManager.emit("requestEvent",s,"end",{na_req_location:e.location,err_code:t.code||0}),n&&n(t)}),r,i)},Ie.prototype.startHttpRequest2=function(e,t,n,r,i){var o=this,s=this.reportSeq++;this.eventManager.emit("requestEvent",s,"start"),this.isConnect()||(this.logger.info("zn.shq.0 link is not connect"),this.connectUa()),new Se(this.logger,this.streamManager).sendRequest2(e,(function(n,r){o.eventManager.emit("requestEvent",s,"end",{na_req_interface:e.interfaceID,status_code:n.status_code,err_code:0}),t&&t(n,r)}),(function(t){o.eventManager.emit("requestEvent",s,"end",{na_req_interface:e.interfaceID,err_code:t.code||0}),n&&n(t)}),r,i)},Ie.prototype.getAppConfigByAgent=function(e,t,n,r){return this.isConnect()||(this.logger.info("zn.gab.0 link is not connect"),this.connectUa()),this.getAppConfig(e,this.stateCenter.userId,t,n,r)},Ie.prototype.getPCRequest=function(e,t){var n=this;return(t=this.netAgentPCRequestMgr.getRequest(e,t)).on("disconnected",(function(t){n.logger.warn("zn.zca.gpr "+e+" disconnect "+t),t===f.TEMP&&(n.disConnect(),n.connectStart())})),t.on("connectStart",(function(){n.connectUa()})),t},Ie.prototype.connectUa=function(){this.isDestroy||(this.logger.info("zn.zca.cua call"),this.retryLinkHandler&&(this.retryLinkHandler.init(),this.connectStart(!1,!0)))},Ie.prototype.destroyConnect=function(){this.logger.info("zn.zca.dc.0 call"),this.resetNetAgent()},Ie.prototype.destroy=function(){this.logger.info("zn.zca.dy.0 call"),this.destroyConnect(),this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.retryLinkHandler&&this.retryLinkHandler.invalid(),this.retryLinkHandler&&this.retryLinkHandler.stopMaxTime(),this.isDestroy=!0},Ie.prototype.isConnect=function(){return this.zegoLink&&this.zegoLink.isConnect()},Ie.prototype.on=function(e,t){return this.logger.info("zn.zca.o.0 "+e),this.eventManager.addEventHandler(e,t)},Ie.prototype.off=function(e,t){this.logger.info("zn.zca.o.1 "+e),this.eventManager.removeEventHandler(e,t)},Ie.prototype.setLogger=function(e){this.logger=e},Ie.prototype.setAccess=function(e){this.stateCenter.useNetAgent=e},Ie.prototype.getVersion=function(){return"1.1.5"},Ie.prototype.heartBeatHandler=function(){var e=this;this.netHeartBeatHandler.netHbLogout=function(t){e.retryLinkHandler&&([Y.NET_HB_TIMEOUT.code].includes(t.code)?(e.retryLinkHandler.startMaxTime(),e.disConnect(),e.connectStart()):(e.retryLinkHandler.stopMaxTime(),e.retryLinkHandler.invalid(),e.eventManager.emit("disconnected")))}},Ie.prototype.bindWindowListener=function(){var e=this;window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},Ie.prototype.bindWxListener=function(){var e=this;wx.onNetworkStatusChange((function(t){t.isConnected?e.netOnLineHandle():e.netOffLineHandle()}))},Ie.prototype.netOnLineHandle=function(){this.logger.info("zn.zca.noh.0 network is online"),this.stateCenter.networkState=r.online,this.stateCenter.useNetAgent&&this.netOnLineHandler()},Ie.prototype.netOffLineHandle=function(){this.logger.info("zn.zca.noh.1 network is broken"),this.stateCenter.networkState=r.offline,this.stateCenter.useNetAgent&&this.netOffLineHandler()},Ie.prototype.checkLinkMsg=function(){var e=this;if(this.stateCenter.useNetAgent){if(this.isConnect()){var t=Date.now()-this.zegoLink.updatedMsgTime;if(t>1e3*this.linkMsgMaxInterval)return this.logger.info("zn.zca.clm interval: "+t),void this.resetNetAgent()}this.linkCheckTimer&&clearTimeout(this.linkCheckTimer),this.linkCheckTimer=setTimeout((function(){e.checkLinkMsg()}),1e3*this.linkMsgCheckInterval)}},Ie.prototype.connect=function(e){var t=this;0<e.length&&(this.connectServers=V([],e,!0)),this.stateCenter.specified&&0<this.specifiedServers.length&&(this.connectServers=this.specifiedServers),this.zegoLink.createSocket(this.connectServers),this.retryLinkHandler||(this.retryLinkHandler=new _e(this.logger,this.stateCenter)),this.retryLinkHandler.init(),this.retryLinkHandler.initLink(this.zegoLink),this.retryLinkHandler.onactive=function(e,n){n===Y.NET_SOCKET_TIMEOUT&&(t.eventManager.emit("disconnected",n),t.netAgentPCRequestMgr.updateConnectState(l.DISCONNECT,f.TIMEOUT,n))},this.connectStart(!1,!0)},Ie.prototype.resetNetAgent=function(){this.netHeartBeatHandler&&this.netHeartBeatHandler.reset(),this.zegoLink&&this.zegoLink.destroySocket(c.DISCONNECT)},Ie.prototype.getConfig=function(){function e(e,r,i){i?t.logger.info(K+" fail "+JSON.stringify(i)):0===e.code?(t.logger.info(K+" suc "+JSON.stringify(e)),t.getConfigSuccess(e,n)):t.logger.info(K+" fail "+JSON.stringify(e))}var t=this,n=(new Date).getTime();this.businessRequestMgr.getConfig(e,e)},Ie.prototype.getConfigSuccess=function(e,t){var n,r;this.netHeartBeatHandler.init(e),this.netAgentPCRequestMgr.setEstablishTimeout(e.data.pc_establish_timeout),null!=(n=null==e?void 0:e.data)&&n.client_outer_ip&&(this.stateCenter.clientIP=e.data.client_outer_ip),null!=(n=null==e?void 0:e.data)&&n.ntp_time&&(n="number"==typeof(n=e.data.ntp_time)?n:n.toNumber(),r=(new Date).getTime(),this.stateCenter.updateNTP(t,n,r)),this.eventManager.emit("clientInfo",{clientIP:this.clientIP,timeOffset:this.timeOffset,geofencingID:t=e.data.geofencing_id})},Ie.prototype.dispatch=function(){var e=this;return new Promise((function(t,n){e.businessRequestMgr.dispatchURL((function(n){n=n.data.wss_groups;var r=(e.logger.info(Q+" wss_groups: "+JSON.stringify(n)),n.some((function(e){return e.host.includes("geo")}))),i=null!=(i=e.stateCenter.appInfo)&&i.geoFencing||r?n:e.getConnectionDomains(n,e.primaryDomains);r=e.handleWssGroups(i),t({servers:r,domains:i})}),(function(e){n(e)}))}))},Ie.prototype.handleWssGroups=function(e){return Array.isArray(e)&&0<e.length?e.map((function(e){return ue.scheme+"://"+e.host+"/"+ue.location})):[]},Ie.prototype.getConnectionDomains=function(e,t){var n=V([],e,!0);return t.forEach((function(t){e.forEach((function(e){var r,i="";e.main_domain?i=e.main_domain:e.host&&(i=(r=e.host.split("."))[r.length-2]+"."+r[r.length-1]),i&&i!==t&&(r=e.host.replace(i,t),n.push({group:e.group,host:r}))}))})),n=n.filter((function(e){return!!e.host}))},Ie.prototype.getAppConfig=function(e,t,n,r,i){var o=this;return new Promise((function(s,a){"string"==typeof t&&"string"==typeof n?o.businessRequestMgr.getAppConfig(e,t,n,r,i).then((function(e){s(we(we({},e),{retryCount:o.getAppConfigFailCount}))})).catch((function(r){var u;o.logger.error(j+" "+JSON.stringify(r)),!(-1<m.indexOf(r.code))&&(o.getAppConfigFailCount++,20008===r.code||1100002===r.code)&&o.getAppConfigFailCount<3?o.getAppConfig(e,t,n,i).then((function(e){return s(e)})).catch((function(e){return a(e)})):(u=o.getAppConfigFailCount,o.getAppConfigFailCount=0,a(we(we({},r),{retryCount:u})))})):o.logger.error(j+" userID or token must be string")}))},Ie.prototype.reportDisConnectEvent=function(){var e=(new Date).getTime()-this.connectedTime;this.connectid&&this.eventManager.emit("disConnectedEvent",{duration:e,server:this.zegoLink.connectServer,connectid:this.connectid})},Ie.prototype.redirect=function(e){this.logger.info(J+" ".concat(JSON.stringify(e.wss_groups))),(e=this.handleWssGroups(e.wss_groups))&&Array.isArray(e)&&0<e.length?(this.disConnect(),this.stateCenter.specified&&(this.logger.info(J+" specified"),e=this.specifiedServers),this.zegoLink.createSocket(e),this.connectStart(!1,!0)):this.logger.warn(J+" wss_groups null")},Ie.prototype.connectClosed=function(e){var t=this;switch(this.logger.info("zn.zca.cc"+" ".concat(e.reason," ").concat(e.msg," ").concat(e.action)),e.action){case h.ACTION_DISPATCH:var n=this.reportSeq++;this.eventManager.emit("dispatchEvent",n,"start"),this.dispatch().then((function(e){var r=e.servers;t.eventManager.emit("dispatchEvent",n,"end",{domains:e=e.domains,reason:"ConnectClosed"}),Array.isArray(r)&&0<r.length&&(t.eventManager.emit("dispatchResultUpdate",{servers:r,domains:e}),e=t.stateCenter.specified?t.specifiedServers:r,t.disConnect(),t.zegoLink.createSocket(e),t.connectStart(!1,!0))})).catch((function(e){t.logger.info("zn.zca.cc dispatch fail")}));break;case h.ACTION_RETRY:this.disConnect(),this.connectStart(!1);break;case h.ACTION_NEXT_GROUP:this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken",g.CLOSE),this.connectStart()}},Ie.prototype.netOnLineHandler=function(){this.retryLinkHandler&&(this.zegoLink.isConnect()?this.retryLinkHandler.stopMaxTime():this.connectStart())},Ie.prototype.netOffLineHandler=function(){this.disConnect(),this.retryLinkHandler&&(this.retryLinkHandler.invalid(),this.retryLinkHandler.startMaxTime(),this.zegoLink.setState(0))},Ie.prototype.connectStart=function(e,t){this.retryLinkHandler.active(e,t)&&this.reportConnectEvent()},Ie.prototype.reportConnectEvent=function(){var e=this.reportSeq++;this.connectSeq=e,this.eventManager.emit("connectedEvent",e,"start")},Ie.prototype.disConnect=function(){this.logger.info("zn.zca.dc.1 call"),this.netAgentPCRequestMgr.closePCs(),this.eventManager.emit("broken"),2===this.lastLinkConnectState&&0===this.linkConnectState&&this.reportDisConnectEvent()},Ie.prototype.getNetworkTimeInfo=function(){var e,t=Date.now()+this.stateCenter.timeOffset,n=Math.round(this.stateCenter.networkRTT/2),r=this.stateCenter.ntpTimeInfo;return r&&(e=performance.now()-r.performanceTime,t=Math.round(r.ntp+e)),{timestamp:t,maxDeviation:n}},Ie);function Ie(){var e=this;this.linkCheckTimer=null,this.connectServers=[],this.specifiedServers=[],this.getAppConfigFailCount=0,this.getAppConfigTime=0,this.inited=!1,this.linkMsgMaxInterval=90,this.linkMsgCheckInterval=5,this.isDestroy=!1,this.connectedTime=0,this.connectid="",this.reportSeq=0,this.connectSeq=0,this.primaryDomains=[],this._linkConnectState=0,this.lastLinkConnectState=0,this.onConnectedEvent=function(t,n){var r;e.linkConnectState=2,e.getConfig(),e.stateCenter.specified||(r=e.reportSeq++,e.eventManager.emit("dispatchEvent",r,"start"),e.dispatch().then((function(t){var n=t.servers;t=t.domains.map((function(e){return e.host})),e.eventManager.emit("dispatchEvent",r,"end",{domains:t}),0<n.length&&e.eventManager.emit("dispatchResultUpdate",{servers:n,domains:t})})).catch((function(e){}))),e.eventManager.emit("connected"),e.connectedTime=(new Date).getTime(),e.connectid=function(e){var t,n="0123456789".split(""),r=[];for(e=n.length,t=0;t<16;t++)r[t]=n[0|Math.random()*e];return r.join("")}(),e.eventManager.emit("connectedEvent",e.connectSeq,"end",{servers:t,count:t.length,connectid:e.connectid,connectEvents:n})},this.onConnectingEvent=function(){e.logger.info("zn.zca.oce call"),e.linkConnectState=1},this.onDisConnectedEvent=function(t){e.logger.info("zn.zca.ode"+" ".concat(t)),e.linkConnectState=0,t?(e.disConnect(),e.netAgentPCRequestMgr.updateConnectState(l.BROKEN)):(e.eventManager.emit("disconnected"),e.netAgentPCRequestMgr.updateConnectState(l.DISCONNECT))},this.onPushEvent=function(t,n,r,o){switch(n){case i.MSG_TYPE_REDIRECT:case i.MSG_TYPE_REDIRECT2:e.redirect(r);break;case i.MSG_TYPE_CLOSE_CONNECTION:e.connectClosed(r);break;case i.MSG_TYPE_PC_BROKEN:case i.MSG_TYPE_PC_ESTABLISHED:case i.MSG_TYPE_PC_DOWNWARD_MESSAGE:case i.MSG_TYPE_PUSH_EXCEPTION:e.streamManager.onPushEvent(t,n,r,o);break;case i.MSG_TYPE_PUSH_APPCONFIG:e.businessRequestMgr.decodeConfigMessage(r.data)}}}function Re(e){this.zegoLink=e,this.streamID=1,this.httpStreams=[],this.pcStreams=[]}function ke(e,t,n){this.type=e,this.streamID=t,this.zegoLink=n,this.isFree=!1,this.isFirst=!0}function Ne(e,t,n){this.logger=e,this.streamManager=t,this.service=n,this.netHttpStream=this.streamManager.createStream(u.HTTP)}function Oe(){}function Le(){this.networkState=r.online,this.useNetAgent=!0,this.specified=!1,this.clientIP="",this.timeOffset=0,this.networkRTT=0}function Ae(e,t){this.logger=e,this.stateCenter=t,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryActiveCount=1,this.retryNetCount=0,this.retryNetMaxTimes=3,this.isOverTime=!1,this.RETRY_MAX_TIME=90}function xe(e,t){this.streamManager=e,this.logger=t,this.pcStreamRequests=[],this.pcEstablishTimeout=ue.pcEstablishTimeout}function Pe(e,t,n,r,i){this.logger=e,this.service=t,this.streamManager=n,this.pcEstablishTimeout=r,this.option=i,this.connectState=l.DISCONNECT,this.lastConnectState=l.DISCONNECT,this.brokenTimer=null,this.listenerList={connected:[],broken:[]},this.netPcStream=this.streamManager.createStream(u.PC),this.eventManager=new fe,this.netPcStream.onPushEvent=this.onPushEvent.bind(this)}function Ze(){this.handlerListMap={}}function Me(e,t,n){this.streamManager=e,this.logger=t,this.stateCenter=n,this.hbTimer=null,this.hbInterval=5,this.hbTimeout=10,this.hbTimeoutMaxCount=0,this.tryHbCount=0}function De(e,t,n,r){this.streamManager=e,this.protobuf=t,this.logger=n,this.stateCenter=r}function Ue(e){this.socket=null,this.ENV=e}}],a={},r.m=s,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2))},function(e,t,n){function r(e){var t;return(u[e]||(t=u[e]={i:e,l:!1,exports:{}},a[e].call(t.exports,t,t.exports,r),t.l=!0,t)).exports}var i,o,s,a,u;e.exports=(i=n(8),o=n(0),s=n(2),u={},r.m=a=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZEGO_SETTING_ACTION=void 0,(t=t.ZEGO_SETTING_ACTION||(t.ZEGO_SETTING_ACTION={})).CONSTRUCTOR="zs.0",t.SETTING_INIT="zs.ii.0",t.SETTING_FETCH_SETTING="zs.fs.0",t.SETTING__FETCH_SETTING="zs.fs.1",t.SETTING_GET_CLOUD_SETTING="zs.gcs.0",t.SETTING_POLLING_SETTING="zs.ps.0",t.SETTINGCACHEHANDLER_GET_CACHE_SETTING="zs.sch.gcs.0",t.SETTINGCACHEHANDLER_STORE_SETTING="zs.sch.ss.0",t.SETTINGFETCHHANDLER_FETCHSETTING="zs.sfh.fs.0"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorList=void 0,t.errorList={NOT_INIT:{code:1001,msg:"not init"},FILE_REQUEST_FAIL:{code:1002,msg:"fetch request fail"},INFLATE_DATA_FAIL:{code:1003,msg:"inflate fail"},MULTI_FILE_NOT_EXIST:{code:1004,msg:"get multi file fail"},AUTH_FAIL:{code:1005,msg:"auth failed"}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ProductMap=t.Product=t.SOCKET_DISCONNECT=t.ENUM_REMOTE_TYPE=t.ZEGO_BROWSER_TYPE=t.ZEGO_ENV=t.PROTO_VERSION=void 0,t.PROTO_VERSION="1.1.1",(r=t.ZEGO_ENV||(t.ZEGO_ENV={}))[r.BROWSER=0]="BROWSER",r[r.WEIXINMINI=1]="WEIXINMINI",(r=t.ZEGO_BROWSER_TYPE||(t.ZEGO_BROWSER_TYPE={}))[r.IE=0]="IE",r[r.FIREFOX=1]="FIREFOX",r[r.CHROME=2]="CHROME",r[r.SAFARI=3]="SAFARI",r[r.OPERA=4]="OPERA",r[r.WEIXIN=5]="WEIXIN",r[r.WEIXINMINI=6]="WEIXINMINI",r[r.UNKOWN=7]="UNKOWN",(r=t.ENUM_REMOTE_TYPE||(t.ENUM_REMOTE_TYPE={}))[r.DISABLE=0]="DISABLE",r[r.WEBSOCKET=1]="WEBSOCKET",r[r.HTTPS=2]="HTTPS",t.SOCKET_DISCONNECT=-1,(r=t.Product||(t.Product={}))[r.RTC=0]="RTC",r[r.WEB_RTC=1]="WEB_RTC",r[r.ZIM=2]="ZIM",r[r.ROOM_KIT=3]="ROOM_KIT",r[r.DOC_SHARE=4]="DOC_SHARE",r[r.WHITE_BOARD=5]="WHITE_BOARD",r[r.SELF_CHECK=999]="SELF_CHECK",r[r.TEST_ANOOUS=1e3]="TEST_ANOOUS",t.ProductMap={0:"rtc_sdk_native",1:"Web_SDK",2:"ZIM",3:"roomkitWeb",4:"docsshare",5:"WhiteBoard"}},function(e,t){e.exports=i},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},o=(Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=t.decodeCompressData=t.generateUUID=t.checkValidNumber=t.analyzeKey=t.getCurrentTime=t.getBrowser=void 0,n(16)),s=(t.getBrowser=function(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome,o=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version");return e=e.toLowerCase().match(/MicroMessenger/i)&&"micromessenger"===e.toLowerCase().match(/MicroMessenger/i)[0],t?"IE":n?"FIREFOX":r?"OPERA":i?"CHROME":o?"SAFARI":e?"WEIXIN":"UNKOWN"},["00","01","02","03","04","05","06","07","08","09"]);t.getCurrentTime=function(){var e=new Date;return[e.getFullYear()+"/",(s[e.getMonth()+1]||e.getMonth()+1)+"/",(s[e.getDate()]||e.getDate())+" ",(s[e.getHours()]||e.getHours())+":",(s[e.getMinutes()]||e.getMinutes())+":",s[e.getSeconds()]||e.getSeconds(),"."+e.getTime()%1e3].join("")},t.analyzeKey=function(e){return e=e.split("_"),{level:Number(e[0]),timestamp:e[1],seq:e[2]}},t.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=n},t.generateUUID=function(e){if(0===(e=void 0===e?0:e))try{n=localStorage.getItem("z_deviceID")}catch(e){}else wx.getStorageSync("z_deviceID");if(!n){var t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(36)}));if(0===e)try{localStorage.setItem("z_deviceID",n)}catch(e){}else wx.setStorageSync("z_deviceID",n)}return n},t.decodeCompressData=function(e){try{return o.inflate(e,{to:"string"})}catch(e){console.error(e)}},t.decodeString=function(e){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,i(Array.from(e)))))}},function(e,t){e.exports=o},function(e,t){e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INIT_CONFIG=void 0,t.INIT_CONFIG={env:0,compress:!0,p_version:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0;var r=n(9);Object.defineProperty(t,"ZegoSetting",{enumerable:!0,get:function(){return r.ZegoSetting}})},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=t.call(e,o)}catch(a){u=[6,a],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoSetting=void 0,n(2)),a=n(10),u=n(11),c=n(13),l=n(0),h=n(7),d=n(1),f=n(4);function p(){this.fileList=[],this.publicEnvVariable={},this.proEnvVariable={},this.pollingTimer=null,this.pollingInterval=300,this.inited=!1,this.checkFailCount=0,this.checkFailed=!1,this.log=new a.ZegoLog}Object.defineProperty(p.prototype,"envVariable",{get:function(){return Object.assign({},this.publicEnvVariable,this.proEnvVariable)},enumerable:!1,configurable:!0}),p.prototype.init=function(e){var t,n=this;return e.pollingFreq&&!f.checkValidNumber(e.pollingFreq)?(this.log.error(l.ZEGO_SETTING_ACTION.SETTING_INIT+" pollingFreq must be integer number"),!1):(this.options=Object.assign({},h.INIT_CONFIG,e),this.getPublicEnvVariable(),this.settingFetchHandler=new c.SettingFetchHandler(this.options,this.log),this.settingFetchHandler.setDataReport(this.options.reportNotify),e=Math.round(60*Math.random()),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_INIT+" delay "+e),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),this.options.pollingFreq&&60<=this.options.pollingFreq&&(this.pollingInterval=this.options.pollingFreq),this.delayTimer=setTimeout((function(){n.pollingSetting(1e3*n.pollingInterval,!1)}),1e3*e),this.settingCacheHandler=new u.SettingCacheHandler("setting_"+(this.options.online?"online_":"test_")+(e=this.options.product||this.options.productNum)+"_"+this.options.appID,this.log,this.options.env),[0,1,2,3,4,5].includes(e)&&(t=s.ProductMap[e])&&(1===e&&this.settingCacheHandler.dropOldStore("setting_"+(this.options.online?"online_":"test_")+"undefined_"+this.options.appID),this.settingCacheHandler.dropOldStore("setting_"+(this.options.online?"online_":"test_")+t+"_"+this.options.appID)),null!=(t=this.options)&&t.unify&&this.options.connection&&null!=(e=null==(e=this.options)?void 0:e.connection)&&e.on("connected",(function(){n.settingFetchHandler.checkUnSendMsgs(n.settingFetchHandler.unSendCommandList)})),this.refreshAuthCheck(),this.inited=!0)},p.prototype.uninit=function(){this.pollingTimer&&(clearTimeout(this.pollingTimer),this.pollingTimer=null)},p.prototype.setEnvVariable=function(e,t){this.proEnvVariable[e]=String(t)},p.prototype.getEnvVariable=function(e){return this.envVariable[e]},p.prototype.setEnvVariables=function(e){var t=this;Object.keys(e).forEach((function(n){"string"!=typeof e[n]&&"number"!=typeof e[n]&&t.log.error("zs.sev env "+n+" type error"),t.proEnvVariable[n]=String(e[n])}))},p.prototype.getEnvVariables=function(){return this.envVariable},p.prototype.enablePolling=function(e,t){var n=this;t?t.forEach((function(t){var r=n.fileList.find((function(e){return e.fileName===t}));r&&(r.needPolling=e)})):this.fileList.forEach((function(t){return t.needPolling=e}))},p.prototype.setToken=function(e){this.token!==e&&this.refreshAuthCheck(),this.token=e},p.prototype.setUserID=function(e){this.userID!==e&&this.refreshAuthCheck(),this.userID=e},p.prototype.getSettingCache=function(e){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return this.inited?(t=this.fileList.find((function(t){return t.fileName===e})))?[2,Promise.resolve({setting:t.setting,versions:t.versions})]:[3,1]:[2,Promise.reject(d.errorList.NOT_INIT)];case 1:return[4,this.settingCacheHandler.getCacheSetting(e)];case 2:return(t=r.sent())&&(this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:0,needPolling:!1,setting:t.setting,versions:t.versions}),n={setting:t.setting,versions:t.versions}),[2,Promise.resolve(n)]}}))}))},p.prototype.fetchSetting=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!0),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+e),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,r(r({},this.envVariable),t))):(t=this.fileList.find((function(t){return t.fileName===e})))?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file exist"),(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),t.needPolling=n,Promise.resolve({setting:t.setting,versions:t.versions})):this._fetchSetting(e,t,n)):(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" file not found"),this._fetchSetting(e,t,n))):Promise.reject(d.errorList.NOT_INIT)},p.prototype.fetchMultiSetting=function(e,t,n){var s=this;return void 0===t&&(t={}),void 0===n&&(n=!0),this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" call "+JSON.stringify(e)),this.inited?(this.activePolling(),0<Object.keys(t).length?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" get file with params"),this._getCloudSetting(e,r(r({},this.envVariable),t))):new Promise((function(t,r){var a={},u=[];if(e.forEach((function(e){return i(s,void 0,void 0,(function(){var t;return o(this,(function(n){return(t=this.fileList.find((function(t){return t.fileName===e})))&&(new Date).getTime()-t.fetchedTime<1e3*this.pollingInterval?(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" fetch time interval in freq"),a[e]={setting:t.setting,versions:t.versions}):u.push(e),[2]}))}))})),!(0<u.length))return t(a);s._getCloudSetting(u,s.envVariable).then((function(e){return s.handleFetchFiles(e,n),Object.assign(a,e),t(a)})).catch((function(e){u.forEach((function(e){return i(s,void 0,void 0,(function(){var t;return o(this,(function(r){switch(r.label){case 0:return(t=this.fileList.find((function(t){return t.fileName==e})))?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:{},versions:{}}),[4,this.settingCacheHandler.getCacheSetting(e)];case 1:return t=r.sent(),a[e]={setting:t.setting,versions:t.versions},[2]}}))}))})),0<Object.keys(a).length?t(a):r(e)}))}))):(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_FETCH_SETTING+" not init"),Promise.reject(d.errorList.NOT_INIT))},p.prototype.setOptions=function(e){e&&"boolean"==typeof e.unify&&(this.options.unify=e.unify,this.settingFetchHandler.setOptions(this.options))},p.prototype.setLog=function(e){this.log=e},p.prototype._getCloudSetting=function(e,t){var n=this;return new Promise((function(r,s){return i(n,void 0,void 0,(function(){var n,i,a,u,c,h,f,p,g,m,_=this;return o(this,(function(o){switch(o.label){case 0:if(o.trys.push([0,6,,7]),this.checkFailed)return this.log.warn(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" check fail"),s(d.errorList.AUTH_FAIL),[2];h=(p=e instanceof Array)?e:[e],n=[],i={},a=function(e){return e=e.map((function(e){return _.settingCacheHandler.getCacheSetting(e)})),Promise.all(e)},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,a(h)];case 2:return u=o.sent(),h.forEach((function(e,t){var r;n.push({file_name:e,hash:null==(r=u[t].versions)?void 0:r.hash,g_version:null==(r=u[t].versions)?void 0:r.g_version}),i[e]=u[t]})),[3,4];case 3:return o.sent(),h.forEach((function(e){n.push({file_name:e})})),[3,4];case 4:return[4,this.settingFetchHandler.fetchSetting(n,t,this.token,this.userID,!1)];case 5:return h=o.sent(),c=h.data,h=h.polling_interval,this.checkFailCount=0,this.log.info(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" suc"),"number"==typeof h&&5<=h&&this.pollingInterval!==60*h&&(this.log.warn(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" polling interval change"),this.pollingInterval=60*h,this.uninit(),this.activePolling()),p?(f={},e.forEach((function(e){var t,n;0==(null==(t=c[e])?void 0:t.code)&&(c[e].hashChange?(_.log.info(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" file "+e+" changed"),f[e]={setting:null==(n=c[e])?void 0:n.data,versions:null==(n=c[e])?void 0:n.versions}):i[e]&&(f[e]={setting:null==(n=i[e])?void 0:n.setting,versions:null==(e=i[e])?void 0:e.versions}))})),0<Object.keys(f).length?r(f):s(d.errorList.MULTI_FILE_NOT_EXIST)):0===(null==(p=c[e])?void 0:p.code)&&null!=(g=c[e])&&g.data?r({setting:null==(g=c[e])?void 0:g.data,versions:null==(g=c[e])?void 0:g.versions}):s({code:null==(m=c[e])?void 0:m.code,msg:null==(m=c[e])?void 0:m.message}),[3,7];case 6:return m=o.sent(),this.log.error(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" fail "+JSON.stringify(m)),21002!==(null==m?void 0:m.code)&&401!==(null==m?void 0:m.status_code)||(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),s(m),[3,7];case 7:return[2]}}))}))}))},p.prototype.handleFetchFiles=function(e,t){var n=this;Object.keys(e).forEach((function(r){var i=n.fileList.find((function(e){return e.fileName==r}));i?(i.fetchedTime=(new Date).getTime(),i.setting=e[r].setting,i.versions=e[r].versions,i.needPolling=t):n.fileList.find((function(e){return e.fileName===r}))||n.fileList.push({fileName:r,fetchedTime:(new Date).getTime(),needPolling:t,setting:e[r].setting,versions:e[r].versions}),n.settingCacheHandler.storeSetting(r,e[r])}))},p.prototype._fetchSetting=function(e,t,n){var r=this;return new Promise((function(s,a){r.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call"),r._getCloudSetting(e,r.envVariable).then((function(i){t?(t.fetchedTime=(new Date).getTime(),t.setting=i.setting,t.versions=i.versions,t.needPolling=n):r.fileList.find((function(t){return t.fileName===e}))||r.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:i.setting,versions:i.versions}),r.settingCacheHandler.storeSetting(e,i),s(i),r.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" call suc")})).catch((function(u){return i(r,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:t?t.fetchedTime=(new Date).getTime():this.fileList.find((function(t){return t.fileName===e}))||this.fileList.push({fileName:e,fetchedTime:(new Date).getTime(),needPolling:n,setting:{},versions:{}}),r=e,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.settingCacheHandler.getCacheSetting(r)];case 2:return r=i.sent(),s(r),[3,4];case 3:return i.sent(),a(u),[3,4];case 4:return this.log.info(l.ZEGO_SETTING_ACTION.SETTING__FETCH_SETTING+" setting not contain or fetch file fail"),[2]}}))}))}))}))},p.prototype.getPublicEnvVariable=function(){var e;0==this.options.env?(this.publicEnvVariable.userAgent=navigator.userAgent,this.publicEnvVariable.platform=navigator.platform,this.publicEnvVariable.browser=f.getBrowser(),this.publicEnvVariable.deviceid=f.generateUUID()):1==this.options.env&&(e=wx.getSystemInfoSync(),this.publicEnvVariable.brand=e.brand,this.publicEnvVariable.model=e.model,this.publicEnvVariable.system=e.system,this.publicEnvVariable.platform=e.platform,this.publicEnvVariable.wechatVersion=e.version,this.publicEnvVariable.wechatSDKVersion=e.SDKVersion,this.publicEnvVariable.deviceid=f.generateUUID(this.options.env))},p.prototype.pollingSetting=function(e,t){return void 0===t&&(t=!0),i(this,void 0,void 0,(function(){var n,r,s,a,u=this;return o(this,(function(c){switch(c.label){case 0:return this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" call "+e+" "+t),n=e,t?(r=[],this.fileList.forEach((function(e){e.needPolling&&r.push({file_name:e.fileName,hash:e.versions.hash,g_version:e.versions.g_version})})),this.checkFailed?(this.log.warn(l.ZEGO_SETTING_ACTION.SETTING_GET_CLOUD_SETTING+" has checked fail"),[3,7]):[3,1]):[3,7];case 1:if(!(0<r.length))return[3,6];c.label=2;case 2:return c.trys.push([2,4,,5]),[4,this.settingFetchHandler.fetchSetting(r,this.envVariable,this.token,this.userID)];case 3:return a=c.sent(),s=a.data,a=a.polling_interval,this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch suc"),this.checkFailCount=0,"number"==typeof a&&5<=a&&this.pollingInterval!==60*a&&(this.log.warn(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling interval change"),this.pollingInterval=60*a,n=1e3*this.pollingInterval),this.fileList.forEach((function(e){return i(u,void 0,void 0,(function(){var t,n,r,i,a,u,c,h,d,f;return o(this,(function(o){switch(o.label){case 0:return e.fetchedTime=(new Date).getTime(),t=e.fileName,r=(n=s[e.fileName]).code,i=n.data,a=n.versions,u=n.message,c=n.hashChange,n&&0===r&&i?(d=JSON.stringify(i),f=JSON.stringify(e.setting),h={setting:i,versions:a,code:r,message:u},c&&f!==d&&(this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" "+e.fileName+" setting changed"),e.setting=h.setting,e.versions=h.versions,this.options.pollingNotify(e.fileName,h)),[4,this.settingCacheHandler.getCacheSetting(t)]):[3,2];case 1:f=o.sent(),d=JSON.stringify(f),f=JSON.stringify(h),c&&d!==f&&this.settingCacheHandler.storeSetting(t,h),o.label=2;case 2:return[2]}}))}))})),[3,5];case 4:return a=c.sent(),this.log.error(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" fetch fail "+JSON.stringify(a)),21002!==(null==a?void 0:a.code)&&401!==(null==a?void 0:a.status_code)||(this.checkFailCount+=1),2<=this.checkFailCount&&(this.checkFailed=!0),[3,5];case 5:return[3,7];case 6:this.log.info(l.ZEGO_SETTING_ACTION.SETTING_POLLING_SETTING+" polling no file"),c.label=7;case 7:return this.pollingTimer&&clearTimeout(this.pollingTimer),this.pollingTimer=setTimeout((function(){u.pollingSetting(n)}),n),[2]}}))}))},p.prototype.activePolling=function(){this.pollingTimer||this.pollingSetting(1e3*this.pollingInterval)},p.prototype.refreshAuthCheck=function(){this.checkFailCount=0,this.checkFailed=!1},t.ZegoSetting=n=p},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.ZegoLog=void 0,r.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.log(n)},r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.debug(n)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.info(n)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.warn(n)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.join(" ");console.error(n)},t.ZegoLog=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){var u=[s,a];if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,(u=i?[2&u[0],i.value]:u)[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3]))o.label=u[1];else if(6===u[0]&&o.label<i[1])o.label=i[1],i=u;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(u)}}u=t.call(e,o)}catch(a){u=[6,a],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(t,"__esModule",{value:!0}),t.SettingCacheHandler=void 0,o(n(3))),a=n(0),u=n(12);function c(e,t,n){void 0===n&&(n=0),this.storeName=e,this.log=t,this.store=u.createZegoStore(e,n)}c.prototype.getCacheSetting=function(e){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.log.info(a.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_GET_CACHE_SETTING+" call"),[4,this.store.getItem(e)];case 1:return[2,t.sent()||""]}}))}))},c.prototype.storeSetting=function(e,t){return r(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return this.log.info(a.ZEGO_SETTING_ACTION.SETTINGCACHEHANDLER_STORE_SETTING+" call"),[4,this.store.setItem(e,t)];case 1:return n.sent(),[2]}}))}))},c.prototype.dropOldStore=function(e){s.default.dropInstance({name:e}).then((function(){console.debug("Dropped ",e)})).catch((function(e){console.warn(e)}))},t.SettingCacheHandler=n=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createZegoStore=t.ZegoWechatMiniStore=void 0;var r=n(3),i=n(2),o=(s.prototype.getItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.getStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},s.prototype.setItem=function(e,t){var n=this;return new Promise((function(r,i){try{wx.setStorageSync(n.keyPrefix+e,t),r()}catch(r){i(r)}}))},s.prototype.removeItem=function(e){var t=this;return new Promise((function(n,r){try{n(wx.removeStorageSync(t.keyPrefix+e))}catch(n){r(n)}}))},s.prototype.clear=function(){return new Promise((function(e,t){try{wx.clearStorageSync(),e()}catch(e){t(e)}}))},s.prototype.keys=function(){var e=this;return new Promise((function(t,n){try{var r=wx.getStorageInfoSync().keys,i=(console.warn("keys",r),[]);r.forEach((function(t){0==t.indexOf(e.keyPrefix)&&i.push(t.replace(e.keyPrefix,""))})),console.warn("keyArr",i),i.sort(),t(i)}catch(t){n(t)}}))},s);function s(e){this.storeName=e,this.keyPrefix=e+"/"}t.ZegoWechatMiniStore=o,t.createZegoStore=function(e,t){return t===i.ZEGO_ENV.BROWSER?r.createInstance({name:e}):new o(e)}},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingFetchHandler=void 0;var o,s,a=n(0),u=n(1),c=n(14),l=n(15),h=n(4),d=n(17),f=n(7),p=i(n(5));function g(e,t){this.options=e,this.log=t,this.seq=0,this.userID="",this.unSendCommandList=new l.LinkedList,this.testNetPackageSize=!1,this.protobuf=new d.CloudSettingProtoBuf}n=o={SERVICE_ClOUD_SETTING:10,10:"SERVICE_ClOUD_SETTING"},n=s={METHOD_UNSET:0,0:"METHOD_UNSET",METHOD_GET:1,1:"METHOD_GET",METHOD_POST:2,2:"METHOD_POST"},g.prototype.setOptions=function(e){this.options=e},g.prototype.setDataReport=function(e){this.reportFunc=e},g.prototype.setUserID=function(e){this.userID=e},g.prototype.fetchSetting=function(e,t,n,i,o){var s=this;return void 0===o&&(o=!0),new Promise((function(u,l){var d={product:s.options.product,files:e.map((function(e){return e.file_name})),param:r(r({},t),{deviceid:void 0}),appid:s.options.appID,token:n,id_name:i,timestamp:(new Date).getTime(),biztype:0,deviceid:t.deviceid||h.generateUUID(s.options.env),compress:!1,mode:s.options.online?"online":"test"},p=d.param,g={appid:d.appid,token:d.token,id_name:d.id_name,deviceid:d.deviceid},m=s.seq++;function _(e){var t,n=e.code,r=e.data,i=e.polling_interval;e=e.reportData,s.log.info(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+n),r&&(t=[],Object.keys(r).forEach((function(e){var n;t.push({name:e,code:r[e].code,message:null==(n=r[e])?void 0:n.message,versions:JSON.stringify(null==(n=r[e])?void 0:n.versions),content:JSON.stringify(null==(e=r[e])?void 0:e.data)})}))),s.reportFunc&&s.reportFunc(m,"request_end",{code:n,reportData:e,params:g,requestKV:p,files:t,polling:o}),u({data:r,polling_interval:i})}function y(e){var t=e.code,n=e.msg,r=e.status_code;e=e.reportData,s.log.warn(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" unify "+t),s.reportFunc&&s.reportFunc(m,"request_end",{code:t,params:g,requestKV:p,reportData:e,polling:o}),l({code:t,msg:n,status_code:r})}if(s.reportFunc&&s.reportFunc(m,"request_start",{polling:o}),null!=(E=s.options)&&E.unify&&s.options.connection)if(void 0!==s.options.productNum){var v,b=[];for(v in d.param)void 0!==d.param[v]&&b.push({key:v,value:d.param[v]});var S={product:s.options.productNum,response_compress:f.INIT_CONFIG.compress?0:1,files:e,param_list:b,p_version:f.INIT_CONFIG.p_version},E=(s.log.info(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" files "+JSON.stringify(S.files)),s.options.online?1:2);s.sendCloudPBRequest(i,S,n,E,_,y)}else s.sendCloudRequest(i,d,"/cloud-setting/get",(function(e){_(e)}),(function(e){y(e)}));else s.options.urls&&c.fetch(s.options.urls,d,s.options.env||0).then((function(e){var t,n=e.code,r=e.data,i=e.polling_interval;e=e.reportData,s.log.info(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+n),r&&(t=[],Object.keys(r).forEach((function(e){var n;t.push({name:e,code:r[e].code,message:null==(n=r[e])?void 0:n.message,versions:JSON.stringify(null==(n=r[e])?void 0:n.versions),content:JSON.stringify(null==(e=r[e])?void 0:e.data)})}))),s.reportFunc&&s.reportFunc(m,"request_end",{code:n,reportData:e,params:g,requestKV:p,files:t,polling:o}),u({data:r,polling_interval:i})})).catch((function(e){var t=e.code,n=e.msg;e=e.reportData,s.log.warn(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" "+t),s.reportFunc&&s.reportFunc(m,"request_end",{code:t,params:g,requestKV:p,reportData:e,polling:o}),l({code:t,msg:n})}))}))},g.prototype.sendCloudRequest=function(e,t,n,i,a,c,l){var h=this,d=(void 0===c&&(c=3),void 0===l&&(l=[]),(new Date).getTime());this.sendNetAgentHttpRequest({service:o.SERVICE_ClOUD_SETTING,body:t,ack:!1,idName:e,method_no:s.METHOD_POST,location:n},(function(o){var s,f,p,g,m;200===(null==o?void 0:o.status_code)?(s=(g=JSON.parse(o.body)).code,m=g.message,f=g.data,p=g.polling_interval,g=(new Date).getTime()-d,l.push({timestamp:d,url:n,error:s,duration:g}),0===s?i({code:s,msg:m,data:f,polling_interval:p,reportData:l}):a({code:s,msg:m,reportData:l})):(m=(new Date).getTime()-d,l.push({timestamp:d,url:n,error:null==o?void 0:o.status_code,duration:m}),0<c?(c--,h.sendCloudRequest(e,t,n,i,a,c,l)):a(r(r({},u.errorList.FILE_REQUEST_FAIL),{reportData:l})))}),(function(o){var s=(new Date).getTime()-d;l.push({timestamp:d,url:n,error:o.code,duration:s}),0<c?(c--,h.sendCloudRequest(e,t,n,i,a,c,l)):a(r(r({},u.errorList.FILE_REQUEST_FAIL),{reportData:l}))}),null,{timeout:4e3})},g.prototype.sendNetAgentHttpRequest=function(e,t,n,r,i){r={param:e,suc:t,err:n,ack:r,option:i},null!=(i=this.options.connection)&&i.isConnect()?this.sendNetUintData(r):this.unSendCommandList.push(r)},g.prototype.sendNetUintData=function(e){var t=e.param,n=e.suc,r=e.err,i=e.ack,o=e.option;null!=(e=this.options.connection)&&e.startHttpRequest(t,n,r,i,o)},g.prototype.checkUnSendMsgs=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.param&&this.sendNetUintData(t._data),t=e.getFirst()},g.prototype.sendCloudPBRequest=function(e,t,n,i,o,c,l,d){var f,g=this,m=(void 0===l&&(l=3),void 0===d&&(d=[]),(new Date).getTime()),_=this.protobuf.encodeCloudSettingReq(t);null!=(f=this.options.connection)&&f.startHttpRequest2({interfaceID:14,body:_,ack:!1,idName:e,method:s.METHOD_POST,token:n,mode:i,reduceRspHeaders:!0},(function(s,f){if(200===(null==s?void 0:s.status_code)){var _=g.protobuf.decodeCloudSettingRsp(s.body),y=_.message,v=_.polling_interval,b=_.code||0,S=(p.default.isLong(b)&&(b=b.toNumber()),(new Date).getTime()-m);if(d.push({timestamp:m,error:b,duration:S}),0===b){for(var E={},T=0;T<_.file_response.length;T++){var w=(L=_.file_response[T]).message,C=L.file_name,I=L.hash,R=L.g_version,k=L.json_data,N=(g.log.info(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" file rsp "+C+" "+R+" "+I.toString()),L.code||0);if(p.default.isLong(N)&&(N=N.toNumber()),L={},0<(null==I?void 0:I.byteLength)&&0<(null==k?void 0:k.byteLength))try{var O=0===t.response_compress?h.decodeCompressData(k):h.decodeString(k),L=JSON.parse(O)}catch(s){g.log.info(a.ZEGO_SETTING_ACTION.SETTINGFETCHHANDLER_FETCHSETTING+" decode fail "+(null==s?void 0:s.message)?s.message:JSON.stringify(s))}E[C]={code:N,message:w,versions:{hash:I,g_version:R},data:L,hashChange:0===I.byteLength?0:1}}o({code:b,msg:y,data:E,polling_interval:v,reportData:d})}else c({code:b,msg:y,reportData:d})}else y=(new Date).getTime()-m,d.push({timestamp:m,error:null==s?void 0:s.status_code,duration:y}),0<l?(l--,g.sendCloudPBRequest(e,t,n,i,o,c,l,d)):c(r(r({},u.errorList.FILE_REQUEST_FAIL),{reportData:d,status_code:null==s?void 0:s.status_code}))}),(function(s){var a=(new Date).getTime()-m;d.push({timestamp:m,error:s.code,duration:a}),0<l?(l--,g.sendCloudPBRequest(e,t,n,i,o,c,l,d)):c(r(r({},u.errorList.FILE_REQUEST_FAIL),{reportData:d,status_code:null==s?void 0:s.status_code}))}),null,{timeout:4e3,extras:{protoCmd:"GetCloudSettingConfigRequest"}})},t.SettingFetchHandler=n=g},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=(Object.defineProperty(t,"__esModule",{value:!0}),t.fetch=void 0,n(1));t.fetch=function e(t,n,o,s,a,u){return void 0===s&&(s=5),void 0===a&&(a=0),void 0===u&&(u=[]),new Promise((function(c,l){a=a||(new Date).getTime();var h,d,f,p=(new Date).getTime();0===o?((h=new XMLHttpRequest).open("post",d=t[(s+1)%2]||t[0]),1==n.compress&&(h.responseType="arraybuffer"),h.ontimeout=function(){console.warn("The request for "+d+" timed out.")},h.onreadystatechange=function(){var f,g,m,_,y;4==h.readyState&&(200<=h.status&&h.status<300||304==h.status?(g=void 0,1!=n.compress&&(g=h.responseText),y=(new Date).getTime()-p,f=(m=JSON.parse(g)).code,_=m.message,g=m.data,m=m.polling_interval,u.push({timestamp:p,url:d,error:f,duration:y}),0===f?c({code:f,msg:_,data:g,polling_interval:m,reportData:u}):l({code:f,msg:_,reportData:u})):(_=(new Date).getTime()-p,u.push({timestamp:p,url:d,error:h.status,duration:_}),y=(new Date).getTime()-a,0<s&&y<8e3?e(t,n,o,--s,a,u).then((function(e){c(e)})).catch((function(e){l(e)})):l(r(r({},i.errorList.FILE_REQUEST_FAIL),{reportData:u}))))},h.timeout=8e3,h.send(JSON.stringify(n))):(f=t[(s+1)%2]||t[0],wx.request({url:f,data:n,method:"POST",success:function(h){console.log(h.data);var d=(_=h.data).code,g=_.message,m=_.data,_=_.polling_interval;void 0!==d?0===d?(console.log("post suc"),c({code:d,msg:g,data:m,polling_interval:_,reportData:u})):(console.error("post fail ",d,g),l({code:d,msg:g,reportData:u})):(g=(new Date).getTime()-p,u.push({timestamp:p,url:f,error:i.errorList.FILE_REQUEST_FAIL.code,msg:h.data,duration:g}),0<s?e(t,n,o,--s,a,u).then((function(e){c(e)})).catch((function(e){l(e)})):l(r(r({},i.errorList.FILE_REQUEST_FAIL),{reportData:u})))},fail:function(h){console.log("send failed "+JSON.stringify(h)+h.statusCode);var d=(new Date).getTime()-p;u.push({timestamp:p,url:f,error:i.errorList.FILE_REQUEST_FAIL.code,msg:h.errMsg,duration:d}),0<s?e(t,n,o,--s,a,u).then((function(e){c(e)})).catch((function(e){l(e)})):l(r(r({},i.errorList.FILE_REQUEST_FAIL),{reportData:u}))}}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListNode=void 0,Object.defineProperty(i.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),i.prototype.hasNext=function(){return this.next&&this.next.id},i.prototype.hasPrev=function(){return this.prev&&this.prev.id};var r=i;function i(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}function o(){this.start=new r,this.end=new r,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.ListNode=r,o.prototype.insertBefore=function(e,t){return(t=new r(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},o.prototype.addLast=function(e){return this.insertBefore(this.end,e)},o.prototype.add=function(e){return this.addLast(e)},o.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},o.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},o.prototype.size=function(){return this._numNodes},o.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},o.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},o.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},o.prototype.removeFirst=function(){return 0<this._numNodes&&this.start.next?this.remove(this.start.next):null},o.prototype.removeLast=function(){return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):null},o.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},o.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},o.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},o.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},o.prototype.push=function(e){return this.addLast(e)},o.prototype.unshift=function(e){this.insertBefore(0<this._numNodes?this.start.next:this.end,e)},o.prototype.pop=function(){return this.removeLast()},o.prototype.shift=function(){return this.removeFirst()},t.LinkedList=o},function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var o=i,s=r+n;e^=-1;for(var a=r;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}var r=function(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--s;);i%=65521,o%=65521}return i|o<<16|0},i=new Uint32Array(function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}()),o=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),s=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),a=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),u=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),c=function(e,t,n,r,i,c,l,h){var d,f,p,g,m,_,y,v,b,S=h.bits,E=0,T=0,w=0,C=0,I=0,R=0,k=0,N=0,O=0,L=0,A=null,x=0,P=new Uint16Array(16),Z=new Uint16Array(16),M=null,D=0;for(E=0;E<=15;E++)P[E]=0;for(T=0;T<r;T++)P[t[n+T]]++;for(I=S,C=15;1<=C&&0===P[C];C--);if(C<I&&(I=C),0===C)i[c++]=20971520,i[c++]=20971520,h.bits=1;else{for(w=1;w<C&&0===P[w];w++);for(I<w&&(I=w),E=N=1;E<=15;E++)if((N=(N<<1)-P[E])<0)return-1;if(0<N&&(0===e||1!==C))return-1;for(Z[1]=0,E=1;E<15;E++)Z[E+1]=Z[E]+P[E];for(T=0;T<r;T++)0!==t[n+T]&&(l[Z[t[n+T]]++]=T);if(_=0===e?(A=M=l,19):1===e?(A=o,x-=257,M=s,D-=257,256):(A=a,M=u,-1),E=w,m=c,k=T=L=0,p=-1,g=(O=1<<(R=I))-1,1===e&&852<O||2===e&&592<O)return 1;for(;;){for(b=l[T]<_?(v=0,l[T]):l[T]>_?(v=M[D+l[T]],A[x+l[T]]):(v=96,0),d=1<<(y=E-k),w=f=1<<R;i[m+(L>>k)+(f-=d)]=y<<24|v<<16|b|0,0!==f;);for(d=1<<E-1;L&d;)d>>=1;if(L=0!==d?(L&d-1)+d:0,T++,0==--P[E]){if(E===C)break;E=t[n+l[T]]}if(I<E&&(L&g)!==p){for(m+=w,N=1<<(R=E-(k=0===k?I:k));R+k<C&&!((N-=P[R+k])<=0);)R++,N<<=1;if(O+=1<<R,1===e&&852<O||2===e&&592<O)return 1;i[p=L&g]=I<<24|R<<16|m-c|0}}0!==L&&(i[m+L]=E-k<<24|64<<16|0),h.bits=I}return 0},l={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},h=l.Z_FINISH,d=l.Z_BLOCK,f=l.Z_TREES,p=l.Z_OK,g=l.Z_STREAM_END,m=l.Z_NEED_DICT,_=l.Z_STREAM_ERROR,y=l.Z_DATA_ERROR,v=l.Z_MEM_ERROR,b=l.Z_BUF_ERROR,S=l.Z_DEFLATED;function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(e,i){var o,s,a,u,l,E,T,w,R,O,L,A,x,P,Z,M,D,U,B,G,W,H,z,V,F=0,X=new Uint8Array(4),Y=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return _;12===(o=e.state).mode&&(o.mode=13),l=e.next_out,a=e.output,u=e.next_in,s=e.input,w=o.hold,R=o.bits,O=E=e.avail_in,L=T=e.avail_out,H=p;e:for(;;)switch(o.mode){case 1:if(0===o.wrap)o.mode=13;else{for(;R<16;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(2&o.wrap&&35615===w)X[o.check=0]=255&w,X[1]=w>>>8&255,o.check=t(o.check,X,2,0),R=w=0,o.mode=2;else if(o.flags=0,o.head&&(o.head.done=!1),!(1&o.wrap)||(((255&w)<<8)+(w>>8))%31)e.msg="incorrect header check",o.mode=30;else if((15&w)!==S)e.msg="unknown compression method",o.mode=30;else{if(R-=4,W=8+(15&(w>>>=4)),0===o.wbits)o.wbits=W;else if(W>o.wbits){e.msg="invalid window size",o.mode=30;break}o.dmax=1<<o.wbits,e.adler=o.check=1,o.mode=512&w?10:12,R=w=0}}break;case 2:for(;R<16;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(o.flags=w,(255&o.flags)!==S){e.msg="unknown compression method",o.mode=30;break}if(57344&o.flags){e.msg="unknown header flags set",o.mode=30;break}o.head&&(o.head.text=w>>8&1),512&o.flags&&(X[0]=255&w,X[1]=w>>>8&255,o.check=t(o.check,X,2,0)),R=w=0,o.mode=3;case 3:for(;R<32;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}o.head&&(o.head.time=w),512&o.flags&&(X[0]=255&w,X[1]=w>>>8&255,X[2]=w>>>16&255,X[3]=w>>>24&255,o.check=t(o.check,X,4,0)),R=w=0,o.mode=4;case 4:for(;R<16;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}o.head&&(o.head.xflags=255&w,o.head.os=w>>8),512&o.flags&&(X[0]=255&w,X[1]=w>>>8&255,o.check=t(o.check,X,2,0)),R=w=0,o.mode=5;case 5:if(1024&o.flags){for(;R<16;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}o.length=w,o.head&&(o.head.extra_len=w),512&o.flags&&(X[0]=255&w,X[1]=w>>>8&255,o.check=t(o.check,X,2,0)),R=w=0}else o.head&&(o.head.extra=null);o.mode=6;case 6:if(1024&o.flags&&((A=(A=o.length)>E?E:A)&&(o.head&&(W=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Uint8Array(o.head.extra_len)),o.head.extra.set(s.subarray(u,u+A),W)),512&o.flags&&(o.check=t(o.check,s,A,u)),E-=A,u+=A,o.length-=A),o.length))break e;o.length=0,o.mode=7;case 7:if(2048&o.flags){if(0===E)break e;for(A=0;W=s[u+A++],o.head&&W&&o.length<65536&&(o.head.name+=String.fromCharCode(W)),W&&A<E;);if(512&o.flags&&(o.check=t(o.check,s,A,u)),E-=A,u+=A,W)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=8;case 8:if(4096&o.flags){if(0===E)break e;for(A=0;W=s[u+A++],o.head&&W&&o.length<65536&&(o.head.comment+=String.fromCharCode(W)),W&&A<E;);if(512&o.flags&&(o.check=t(o.check,s,A,u)),E-=A,u+=A,W)break e}else o.head&&(o.head.comment=null);o.mode=9;case 9:if(512&o.flags){for(;R<16;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(w!==(65535&o.check)){e.msg="header crc mismatch",o.mode=30;break}R=w=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),e.adler=o.check=0,o.mode=12;break;case 10:for(;R<32;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}e.adler=o.check=n(w),R=w=0,o.mode=11;case 11:if(0===o.havedict)return e.next_out=l,e.avail_out=T,e.next_in=u,e.avail_in=E,o.hold=w,o.bits=R,m;e.adler=o.check=1,o.mode=12;case 12:if(i===d||i===f)break e;case 13:if(o.last)w>>>=7&R,R-=7&R,o.mode=27;else{for(;R<3;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}switch(o.last=1&w,--R,3&(w>>>=1)){case 0:o.mode=14;break;case 1:j=void 0;var K=o;if(k){C=new Int32Array(512),I=new Int32Array(32);for(var j=0;j<144;)K.lens[j++]=8;for(;j<256;)K.lens[j++]=9;for(;j<280;)K.lens[j++]=7;for(;j<288;)K.lens[j++]=8;for(c(1,K.lens,0,288,C,0,K.work,{bits:9}),j=0;j<32;)K.lens[j++]=5;c(2,K.lens,0,32,I,0,K.work,{bits:5}),k=!1}if(K.lencode=C,K.lenbits=9,K.distcode=I,K.distbits=5,o.mode=20,i!==f)break;w>>>=2,R-=2;break e;case 2:o.mode=17;break;case 3:e.msg="invalid block type",o.mode=30}w>>>=2,R-=2}break;case 14:for(w>>>=7&R,R-=7&R;R<32;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",o.mode=30;break}if(o.length=65535&w,R=w=0,o.mode=15,i===f)break e;case 15:o.mode=16;case 16:if(A=o.length){if(0===(A=T<(A=E<A?E:A)?T:A))break e;a.set(s.subarray(u,u+A),l),E-=A,u+=A,T-=A,l+=A,o.length-=A}else o.mode=12;break;case 17:for(;R<14;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(o.nlen=257+(31&w),R-=5,o.ndist=1+(31&(w>>>=5)),R-=5,o.ncode=4+(15&(w>>>=5)),w>>>=4,R-=4,286<o.nlen||30<o.ndist){e.msg="too many length or distance symbols",o.mode=30;break}o.have=0,o.mode=18;case 18:for(;o.have<o.ncode;){for(;R<3;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}o.lens[Y[o.have++]]=7&w,w>>>=3,R-=3}for(;o.have<19;)o.lens[Y[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,H=c(0,o.lens,0,19,o.lencode,0,o.work,z={bits:o.lenbits}),o.lenbits=z.bits,H){e.msg="invalid code lengths set",o.mode=30;break}o.have=0,o.mode=19;case 19:for(;o.have<o.nlen+o.ndist;){for(;M=(F=o.lencode[w&(1<<o.lenbits)-1])>>>16&255,D=65535&F,!((Z=F>>>24)<=R);){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(D<16)w>>>=Z,R-=Z,o.lens[o.have++]=D;else{if(16===D){for(V=Z+2;R<V;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(w>>>=Z,R-=Z,0===o.have){e.msg="invalid bit length repeat",o.mode=30;break}W=o.lens[o.have-1],A=3+(3&w),w>>>=2,R-=2}else if(17===D){for(V=Z+3;R<V;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}W=0,A=3+(7&(w>>>=Z)),w>>>=3,R=R-Z-3}else{for(V=Z+7;R<V;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}W=0,A=11+(127&(w>>>=Z)),w>>>=7,R=R-Z-7}if(o.have+A>o.nlen+o.ndist){e.msg="invalid bit length repeat",o.mode=30;break}for(;A--;)o.lens[o.have++]=W}}if(30===o.mode)break;if(0===o.lens[256]){e.msg="invalid code -- missing end-of-block",o.mode=30;break}if(o.lenbits=9,H=c(1,o.lens,0,o.nlen,o.lencode,0,o.work,z={bits:o.lenbits}),o.lenbits=z.bits,H){e.msg="invalid literal/lengths set",o.mode=30;break}if(o.distbits=6,o.distcode=o.distdyn,H=c(2,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,z={bits:o.distbits}),o.distbits=z.bits,H){e.msg="invalid distances set",o.mode=30;break}if(o.mode=20,i===f)break e;case 20:o.mode=21;case 21:if(6<=E&&258<=T){e.next_out=l,e.avail_out=T,e.next_in=u,e.avail_in=E,o.hold=w,o.bits=R,re=ue=te=ee=$=q=Q=J=_e=me=ae=ie=void 0;var J,Q,q,$,ee,te,ne=e,re=ne.state,ie=ne.next_in,oe=ne.input,se=ie+(ne.avail_in-5),ae=ne.next_out,ue=ne.output,ce=ae-(L-ne.avail_out),le=ae+(ne.avail_out-257),he=re.dmax,de=re.wsize,fe=re.whave,pe=re.wnext,ge=re.window,me=re.hold,_e=re.bits,ye=re.lencode,ve=re.distcode,be=(1<<re.lenbits)-1,Se=(1<<re.distbits)-1;t:do{for(_e<15&&(me+=oe[ie++]<<_e,me+=oe[ie++]<<(_e+=8),_e+=8),J=ye[me&be];;){if(me>>>=Q=J>>>24,_e-=Q,0==(Q=J>>>16&255))ue[ae++]=65535&J;else{if(!(16&Q)){if(0==(64&Q)){J=ye[(65535&J)+(me&(1<<Q)-1)];continue}if(32&Q){re.mode=12;break t}ne.msg="invalid literal/length code",re.mode=30;break t}for(q=65535&J,(Q&=15)&&(_e<Q&&(me+=oe[ie++]<<_e,_e+=8),q+=me&(1<<Q)-1,me>>>=Q,_e-=Q),_e<15&&(me+=oe[ie++]<<_e,me+=oe[ie++]<<(_e+=8),_e+=8),J=ve[me&Se];;){if(me>>>=Q=J>>>24,_e-=Q,!(16&(Q=J>>>16&255))){if(0==(64&Q)){J=ve[(65535&J)+(me&(1<<Q)-1)];continue}ne.msg="invalid distance code",re.mode=30;break t}if($=65535&J,_e<(Q&=15)&&(me+=oe[ie++]<<_e,(_e+=8)<Q)&&(me+=oe[ie++]<<_e,_e+=8),($+=me&(1<<Q)-1)>he){ne.msg="invalid distance too far back",re.mode=30;break t}if(me>>>=Q,_e-=Q,$>(Q=ae-ce)){if((Q=$-Q)>fe&&re.sane){ne.msg="invalid distance too far back",re.mode=30;break t}if(te=ge,(ee=0)===pe){if(ee+=de-Q,Q<q){for(q-=Q;ue[ae++]=ge[ee++],--Q;);ee=ae-$,te=ue}}else if(pe<Q){if(ee+=de+pe-Q,(Q-=pe)<q){for(q-=Q;ue[ae++]=ge[ee++],--Q;);if(ee=0,pe<q){for(q-=Q=pe;ue[ae++]=ge[ee++],--Q;);ee=ae-$,te=ue}}}else if(ee+=pe-Q,Q<q){for(q-=Q;ue[ae++]=ge[ee++],--Q;);ee=ae-$,te=ue}for(;2<q;)ue[ae++]=te[ee++],ue[ae++]=te[ee++],ue[ae++]=te[ee++],q-=3;q&&(ue[ae++]=te[ee++],1<q)&&(ue[ae++]=te[ee++])}else{for(ee=ae-$;ue[ae++]=ue[ee++],ue[ae++]=ue[ee++],ue[ae++]=ue[ee++],2<(q-=3););q&&(ue[ae++]=ue[ee++],1<q)&&(ue[ae++]=ue[ee++])}break}}break}}while(ie<se&&ae<le);ie-=q=_e>>3,me&=(1<<(_e-=q<<3))-1,ne.next_in=ie,ne.next_out=ae,ne.avail_in=ie<se?se-ie+5:5-(ie-se),ne.avail_out=ae<le?le-ae+257:257-(ae-le),re.hold=me,re.bits=_e,l=e.next_out,a=e.output,T=e.avail_out,u=e.next_in,s=e.input,E=e.avail_in,w=o.hold,R=o.bits,12===o.mode&&(o.back=-1);break}for(o.back=0;M=(F=o.lencode[w&(1<<o.lenbits)-1])>>>16&255,D=65535&F,!((Z=F>>>24)<=R);){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(M&&0==(240&M)){for(U=Z,B=M,G=D;M=(F=o.lencode[G+((w&(1<<U+B)-1)>>U)])>>>16&255,D=65535&F,!(U+(Z=F>>>24)<=R);){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}w>>>=U,R-=U,o.back+=U}if(w>>>=Z,R-=Z,o.back+=Z,o.length=D,0===M){o.mode=26;break}if(32&M){o.back=-1,o.mode=12;break}if(64&M){e.msg="invalid literal/length code",o.mode=30;break}o.extra=15&M,o.mode=22;case 22:if(o.extra){for(V=o.extra;R<V;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}o.length+=w&(1<<o.extra)-1,w>>>=o.extra,R-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=23;case 23:for(;M=(F=o.distcode[w&(1<<o.distbits)-1])>>>16&255,D=65535&F,!((Z=F>>>24)<=R);){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(0==(240&M)){for(U=Z,B=M,G=D;M=(F=o.distcode[G+((w&(1<<U+B)-1)>>U)])>>>16&255,D=65535&F,!(U+(Z=F>>>24)<=R);){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}w>>>=U,R-=U,o.back+=U}if(w>>>=Z,R-=Z,o.back+=Z,64&M){e.msg="invalid distance code",o.mode=30;break}o.offset=D,o.extra=15&M,o.mode=24;case 24:if(o.extra){for(V=o.extra;R<V;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}o.offset+=w&(1<<o.extra)-1,w>>>=o.extra,R-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){e.msg="invalid distance too far back",o.mode=30;break}o.mode=25;case 25:if(0===T)break e;if(o.offset>(A=L-T)){if((A=o.offset-A)>o.whave&&o.sane){e.msg="invalid distance too far back",o.mode=30;break}x=A>o.wnext?o.wsize-(A-=o.wnext):o.wnext-A,A>o.length&&(A=o.length),P=o.window}else P=a,x=l-o.offset,A=o.length;for(T-=A=T<A?T:A,o.length-=A;a[l++]=P[x++],--A;);0===o.length&&(o.mode=21);break;case 26:if(0===T)break e;a[l++]=o.length,T--,o.mode=21;break;case 27:if(o.wrap){for(;R<32;){if(0===E)break e;E--,w|=s[u++]<<R,R+=8}if(e.total_out+=L-=T,o.total+=L,L&&(e.adler=o.check=(o.flags?t:r)(o.check,a,L,l-L)),L=T,(o.flags?w:n(w))!==o.check){e.msg="incorrect data check",o.mode=30;break}R=w=0}o.mode=28;case 28:if(o.wrap&&o.flags){for(;R<32;){if(0===E)break e;E--,w+=s[u++]<<R,R+=8}if(w!==(4294967295&o.total)){e.msg="incorrect length check",o.mode=30;break}R=w=0}o.mode=29;case 29:H=g;break e;case 30:H=y;break e;case 31:return v;default:return _}return e.next_out=l,e.avail_out=T,e.next_in=u,e.avail_in=E,o.hold=w,o.bits=R,(o.wsize||L!==e.avail_out&&o.mode<30&&(o.mode<27||i!==h))&&N(e,e.output,e.next_out,L-e.avail_out),L-=e.avail_out,e.total_in+=O-=e.avail_in,e.total_out+=L,o.total+=L,o.wrap&&L&&(e.adler=o.check=(o.flags?t:r)(o.check,a,L,e.next_out-L)),e.data_type=o.bits+(o.last?64:0)+(12===o.mode?128:0)+(20===o.mode||15===o.mode?256:0),(0==O&&0===L||i===h)&&H===p?b:H}function w(e,t){var n,i=t.length;return!e||!e.state||0!==(n=e.state).wrap&&11!==n.mode?_:11===n.mode&&r(1,t,i,0)!==n.check?y:N(e,t,i,i)?(n.mode=31,v):(n.havedict=1,p)}var C,I,R=function(e){var t;return e&&e.state&&((t=e.state).wsize=0,t.whave=0,t.wnext=0,t=e)&&t.state?(t.total_in=t.total_out=(e=t.state).total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,p):_},k=!0,N=function(e,t,n,r){var i;return null===(e=e.state).window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new Uint8Array(e.wsize)),r>=e.wsize?(e.window.set(t.subarray(n-e.wsize,n),0),e.wnext=0,e.whave=e.wsize):((i=e.wsize-e.wnext)>r&&(i=r),e.window.set(t.subarray(n-r,n-r+i),e.wnext),(r-=i)?(e.window.set(t.subarray(n-r,n),0),e.wnext=r,e.whave=e.wsize):(e.wnext+=i,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=i))),0},O=R,L=function(e,t){var n,r,i;return e?(n=new E,(e.state=n).window=null,n=t,(i=!(t=e)||!t.state||(i=t.state,n<0?(r=0,n=-n):(r=1+(n>>4),n<48&&(n&=15)),n&&(n<8||15<n))?_:(null!==i.window&&i.wbits!==n&&(i.window=null),i.wrap=r,i.wbits=n,R(t)))!==p&&(e.state=null),i):_};function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var x=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){x=!1}for(var P=new Uint8Array(256),Z=0;Z<256;Z++)P[Z]=252<=Z?6:248<=Z?5:240<=Z?4:224<=Z?3:192<=Z?2:1;function M(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function D(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}P[254]=P[254]=1;var U={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B=Object.prototype.toString,G=l.Z_NO_FLUSH,W=l.Z_FINISH,H=l.Z_OK,z=l.Z_STREAM_END,V=l.Z_NEED_DICT,F=l.Z_STREAM_ERROR,X=l.Z_DATA_ERROR,Y=l.Z_MEM_ERROR;function K(e){this.options=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==A(n))throw new TypeError(n+"must be non-object");for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}return e}({chunkSize:65536,windowBits:15,to:""},e||{});var t,n=this.options;if(n.raw&&0<=n.windowBits&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits)&&(n.windowBits=-15),!(0<=n.windowBits&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),15<n.windowBits&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0,(e=L(this.strm,n.windowBits))!==H)throw new Error(U[e]);if(this.header=new D,!(t=this.strm)||!t.state||0==(2&(t=t.state).wrap)||((t.head=this.header).done=!1),n.dictionary&&("string"==typeof n.dictionary?n.dictionary=function(e){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);for(var t,n,r,i,o=e.length,s=0,a=0;a<o;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=i=0;i<s;a++)55296==(64512&(n=e.charCodeAt(a)))&&a+1<o&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:(n<2048?t[i++]=192|n>>>6:(n<65536?t[i++]=224|n>>>12:(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63),t[i++]=128|n>>>6&63),t[i++]=128|63&n);return t}(n.dictionary):"[object ArrayBuffer]"===B.call(n.dictionary)&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw)&&(e=w(this.strm,n.dictionary))!==H)throw new Error(U[e])}function j(e,t){if((t=new K(t)).push(e),t.err)throw t.msg||U[t.err];return t.result}function J(e,t){return(t=t||{}).raw=!0,j(e,t)}K.prototype.push=function(e,t){var n,r,i=this.strm,o=this.options.chunkSize,s=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?W:G,i.input="[object ArrayBuffer]"===B.call(e)?new Uint8Array(e):e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(o),i.next_out=0,i.avail_out=o),(n=T(i,r))===V&&s&&((n=w(i,s))===H?n=T(i,r):n===X&&(n=V));0<i.avail_in&&n===z&&0<i.state.wrap&&0!==e[i.next_in];)O(i),n=T(i,r);switch(n){case F:case X:case V:case Y:return this.onEnd(n),!(this.ended=!0)}var a,u,c,l=i.avail_out;if(!i.next_out||0!==i.avail_out&&n!==z||("string"===this.options.to?(a=function(e,t){for(var n=(t=(t=t||e.length)>e.length?e.length:t)-1;0<=n&&128==(192&e[n]);)n--;return!(n<0||0===n)&&n+P[e[n]]>t?n:t}(i.output,i.next_out),u=i.next_out-a,c=function(e,t){var n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));for(var r=new Array(2*n),i=0,o=0;o<n;){var s=e[o++];if(s<128)r[i++]=s;else{var a=P[s];if(4<a)r[i++]=65533,o+=a-1;else{for(s&=2===a?31:3===a?15:7;1<a&&o<n;)s=s<<6|63&e[o++],a--;1<a?r[i++]=65533:s<65536?r[i++]=s:(r[i++]=55296|(s-=65536)>>10&1023,r[i++]=56320|1023&s)}}}var u=r,c=i;if(c<65534&&u.subarray&&x)return String.fromCharCode.apply(null,u.length===c?u:u.subarray(0,c));for(var l="",h=0;h<c;h++)l+=String.fromCharCode(u[h]);return l}(i.output,a),i.next_out=u,i.avail_out=o-u,u&&i.output.set(i.output.subarray(a,a+u),0),this.onData(c)):this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out))),n!==H||0!==l){if(n===z)return u=void 0,n=(a=this.strm)&&a.state?((u=a.state).window&&(u.window=null),a.state=null,p):_,this.onEnd(n),this.ended=!0;if(0===i.avail_in)break}}return!0},K.prototype.onData=function(e){this.chunks.push(e)},K.prototype.onEnd=function(e){e===H&&(this.result="string"===this.options.to?this.chunks.join(""):function(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n].length;for(var i=new Uint8Array(t),o=0,s=0,a=e.length;o<a;o++){var u=e[o];i.set(u,s),s+=u.length}return i}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Q=j,q=j,$={Inflate:K,inflate:Q,inflateRaw:J,ungzip:q,constants:l};e.Inflate=K,e.constants=l,e.default=$,e.inflate=Q,e.inflateRaw=J,e.ungzip=q,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(t,"__esModule",{value:!0}),t.CloudSettingProtoBuf=void 0,s=s(n(5)),o=o(n(6)),n(18));function u(){}o.util.Long=s.default,o.configure(),u.prototype.encodeCloudSettingReq=function(e){return e=a.cloudsetting.GetCloudSettingConfigRequest.create(e),a.cloudsetting.GetCloudSettingConfigRequest.encode(e).finish()},u.prototype.decodeCloudSettingRsp=function(e){return a.cloudsetting.GetCloudSettingConfigResponse.decode(e)},t.CloudSettingProtoBuf=o=u},function(e,t,n){"use strict";var r,i=n(6),o=i.Reader,s=i.Writer,a=i.util,u=i.roots.default||(i.roots.default={});function c(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function l(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function h(e){if(this.file_list=[],this.param_list=[],this.files=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function d(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}function f(e){if(this.file_response=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}u.cloudsetting=((r={}).Product=(n={},(i=Object.create(n))[n[0]="RTC"]=0,i[n[1]="WEB_RTC"]=1,i[n[2]="ZIM"]=2,i[n[3]="ROOM_KIT"]=3,i[n[4]="DOC_SHARE"]=4,i[n[5]="WHITE_BOARD"]=5,i[n[999]="SELF_CHECK"]=999,i[n[1e3]="TEST_ANOOUS"]=1e3,i),r.Param=(c.prototype.key="",c.prototype.value="",c.create=function(e){return new c(e)},c.encode=function(e,t){return t=t||s.create(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},c.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.cloudsetting.Param;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},c),r.File=(l.prototype.file_name="",l.prototype.hash=a.newBuffer([]),l.prototype.g_version=0,l.create=function(e){return new l(e)},l.encode=function(e,t){return t=t||s.create(),null!=e.file_name&&Object.hasOwnProperty.call(e,"file_name")&&t.uint32(10).string(e.file_name),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.g_version&&Object.hasOwnProperty.call(e,"g_version")&&t.uint32(24).uint32(e.g_version),t},l.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.cloudsetting.File;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.file_name=e.string();break;case 2:r.hash=e.bytes();break;case 3:r.g_version=e.uint32();break;default:e.skipType(7&i)}}return r},l),r.GetCloudSettingConfigRequest=(h.prototype.product=0,h.prototype.response_compress=0,h.prototype.file_list=a.emptyArray,h.prototype.param_list=a.emptyArray,h.prototype.files=a.emptyArray,h.prototype.p_version=0,h.create=function(e){return new h(e)},h.encode=function(e,t){if(t=t||s.create(),null!=e.product&&Object.hasOwnProperty.call(e,"product")&&t.uint32(8).int32(e.product),null!=e.response_compress&&Object.hasOwnProperty.call(e,"response_compress")&&t.uint32(16).int32(e.response_compress),null!=e.file_list&&e.file_list.length)for(var n=0;n<e.file_list.length;++n)t.uint32(26).string(e.file_list[n]);if(null!=e.param_list&&e.param_list.length)for(n=0;n<e.param_list.length;++n)u.cloudsetting.Param.encode(e.param_list[n],t.uint32(34).fork()).ldelim();if(null!=e.files&&e.files.length)for(n=0;n<e.files.length;++n)u.cloudsetting.File.encode(e.files[n],t.uint32(42).fork()).ldelim();return null!=e.p_version&&Object.hasOwnProperty.call(e,"p_version")&&t.uint32(48).uint32(e.p_version),t},h.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.cloudsetting.GetCloudSettingConfigRequest;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.product=e.int32();break;case 2:r.response_compress=e.int32();break;case 3:r.file_list&&r.file_list.length||(r.file_list=[]),r.file_list.push(e.string());break;case 4:r.param_list&&r.param_list.length||(r.param_list=[]),r.param_list.push(u.cloudsetting.Param.decode(e,e.uint32()));break;case 5:r.files&&r.files.length||(r.files=[]),r.files.push(u.cloudsetting.File.decode(e,e.uint32()));break;case 6:r.p_version=e.uint32();break;default:e.skipType(7&i)}}return r},h),r.CloudSettingFileResponse=(d.prototype.code=a.Long?a.Long.fromBits(0,0,!1):0,d.prototype.message="",d.prototype.file_name="",d.prototype.global_version="",d.prototype.version="",d.prototype.app_version="",d.prototype.json_data=a.newBuffer([]),d.prototype.hash=a.newBuffer([]),d.prototype.g_version=0,d.create=function(e){return new d(e)},d.encode=function(e,t){return t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int64(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.file_name&&Object.hasOwnProperty.call(e,"file_name")&&t.uint32(26).string(e.file_name),null!=e.global_version&&Object.hasOwnProperty.call(e,"global_version")&&t.uint32(34).string(e.global_version),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(42).string(e.version),null!=e.app_version&&Object.hasOwnProperty.call(e,"app_version")&&t.uint32(50).string(e.app_version),null!=e.json_data&&Object.hasOwnProperty.call(e,"json_data")&&t.uint32(58).bytes(e.json_data),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(66).bytes(e.hash),null!=e.g_version&&Object.hasOwnProperty.call(e,"g_version")&&t.uint32(72).uint32(e.g_version),t},d.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.cloudsetting.CloudSettingFileResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int64();break;case 2:r.message=e.string();break;case 3:r.file_name=e.string();break;case 4:r.global_version=e.string();break;case 5:r.version=e.string();break;case 6:r.app_version=e.string();break;case 7:r.json_data=e.bytes();break;case 8:r.hash=e.bytes();break;case 9:r.g_version=e.uint32();break;default:e.skipType(7&i)}}return r},d),r.GetCloudSettingConfigResponse=(f.prototype.code=a.Long?a.Long.fromBits(0,0,!1):0,f.prototype.message="",f.prototype.polling_interval=0,f.prototype.file_response=a.emptyArray,f.create=function(e){return new f(e)},f.encode=function(e,t){if(t=t||s.create(),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).int64(e.code),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).string(e.message),null!=e.polling_interval&&Object.hasOwnProperty.call(e,"polling_interval")&&t.uint32(24).int32(e.polling_interval),null!=e.file_response&&e.file_response.length)for(var n=0;n<e.file_response.length;++n)u.cloudsetting.CloudSettingFileResponse.encode(e.file_response[n],t.uint32(34).fork()).ldelim();return t},f.decode=function(e,t){e instanceof o||(e=o.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new u.cloudsetting.GetCloudSettingConfigResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.int64();break;case 2:r.message=e.string();break;case 3:r.polling_interval=e.int32();break;case 4:r.file_response&&r.file_response.length||(r.file_response=[]),r.file_response.push(u.cloudsetting.CloudSettingFileResponse.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},f),r),e.exports=u}],r.c=u,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8))},function(e,t,n){var r;e.exports=(r=n(1),function(){var e,t;"function"==typeof ArrayBuffer&&(t=(e=r.lib.WordArray).init,(e.init=function(e){if((e=(e=e instanceof ArrayBuffer?new Uint8Array(e):e)instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e)instanceof Uint8Array){for(var n=e.byteLength,r=[],i=0;i<n;i++)r[i>>>2]|=e[i]<<24-i%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e)}(),r.lib.WordArray)},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){var r;e.exports=(e=n(1),r=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=this._map,i=(e.clamp(),[]),o=0;o<n;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(e){var t=e.length,n=this._map;if(!(i=this._reverseMap))for(var i=this._reverseMap=[],o=0;o<n.length;o++)i[n.charCodeAt(o)]=o;var s=n.charAt(64);return s&&-1!==(s=e.indexOf(s))&&(t=s),function(e,t,n){for(var i,o,s=[],a=0,u=0;u<t;u++)u%4&&(i=n[e.charCodeAt(u-1)]<<u%4*2,o=n[e.charCodeAt(u)]>>>6-u%4*2,s[a>>>2]|=(i|o)<<24-a%4*8,a++);return r.create(s,a)}(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64)},function(e,t,n){var r,i,o,s;e.exports=(e=n(1),s=(n=e).lib,r=s.WordArray,i=s.Hasher,o=[],s=(s=n.algo).SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],a=n[3],u=n[4],c=0;c<80;c++){o[c]=c<16?0|e[t+c]:(l=o[c-3]^o[c-8]^o[c-14]^o[c-16])<<1|l>>>31;var l=(r<<5|r>>>27)+u+o[c];l+=c<20?1518500249+(i&s|~i&a):c<40?1859775393+(i^s^a):c<60?(i&s|i&a|s&a)-1894007588:(i^s^a)-899497514,u=a,a=s,s=i<<30|i>>>2,i=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(64+r>>>9<<4)]=Math.floor(n/4294967296),t[15+(64+r>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),n.SHA1=i._createHelper(s),n.HmacSHA1=i._createHmacHelper(s),e.SHA1)},function(e,t,n){var r;e.exports=(e=n(1),r=e.enc.Utf8,void(e.algo.HMAC=(n=e.lib.Base).extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=r.parse(t));for(var n=e.blockSize,i=4*n,o=((t=t.sigBytes>i?e.finalize(t):t).clamp(),e=this._oKey=t.clone(),t=this._iKey=t.clone(),e.words),s=t.words,a=0;a<n;a++)o[a]^=1549556828,s[a]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})))},function(e,t,n){var r,i,o,s,a,u,c,l,h,d,f,p;e.exports=(e=n(1),n(9),void(e.lib.Cipher||(n=e.lib,r=n.Base,i=n.WordArray,o=n.BufferedBlockAlgorithm,h=e.enc,s=h.Base64,a=e.algo.EvpKDF,u=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?p:d}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=e.mode={},c=n.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),h=h.CBC=function(){var e=c.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o++)e[t+o]^=r[o]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,o=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=o}}),e}(),f=(e.pad={}).Pkcs7={pad:function(e,t){for(var n=(t*=4)-e.sigBytes%t,r=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);t=i.create(o,n),e.concat(t)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:h,padding:f}),reset:function(){u.reset.call(this);var e,t=(n=this.cfg).iv,n=n.mode;this._xformMode==this._ENC_XFORM_MODE?e=n.createEncryptor:(e=n.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,t&&t.words):(this._mode=e.call(n,this,t&&t.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),l=n.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(e.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(e=(e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t,n=(e=s.parse(e)).words;return 1398893684==n[0]&&1701076831==n[1]&&(t=i.create(n.slice(2,4)),n.splice(0,4),e.sigBytes-=16),l.create({ciphertext:e,salt:t})}},d=n.SerializableCipher=r.extend({cfg:r.extend({format:h}),encrypt:function(e,t,n,r){r=this.cfg.extend(r),t=(i=e.createEncryptor(n,r)).finalize(t);var i=i.cfg;return l.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),f=(e.kdf={}).OpenSSL={execute:function(e,t,n,r){return r=r||i.random(8),e=a.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,l.create({key:e,iv:n,salt:r})}},p=n.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:f}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=d.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,d.decrypt.call(this,e,t,n.key,r)}}))))},function(e,t,n){"use strict";n.r(t),n.d(t,"ZegoExpressWebRTMEngine",(function(){return Kn})),n.d(t,"getReportSeq",(function(){return p})),n.d(t,"getSeq",(function(){return f})),n.d(t,"ZegoLogger",(function(){return i.ZegoLogger})),n.d(t,"ZegoDataReport",(function(){return i.ZegoDataReport})),n.d(t,"ZegoExpressWebRTM",(function(){return Un})),n.d(t,"BusinessService",(function(){return T})),n.d(t,"NetConnection",(function(){return R})),n.d(t,"ZReporter",(function(){return Xn}));var r,i=n(3);(t=r=r||{})[t.SWITCH_ONE=1]="SWITCH_ONE",t[t.SWITCH_TWO=2]="SWITCH_TWO";var o,s,a,u,c,l,h,d,f=((t=o=o||{})[t.TT_NONE=0]="TT_NONE",t[t.TT_PC=1]="TT_PC",t[t.TT_IOS=2]="TT_IOS",t[t.TT_ANDROID=3]="TT_ANDROID",t[t.TT_MAC=4]="TT_MAC",t[t.TT_LINUX=5]="TT_LINUX",t[t.TT_WEB=6]="TT_WEB",t[t.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",t[t.TT_UNKNOWN=32]="TT_UNKNOWN",(t=s=s||{})[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login",(t=a=a||{})[t.I=0]="I",t[t.H=10]="H",t[t.M=100]="M",t[t.L=1e3]="L",(t=u=u||{})[t.offline=0]="offline",t[t.online=1]="online",(t=c=c||{})[t.NT_NONE=0]="NT_NONE",t[t.NT_LINE=1]="NT_LINE",t[t.NT_WIFI=2]="NT_WIFI",t[t.NT_2G=3]="NT_2G",t[t.NT_3G=4]="NT_3G",t[t.NT_4G=5]="NT_4G",t[t.NT_UNKNOWN=32]="NT_UNKNOWN",(t=l=l||{})[t.ClientType_None=0]="ClientType_None",t[t.ClientType_H5=1]="ClientType_H5",t[t.ClientType_SmallProgram=2]="ClientType_SmallProgram",t[t.ClientType_Webrtc=3]="ClientType_Webrtc",function(){return h++}),p=(d=h=1,function(){return d++}),g=(Object.defineProperty(m.prototype,"id",{get:function(){return this._id||null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),m.prototype.hasNext=function(){return this.next&&this.next.id},m.prototype.hasPrev=function(){return this.prev&&this.prev.id},m);function m(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.next=null,this.prev=null,this._id=e,this._data=t}y.prototype.insertBefore=function(e,t){return(t=new g(this._idCounter,t)).next=e,t.prev=e.prev,e.prev&&(e.prev.next=t),e.prev=t,++this._idCounter,++this._numNodes,t},y.prototype.addLast=function(e){return this.insertBefore(this.end,e)},y.prototype.add=function(e){return this.addLast(e)},y.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},y.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},y.prototype.size=function(){return this._numNodes},y.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(0<=e)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},y.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},y.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},y.prototype.removeFirst=function(){var e=null;return 0<this._numNodes&&this.start.next?this.remove(this.start.next):e},y.prototype.removeLast=function(){var e=null;return 0<this._numNodes&&this.end.prev?this.remove(this.end.prev):e},y.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},y.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},y.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},y.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},y.prototype.push=function(e){return this.addLast(e)},y.prototype.unshift=function(e){this.insertBefore(0<this._numNodes?this.start.next:this.end,e)},y.prototype.pop=function(){return this.removeLast()},y.prototype.shift=function(){return this.removeFirst()};var _=y;function y(){this.start=new g,this.end=new g,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}var v,b,S,E,T,w,C="æªå¼å¥æ¶æ¯æ¨¡å",I=n(10).ZegoConnectionAgent,R=(Object.defineProperty(k.prototype,"clientIP",{get:function(){var e;return(null==(e=this.connection)?void 0:e.clientIP)||""},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"timeOffset",{get:function(){var e;return null==(e=this.connection)?void 0:e.timeOffset},enumerable:!1,configurable:!0}),k.prototype.init=function(){var e;null!=(e=this.connection)&&e.init()},k.prototype.unInit=function(){var e;null!=(e=this.connection)&&e.unInit()},k.prototype.setAppInfo=function(e){var t;null!=(t=this.connection)&&t.setAppInfo(e)},k.prototype.setUserInfo=function(e){var t;null!=(t=this.connection)&&t.setUserInfo(e)},k.prototype.setNetAgentDefaultServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentDefaultServers(e)},k.prototype.setBackupDomains=function(e){var t;null!=(t=this.connection)&&t.setBackupDomains(e)},k.prototype.setDispatchConnectServers=function(e){var t;null!=(t=this.connection)&&t.setDispatchConnectServers(e)},k.prototype.setNetAgentSpecifiedServers=function(e){var t;null!=(t=this.connection)&&t.setNetAgentSpecifiedServers(e)},k.prototype.startHttpRequest=function(e,t,n,r,i){var o;null!=(o=this.connection)&&o.startHttpRequest(e,t,n,r,i)},k.prototype.startHttpRequest2=function(e,t,n,r,i){var o;null!=(o=this.connection)&&o.startHttpRequest2(e,t,n,r,i)},k.prototype.getAppConfigByAgent=function(e,t,n,r){var i;return null==(i=this.connection)?void 0:i.getAppConfigByAgent(e,t,n,r)},k.prototype.getPCRequest=function(e,t){var n;return(null==(n=this.connection)?void 0:n.getPCRequest(e,t))||null},k.prototype.connectUa=function(){var e;null!=(e=this.connection)&&e.connectUa()},k.prototype.destroyConnect=function(){var e;null!=(e=this.connection)&&e.destroyConnect()},k.prototype.destroy=function(){var e;null!=(e=this.connection)&&e.destroy()},k.prototype.isConnect=function(){return!!this.connection&&this.connection.isConnect()},k.prototype.on=function(e,t){var n;return(null==(n=this.connection)?void 0:n.on(e,t))||!0},k.prototype.off=function(e,t){var n;return null==(n=this.connection)?void 0:n.off(e,t)},k.prototype.setLogger=function(e){var t;return null==(t=this.connection)?void 0:t.setLogger(e)},k.prototype.setAccess=function(e){var t;return null==(t=this.connection)?void 0:t.setAccess(e)},k.prototype.getNTP=function(){var e;return(null==(e=this.connection)?void 0:e.getNetworkTimeInfo())||{timestamp:0,maxDeviation:0}},k);function k(){this.connection=null,this.isLoad=!1,this.callBackList=[],this.connection=new I}(t=v=v||{})[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",(t=b=b||{})[t.EMPTY=0]="EMPTY",t[t.CLOSE=1]="CLOSE",(t=S=S||{})[t.Mode_UNSET=0]="Mode_UNSET",t[t.MODE_ONLINE=1]="MODE_ONLINE",t[t.MODE_TEST=2]="MODE_TEST",t[t.MODE_ALPHA=3]="MODE_ALPHA",(t=E=E||{})[t.CLOSE=0]="CLOSE",t[t.TEMP=1]="TEMP",t[t.TIMEOUT=2]="TIMEOUT",(t=T=T||{})[t.SERVICE_UNSET=0]="SERVICE_UNSET",t[t.SERVICE_MEDIAGW=1]="SERVICE_MEDIAGW",t[t.SERVICE_LIVEROOM=2]="SERVICE_LIVEROOM",t[t.SERVICE_MIX=3]="SERVICE_MIX",t[t.SERVICE_ZEUS=4]="SERVICE_ZEUS",t[t.SERVICE_ZPUSH=5]="SERVICE_ZPUSH",t[t.SERVICE_L3=6]="SERVICE_L3",t[t.SERVICE_TALKLINE=7]="SERVICE_TALKLINE",t[t.SERVICE_EDUSUITE=8]="SERVICE_EDUSUITE",t[t.SERVICE_ZIM=9]="SERVICE_ZIM",t[t.SERVICE_ClOUD_SETTING=10]="SERVICE_ClOUD_SETTING",t[t.SERVICE_ZEUSHB=11]="SERVICE_ZEUSHB",t[t.SERVICE_USER_LOGIC=12]="SERVICE_USER_LOGIC",t[t.SERVICE_UNIFYDISPATCH=13]="SERVICE_UNIFYDISPATCH",t[t.SERVICE_QUALITY=14]="SERVICE_QUALITY",t[t.SERVICE_SECURITY=15]="SERVICE_SECURITY",t[t.SERVICE_KTVCPR=16]="SERVICE_KTVCPR",t[t.SERVICE_SWITCH4LIVEROOM=17]="SERVICE_SWITCH4LIVEROOM",t[t.SERVICE_WEBRTC_SIGNAL=18]="SERVICE_WEBRTC_SIGNAL",t[t.SERVICE_L3_WEBRTC_SIGNAL=19]="SERVICE_L3_WEBRTC_SIGNAL",t[t.SERVICE_VIDEOCPR=20]="SERVICE_VIDEOCPR",t[t.SERVICE_CDN=21]="SERVICE_CDN",t[t.SERVICE_CLOUDRECORD=22]="SERVICE_CLOUDRECORD",t[t.SERVICE_INNER_ECHO=23]="SERVICE_INNER_ECHO",t[t.SERVICE_OUTER_ECHO=24]="SERVICE_OUTER_ECHO",t[t.SERVICE_LOCALHOST_ECHO=25]="SERVICE_LOCALHOST_ECHO",t[t.SERVICE_ECHO=26]="SERVICE_ECHO",t[t.SERVICE_DOCSERVICE=27]="SERVICE_DOCSERVICE",t[t.SERVICE_AUTHSVR=28]="SERVICE_AUTHSVR",(t=w=w||{}).Logining="LOGINING",t.Logined="LOGINED",t.LoginFailed="LOGIN_FAILED",t.Reconnecting="RECONNECTING",t.Reconnected="RECONNECTED",t.ReconnectFailed="RECONNECT_FAILED",t.Kickout="KICKOUT",t.Logout="LOGOUT",t.LogoutFailed="LOGOUT_FAILED";var N={SERVER:{code:0,msg:"liverooom cmd error"},SUCCESS:{code:0,msg:"success."},INIT:{code:2000000001,msg:"init sdk wrong"},NOT_LOGIN:{code:1000002,msg:"not login"},APPID_INVALID:{code:1001004,msg:"appid invalid"},NETWORK_BROKEN:{code:1000017,msg:"network is broken"},GEO_SET_ERROR:{code:1000018,msg:"geo set error"},INPUT_PARAM:{code:1100001,msg:"input parm error."},TIMEOUT:{code:1100002,msg:"network timeout."},SOCKET_CLOSE:{code:1100003,msg:"socket close"},NET_SOCKET_TIMEOUT:{code:1100004,msg:"net agent timeout"},NET_HB_TIMEOUT:{code:1100005,msg:"net hb timeout"},INIT_SDK_WRONG:{code:1101e3,msg:"init sdk wrong"},ROOM_COUNT_EXCEED:{code:1002001,msg:"login rooms exceeds the upper limit"},USER_ID_NULL:{code:1002005,msg:"user ID is empty"},USER_ID_INVALID_CHARACTER:{code:1002006,msg:"user ID contains illegal characters"},USER_ID_TOO_LONG:{code:1002007,msg:"user ID is too long"},USER_NAME_NULL:{code:1002008,msg:"username is empty"},USER_NAME_TOO_LONG:{code:1002010,msg:"username is too long"},ROOM_ID_NULL:{code:1002011,msg:"room ID is empty"},ROOM_ID_INVALID_CHARACTER:{code:1002012,msg:"room ID contains illegal characters"},ROOM_ID_TOO_LONG:{code:1002013,msg:"room ID is too long"},ROOM_NOT_EXIST:{code:1002014,msg:"room not exist"},ROOM_EXTRA_INFO_KEY_LIMIT:{code:1002017,msg:"room extra info key exceed the limit"},LOGIN_TIMEOUT:{code:1002031,msg:"login timeout"},ROOM_MAX_USER_COUNT:{code:1002034,msg:"users logging into the room exceeds the maximum number"},MULTI_ROOM_UNABLE:{code:1002036,msg:"multi room unable"},MULTIPLE_LOGIN_KICKOUT:{code:1002050,msg:"kickout may be the same user ID login other"},NETWORK_RECOVERY:{code:1002051,msg:"network recovery"},ROOM_RETRY_TIMEOUT:{code:1002053,msg:"network is broken and login fail."},MANUAL_KICKOUT:{code:1002055,msg:"server has sent a signal to kick out"},REPEATEDLY_LOGIN:{code:1002056,msg:"user repeatedly login"},REPEATEDLY_ENTER_ROOM:{code:1002057,msg:"user repeatedly enter room"},ALREADY_LOGIN:{code:1002058,msg:"user already logged in"},FORBID_BLACK_USER:{code:1002066,msg:"forbid black user"},WHITE_BOARD_VERSION_ERROR:{code:1002098,msg:"Mismatch with RTC SDK version, please upgrade ZegoSuperBoard or ZegoWhiteboardView SDK to the latest version"},ROOM_INNER_ERROR:{code:1002099,msg:"room inner error"},HEARTBEAT_TIMEOUT:{code:1102001,msg:"heartbeat timeout."},PARSE_JSON_ERROR:{code:1102011,msg:"parse json error."},LOGIN_PROCESSING:{code:1102012,msg:"login is processing."},LIVEROMM_REQUEST_ERROR:{code:1102013,msg:"liveroom request error."},ZPUSH_REQUEST_FAIL:{code:1102014,msg:"zpush request fail."},LOGIN_STATE_WRONG:{code:1102015,msg:"user login state is wrong."},TOKEN_ERROR:{code:1102016,msg:"token error"},DIAPATCH_ERROR:{code:1102017,msg:"dispatch error"},TOKEN_EXPIRED:{code:1102018,msg:"token expired"},SUBCMD_ERROR:{code:1102019,msg:"subcmd error."},ZEGO_AUTH_ERROR:{code:1102020,msg:"zego auth error."},BIZ_CHANNEL_ERROR:{code:1102021,msg:"biz channel error."},UPLOAD_LOG_ERROR:{code:1102025,msg:"upload zip logs failed"}},O=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],L=(t=n(5),n.n(t)),A=(t=n(6),n.n(t));function x(){var e=window.navigator.userAgent,t=null!=window.ActiveXObject&&-1!=e.indexOf("MSIE"),n=-1!=e.indexOf("Firefox"),r=null!=window.opr,i=e.indexOf("Chrome")&&window.chrome;return e=-1!=e.indexOf("Safari")&&-1!=e.indexOf("Version"),t?"IE":n?"Firefox":r?"Opera":i?"Chrome":e?"Safari":"Unkown"}function P(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return((null==e?void 0:e.effectiveType)||(null==e?void 0:e.type)||"unknwon").toUpperCase()}function Z(e,t){return L.a.encrypt(e,t).toString()}function M(e,t){try{return L.a.decrypt(e,t).toString(A.a)}catch(e){return""}}function D(e,t){return!(e=((null==e?void 0:e.replace("webliveroom","-"))||"").split("-")||[])[1]||!/\d*/i.test(e[1])||+e[1]==t}function U(e,t){try{localStorage.setItem(e,t)}catch(e){}}function B(e){try{return localStorage.getItem(e)}catch(e){}}var G=function(){return(G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},W=(H.checkConfigParam=function(e,t,n){return e&&"number"==typeof e&&this.checkInteger(e)?!(!t||"string"!=typeof t&&!Array.isArray(t)||""==t)||(n.error("ccp.0 server must be string or string array and not empty"),!1):(n.error("ccp.0 appid must be positive integer number and not empty"),!1)},H.checkPriConfigParam=function(e,t,n,r,i){return e&&"number"==typeof e&&this.checkInteger(e)?t&&"string"==typeof t?"object"!=typeof n||"string"!=typeof n.deviceID?(i.error("ccp.0 deviceID must be string and not empty"),!1):1===r||0===r||(i.error("ccp.0 anType must be 0 or 1"),!1):(i.error("ccp.0 dispatchServer must be string and not empty"),!1):(i.error("ccp.0 appid must be positive integer number and not empty"),!1)},H.checkIllegalCharacters=function(e){return/^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(e)&&/^[^:/]*$/g.test(e)},H.registerCallback=function(e,t,n){t.success&&(n[e+"SuccessCallback"]=t.success),t.error&&(n[e+"ErrorCallback"]=t.error)},H.actionErrorCallback=function(e,t){return t[e+"ErrorCallback"]},H.actionSuccessCallback=function(e,t){return t[e+"SuccessCallback"]},H.logReportCallback=function(e,t,n,r){H.registerCallback(e,{success:function(e,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];H.dataReportEvent(t,n,e,r,i)}},r)},H.proxyRes=function(e,t,n,r){return{interResolve:function(r){e.uploadReport(t),n(r)},interReject:function(n,i){var o;void 0===i&&(i=""),(o=n.code<2e9&&1e9<n.code?H.decodeServerError(n.code,n.msg):{code:n.code,message:n.msg})&&e.addMsgInfo(t,{error:o.code,message:o.message+i}),e.uploadReport(t),r({errorCode:n.code||n.errorCode})}}},H.getServerError=function(e){var t,n,r={1:"parse json error.",1001:"login is processing.",1002:"liveroom request error.",1003:"zpush connect fail.",1004:"zpush handshake fail.",1005:"zpush login fail.",1006:"user login state is wrong.",1007:"got no zpush addr",1008:"token error",1009:"dispatch error",1010:"token expired",1011:"token format error",2002:"biz channel error",1e9:"liveroom cmd error, code:",1000002001:"need relogin",1000002002:"third token auth error",1000002003:"token nonce type should be int64",1000002004:"token appid type  should be uint32",1000002005:"token timeout type should be int64",1000002006:"token user_id type should be string",1000002007:"token room_id type should be string",1000002008:"token format error",1000002009:"token privilege type should be map",1000002010:"token expire_time type should be int64",1000002011:"token user_id type should be string",1000002012:"token not exist",1000002013:"token update error",1000002014:"token not need to check"};return 0===e?N.SUCCESS:((t=G({},N.ROOM_INNER_ERROR)).code=e,t.msg=1e9<e?(n=r[e])?"liveroom cmd error, code: "+e+", message: "+n:r[1e9]+e:r[e]?r[e]+" code:"+e:"unknown error code:"+e,t)},H.unregisterCallback=function(e,t){delete t[e+"SuccessCallback"],delete t[e+"ErrorCallback"]},H.decodeServerError=function(e,t){var n={code:-1,message:"server error"};return n.code=1e9<e?e-1e9+52e6:e+2002e6,t&&(n.message=t),n},H.getLiveRoomError=function(e,t){var n={1016:"MULTI_ROOM_UNABLE",1105:"ROOM_MAX_USER_COUNT",1012:"PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM",2002:"TOKEN_ERROR",2003:"ROOM_ERROR_LOGIN_TIMEOUT",2010:"TOKEN_ERROR",5022:"ROOM_COUNT_EXCEED",5030:"FORBID_BLACK_USER"};return t?2e5<e&&e<3e5?n[e-2e5]:e<2e5?{50116:"TOKEN_ERROR",50117:"TOKEN_EXPIRED",50118:"TOKEN_ERROR",50119:"TOKEN_ERROR",50120:"TOKEN_ERROR",50121:"TOKEN_ERROR",50122:"TOKEN_ERROR",50123:"TOKEN_EXPIRED",50124:"TOKEN_ERROR",50125:"TOKEN_ERROR",50126:"TOKEN_ERROR",50127:"TOKEN_ERROR",50128:"TOKEN_ERROR"}[e]||n[e]||"ROOM_INNER_ERROR":n[e]||"ROOM_INNER_ERROR":1e9<e?n[e-1e9]||"":{1:"PARSE_JSON_ERROR",1001:"LOGIN_PROCESSING",1002:"LIVEROMM_REQUEST_ERROR",1003:"ZPUSH_REQUEST_FAIL",1004:"ZPUSH_REQUEST_FAIL",1005:"ZPUSH_REQUEST_FAIL",1006:"LOGIN_STATE_WRONG",1007:"ZPUSH_REQUEST_FAIL",1008:"TOKEN_ERROR",1009:"DIAPATCH_ERROR",1010:"TOKEN_EXPIRED",1011:"TOKEN_ERROR",1012:"SUBCMD_ERROR",1101:"ZEGO_AUTH_ERROR",2001:"BIZ_CHANNEL_ERROR",2002:"BIZ_CHANNEL_ERROR"}[e]||"ROOM_INNER_ERROR"},H.getKickoutError=function(e,t){var n={code:e,message:"kickout reason = "+e};if(t)switch(e){case 1:n.code=63000001,n.message="zpush multiple login kickout",n.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:n.code=63000002,n.message="zpush manual kickout",n.name="MANUAL_KICKOUT";break;case 4:n.code=63000005,n.message="zpush token expired",n.name="TOKEN_EXPIRED";break;default:n.code=e,n.message="kickout reason = "+e}else switch(e){case 1:n.code=63000001,n.message="zpush multiple login kickout",n.name="MULTIPLE_LOGIN_KICKOUT";break;case 2:n.code=63000002,n.message="zpush manual kickout",n.name="MANUAL_KICKOUT";break;case 3:n.code=63000003,n.message="kickout reason = "+e;break;case 4:n.code=63000004,n.message="zpush multiple login kickout",n.name="MULTIPLE_LOGIN_KICKOUT";break;case 5:n.code=63000005,n.message="zpush token expired",n.name="TOKEN_EXPIRED";break;default:n.code=e,n.message="kickout reason = "+e}return n},H.dataReportEvent=function(e,t,n,r,i){switch(n){case"eventStart":e.eventStart(t,r);break;case"eventEndWithMsgInfo":e.eventEndWithMsgInfo(t,r,i[0]);break;case"addEventMsg":e.addEventMsg(t,r,i[0],i[1]);break;case"addEvent":e.addEvent(t,r);break;case"eventEnd":e.eventEnd(t,r);break;case"addMsgInfo":e.addMsgInfo(t,i[0])}},H.mergeUserList=function(e,t,n,r){e.debug("msl.0 call");var i=[],o=[];n=n||[];for(var s=0;s<n.length;s++){for(var a=!1,u=0;u<t.length;u++)if(n[s].userID===t[u].userID){a=!0;break}a||i.push(n[s])}for(var c=0;c<t.length;c++){a=!1;for(var l=0;l<n.length;l++)if(t[c].userID===n[l].userID){a=!0;break}a||o.push(t[c])}for(t.splice(0),s=0;s<n.length;s++)t.push(t[s]);r(i,o),e.debug("msl.0 call success")},H.checkInteger=function(e,t){return 0==t?"number"==typeof e&&e%1==0&&0<=e:"number"==typeof e&&e%1==0&&0<e},H.checkValidNumber=function(e,t,n){return t=t||1,n=n||1e4,"number"==typeof e&&e%1==0&&t<=e&&e<=n},H.generateRandumNumber=function(e){return parseInt(Math.random()*(e+1)+"",10)},H.uuid=function(e,t){var n,r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||i.length,e)for(n=0;n<e;n++)o[n]=i[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(r=0|16*Math.random(),o[n]=i[19==n?3&r|8:r]);return o.join("")},H.isTestEnv=function(e){return!(!e.startsWith("wss")||-1===e.indexOf("test")||!e.endsWith("ws"))},H.getUint64=function(e,t,n){var r=n.getUint32(e,t);return n=n.getUint32(e+4,t),e=t?r+Math.pow(2,32)*n:Math.pow(2,32)*r+n,Number.isSafeInteger(e)||console.warn(e,"exceeds MAX_SAFE_INTEGER. Precision may be lost"),e},H.decodeTokenExpire=function(e){try{var t,n=Uint8Array.from(function(e){for(var t,n,r,i,o=e.length,s=0,a="";s<o;){for(;t=O[255&e.charCodeAt(s++)],s<o&&-1==t;);if(-1==t)break;for(;n=O[255&e.charCodeAt(s++)],s<o&&-1==n;);if(-1==n)break;a+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(s++)))return a}while(r=O[r],s<o&&-1==r);if(-1==r)break;a+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(i=255&e.charCodeAt(s++)))return a}while(i=O[i],s<o&&-1==i);if(-1==i)break;a+=String.fromCharCode((3&r)<<6|i)}return a}(e),(function(e){return e.charCodeAt(0)})),r=new DataView(n.buffer);return 0<(t="function"==typeof r.getBigInt64?r.getBigUint64(0):H.getUint64(0,!1,r))?Number(t):Number(r.getBigUint64(0,!0))}catch(e){console.error("token error")}return-1},H.bin2hex=function(e){for(var t,n="",r=0,i=(e+="").length;r<i;r++)n+=(t=e.charCodeAt(r).toString(16)).length<2?"0"+t:t;return n},H.getCanvasFingerprint=function(e){var t=document.createElement("canvas"),n=((n=t.getContext("2d")).textBaseline="top",n.font="14px 'Arial'",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText(e,2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(e,4,17),t.toDataURL().replace("data:image/png;base64,",""));return e=atob(n),this.bin2hex(e.slice(-16,-12))},H.generateUUID=function(e){void 0===e&&(e=0);var t,n=B("z_deviceID");return n||(t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(36)})),U("z_deviceID",n=0===e?this.getCanvasFingerprint("hello, zego")+n.slice(8):n),n)},H.getNetTypeNum=function(){var e=c.NT_UNKNOWN,t="",n=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return-1<(t=((null==n?void 0:n.effectiveType)||(null==n?void 0:n.type)||"unknwon").toUpperCase()).indexOf("4G")?e=c.NT_4G:-1<t.indexOf("2G")?e=c.NT_2G:-1<t.indexOf("3G")?e=c.NT_3G:-1<t.indexOf("WIFI")?e=c.NT_WIFI:-1<t.indexOf("LINE")?e=c.NT_LINE:-1<t.indexOf("NONE")&&(e=c.NT_NONE),e},H);function H(){}var z={product:"rtc_web",importLevel:a.H,levels:[0,10,100,1e3],bps:32e3},V="init",F="0c9e6e0f8c0a8f4e",X="z_net_access_servers",Y="z_appconfig",K="z_appconfig_etag",j={domains:["accesshub-wss.zego.im","accesshub-wss.coolzcloud.com","accesshub-wss.zegocloud.com"],primaryDomains:["zego.im","coolzcloud.com","zegocloud.com"],mode:"online",modeNo:S.MODE_ONLINE,sdkType:3,connectVer:4,pcEstablishTimeout:15,scheme:"wss",location:"accesshub",wssMessageType:1},J=[{id:2,relative_geofencings:[],accesshub:"accesshub-wss-geo-2.zego.im",logreport:"weblogger-wss-geo-2.zego.im",detaillog:"detaillog-geo-2.zego.im"},{id:3,relative_geofencings:[7],accesshub:"accesshub-wss-geo-3.zego.im",logreport:"weblogger-wss-geo-3.zego.im",detaillog:"detaillog-geo-3.zego.im"},{id:4,relative_geofencings:[7],accesshub:"accesshub-wss-geo-4.zego.im",logreport:"weblogger-wss-geo-4.zego.im",detaillog:"detaillog-geo-4.zego.im"},{id:5,relative_geofencings:[7],accesshub:"accesshub-wss-geo-5.zego.im",logreport:"weblogger-wss-geo-5.zego.im",detaillog:"detaillog-geo-5.zego.im"},{id:6,relative_geofencings:[7],accesshub:"accesshub-wss-geo-6.zego.im",logreport:"weblogger-wss-geo-6.zego.im",detaillog:"detaillog-geo-6.zego.im"},{id:7,relative_geofencings:[3,4,5,6,1],accesshub:"accesshub-wss-geo-7.zego.im",logreport:"weblogger-wss-geo-7.zego.im",detaillog:"detaillog-geo-7.zego.im"}],Q=[2,3,4,5,6];function q(e,t){this.logger=e,this.stateCenter=t,this.RETRY_MAX_TIME=300,this.RETRY_START_TIME_INTERVAL=4,this.RETRY_CONTINUE_COUNT=2,this.RETRY_MAX_TIME_INTERVAL=32,this.retryTimer=null,this.maxTimer=null,this.retryStartTime=0,this.retryActiveCount=1,this.isOverTime=!1}function $(e){return e}function ee(e){return e}function te(e){return e}function ne(e){return e}q.prototype.init=function(e,t,n,r){this.invalid(),this.stopMaxTime(),this.isOverTime=!1,"number"==typeof e&&e<3600&&(this.RETRY_MAX_TIME=e),"number"==typeof t&&(this.RETRY_START_TIME_INTERVAL=t),"number"==typeof n&&(this.RETRY_CONTINUE_COUNT=n),"number"==typeof r&&(this.RETRY_MAX_TIME_INTERVAL=r)},q.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryStartTime=0,this.retryActiveCount=1};var re="zm.0",ie="zm.wl",oe="zm.slf",se="zm.lg",ae="zm.lo",ue="zm.fac",ce="zm.fac.tk",le="zm.hlu",he="zm.cna",de="zm.gsac",fe="zm.zpl.url",pe="zm.on",ge="zm.rntk",me="zm.rm.lg",_e="zm.rm.tl",ye="zm.rm.lgr",ve="zm.rm.clh",be="zm.rm.lo",Se="zm.rm.dcn",Ee="zm.rm.kco",Te="zm.hhl",we="zm.hb.st",Ce="zm.hb.rsp",Ie="zm.sv.ps",Re="zm.us.urp",ke="zm.us.uph",Ne="ON_LISTENER",Oe="zm.st.ofls",Le="zm.lrh.sm",Ae="zm.lrh.hsp",xe="zm.lrh.lgi",Pe="zm.lrh.ful",Ze="zm.lrh.lgo",Me="zm.lrh.sru",De="zm.lrh.hd",Ue={event:"/sdk/init",error:{kInvalidParamError:N.INPUT_PARAM},system_info:ee,servers:function(e){return e},is_from_cache:ne,project:ee,liveroom_version:ee,biz_type:te,lua_md5:ee,sev_env:ee,use_na:te},Be="listener",Ge="/sdk/set_debug",We=ee,He={event:"/sdk/set_log_config",error:{kInvalidParamError:N.INPUT_PARAM},log_level:function(e){return e},remote_log_level:ee,log_url:ee},ze={event:"/sdk/on_listener",listener:ee,error:{INPUT_PARAM:N.INPUT_PARAM}},Ve=ee,Fe={event:"/sdk/login",room_id:ee,room_sid_string:ee,user_state_update:te,max_member_cnt:te,message:ee,token:ee,svr_env:ee,server:ee,try_cnt:te,room_mode:te,role:te,audience_create_room:te,liveroom_sid_string:ee,error:{ROOM_ID_NULL:N.ROOM_ID_NULL,INPUT_PARAM:N.INPUT_PARAM,ROOM_ID_TOO_LONG:N.ROOM_ID_TOO_LONG,ROOM_ID_INVALID_CHARACTER:N.ROOM_ID_INVALID_CHARACTER,USER_ID_NULL:N.USER_ID_NULL,USER_ID_TOO_LONG:N.USER_ID_TOO_LONG,USER_ID_INVALID_CHARACTER:N.USER_ID_INVALID_CHARACTER,USER_NAME_NULL:N.USER_NAME_NULL,USER_NAME_TOO_LONG:N.USER_NAME_TOO_LONG,REPEATEDLY_LOGIN:N.REPEATEDLY_LOGIN,LOGIN_TIMEOUT:N.LOGIN_TIMEOUT,INNER_ERROR:N.ROOM_INNER_ERROR,NETWORK_BROKEN:N.NETWORK_BROKEN}},Xe="/sdk/sublogin",Ye=ee,Ke={event:"/zpush/login",sdk_zpush_sessionid_string:ee},je={event:"/liveroom/enter"},Je={event:"/sdk/renew_token",error:{INPUT_PARAM:N.INPUT_PARAM,NOT_LOGIN:N.NOT_LOGIN},token:ee},Qe={event:"/sdk/logout",error:{INPUT_PARAM:N.INPUT_PARAM,ROOM_NOT_EXIST:N.ROOM_NOT_EXIST},room_id:ee,room_sid_string:ee,is_multi:ne,is_send_cmd_net:ne,liveroom_sid_string:ee},qe="/liveroom/quit",$e=ee,et=ee,tt="/sdk/relogin",nt={event:"/liveroom/tempbroken"},rt={event:"/sdk/reconnect",room_broken_time:te},it={event:"/sdk/disconnect"},ot=te,st=te,at={event:"/liveroom/hb",room_id:ee,room_sid_string:ee,interval:te,stream_seq:te,server_user_seq:te,error:{NOT_LOGIN:N.NOT_LOGIN,HB_TIMEOUT:N.TIMEOUT}},ut={event:"/liveroom/recv_user_update_info",user_list_seq:te,update_user:$,error:{ROOM_NOT_EXIST:N.ROOM_NOT_EXIST}},ct={event:"/sdk/enable_multi_room",is_multi:ne,error:{kInvalidParamError:N.INPUT_PARAM,kAlreadyLoginError:N.ALREADY_LOGIN}},lt=$,ht=$,dt=$,ft="/cloud_setting/request",pt=$,gt=$,mt={event:"/liveroom/get_current_user_list",user_index:te,is_time_ascend:ne,use_na:te},_t="/zegoconn/connect",yt=ee,vt=te,bt=$,St=ee,Et=ee,Tt=te,wt="/zegoconn/request",Ct=$,It=$,Rt=te,kt={event:"/zegoconn/proxy_connect",service_no:te,proxy_link_sources:te,recv_time:te,connect_stream:te},Nt={event:"/zegoconn/proxy_broken",service_no:te},Ot={event:"/zegoconn/proxy_disconnect",service_no:te};Lt=function(e,t){return(Lt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Lt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(Zt,At=q),Zt.prototype.renewLocalToken=function(e,t){this.token=e,this.room.token=this.token;var n=(new Date).getTime(),r=void 0;t&&"number"==typeof t?r=1e3*t:"string"==typeof e&&["03","04"].includes(e.substring(0,2))&&(t=1e3*W.decodeTokenExpire(e.substring(2)),this.logger.info("zm.rm.rlt time "+t+" "+n+" "+this.stateCenter.local_time_deviation),r=t-(n-this.stateCenter.local_time_deviation)),r&&this.roomHandler.resetTokenTimer(r),this.logger.setTokenInfo(e),this.stateCenter.actionListener("_tokenRenewed",e,this.room.roomID)},Zt.prototype.initRoom=function(e,t,n,r,i,o,s){this.roomHandler=e,this.roomID=t,this.renewLocalToken(n),this.user=r,this.server=i,this.serverBak=o||i,this.config=s},Zt.prototype.active=function(e){var t=this,n=(this.logger.info(me+" retry call "+(null==(n=this.room)?void 0:n.roomID)+" "+(e=void 0!==e&&e)),null!=(n=this.loginRoomCallback)&&n.success?Xe:tt);if(this.subLoginSpan||(this.subLoginSpan=this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:this.roomID},{key:n,par:this.roomID},n,!0),this.spanKey=n),this.roomHandler.setRunState(s.trylogin),this.room.isMulti&&(null==(n=this.stateCenter.roomModulesList.find((function(e){return!e.isMulti})))?void 0:n.runState)!==s.login)this.logger.info(me+" service is disconnected, multi room stop retry");else if(this.retryTimer)this.logger.info(me+" has actived, ignore");else{var r=this.stateCenter.networkState==u.offline;if(r){if(this.logger.info(me+" check if really offline. "+this.retryNetCount),this.retryNetCount>=this.retryNetMaxTimes)return void this.logger.warn(me+" network is broken, stop retry")}else this.retryNetCount=0;this.isOverTime?this.logger.info(me+" retry over time, stop retry"):(1==this.retryActiveCount?this.retryActiveInterval=Math.floor(Math.random()*(1-this.RETRY_START_TIME_INTERVAL)+this.RETRY_START_TIME_INTERVAL):(n=Math.pow(2,Math.round(this.retryActiveCount/this.RETRY_CONTINUE_COUNT+1)),this.retryActiveInterval=n>this.RETRY_MAX_TIME_INTERVAL?this.RETRY_MAX_TIME_INTERVAL:n),this.logger.info(me+" interval "+this.retryActiveInterval),this.retryTimer=setTimeout((function(){t.roomHandler.login(t.retryActiveCount%2==1?t.server:t.serverBak,t.roomID,t.token,t.user,t.config,(function(e){t.stateCenter.networkState=u.online,t.handleLoginFinish(e)}),(function(e,n){t.handleLoginFinish(!1,e,n)})),t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null,r?t.retryNetCount++:t.retryActiveCount++}),e?0:1e3*this.retryActiveInterval))}},Zt.prototype.startMaxTime=function(){var e=this;this.maxTimer||(this.logger.info(me+" start max timer"),this.maxTimer=setTimeout((function(){e.logger.info(me+" over max time ".concat(e.RETRY_MAX_TIME,"s, stop retry")),e.isOverTime=!0,e.roomHandler.resetRoom(),e.stopMaxTime(),e.invalid(),e.onactive(!1,N.LOGIN_TIMEOUT),e.subLoginSpan&&(e.stateCenter.reporter.spanEnd({key:e.spanKey,par:e.roomID},{error:N.LOGIN_TIMEOUT.code,message:N.LOGIN_TIMEOUT.msg}),e.subLoginSpan=null),e.loginRoomCallback.fail&&(e.loginRoomCallback.fail(N.LOGIN_TIMEOUT),e.roomHandler.disconnectedHandle(N.LOGIN_TIMEOUT),e.resetCallBack())}),1e3*this.RETRY_MAX_TIME))},Zt.prototype.stopMaxTime=function(){this.logger.info(me+" stop max timer"),this.maxTimer&&clearTimeout(this.maxTimer),this.maxTimer=null},Zt.prototype.onactive=function(e,t){},Zt.prototype.handleError=function(e,t){if(this.RETRY_MAX_TIME<3)return!1;if(t){t=void 0;var n=void 0,r=void 0,i=(this.stateCenter.useNetAgent?(t=["202002","205030","205035","50116","50117","50118","50119","50120","50121","50122","50123","50124","50125","50126","50127","50128"],n=["40001","40100"],r=["201002","30019"]):(t=["1000002002","1000005030","1000005035","1010","1011","1013","1014","1015","1016","1017","1018","1019","1020","1021","1023"],n=["1100040001","1100040100"]),e.code+"");if(this.stateCenter.useNetAgent){if(10015===e.code)return this.room.retryConnect(),!0;if(40001<=e.code&&e.code<=40100||50200<=e.code&&e.code<=50299||null!=r&&r.includes(i))return this.room.resetSessionInfo(),!0}return!(null!=t&&t.includes(i)||(null==n||!n.includes(i))&&(this.room.lastRunState!=s.login||(this.logger.warn("zm.rrh.he reset"),this.room.resetUserSession(),this.invalid(),0)))}return!0},Zt.prototype.setLoginRoomCallback=function(e,t){this.loginRoomCallback.success=e,this.loginRoomCallback.fail=t},Zt.prototype.loginFail=function(e){this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(!1,e),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(e),this.roomHandler.disconnectedHandle(e),this.resetCallBack())},Zt.prototype.handleLoginFinish=function(e,t,n){this.logger.info("zm.rrh.hlf "+e+" "+JSON.stringify(t)),t?(this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{error:t.code,message:t.msg}),this.subLoginSpan=null),this.handleError(t,n)?(this.maxTimer||this.startMaxTime(),this.active()):(this.roomHandler.resetRoom(),this.stopMaxTime(),this.invalid(),this.onactive(e,t),this.loginRoomCallback.fail&&(this.loginRoomCallback.fail(t),this.roomHandler.disconnectedHandle(t),this.resetCallBack()))):(this.stopMaxTime(),this.invalid(),this.onactive(e,{code:0,msg:""}),this.subLoginSpan&&(this.stateCenter.reporter.spanEnd({key:this.spanKey,par:this.roomID},{room_id:this.roomID,room_sid_string:null==(n=this.room)?void 0:n.roomSidString}),this.subLoginSpan=null),this.loginRoomCallback.success&&(this.loginRoomCallback.success(e),this.resetCallBack()))},Zt.prototype.invalid=function(){this.logger.info("zm.rh.ivd end retry"),this.retryTimer&&clearTimeout(this.retryTimer),this.retryTimer=null,this.retryActiveCount=1,this.retryNetCount=0},Zt.prototype.resetCallBack=function(){this.loginRoomCallback.success=void 0,this.loginRoomCallback.fail=void 0};var Lt,At,xt,Pt=Zt;function Zt(e,t,n){var r=At.call(this,e,t)||this;return r.logger=e,r.stateCenter=t,r.room=n,r.retryNetCount=0,r.retryNetMaxTimes=3,r.spanKey="",r.loginRoomCallback={},r}(t=xt=xt||{}).NOT_EMPTY="NOT_EMPTY",t.ILLEGAL_CHARACTERS="ILLEGAL_CHARACTERS",t.TYPE_STRING="TYPE_STRING",t.TYPE_INTEGER="TYPE_INTEGER",t.TYPE_OBJECT="TYPE_OBJECT",t.MAX_LENGTH_10="MAX_LENGTH_10",t.MAX_LENGTH_64="MAX_LENGTH_64",t.MAX_LENGTH_100="MAX_LENGTH_100",t.MAX_LENGTH_128="MAX_LENGTH_128",t.MAX_LENGTH_256="MAX_LENGTH_256",t.MAX_LENGTH_1024="MAX_LENGTH_1024";var Mt={error:{code:0,msg:"suc"}},Dt={NOT_EMPTY:function(e,t,n,r,i){return void 0===t||""===t||null===t?(r.error("".concat(n," ").concat(e," is empty")),i):Mt},ILLEGAL_CHARACTERS:function(e,t,n,r,i){return W.checkIllegalCharacters(t)?Mt:(r.error("".concat(n," ").concat(e," contains illegal characters")),i)},TYPE_STRING:function(e,t,n,r,i){return"string"!=typeof t?(r.error("".concat(n," ").concat(e," must be string")),i):Mt},TYPE_INTEGER:function(e,t,n,r,i){return W.checkInteger(t,!1)?Mt:(r.error("".concat(n," ").concat(e,"  must be integer number")),i)},TYPE_OBJECT:function(e,t,n,r,i){return t&&"object"==typeof t?Mt:(r.error("".concat(n," ").concat(e,"  must be object")),i)},MAX_LENGTH_10:function(e,t,n,r,i){return 10<t.length?(r.error("".concat(n," ").concat(e," is too long")),i):Mt},MAX_LENGTH_64:function(e,t,n,r,i){return 64<t.length?(r.error("".concat(n," ").concat(e," is too long")),i):Mt},MAX_LENGTH_100:function(e,t,n,r,i){return 100<t.length?(r.error("".concat(n," ").concat(e," is too long")),i):Mt},MAX_LENGTH_128:function(e,t,n,r,i){return 128<t.length?(r.error("".concat(n," ").concat(e," is too long")),i):Mt},MAX_LENGTH_256:function(e,t,n,r,i){return 256<t.length?(r.error("".concat(n," ").concat(e," is too long")),i):Mt},MAX_LENGTH_1024:function(e,t,n,r,i){return 1024<t.length?(r.error("".concat(n," ").concat(e," is too long")),i):Mt}};Object.defineProperty(Bt.prototype,"debug",{get:function(){return this._debug},set:function(e){this._debug=e,i.LoggerStateCenter.getInstance().debug=e},enumerable:!1,configurable:!0}),Object.defineProperty(Bt.prototype,"testEnvironment",{get:function(){return this._testEnvironment},set:function(e){this._testEnvironment=e,i.LoggerStateCenter.getInstance().testEnvironment=e},enumerable:!1,configurable:!0}),Object.defineProperty(Bt.prototype,"ENV",{get:function(){return this._env},set:function(e){this._env=e,i.LoggerStateCenter.getInstance().ENV=e},enumerable:!1,configurable:!0}),Object.defineProperty(Bt.prototype,"roomid",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].roomID:""},enumerable:!1,configurable:!0}),Object.defineProperty(Bt.prototype,"serverTimeOffset",{get:function(){return this.roomModulesList[0]?this.roomModulesList[0].messageHandler.serverTimeOffset:0},enumerable:!1,configurable:!0}),Bt.prototype.getRequestId=function(){return this.idName+"-"+f()},Bt.prototype.actionListener=function(e){for(var t,n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];["getAnchorInfo","HBResponse","roomOnlineUserCountUpdate","roomLoginResponse"].includes(e)||e.startsWith("_")||!this.listenerList[e]||((t=this.reporter.createSpan(a.H,{key:Be},{key:""},"/sdk/listener")).setAttributes({listener:e,listener_params:JSON.stringify(r)}),t.end()),["roomStateChanged","tokenWillExpire"].includes(e)&&this.logger.info("zm.al ".concat(e," ").concat(JSON.stringify(r))),this.listenerList[e]&&this.listenerList[e].forEach((function(t){try{t.apply(void 0,r)}catch(t){n.logger.error("zm.st.at ",e," ",JSON.stringify(t))}}))},Bt.prototype.onListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(Ne+" listener callBack must be funciton"),!1):(-1==this.listenerList[e].indexOf(t)&&this.listenerList[e].push(t),!0):(this.logger.error(Ne+" event "+e+" no found"),!1)},Bt.prototype.offListener=function(e,t){return this.listenerList[e]?"function"!=typeof t?(this.logger.error(Oe+" listener callBack must be funciton"),!1):(-1!==this.listenerList[e].indexOf(t)&&(this.listenerList[e]=this.listenerList[e].filter((function(e){return e!==t}))),!0):(this.logger.error(Oe+" event "+e+" no found"),!1)},Object.defineProperty(Bt.prototype,"sdKVersion",{get:function(){return this._sdkVersion},set:function(e){this._sdkVersion=e},enumerable:!1,configurable:!0}),Bt.prototype.proxyRes=function(e,t,n){return{interResolve:function(n){t(n),e.end()},interReject:function(t,r){var i;void 0===r&&(r=""),(i=t.code<2e9&&1e9<t.code?W.decodeServerError(t.code,t.msg):{code:t.code,message:t.msg})&&e.setAttributes({error:i.code,message:i.message+r}),e.end(),n({errorCode:t.code})}}};var Ut=Bt;function Bt(e,t){this.logger=e,this.dataReport=t,this._debug=!1,this.appConfigEtag=-1,this.appConfigFetched=!1,this.requestList={},this.mode=S.MODE_ONLINE,this.connectState="connected",this.testNetPackageSize=!1,this.netGeoFencing={},this._testEnvironment=!1,this._env=0,this.type="PUBLIC",this.debugCustom=!1,this.configOK=!1,this.role=2,this.relateService=[],this.maxMemberCount=0,this.roomCreateFlag=1,this.local_time_deviation=0,this.callbackList={},this.listenerList={roomUserUpdate:[],roomOnlineUserCountUpdate:[],getAnchorInfo:[],_getAnchorInfo:[],IMRecvCustomCommand:[],IMRecvBroadcastMessage:[],recvReliableMessage:[],roomExtraInfoUpdate:[],IMRecvBarrageMessage:[],recvJoinLiveRequest:[],recvInviteJoinLiveRequest:[],recvEndJoinLiveCommand:[],roomLoginResponse:[],_roomLogin:[],_appConfigRsp:[],_netAppConfigRsp:[],_connectChanged:[],HBResponse:[],roomStateUpdate:[],_roomStateUpdate:[],_getTotalUserList:[],_userStateUpdate:[],_recvBigRoomMessage:[],_recvRoomMsg:[],_kickout:[],tokenWillExpire:[],_tokenExpired:[],roomStateChanged:[],hallStateUpdate:[],_hallStateUpdate:[],roomTokenWillExpire:[],_tokenRenewed:[],_protobufResponse:[],_cloudSettingNotify:[],_settingCanFetch:[]},this.reportList={},this.reportSeqList={login:0,relogin:0},this.networkState=u.online,this.roomRetryTime=300,this.roomModulesList=[],this.isMultiRoom=!1,this.setMultiRoom=!1,this.protoFormat="json",this.settingFetched=!1,this.useNetAgent=!0,this.netHasSet=!1,this.configRoomAuth=!1,this.configCheckToken=!1,this._sdkVersion="unknown",this.mode=j.modeNo}Wt.prototype.init=function(e){var t=this,n=e.body.hearbeat_interval<3e3?3e3:e.body.hearbeat_interval;this.tryHeartbeatCount=0,this.heartbeatTimer&&clearTimeout(this.heartbeatTimer),this.loginHeartbeatTimer=setTimeout((function(){t.start(n)}),n),this.initCount++},Wt.prototype.start=function(e){var t,n,r=this,i=(this.logger.info(we+" call"),this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:this.room.roomID},{key:""},at.event));this.room.isLogin()?3<++this.tryHeartbeatCount?(this.logger.error(we+" come to try limit"),this.stateCenter.reporter.setError(i,at.error.HB_TIMEOUT),this.hbLogout(N.HEARTBEAT_TIMEOUT),this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:this.room.roomID},{key:""},"/zpush/hb_timeout").end()):(t=function(e,t){var n=e.body&&e.body.err_code;e.header&&e.body?0!==n&&(n=W.decodeServerError(e.body.err_code||e.body.code,e.body.err_message||e.body.message),i.setAttributes({error:n.code,message:n.message+e.body.err_code})):i.setAttributes({error:(0<e.code?e:N.ROOM_INNER_ERROR).code,message:e.msg||N.ROOM_INNER_ERROR}),r.handleHeartbeatRsp(e,t),0===(null==(n=null==e?void 0:e.body)?void 0:n.err_code)&&i.setAttributes({interval:at.interval(null==(t=null==e?void 0:e.body)?void 0:t.hearbeat_interval),stream_seq:at.stream_seq(null==(n=null==e?void 0:e.body)?void 0:n.stream_seq),server_user_seq:at.server_user_seq(null==(t=null==e?void 0:e.body)?void 0:t.server_user_seq)}),i.end()},null!=(n=this.stateCenter.useNetAgent?this.liveRoomHandler:this.service)&&n.heartBeat(t,t,this.room),this.heartbeatInterval=e,n=this.heartbeatInterval,2<=this.initCount?(n=Math.round(Math.random()*(this.heartbeatInterval+1)),this.initCount=1):n=this.heartbeatInterval,this.heartbeatTimer=setTimeout((function(){r.start(r.heartbeatInterval)}),n),this.logger.info(we+" call success")):(this.logger.error(we+" state error"),this.stateCenter.reporter.setError(i,at.error.NOT_LOGIN))},Wt.prototype.handleHeartbeatRsp=function(e,t){if(e.body&&e.body.err_code&&0!==e.body.err_code)return this.logger.error(Ce+" disconnect, server error=",e.body.err_code),1000000152==e.body.err_code?void this.hbLogout(N.HEARTBEAT_TIMEOUT):void this.hbLogout(W.getServerError(e.body.err_code));e.header&&e.body?((this.tryHeartbeatCount=0)!==e.body.hearbeat_interval&&(this.heartbeatInterval=e.body.hearbeat_interval,this.heartbeatInterval<3e3)&&(this.heartbeatInterval=3e3),this.heartbeatRspNotiFy(e,this.room.roomID),this.logger.info(Ce+" call success")):(this.logger.error(Ce+" disconnect, error=",JSON.stringify(e)+", seq = "+t),this.hbLogout(e))},Wt.prototype.heartbeatRspNotiFy=function(e,t){},Wt.prototype.hbLogout=function(e){},Wt.prototype.resetHeartbeat=function(){clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null,clearTimeout(this.loginHeartbeatTimer),this.loginHeartbeatTimer=null,this.tryHeartbeatCount=0,this.initCount=0,this.logger.info("zm.hb.rst call success")};var Gt=Wt;function Wt(e,t,n,r,i,o){this.logger=e,this.stateCenter=t,this.dataReport=n,this.liveRoomHandler=r,this.room=i,this.service=o,this.tryHeartbeatCount=0,this.heartbeatTimer=null,this.loginHeartbeatTimer=null,this.initCount=0}Object.defineProperty(zt.prototype,"isUseNetAgent",{get:function(){return this.stateCenter.useNetAgent},enumerable:!1,configurable:!0}),zt.prototype.resetTokenTimer=function(e){var t=this;this.logger.info("zm.rm.rst  call: "+(e=2147483647<(e=(e-=3e4)<0?0:e)?2147483647:e)),this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=setTimeout((function(){t.stateCenter.actionListener("tokenWillExpire",t.room.roomID),t.stateCenter.actionListener("roomTokenWillExpire",t.room.roomID)}),e)},zt.prototype.stopTokenTimer=function(){this.tokenTimer&&clearTimeout(this.tokenTimer),this.tokenTimer=null},zt.prototype.setRunState=function(e){this.room.runState!==e&&(this.room.lastRunState=this.room.runState,this.room.runState=e)},zt.prototype.resetTryLogin=function(){this.tryLoginTimer&&clearTimeout(this.tryLoginTimer),this.tryLoginTimer=null},zt.prototype.reportLogoutSpan=function(e){var t,n=this.stateCenter.isMultiRoom?qe:"/switch/logout_user";n=this.stateCenter.reporter.createSpan(a.H,{key:Qe.event,par:this.room.roomID},{key:""},n),e&&this.isUseNetAgent&&"0"===this.liveRoomHandler.roomServicer.zPushSid&&(this.liveRoomHandler.roomServicer.zPushSid=null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()),e=this.isUseNetAgent?e?null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.zPushSid:null==(t=null==(e=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:e.switchSessionID)?void 0:t.toString():void 0,n.setAttributes({room_id:Qe.room_id(null==(t=this.room)?void 0:t.roomID),room_sid_string:Qe.room_sid_string(null==(t=this.room)?void 0:t.roomSidString),liveroom_sid_string:$e(null==(t=this.room)?void 0:t.userSidString),sdk_zpush_sessionid_string:et(e)}),n.end()},zt.prototype.resetRoom=function(e){var t,n,r=this;this.logger.info("zm.rm.rr call"),1<this.stateCenter.roomModulesList.length&&!e&&(this.room.isMulti=!0),this.resetTryLogin(),this.room.sessionExist&&this.room.runState!==s.logout&&!this.room.isDisConnect()&&(t=function(e){r.handleLogoutRsp(e,!r.room.isMulti)},n=this.isUseNetAgent?this.liveRoomHandler:this.service)&&n.logout(this.room,t,t),this.reportLogoutSpan(e),this.setRunState(s.logout),this.room.resetRoomSession(),this.room.resetUserSession(),this.room.isMulti||(this.stateCenter.userid="",this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.userSidString,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.isUseNetAgent?null!=(n=this.liveRoomHandler)&&n.reset():null!=(t=this.service)&&t.closeSocket()),this.resetRoomCallBack(),this.stateCenter.roomModulesList=this.stateCenter.roomModulesList.filter((function(e){return e!==r.room})),(e=this.stateCenter.roomModulesList[0])&&(e.isMulti=!1,e.runState!==s.login)&&e.roomTryHandler&&(e.roomTryHandler.startMaxTime(),e.roomTryHandler.active()),this.stateCenter.isMultiRoom&&0===this.stateCenter.roomModulesList.length&&(this.stateCenter.reporter.createSpan(a.H,{key:Qe.event,par:this.room.roomID},{key:""},"/zpush/multi_logout_user").end(),this.liveRoomHandler.roomServicer.zPushSid="0"),this.logger.info("zm.rm.rr call success")},zt.prototype.resetRoomCallBack=function(){},zt.prototype.loginSuccessCallBack=function(e,t){},zt.prototype.handlePushKickout=function(e,t,n){var r=this,i=(this.logger.info(Ee+"  call "+JSON.stringify(e)),W.getKickoutError(e.body.reason||(null==(i=e.body)?void 0:i.kickout_reason),this.isUseNetAgent)),o=this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:this.room.roomID},{key:""},"/sdk/kickout"),u=(o.setAttributes({error:null==(u=N[i.name||"ROOM_INNER_ERROR"])?void 0:u.code,message:i.message,kickout_reason:ot((null==(u=e.body)?void 0:u.reason)||(null==(u=e.body)?void 0:u.kickout_reason)),need_relogin:st(null==(u=null==e?void 0:e.body)?void 0:u.need_relogin)}),o.end(),this.room.roomTryHandler);u?(u.onactive=function(e,t){r.logger.info(Ee+" onactive"),r.disconnectedHandle(t),r.stateCenter.actionListener("_kickout",t)},e.body.need_relogin&&1==e.body.need_relogin?(this.room.resetUserSession(),u.startMaxTime(),u.active()):(this.setRunState(s.logout),this.resetRoom(t),o={},e&&e.body.custom_reason?o.custom_kickout_message=e.body.custom_reason:i.name&&N[i.name]&&(o.custom_kickout_message=N[i.name].msg+"; kickout reason: "+(u=e.body.reason||e.body.kickout_reason)),this.disconnectedHandle(i.name&&N[i.name]?N[i.name]:N.ROOM_INNER_ERROR,{extendedData:JSON.stringify(o),isKickout:!0}),this.stateCenter.actionListener("_kickout",{code:N.MANUAL_KICKOUT.code,msg:N.MANUAL_KICKOUT.msg+e.body.reason||e.body.kickout_reason}))):this.logger.info(Ee+" try handler no found")},zt.prototype.handleHbLogout=function(e){var t=this,n=this.room.roomTryHandler;n&&(n.onactive=function(e,n){t.logger.warn(Te+" onactive"),t.transError(n),t.disconnectedHandle(n)},[N.HEARTBEAT_TIMEOUT,N.SOCKET_CLOSE].includes(e)||[105,152,2001].includes(null==e?void 0:e.code)||e.msg.endsWith("1000002001")||e.msg.endsWith("1000000152")||e.msg.endsWith("1000000105")?(n.startMaxTime(),n.active()):[N.TIMEOUT].includes(e)?this.logger.warn(Te+" timeout"):(this.logger.warn(Te+" unexpected error: ".concat(JSON.stringify(e))),n.stopMaxTime(),n.invalid(),this.resetRoom(),this.disconnectedHandle(e)))},zt.prototype.onDisconnect=function(e){var t=this;this.logger.error(Se+" "+e.msg),"string"==typeof e.code&&"Error.Network"===e.code||"number"==typeof e.code&&(e.code<2e9&&1e9<e.code||e.code<1e6)&&W.decodeServerError(e.code,e.msg),W.unregisterCallback(tt,this.stateCenter.reportList),(e=this.room.roomTryHandler)?(e.onactive=function(e,n){t.logger.error(Se+" onactive"),n&&0!==n.code?(t.transError(n),t.roomStateHandle("DISCONNECTED",w.ReconnectFailed,n)):t.roomStateHandle("CONNECTED",w.Reconnected,n)},e.startMaxTime(),e.active()):this.logger.error(Se+" try handler no found")},zt.prototype.onConnecting=function(e){this.roomStateHandle("CONNECTING",w.Logining,e)},zt.prototype.disconnectedHandle=function(e,t){var n;e&&0!==e.code?(this.stopTokenTimer(),n=null!=t&&t.isKickout?w.Kickout:w.ReconnectFailed,this.transError(e),this.roomStateHandle("DISCONNECTED",n,e,(null==t?void 0:t.extendedData)||e.msg)):this.roomStateHandle("CONNECTED",w.Reconnected,e,null==t?void 0:t.extendedData)},zt.prototype.roomStateHandle=function(e,t,n,r,i){if(!t||t!=w.Reconnecting||(this.reconectTimes++,1!=this.reconectTimes)){this.logger.info("zm.rm.scb "+e+" "+JSON.stringify(n)),["CONNECTED","DISCONNECTED"].includes(e)&&(this.reconectTimes=0);var o,s,u=0;switch(t=(t=(t=t&&[w.LoginFailed,w.ReconnectFailed].includes(t)?null!=(s=this.room.roomTryHandler)&&s.loginRoomCallback.fail?w.LoginFailed:w.ReconnectFailed:t)&&[w.Logined,w.Reconnected].includes(t)?null!=(s=this.room.roomTryHandler)&&s.loginRoomCallback.success?w.Logined:w.Reconnected:t)&&[w.Logining,w.Reconnecting].includes(t)?null!=(s=this.room.roomTryHandler)&&s.loginRoomCallback.success?w.Logining:w.Reconnecting:t){case w.Reconnecting:o=nt,this.tempBrokenTime=(new Date).getTime();break;case w.ReconnectFailed:o=it;break;case w.Reconnected:o=rt,u=(new Date).getTime()-this.tempBrokenTime}this.room.lastRoomState=this.room.roomState,this.room.roomState=e,this.room.roomState!==this.room.lastRoomState&&(this.stateCenter.actionListener("_roomStateUpdate",this.room.roomID,e,n?n.code:0,r,i),i||(this.stateCenter.actionListener("roomStateUpdate",this.room.roomID,e,n?n.code:0,r),this.stateCenter.actionListener("roomStateChanged",this.room.roomID,t,n?n.code:0,r)),o)&&((s=this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:this.room.roomID},{key:""},o.event)).setAttributes(t===w.Reconnected?{room_broken_time:rt.room_broken_time(u)}:{error:(null==n?void 0:n.code)||0,message:r||""}),s.end())}},zt.prototype.transError=function(e){var t;this.logger.info("zm.rm.te "+JSON.stringify(e)),0!==e.code&&(e.code<2e9&&1e9<e.code||e.code<1e6)&&(t=W.getLiveRoomError(e.code,this.stateCenter.useNetAgent))&&N[t]&&(e.code=N[t].code,e.msg=N[t].msg)},zt.prototype.login=function(e,t,n,r,i,o,u){this.logger.info(me+" call:"+t+" "+n),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,t,"",r.userID,"",this.stateCenter.sdKVersion),i&&(i.userUpdate&&"boolean"==typeof i.userUpdate&&(this.room.userStateUpdate=i.userUpdate),i.maxMemberCount)&&"number"==typeof i.maxMemberCount&&(this.room.maxMemberCount=i.maxMemberCount),this.stateCenter.configOK?(this.room.runState!==s.trylogin&&this.setRunState(s.trylogin),this.room.roomID=t,this.room.token=n,this.room.thirdToken=n,this.stateCenter.idName=r.userID,this.stateCenter.nickName=r.userName||r.userID,this.loginCallback.success=o,this.loginCallback.fail=u,this.server=e,this.stateCenter.reporter.spanSetAttributes({key:Xe,bak_key:tt,par:t},{server:this.isUseNetAgent?void 0:Ye(this.server)}),this.liveRoomLoginKey=this.room.isMulti?je:Ke,this.stateCenter.reporter.createSpan(a.H,{key:Xe,bak_key:tt,par:this.room.roomID},{key:this.liveRoomLoginKey.event,par:this.room.roomID},this.liveRoomLoginKey.event,!0),this.resetTryLogin(),this.onConnecting({code:0,msg:""}),this.tryLogin(e),this.logger.info(me+" call success")):(this.logger.error(me+" init sdk wrong"),u(N.INIT))},zt.prototype.tryLogin=function(e){var t,n=this;if(this.room.runState!==s.trylogin)this.logger.error("zb.rh.tl state error");else{if(this.isUseNetAgent)return this.room.isMulti&&this.room.isDisConnect()?void this.logger.warn(_e+" liveroom is not connected"):(i=function(e,t){n.handleLoginRsp(e,t)},void(null!=(t=this.liveRoomHandler)&&t.isUaConnect()?(this.stateCenter.reporter.spanSetAttributes({key:this.liveRoomLoginKey.event,par:null==(t=this.room)?void 0:t.roomID},{sdk_zpush_sessionid_string:null==(t=null==(t=null==(t=this.liveRoomHandler)?void 0:t.roomServicer)?void 0:t.switchSessionID)?void 0:t.toString()}),this.liveRoomHandler.login(this.room,i,i)):(this.tryLoginTimer=setTimeout((function(){n.logger.info(_e+" over time no response, login timeout"),n.loginCallback.fail&&n.loginCallback.fail(Fe.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.warn(_e+" ua is not connected"))));if(null!=(t=this.service)&&t.isDisConnect())try{if(this.service.closeSocket(),this.logger.debug(_e+" new websocket"),!this.isUseNetAgent&&!D(e,this.stateCenter.appid))throw this.logger.error("".concat(_e," the server does not match the appID")),new Error("The server does not match the appID");this.service.createSocket(e);var r=Date.now();this.service.openHandler((function(){var e;n.stateCenter.reporter.spanSetAttributes({key:n.liveRoomLoginKey.event,par:null==(e=n.room)?void 0:e.roomID},{connect_consume:Date.now()-r}),n.openHandler()})),this.service.closeHandler((function(e){var t;n.logger.error(_e+" close "+JSON.stringify(e.code||e)),null!=(t=n.service)&&t.closeSocket(),n.closeHandler(e)})),this.service.errorHandler((function(e){var t;n.logger.error(_e+" error "+JSON.stringify(e.code||e)),null!=(t=n.service)&&t.closeSocket(),n.closeHandler(e)}))}catch(e){this.logger.error(_e+"  websocket err:"+JSON.stringify(e))}else{this.logger.info(_e+" use current websocket and sent login");var i=function(e,t){n.handleLoginRsp(e,t)};null!=(t=this.service)&&t.login(this.room,i,i)}this.tryLoginTimer=setTimeout((function(){n.logger.info(_e+" over time no response, login timeout"),n.loginCallback.fail&&n.loginCallback.fail(Fe.error.LOGIN_TIMEOUT)}),this.tryLoginInterval),this.logger.info(_e+" call success")}},zt.prototype.openHandler=function(){function e(e,t){n.handleLoginRsp(e,t)}var t,n=this;this.logger.info("zm.rm.op websocket.onpen call"),null!=(t=this.service)&&t.onPush(),null!=(t=this.service)&&t.login(this.room,e,e)},zt.prototype.handleLoginRsp=function(e,t){this.logger.info(ye+" seq: "+t+" "+JSON.stringify(e)),this.room.runState!==s.trylogin?this.logger.error(ye+" state error"):e.header&&e.body?e.header.seq!==t&&0==this.room.isMulti?this.logger.error(ye+" in wrong seq, local=",t+"",",recv=",e.header.seq):0!==e.body.err_code?(this.logger.error(ye+" server error=",e.body.err_code),this.handleLoginFail(e)):(this.logger.info(ye+" call success."),this.handleLoginSuccess(e)):(this.logger.error(ye+" "+JSON.stringify(e)),this.handleLoginFail(e))},zt.prototype.handleLoginFail=function(e){this.resetTryLogin();var t=Fe.error.INNER_ERROR;e.header&&e.body?t=W.getServerError(e.body.err_code):e.code&&e.msg&&(t=e),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{error:t.code,message:t.msg}),this.loginCallback.fail&&this.loginCallback.fail(t,!0)},zt.prototype.handleLoginSuccess=function(e){var t,n,r=this,i=(this.room.checkRoomSession(e.body.room_session_id)&&(this.room.loginTime=Date.now()),this.room.lastRunState),o=(this.setRunState(s.login),this.stateCenter.userid=e.body.user_id,this.isUseNetAgent?(this.room.longRoomSid=e.body.room_session_id,this.room.longSid=e.body.session_id):(this.room.sessionID=e.body.session_id,this.room.roomSessionID=e.body.room_session_id),(o={})[this.room.roomID]={room_sid_string:this.room.roomSidString},this.stateCenter.reporter.setPublicPros(o),null==(o=null==e?void 0:e.body)?void 0:o.token_remain_time);this.stateCenter.configRoomAuth=0<o,e.body.ret_timestamp&&["03","04"].includes(this.room.token.substring(0,2))&&(t=(n=(new Date).getTime())-e.body.ret_timestamp,this.stateCenter.local_time_deviation=t<5e3?0:t,t=0<o?1e3*o:1e3*W.decodeTokenExpire(this.room.token.substring(2))-(n-this.stateCenter.local_time_deviation),this.resetTokenTimer(t)),this.room.isMulti||this.logger.setSessionInfo(this.stateCenter.appid,this.room.roomID,this.room.userSidString,this.stateCenter.idName,this.stateCenter.nickName,this.stateCenter.sdKVersion),this.isUseNetAgent||(e.body.config_info&&(n=(null==(o=this.stateCenter.settingConfig)?void 0:o.getSetting("remote_log_level",!0))||e.body.config_info.log_level,this.logger.setRemoteLogLevel(n),""==e.body.config_info.log_url||this.logger.url||(this.logger.setLogServer(e.body.config_info.log_url),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"})))),e.body.cluster_env&&1===e.body.cluster_env&&(this.stateCenter.testEnvironment=!0,this.stateCenter.debugCustom||(this.stateCenter.debug=!0))),this.stateCenter.reporter.spanEnd({key:this.liveRoomLoginKey.event,par:this.room.roomID},{server:this.isUseNetAgent?void 0:Ye(this.server),room_id:null==(o=this.room)?void 0:o.roomID,room_sid_string:null==(n=this.room)?void 0:n.roomSidString,zpush_sessionid_string:this.isUseNetAgent&&null!=(o=null==(t=null==e?void 0:e.header)?void 0:t.session_id)?o.toString():void 0,liveroom_sid_string:null==(n=this.room)?void 0:n.userSidString}),this.resetTryLogin(),this.loginSuccessCallBack(i,e),this.roomStateHandle("CONNECTED",w.Logined,{code:0,msg:""}),this.logger.makeZipLogSpaceUpload().catch((function(e){r.logger.error("zm.rm.lgsuc zip log upload error: "+e.message)})),this.loginCallback.success&&this.loginCallback.success(!0)},zt.prototype.closeHandler=function(e){this.logger.error(ve+" room websocket close "+JSON.stringify(e.code||e)),this.room.runState!==s.logout?this.room.runState===s.trylogin?(this.resetTryLogin(),this.loginCallback.fail&&this.loginCallback.fail(1006==e.code?Fe.error.LOGIN_TIMEOUT:e)):this.room.runState===s.login&&(this.logger.info(ve+" is called because of network broken"),this.resetTryLogin(),this.onDisconnect(Fe.error.NETWORK_BROKEN)):this.logger.info(ve+" onclose logout flow call websocket.close")},zt.prototype.logout=function(e,t){this.logger.info(be+" call"),this.room.runState===s.logout?this.logger.warn("zb.rh.lo at logout"):(this.resetRoom(e),this.roomStateHandle("DISCONNECTED",w.Logout,{code:0,msg:""},void 0,t),this.stopTokenTimer(),this.logger.info(be+" call success"))},zt.prototype.handleLogoutRsp=function(e,t){this.logger.info(be+" result=",e.body&&e.body.err_code?e.body.err_code:"-1"),this.isUseNetAgent&&t&&null!=(e=this.liveRoomHandler)&&e.closeRequest()};var Ht=zt;function zt(e,t,n,r,i,o){this.logger=e,this.stateCenter=t,this.dataReport=n,this.room=r,this.liveRoomHandler=i,this.service=o,this.tryLoginTimer=null,this.tryLoginCount=0,this.tryLoginInterval=1e4,this.tokenTimer=null,this.beforeExpire=30,this.server="",this.tempBrokenTime=0,this.reconectTimes=0,this.loginCallback={}}var Vt=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Ft=(Xt.prototype.loginRsp=function(e,t){this.anchor_info=e.body.anchor_info||this.anchor_info,this.userListInterval=e.body.userlist_interval||this.userListInterval,this.userListMergeInterval=e.body.userlist_merge_timeout||this.userListMergeInterval,e.body.anchor_info&&(this.stateCenter.actionListener("getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name),this.stateCenter.actionListener("_getAnchorInfo",e.body.anchor_info.anchor_id_name,e.body.anchor_info.anchor_nick_name)),e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count),this.logger.info("zm.us.lgr  userStateUpdate "+this.room.userStateUpdate),this.room.userStateUpdate&&this.fetchUserList(t)},Xt.prototype.patchUserList=function(e){var t=this;e.body.server_user_seq!==this.userSeq&&this.room.userStateUpdate&&!this.userSeqMergeMap&&(this.logger.info("zm.us.pt call update user "+this.userSeq+" server "+e.body.server_user_seq),this.userSeqMergeMap||(this.userSeqMergeMap={}),this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){t.handleMergeTimeout()}),this.userListMergeInterval)),this.minUserSeq=e.body.server_user_seq,null!=e.body.online_count&&0!=e.body.online_count&&this.stateCenter.actionListener("roomOnlineUserCountUpdate",this.room.roomID,e.body.online_count)},Xt.prototype.resetUserHandler=function(){this.userQuerying=!1,this.lastUserQueryTime=0,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=void 0,this.userSeqMergeMap={},this.userSeqMergeTimer=void 0,this.userQueryTimer=void 0,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}},Xt.prototype.fetchUserList=function(e){this.userQuerying?this.logger.warn("zm.us.ftu is already querying"):(this.userQuerying=!0,this.userTempList=[],this.fetchUserListWithPage(0,e||0),this.logger.info("zm.us.ftu the first time call"))},Xt.prototype.fetchUserListWithPage=function(e,t){function n(e){r.handleFetchUserListRsp(e,t)}var r=this,i={user_index:e,sort_type:0},o=mt;null!=(this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:this.room.roomID},{key:o.event,par:this.room.roomID},o.event,!0).setAttribute("user_index",o.user_index(e)),o=this.stateCenter.useNetAgent?this.liveRoomHandler:this.service)&&o.fetchUserList(i,n,n,this.room)},Xt.prototype.handleFetchUserListRsp=function(e,t){var n=this;if(this.stateCenter.reporter.spanEnd({key:mt.event,par:this.room.roomID},{error:(null==(r=null==e?void 0:e.body)?void 0:r.err_code)||(null==e?void 0:e.code),message:(null==(r=null==e?void 0:e.body)?void 0:r.err_message)||(null==e?void 0:e.msg)}),e.body&&0!=e.body.err_code)this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(Re+" fetch error "+e.body.err_code);else if(e.header&&e.body)if(this.room.userStateUpdate){this.userTempList=Vt(Vt([],this.userTempList,!0),e.body.user_baseinfos,!0);var r=e.body.ret_user_index;if(r!=e.body.server_user_index)this.logger.info(Re+" fetch another page"),this.fetchUserListWithPage(r+1,t);else{this.userSeq=e.body.server_user_seq;for(var i=[],o=[],a=0;a<this.userTempList.length;a++){var u={userID:this.userTempList[a].id_name,userName:this.userTempList[a].nick_name,role:this.userTempList[a].role};4!==u.role&&(i.push(u),o.push({idName:this.userTempList[a].id_name,nickName:this.userTempList[a].nick_name,role:this.userTempList[a].role}))}this.stateCenter.actionListener("_getTotalUserList",this.room.roomID,o),t==s.login?(this.userList&&W.mergeUserList(this.logger,this.userList,i,(function(e,t){0!==e.length&&n.onUserStateUpdate(n.room.roomID,"ADD",e),0!==t.length&&n.onUserStateUpdate(n.room.roomID,"DELETE",t)})),this.userList=i):0!==(this.userList=i).length&&this.onUserStateUpdate(this.room.roomID,"ADD",i),this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.userTempList=[],this.logger.info(Re+" call success user_list "+i+", count: "+i.length+", seq: "+this.userSeq)}}else this.logger.info(Re+" not update");else this.userQuerying=!1,this.lastUserQueryTime=Date.now()+this.userListInterval,this.logger.info(Re+" fetch error "+e)},Xt.prototype.handlePushUserStateUpdateMsg=function(e){if(this.logger.info(ke+" call"),this.room.userStateUpdate)if(this.userSeq===e.body.user_list_seq)this.logger.warn(ke+" user_list_seq is the same with local seq");else if(this.userSeq+e.body.user_actions.length!==e.body.user_list_seq)this.mergeUserByUserSeq(e.body.user_list_seq,e.body.user_actions);else{this.userSeq=e.body.user_list_seq;for(var t=[],n=0;n<e.body.user_actions.length;n++){var r={action:e.body.user_actions[n].Action,idName:e.body.user_actions[n].IdName,nickName:e.body.user_actions[n].NickName,role:e.body.user_actions[n].Role,loginTime:e.body.user_actions[n].LoginTime};4!==r.role&&t.push(r)}this.stateCenter.actionListener("_userStateUpdate",e.body.room_id,t);var i=[],o=[];t.forEach((function(e){1==e.action?i.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&o.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList&&(this.userList=this.userList.concat(i).filter((function(e){return!o.some((function(t){return t.userID==e.userID}))}))),0!==i.length&&this.onUserStateUpdate(e.body.room_id,"ADD",i),0!==o.length&&this.onUserStateUpdate(e.body.room_id,"DELETE",o),this.logger.info(ke+" call success")}else this.logger.info(ke+" userStateUpdate is false")},Xt.prototype.onUserStateUpdate=function(e,t,n){var r=this;n=n.filter((function(e){return e.userID!==r.stateCenter.idName})),0!=n.length&&(n=n.map((function(e){return{userID:e.userID,userName:e.userName}})),this.stateCenter.actionListener("roomUserUpdate",e,t,n))},Xt.prototype.mergeUserByUserSeq=function(e,t){var n=this;this.userSeqMergeMap||(this.logger.warn("zm.us.mg new merge userlist "+this.userSeq+" server "+e),this.userSeqMergeMap={},this.userSeqMergeTimer&&clearTimeout(this.userSeqMergeTimer),this.userSeqMergeTimer=setTimeout((function(){n.handleMergeTimeout()}),this.userListMergeInterval)),this.userSeqMergeMap[e]=t,this.logger.warn("zm.us.mg  merge userlist "+this.userSeq+" server "+e+" userlist "+t.length)},Xt.prototype.mergeUser=function(e){var t=this,n=(this.logger.info("zm.us.mg merge userlist "+this.userSeq+" userSeqList "+e.join(",")),this.userSeq=e[e.length-1],this.lastUserQueryTime=Date.now()+this.userListInterval,{}),r=((e.forEach((function(e){t.userSeqMergeMap&&t.userSeqMergeMap[e].forEach((function(e){n[e.IdName]=e}))})),this.userSeqMergeMap=null,e=Object.values(n).map((function(e){return{action:e.Action,idName:e.IdName,nickName:e.NickName,role:e.Role,loginTime:e.LoginTime?String(e.LoginTime):""}})).filter((function(e){return 4!==e.role}))).sort((function(e,t){return e.loginTime.localeCompare(t.loginTime)})),[]),i=[];e.forEach((function(e){1==e.action?r.push({userID:e.idName,userName:e.nickName,role:e.role}):2==e.action&&i.push({userID:e.idName,userName:e.nickName,role:e.role})})),this.userList=this.userList&&this.userList.concat(r).filter((function(e){return!i.some((function(t){return t.userID==e.userID}))})),0!==r.length&&this.onUserStateUpdate(this.room.roomID,"ADD",r),0!==i.length&&this.onUserStateUpdate(this.room.roomID,"DELETE",i),this.stateCenter.actionListener("_userStateUpdate",this.room.roomID,e)},Xt.prototype.handleMergeTimeout=function(){var e,t=this,n=Object.keys(this.userSeqMergeMap).map((function(e){return+e})).sort((function(e,t){return e-t}));n[n.length-1]-n[0]+1===n.length||n[n.length-1]>=this.minUserSeq?this.mergeUser(n):(this.userSeqMergeMap=null,e=this.lastUserQueryTime-Date.now(),this.logger.info("zm.us.mto  fetch merge userlist "+this.userSeq+" userSeqList "+n.join(",")+" wait "+e),0<e?(this.userQueryTimer&&clearTimeout(this.userQueryTimer),this.userQueryTimer=setTimeout((function(){t.fetchUserList()}),e)):this.fetchUserList())},Xt);function Xt(e,t,n,r,i,o){this.logger=e,this.stateCenter=t,this.dataReport=n,this.liveRoomHandler=r,this.room=i,this.service=o,this.userQuerying=!1,this.userTempList=[],this.userSeq=0,this.minUserSeq=0,this.userList=[],this.userSeqMergeMap=null,this.userListInterval=3e4,this.userListMergeInterval=5e3,this.anchor_info={anchor_id:"",anchor_id_name:"",anchor_nick_name:""}}Object.defineProperty(Kt.prototype,"isUseNetAgent",{get:function(){return this.stateCenter.useNetAgent},enumerable:!1,configurable:!0}),Object.defineProperty(Kt.prototype,"sessionExist",{get:function(){return null!==this.longSid||"0"!==this.sessionID},enumerable:!1,configurable:!0}),Object.defineProperty(Kt.prototype,"roomSidString",{get:function(){return this.isUseNetAgent?this.longRoomSid?this.longRoomSid.toString():"0":this.roomSessionID},enumerable:!1,configurable:!0}),Object.defineProperty(Kt.prototype,"userSidString",{get:function(){return this.isUseNetAgent?this.longSid?this.longSid.toString():"0":this.sessionID},enumerable:!1,configurable:!0}),Kt.prototype.initMessageHandler=function(){},Kt.prototype.initLiveHandler=function(){},Kt.prototype.init=function(){this.bindHeatBeatHandler(),this.bindRoomHandler(),this.bindMessageHandler(),this.bindLiveHandler()},Kt.prototype.bindHeatBeatHandler=function(){var e=this;this.heartBeatHandler.hbLogout=function(t){e.roomHandler.handleHbLogout(t)},this.heartBeatHandler.heartbeatRspNotiFy=function(t,n){e.messageHandler&&e.messageHandler.loginRsp(t),e.userHandler.patchUserList(t),e.HBResponse(t,n)}},Kt.prototype.bindRoomHandler=function(){var e=this;this.roomHandler.loginSuccessCallBack=function(t,n){e.logger.info("zm.lrm.brh login suc "+t),e.heartBeatHandler.init(n),e.isUseNetAgent?e.liveRoomHandler.startCheck():e.service&&(e.service.stopCheck(),e.service.startCheck()),e.userHandler.loginRsp(n,t),e.messageHandler&&e.messageHandler.loginRsp(n),e.isMulti||e.handleMultiRoom(),e.roomLoginResponse(n)},this.roomHandler.resetRoomCallBack=function(){var t;e.heartBeatHandler.resetHeartbeat(),e.liveHandler&&e.liveHandler.resetLiveHandler(),e.messageHandler&&e.messageHandler.resetMessageInfo(),e.isUseNetAgent&&e.liveRoomHandler&&e.liveRoomHandler.stopCheck(),e.userHandler.resetUserHandler(),null!=(t=e.service)&&t.stopCheck(),e.roomTryHandler&&(e.roomTryHandler.invalid(),e.roomTryHandler.stopMaxTime())}},Kt.prototype.bindUserHandler=function(){},Kt.prototype.bindMessageHandler=function(){},Kt.prototype.bindLiveHandler=function(){},Kt.prototype.HBResponse=function(e,t){this.stateCenter.actionListener("HBResponse",e,t)},Kt.prototype.roomLoginResponse=function(e){this.stateCenter.actionListener("roomLoginResponse",e)},Kt.prototype.checkRoomSession=function(e){return this.isUseNetAgent?null!==this.longRoomSid&&this.longRoomSid.eq(e):this.roomSessionID===e},Kt.prototype.handleMultiRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.runState!==s.login&&t.roomTryHandler&&1==t.isMulti&&(t.roomTryHandler.onactive=function(n,r){var i;r&&0!==r.code?(0!==r.code&&(i=W.getLiveRoomError(r.code,e.isUseNetAgent))&&N[i]&&(r=N[i]),t.roomHandler.roomStateHandle("DISCONNECTED",w.ReconnectFailed,r,r.msg)):t.roomHandler.roomStateHandle("CONNECTED",w.Reconnected,r)},t.roomTryHandler.startMaxTime(),t.roomTryHandler.active())}))},Kt.prototype.isLogin=function(){return this.runState===s.login},Kt.prototype.isLogout=function(){return this.runState===s.logout},Kt.prototype.isTryLogin=function(){return this.runState===s.trylogin},Kt.prototype.isDisConnect=function(){return(this.isUseNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Kt.prototype.retryConnect=function(){this.logger.info("zm.lrm.rc call"),this.isUseNetAgent&&(this.resetSessionInfo(),this.liveRoomHandler.closeRequest())},Kt.prototype.retryRoom=function(){this.logger.info("zm.lrm.rr.0 call"),this.roomTryHandler&&this.rtm.netAgent.isConnect()&&(this.resetRoomSession(),this.resetUserSession(),this.roomTryHandler.active(!0))},Kt.prototype.resetSessionInfo=function(){var e;this.logger.info("zm.lrm.rsi call"),this.resetRoomSession(),this.resetUserSession(),null!=(e=this.liveRoomHandler)&&e.reset()},Kt.prototype.resetRoomSession=function(){this.roomSessionID="0",this.longRoomSid=null},Kt.prototype.resetUserSession=function(){this.sessionID="0",this.longSid=null};var Yt=Kt;function Kt(e,t,n,r,i,o,a){this.roomID=e,this.stateCenter=t,this.logger=n,this.dataReport=r,this.rtm=i,this.liveRoomHandler=o,this.service=a,this.runState=s.logout,this.lastRunState=s.logout,this.lastRoomState="DISCONNECTED",this.roomState="DISCONNECTED",this.roomSessionID="0",this.sessionID="0",this.longSid=null,this.longRoomSid=null,this.isMulti=!1,this.token="",this.thirdToken="",this.loginTime=0,this.userStateUpdate=!1,this.maxMemberCount=0,this.roomName="",this.roomHandler=new Ht(this.logger,this.stateCenter,this.dataReport,this,o,this.service),this.heartBeatHandler=new Gt(this.logger,this.stateCenter,this.dataReport,this.liveRoomHandler,this,this.service),this.userHandler=new Ft(this.logger,this.stateCenter,this.dataReport,this.liveRoomHandler,this,this.service),this.initMessageHandler(),this.initLiveHandler(),this.init()}Jt.prototype.createSocket=function(e){this.socket=Object(i.createZegoWebSocket)(e,this.ENV%2)},Jt.prototype.closeSocket=function(){this.socket&&(this.socket.onclose=null,this.socket.onerror=null,this.socket.close(),this.socket=null)},Jt.prototype.isDisConnect=function(){return!this.socket||1!==this.socket.readyState},Jt.prototype.sendMessage=function(e,t,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i={timeOut:6e3}),i={data:t={header:e,body:t},seq:e.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeOut:i.timeOut,success:n,error:r},n=this.sendCommandList.push(i),this.sendCommandMap[i.seq]=n,this.socket&&this.socket.send(JSON.stringify(t)),e.seq},Jt.prototype.sendPB=function(e){return this.socket&&this.socket.send(e),!0},Jt.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)!function(){var n,r,i;e.remove(t),t&&t._data&&(n=t._data.error,r=t._data.seq,i=t._data.data.body.custom_msg,setTimeout((function(){n&&n(N.TIMEOUT,r,i)}),0)),t=e.getFirst()}()},Jt.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),i=0,o=this;null!=n&&"break"!==function(){var s,a,u;return n._data&&n._data.sendTime+n._data.timeOut>r||(n._data&&delete t[n._data.data.header.seq],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+o.sendDataDropTimeout<r||n&&n._data&&(s=n._data.error,a=n._data.seq,u=n._data.data.body.custom_msg,setTimeout((function(){s&&s(N.TIMEOUT,a,u)}),0)),++i>=o.sendDataCheckOnceCount)?"break":void(n=e.getFirst())}(););},Jt.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},Jt.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),this.sendCommandMap={},clearTimeout(this.sendDataCheckTimer)},Jt.prototype.openHandler=function(e){var t=this;this.socket&&(this.socket.onopen=function(n){t.socket.binaryType="arraybuffer",t.responseHandler(),e(n)})},Jt.prototype.responseHandler=function(){var e=this;this.socket&&(this.socket.onmessage=function(t){t="string"==typeof t.data?JSON.parse(t.data):t.data,e.onMessage(t)})},Jt.prototype.closeHandler=function(e){this.socket&&(this.socket.onclose=function(t){e(t)})},Jt.prototype.errorHandler=function(e){this.socket&&(this.socket.onerror=e)},Jt.prototype.onMessage=function(e){};var jt=Jt;function Jt(e){this.socket=null,this.sendCommandList=new _,this.sendCommandMap={},this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.ENV=e}var Qt=function(){return(Qt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},qt=($t.prototype.checkResponse=function(e){return 0!=this.stateCenter.roomModulesList.filter((function(e){return e.runState!==s.logout})).length&&(e.header.appid!==this.stateCenter.appid||e.header.user_id!==this.stateCenter.userid)},$t.prototype.handleSendCommandMsgRsp=function(e){var t,n=this,r=this.service.sendCommandMap[e.header.seq];null!=r&&(t=r._data,delete this.service.sendCommandMap[e.header.seq],this.service.sendCommandList.remove(r),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,n.cmdSeq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,n.cmdSeq)}),0))},$t.prototype.onPush=function(){var e=this;this.service.onMessage=function(t){t instanceof ArrayBuffer?e.stateCenter.actionListener("_protobufResponse",t):t.header?(0!==t.body.err_code?t.body.err_message&&e.logger.error("".concat(Ie," cmd=").concat(t.header.cmd,", err_code=").concat(t.body.err_code,", err_message=").concat(t.body.err_message," ")):e.logger.info("".concat(Ie," cmd=").concat(t.header.cmd,", msg=").concat(JSON.stringify(t)," ")),-1<["login","logout"].indexOf(t.header.cmd)?e.handleSendCommandMsgRsp(t):e.checkResponse(t)?e.logger.error(Ie+"  check session fail."):(e.logger.info("".concat(Ie," cmd=").concat(t.header.cmd,",function=").concat(!!e.responseRouters[t.header.cmd])),e.handleSendCommandMsgRsp(t),e.responseRouters[t.header.cmd]&&e.responseRouters[t.header.cmd](t,e.cmdSeq))):e.logger.error("".concat(Ie," msg type error "))}},$t.prototype.handlePushKickout=function(e){var t,n;void 0===(null==(n=null==e?void 0:e.body)?void 0:n.protocol)||1===(null==(n=null==e?void 0:e.body)?void 0:n.protocol)?function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],this.stateCenter.roomModulesList,!0).forEach((function(t){return t.roomHandler.handlePushKickout(e,!0)})):(t=null==(n=null==e?void 0:e.header)?void 0:n.room_id,(n=this.stateCenter.roomModulesList.find((function(e){return e.roomID==t})))?n.roomHandler.handlePushKickout(e):this.logger.error(Ie+" room no found ignore "+JSON.stringify(null==(n=e.header)?void 0:n.room_id)))},$t.prototype.handlePushCustomMsg=function(e){},$t.prototype.handlePushRoomMsg=function(e){},$t.prototype.handlePushUserStateUpdateMsg=function(e){var t,n=null==(r=null==e?void 0:e.header)?void 0:r.room_id,r=this.stateCenter.roomModulesList.find((function(e){return e.roomID==n})),i=this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:n},{key:""},ut.event);r?(i.setAttributes({user_list_seq:null==(t=null==e?void 0:e.body)?void 0:t.user_list_seq,update_user:null==(t=null==e?void 0:e.body)?void 0:t.user_actions}),i.end(),r.userHandler.handlePushUserStateUpdateMsg(e)):(this.logger.error(Ie+" room no found ignore "+JSON.stringify(e)),this.stateCenter.reporter.setError(i,ut.error.ROOM_NOT_EXIST))},$t.prototype.handlePushMergeMsg=function(e){},$t.prototype.handlePushTransMsg=function(e){},$t.prototype.handleBigImMsgRsp=function(e){},$t.prototype.handlePushSignalMsg=function(e){},$t.prototype.handlePushTokenExpire=function(e){this.stateCenter.actionListener("_tokenExpired",e)},$t.prototype.closeHandler=function(e){this.service.closeHandler(e)},$t.prototype.openHandler=function(e){this.service.openHandler(e)},$t.prototype.errorHandler=function(e){this.service.errorHandler(e)},$t.prototype.getHeader=function(e,t,n,r){return{Protocol:"req",cmd:e,appid:this.stateCenter.appid,seq:++this.cmdSeq,user_id:this.stateCenter.userid,session_id:t||"",room_id:n||"",room_session_id:r||"",biz_version:this.stateCenter.bizVersion||""}},$t.prototype.startCheck=function(){this.logger.info("zm.sc.0 start"),this.service.startCheck()},$t.prototype.stopCheck=function(){this.logger.info("zm.sc.1 stop"),this.service.stopCheck()},$t.prototype.isDisConnect=function(){return!this.service||this.service.isDisConnect()},$t.prototype.createSocket=function(e){var t=this;this.stateCenter.roomServer=e,this.service.createSocket(e),this.responseRouters=Qt(Qt({},this.responseRouters),{push_kickout:function(e){t.handlePushKickout(e)},push_custommsg:function(e){t.handlePushCustomMsg(e)},push_im_chat:function(e){t.handlePushRoomMsg(e)},push_userlist_update:function(e){t.handlePushUserStateUpdateMsg(e)},push_merge_message:function(e){t.handlePushMergeMsg(e)},push_trans:function(e){t.handlePushTransMsg(e)},push_signal:function(e){t.handlePushSignalMsg(e)},push_token_expire:function(e){t.handlePushTokenExpire(e)}})},$t.prototype.closeSocket=function(){this.service.closeSocket()},$t.prototype.sendMessage=function(e,t,n,r,i,o){var s,a;return this.service.isDisConnect()?(this.logger.error("zm.sv.sd socket is disconnect"),r(N.SOCKET_CLOSE),0):(s=null!=o&&o.roomID?o.roomID:null==(s=this.stateCenter.roomModulesList[0])?void 0:s.roomID,a=null!=o&&o.roomSessionID?o.roomSessionID:null==(a=this.stateCenter.roomModulesList[0])?void 0:a.roomSessionID,o=null!=o&&o.sessionID?o.sessionID:null==(o=this.stateCenter.roomModulesList[0])?void 0:o.sessionID,i=i||this.getHeader(e,o,s,a),this.logger.info("zm.sv.sd sendMsg:"+JSON.stringify({header:i,body:t})),this.service.sendMessage(i,t,n,r))},$t.prototype.on=function(e,t){this.responseRouters[e]=t},$t.prototype.login=function(e,t,n){var r=this.getHeader(e.isMulti?"enter":"login",e.sessionID,e.roomID,e.roomSessionID);return e={id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,role:this.stateCenter.role,token:e.token,version:this.stateCenter.sdKVersion,room_name:e.roomID,user_state_flag:e.userStateUpdate?1:0,room_create_flag:this.stateCenter.roomCreateFlag,client_type:0===this.stateCenter.ENV?l.ClientType_Webrtc:l.ClientType_SmallProgram,third_token:e.thirdToken,user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||"",login_logic:this.stateCenter.isMultiRoom?3:1,proto_format:this.stateCenter.protoFormat},this.sendMessage("",e,t,n,r)},$t.prototype.logout=function(e,t,n){var r=e.isMulti?"quit":"logout",i={reserve:0};return"logout"==r&&(i.login_logic=this.stateCenter.isMultiRoom?3:1),this.sendMessage(r,i,t,n,void 0,{sessionID:e.sessionID,roomID:e.roomID,roomSessionID:e.roomSessionID})},$t.prototype.heartBeat=function(e,t,n){return this.sendMessage("hb",{reserve:0},e,t,void 0,n)},$t.prototype.fetchUserList=function(e,t,n,r){return this.sendMessage("user_list",e,t,n,void 0,r)},$t.prototype.fetchUserListV2=function(e,t,n,r){return this.sendMessage("user_list_v2",e,t,n,void 0,r)},$t.prototype.fetchReliableMessage=function(e,t,n,r){return this.sendMessage("trans_fetch",e,t,n,void 0,r)},$t.prototype.sendReliableMessage=function(e,t,n,r){return this.sendMessage("trans",e,t,n,void 0,r)},$t.prototype.sendRoomMsg=function(e,t,n,r){return this.sendMessage("im_chat",e,t,n,void 0,r)},$t.prototype.sendCustomCommand=function(e,t,n,r){return this.sendMessage("custommsg",e,t,n,void 0,r)},$t.prototype.sendBigRoomMessage=function(e,t,n,r){return this.sendMessage("bigim_chat",e,t,n,void 0,r)},$t.prototype.sendRelayMessage=function(e,t,n,r){return this.sendMessage("relay",e,t,n,void 0,r)},$t.prototype.sendSignalCmd=function(e,t,n,r){return this.sendMessage("signal",e,t,n,void 0,r)},$t.prototype.sendPB=function(e){return this.service.isDisConnect()||this.stateCenter.networkState==u.offline?(this.logger.error("zm.spb socket is disconnected"),!1):this.service.sendPB(e)},$t);function $t(e,t,n){this.stateCenter=e,this.logger=t,this.rtm=n,this.service=new jt(this.stateCenter.ENV),this.cmdSeq=0,this.responseRouters={}}tn.prototype.setSetting=function(e,t){var n,r,i=Array.isArray(t)&&0<t.length;for(n in e)if("number"==typeof e[n].ctrlmode&&[1,2].includes(e[n].ctrlmode))this.setting[n]=e[n],this.setting[n+"_ctrlmode"]=e[n].ctrlmode;else for(var o in e[n])o.endsWith("_ctrlmode")||i&&-1==t.indexOf(o)||(1===(r=e[n][o+"_ctrlmode"])||2===r?this.setting[o]=e[n][o]:this.defaultSetting[o]&&(this.setting[o]=this.defaultSetting[o]),"number"==typeof r&&(this.setting[o+"_ctrlmode"]=e[n][o+"_ctrlmode"]))},tn.prototype.getSetting=function(e,t){return(t=void 0!==t&&t)&&2!=this.setting[e+"_ctrlmode"]?void 0:this.setting[e]};var en=tn;function tn(){this.defaultSetting={remote_log_level:"info",zip_log:0,detaillog_domain:""},this.requestList={},this.setting=JSON.parse(JSON.stringify(this.defaultSetting))}for(var nn=n(2),rn=nn.roots,on=nn.types?nn.types.basic:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0,string:2,bytes:2},sn=nn.types?nn.types.packed:{double:1,float:5,int32:0,uint32:0,sint32:0,fixed32:5,sfixed32:5,int64:0,uint64:0,sint64:0,fixed64:1,sfixed64:1,bool:0},an=Object.keys(on),un=nn.util.Long?nn.util.Long.fromBits:function(){return 0},cn={$:function(e){return cn[e]?cn[e].call(this):rn[e].decode?rn[e].decode(this,this.uint32()):cn.$.call(this,"int32")}},ln={$:function(e,t,n){var r=on[e];return void 0===r?rn[e].encode?(this.uint32((n<<3|2)>>0).fork(),rn[e].encode(t,this).ldelim()):ln.$.call(this,"int32",t,n):ln[e].call(this.uint32(n<<3|r),t)}},hn=0;hn<an.length;hn++)cn[an[hn]]=nn.Reader.prototype[an[hn]],ln[an[hn]]=nn.Writer.prototype[an[hn]];!function e(t,n,r,i){for(var o=0,s=Object.keys(t);o<s.length;o++){var a=s[o];if(t[a].$m&&Object.keys(t[a].$m).every((function(e){return Number(e)}))){if(r[a])throw Error(`nested type ${r}.${a} has already exist`);r[a]=function(t,r){function i(e){for(var n in t)"{"===(n=t[n])[1].charAt(0)?this[n[0]]={}:"["!==n[1].charAt(0)&&"<"!==n[1].charAt(0)||(this[n[0]]=[]);if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)null!=e[r[i]]&&(this[r[i]]=e[r[i]])}var o,s={};for(o in t){var a=t[o],u=a[1];"{"===u.charAt(0)?(i.prototype[a[0]]=nn.util.emptyObject,s[u]={$m:u.substring(1).split(",").map((function(e,t){return["$"+(t+1),e,null]})).reduce((function(e,t,n){return e[n+1]=t,e}),{})}):i.prototype[a[0]]="["===u.charAt(0)||"<"===u.charAt(0)?nn.util.emptyArray:"bytes"===u?nn.util.newBuffer([]):a[2]&&a[2].hasOwnProperty("low")&&a[2].hasOwnProperty("high")?un(a[2].low,a[2].high,a[2].unsigned):a[2]}return i.create=function(e){return new i(e)},i.decode=function(e,n){e instanceof nn.Reader||(e=nn.Reader.create(e));for(var r=void 0===n?e.len:e.pos+n,o=new i;e.pos<r;){var s=e.uint32(),a=s>>>3;if(0<a&&t[a]){var u=t[a][0],c=t[a][1];if("{"===c.charAt(0))o[u]===nn.util.emptyObject&&(o[u]={}),a=i.$namespace[c].decode(e,e.uint32()),o[u][a.$1]=a.$2;else if("["===c.charAt(0)||"<"===c.charAt(0))if(c=c.substring(1),o[u]&&o[u].length||(o[u]=[]),void 0!==sn[c]&&2==(7&s))for(var l=e.uint32()+e.pos;e.pos<l;)o[u].push(cn.$.call(e,c));else o[u].push(cn.$.call(e,c));else o[u]=cn.$.call(e,c)}else e.skipType(7&s)}return o},i.encode=function(e,n){for(var r in n=n||nn.Writer.create(),t){var o=t[r][0];if("{"===(c=t[r][1]).charAt(0)){if(null!=e[o]&&e.hasOwnProperty(o))for(var s=0,a=Object.keys(e[o]);s<a.length;++s)n.uint32((r<<3|2)>>0).fork(),i.$namespace[c].encode({$1:a[s],$2:e[o][a[s]]},n).ldelim()}else if("["===c.charAt(0)||"<"===c.charAt(0)){var u="<"===c.charAt(0),c=c.substring(1),l=e[o];if(null!=l&&l.length)if(u&&void 0!==sn[c]){for(n.uint32((r<<3|2)>>0).fork(),s=0;s<l.length;s++)ln[c].call(n,l[s]);n.ldelim()}else for(s=0;s<l.length;s++)ln.$.call(n,c,l[s],r)}else null!=e[o]&&e.hasOwnProperty(o)&&ln.$.call(n,c,e[o],r)}return n},Object.keys(s).length&&(i.$namespace=e(s,n+"."+r,i.$namespace||{},!0)),i}(t[a].$m,a)}else t[a].$s?r[a]=function(e,t){function r(e,t,n){nn.rpc.Service.call(this,e,t,n)}return((r.prototype=Object.create(nn.rpc.Service.prototype)).constructor=r).create=function(e,t,n){return new r(e,t,n)},Object.keys(e).forEach((function(i){var o=e[i];function s(e,t){return this.rpcCall(s,rn[o[0]],rn[o[1]],e,t)}Object.defineProperty(s,"name",{value:i}),Object.defineProperty(s,"path",{value:n+"."+t}),r.prototype[i]=s})),r}(t[a].$s,a):t[a].$e&&Object.values(t[a].$e).every((function(e){return Number(e)===e}))&&(r[a]=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[n[t[r]]=e[t[r]]]=t[r];return n}(t[a].$e));r[a]&&!i&&(rn[n+"."+a]=r[a]),delete t[a].$m,delete t[a].$s,delete t[a].$e,r[a]=e(t[a],n?n+"."+a:a,r[a]||{})}return r}({PB:{liveroom_cs_v3:{AddStreamReq:{$m:{1:["stream_id","bytes",[]],2:["stream_title","bytes",[]],3:["stream_type","uint32",0],4:["stream_attr","bytes",[]],5:["extra_info","bytes",[]],6:["client_req_seq","uint32",0],7:["third_token","bytes",[]],8:["censor_mode","uint32",0],9:["need_gather","uint32",0]}},AddStreamRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_sid","string",""],4:["stream_ver","uint32",0],5:["stream_nid","uint32",0],6:["token_remain_time","uint32",0]}},AnchorInfo:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}],3:["nick_name","bytes",[]]}},BigImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","bytes",[]],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["msg_timestamp","int64",{low:0,high:0,unsigned:!1}]}},CommonRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},DeleteStreamReq:{$m:{1:["stream_sid","string",""],2:["stream_id","bytes",[]],3:["client_req_seq","uint32",0]}},DeleteStreamRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_ver","uint32",0]}},EnterRoomReq:{$m:{1:["net_type","uint32",0],2:["conn_type","uint32",0],3:["room_id","bytes",[]],4:["room_name","bytes",[]],5:["role","uint32",0],6:["third_token","bytes",[]],7:["room_create_flag","uint32",0],8:["user_state_flag","uint32",0],9:["user_count_limit","uint32",0],10:["relate_service","string",""],11:["need_gather_stream","uint32",0],12:["callback_data","bytes",[]],13:["service_flags","uint32",0],14:["license_token","bytes",[]]}},EnterRoomRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["user_id","uint64",{low:0,high:0,unsigned:!0}],5:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],6:["big_im_time_window","uint32",0],7:["liveroom_hb_interval","uint32",0],8:["liveroom_hb_timeout","uint32",0],9:["online_count","uint32",0],10:["anchor_info","PB.liveroom_cs_v3.AnchorInfo",null],11:["userlist_merge_timeout","uint32",0],12:["userlist_interval","uint32",0],13:["token_remain_time","uint32",0],14:["trans_list_seq","uint32",0],15:["trans_channel_list","<PB.liveroom_cs_v3.TransChannel",null],16:["stream_count","uint32",0],17:["stream_list_seq","uint32",0],18:["stream_info_list","<PB.liveroom_cs_v3.StreamInfo",null],19:["stream_fetch_flag","uint32",0],20:["stream_list_push_merge_timeout","uint32",0],21:["stream_list_hb_merge_timeout","uint32",0],22:["relate_result_list","<PB.liveroom_cs_v3.RelateResult",null],23:["gather_list_seq","uint32",0],24:["gather_info_list","<PB.liveroom_cs_v3.GatherInfo",null]}},EnumSignalTransmitResult:{$e:{ok:0,version_err:1}},GatherInfo:{$m:{1:["gather_id","string",""]}},GetGatherListReq:{$m:{}},GetGatherListRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["gather_list_seq","uint32",0],3:["gather_info_list","<PB.liveroom_cs_v3.GatherInfo",null]}},GetImReq:{$m:{1:["msg_id","uint64",{low:0,high:0,unsigned:!0}],2:["sort_type","uint32",0],3:["msg_count","uint32",0]}},GetImRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["server_msg_id","uint64",{low:0,high:0,unsigned:!0}],3:["ret_msg_id","uint64",{low:0,high:0,unsigned:!0}],4:["msg_list","<PB.liveroom_cs_v3.GetImRspImData",null]}},GetImRspImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","uint64",{low:0,high:0,unsigned:!0}],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["send_time","int64",{low:0,high:0,unsigned:!1}]}},GetStreamListReq:{$m:{}},GetStreamListRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["stream_list_seq","uint32",0],3:["stream_info_list","<PB.liveroom_cs_v3.StreamInfo",null],4:["stream_refresh","uint32",0]}},GetTransReq:{$m:{1:["trans_channel","bytes",[]],2:["trans_list","<PB.liveroom_cs_v3.GetTransReqTransData",null]}},GetTransReqTransData:{$m:{1:["trans_type","bytes",[]],2:["trans_local_seq","uint32",0]}},GetTransRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["trans_channel","bytes",[]],3:["trans_list_seq","uint32",0],4:["trans_list","<PB.liveroom_cs_v3.GetTransRspTransData",null]}},GetTransRspTransData:{$m:{1:["err_code","uint32",0],2:["trans_type","bytes",[]],3:["trans_data","bytes",[]],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_seq","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["role","uint32",0]}},GetUserlistReq:{$m:{1:["sort_type","uint32",0],2:["user_index","uint32",0]}},GetUserlistRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["server_user_seq","uint64",{low:0,high:0,unsigned:!0}],3:["server_user_index","int64",{low:0,high:0,unsigned:!1}],4:["ret_user_index","int64",{low:0,high:0,unsigned:!1}],5:["user_base_info_list","<PB.liveroom_cs_v3.UserBaseInfo",null]}},GetUserTransReq:{$m:{1:["trans_channel","bytes",[]],2:["user_trans_list","<PB.liveroom_cs_v3.GetUserTransReqTransData",null]}},GetUserTransReqTransData:{$m:{1:["trans_type","bytes",[]],2:["trans_local_seq","uint32",0]}},GetUserTransRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["trans_channel","bytes",[]],3:["user_trans_list","<PB.liveroom_cs_v3.GetUserTransRspTransData",null]}},GetUserTransRspTransData:{$m:{1:["err_code","uint32",0],2:["trans_type","bytes",[]],3:["trans_data","bytes",[]],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_seq","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["role","uint32",0]}},HbReq:{$m:{}},HbRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],3:["hb_interval","uint32",0],4:["hb_timeout","uint32",0],5:["stream_seq","uint32",0],6:["user_seq","int64",{low:0,high:0,unsigned:!1}],7:["online_count","uint32",0],8:["big_im_time_window","uint32",0],9:["trans_channel_list","<PB.liveroom_cs_v3.TransChannel",null],10:["user_trans_channel_list","<PB.liveroom_cs_v3.TransChannel",null],11:["stream_refresh","uint32",0],12:["trans_list_seq","uint32",0],13:["gather_list_seq","uint32",0]}},ImData:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["msg_id","uint64",{low:0,high:0,unsigned:!0}],5:["msg_category","uint32",0],6:["msg_type","uint32",0],7:["msg_content","bytes",[]],8:["send_time","int64",{low:0,high:0,unsigned:!1}]}},LiveroomSessionInfo:{$m:{1:["RoomId","bytes",[]],2:["UserSessionId","uint64",{low:0,high:0,unsigned:!0}],3:["RoomSessionId","uint64",{low:0,high:0,unsigned:!0}],4:["Role","uint32",0]}},PushBigIm:{$m:{1:["msg_list","<PB.liveroom_cs_v3.BigImData",null]}},PushIm:{$m:{1:["server_msg_id","uint64",{low:0,high:0,unsigned:!0}],2:["ret_msg_id","uint64",{low:0,high:0,unsigned:!0}],4:["msg_list","<PB.liveroom_cs_v3.ImData",null]}},PushStartGather:{$m:{1:["gather_id","string",""],2:["gather_seq","uint32",0]}},PushStopGather:{$m:{1:["gather_id","string",""],2:["gather_seq","uint32",0]}},PushStream:{$m:{1:["stream_seq","uint32",0],2:["stream_info_list","<PB.liveroom_cs_v3.PushStreamInfo",null]}},PushStreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["stream_title","bytes",[]],6:["stream_ver","uint32",0],7:["stream_attr","bytes",[]],8:["stream_src","uint32",0],9:["stream_state","uint32",0],10:["stream_type","uint32",0],11:["stream_nid","uint32",0],12:["extra_info","bytes",[]],13:["create_time","int64",{low:0,high:0,unsigned:!1}],14:["close_type","uint32",0],15:["need_gather","uint32",0]}},PushTrans:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["trans_type","bytes",[]],5:["trans_data","bytes",[]],6:["trans_seq","uint32",0],7:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],8:["trans_channel","bytes",[]],9:["trans_list_seq","uint32",0]}},PushUserInfoUpdated:{$m:{1:["server_user_seq","int64",{low:0,high:0,unsigned:!1}],2:["user_action_list","<PB.liveroom_cs_v3.UserAction",null]}},PushUserKickout:{$m:{1:["id_name","bytes",[]],2:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["kickout_reason","int32",0],4:["custom_reason","bytes",[]]}},PushUserLogReport:{$m:{}},PushUserTokenExpire:{$m:{1:["token","string",""],2:["stop_stream_info","PB.liveroom_cs_v3.StopStream",null]}},PushUserTrans:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0],4:["trans_send_time","int64",{low:0,high:0,unsigned:!1}],5:["trans_channel","bytes",[]],6:["trans_seq_list","<PB.liveroom_cs_v3.PushUserTransInfo",null]}},PushUserTransInfo:{$m:{1:["trans_type","bytes",[]],2:["trans_data","bytes",[]],3:["trans_seq","uint32",0]}},QuitRoomReq:{$m:{}},QuitRoomRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},RelateResult:{$m:{1:["service","string",""],2:["relate_result","uint32",0]}},RenewTokenReq:{$m:{1:["token","string",""]}},RenewTokenRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["token_remain_time","uint32",0],3:["stop_stream_id_list","<bytes",null]}},RspHead:{$m:{1:["code","uint32",0],2:["message","string",""]}},SendBigImReq:{$m:{1:["msg_list","<PB.liveroom_cs_v3.SendBigImReqMsgData",null]}},SendBigImReqMsgData:{$m:{1:["msg_category","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["msg_timestamp","int64",{low:0,high:0,unsigned:!1}],5:["msg_client_id","bytes",[]]}},SendBigImRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["big_im_time_window","uint32",0],3:["msg_list","<PB.liveroom_cs_v3.SendBigImRspMsgData",null]}},SendBigImRspMsgData:{$m:{1:["msg_id","bytes",[]],2:["msg_client_id","bytes",[]]}},SendImReq:{$m:{1:["msg_category","uint32",0],2:["msg_type","uint32",0],3:["msg_content","bytes",[]],4:["to_user_list","<PB.liveroom_cs_v3.ToUser",null]}},SendImRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["msg_id","uint64",{low:0,high:0,unsigned:!0}]}},SetTransReq:{$m:{1:["trans_type","bytes",[]],2:["trans_data","bytes",[]],3:["trans_local_seq","uint32",0],4:["trans_channel","bytes",[]]}},SetTransRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["trans_type","bytes",[]],3:["trans_seq","uint32",0],4:["trans_list_seq","uint32",0],5:["trans_channel","bytes",[]]}},SetUserAttrReq:{$m:{1:["use_data_channel","uint32",0],2:["is_modify_use_data_channel","bool",!1],3:["user_type","uint32",0],4:["is_modify_user_type","bool",!1]}},SetUserAttrRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},SignalLiveCustomReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<PB.liveroom_cs_v3.ToUser",null]}},SignalLiveCustomRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},SignalLiveInviteReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<PB.liveroom_cs_v3.ToUser",null]}},SignalLiveInviteRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},SignalLiveRequestReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<PB.liveroom_cs_v3.ToUser",null]}},SignalLiveRequestRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},SignalLiveResultReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<PB.liveroom_cs_v3.ToUser",null]}},SignalLiveResultRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},SignalLiveStopReq:{$m:{1:["push_message","bytes",[]],2:["to_user_list","<PB.liveroom_cs_v3.ToUser",null]}},SignalLiveStopRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null]}},SignalTransmitReq:{$m:{1:["to_user_list","<bytes",null],2:["transmit_data","bytes",[]]}},SignalTransmitResult:{$m:{1:["to_user","bytes",[]],2:["result","PB.liveroom_cs_v3.EnumSignalTransmitResult",0]}},SignalTransmitRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["result","<PB.liveroom_cs_v3.SignalTransmitResult",null]}},StopStream:{$m:{1:["stream_id_list","<bytes",null]}},StreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["stream_title","bytes",[]],6:["stream_ver","uint32",0],7:["stream_attr","bytes",[]],8:["create_time","int64",{low:0,high:0,unsigned:!1}],9:["stream_src","uint32",0],10:["stream_state","uint32",0],11:["stream_type","uint32",0],12:["stream_nid","uint32",0],13:["extra_info","bytes",[]],14:["need_gather","uint32",0]}},ToUser:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}]}},TransChannel:{$m:{1:["trans_channel","bytes",[]],2:["trans_seq_list","<PB.liveroom_cs_v3.TransSeq",null]}},TransSeq:{$m:{1:["trans_type","bytes",[]],2:["trans_seq","uint32",0]}},UpdateStreamReq:{$m:{1:["stream_sid","string",""],2:["stream_id","bytes",[]],3:["stream_title","bytes",[]],4:["stream_attr","bytes",[]],5:["extra_info","bytes",[]],6:["client_req_seq","uint32",0],7:["nick_name","bytes",[]]}},UpdateStreamRsp:{$m:{1:["rsp_head","PB.liveroom_cs_v3.RspHead",null],2:["stream_seq","uint32",0],3:["stream_ver","uint32",0]}},UserAction:{$m:{1:["action","uint32",0],2:["id_name","bytes",[]],3:["nick_name","bytes",[]],4:["role","uint32",0],5:["login_time","int64",{low:0,high:0,unsigned:!1}]}},UserBaseInfo:{$m:{1:["id_name","bytes",[]],2:["nick_name","bytes",[]],3:["role","uint32",0]}}},proto_switch_v3:{AnchorInfo:{$m:{1:["id_name","bytes",[]],2:["user_id","uint64",{low:0,high:0,unsigned:!0}],3:["nick_name","bytes",[]]}},CommonRsp:{$m:{1:["rsp_head","PB.proto_switch_v3.RspHead",null]}},GatherInfo:{$m:{1:["gather_id","string",""]}},Header:{$m:{1:["cmd","uint32",0],2:["seq","uint32",0],3:["timestamp","int64",{low:0,high:0,unsigned:!1}],4:["controls","bytes",[]],5:["flags","bytes",[]],6:["context_key","uint32",0],101:["dev_traffic_label","bytes",[]]}},LiveroomProtoVersion:{$e:{PROTO_VERSION_NONE:0,RPOTO_V020000:131072}},LoginRoomReq:{$m:{1:["app_id","uint32",0],2:["biz_type","uint32",0],3:["room_id","bytes",[]],4:["room_name","bytes",[]],5:["role","uint32",0],6:["id_name","bytes",[]],7:["nick_name","bytes",[]],8:["device_id","string",""],9:["term_type","PB.proto_switch_v3.TermType",0],10:["net_type","PB.proto_switch_v3.NetType",0],11:["sdk_conn_type","PB.proto_switch_v3.SdkConnType",0],12:["sdk_version","uint32",0],13:["biz_version","string",""],14:["client_stamp","bytes",[]],15:["login_logic","uint32",0],16:["third_token","bytes",[]],17:["login_token","bytes",[]],18:["relogin_token","bytes",[]],19:["switch_session_id","uint64",{low:0,high:0,unsigned:!0}],20:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],21:["room_create_flag","uint32",0],22:["user_state_flag","uint32",0],23:["user_count_limit","uint32",0],24:["relate_service","string",""],25:["need_gather_stream","uint32",0],26:["callback_data","bytes",[]],27:["service_flags","uint32",0],28:["license_token","bytes",[]]}},LoginRoomRsp:{$m:{1:["rsp_head","PB.proto_switch_v3.RspHead",null],2:["switch_session_id","uint64",{low:0,high:0,unsigned:!0}],3:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["room_session_id","uint64",{low:0,high:0,unsigned:!0}],5:["user_id","uint64",{low:0,high:0,unsigned:!0}],6:["ret_timestamp","int64",{low:0,high:0,unsigned:!1}],7:["big_im_time_window","uint32",0],8:["liveroom_hb_interval","uint32",0],9:["liveroom_hb_timeout","uint32",0],10:["online_count","uint32",0],11:["anchor_info","PB.proto_switch_v3.AnchorInfo",null],12:["relogin_token","bytes",[]],13:["userlist_merge_timeout","uint32",0],14:["userlist_interval","uint32",0],15:["token_remain_time","uint32",0],16:["trans_list_seq","uint32",0],17:["trans_channel_list","<PB.proto_switch_v3.TransChannel",null],18:["stream_count","uint32",0],19:["stream_list_seq","uint32",0],20:["stream_info_list","<PB.proto_switch_v3.StreamInfo",null],21:["stream_fetch_flag","uint32",0],22:["stream_list_push_merge_timeout","uint32",0],23:["stream_list_hb_merge_timeout","uint32",0],24:["relate_result_list","<PB.proto_switch_v3.RelateResult",null],25:["gather_list_seq","uint32",0],26:["gather_info_list","<PB.proto_switch_v3.GatherInfo",null]}},LogoutRoomReq:{$m:{1:["logout_code","uint32",0],2:["logout_check","bytes",[]],3:["user_session_id","uint64",{low:0,high:0,unsigned:!0}],4:["logout_logic","uint32",0]}},LogoutRoomRsp:{$m:{1:["rsp_head","PB.proto_switch_v3.RspHead",null]}},MergePushHead:{$m:{1:["qos_flag","uint32",0],2:["send_time","int64",{low:0,high:0,unsigned:!1}]}},MergePushInfo:{$m:{1:["sub_cmd","uint32",0],2:["sub_seq","uint32",0],3:["msg_body","bytes",[]]}},MergePushReq:{$m:{1:["head","PB.proto_switch_v3.MergePushHead",null],2:["message_list","<PB.proto_switch_v3.MergePushInfo",null]}},MergePushRsp:{$m:{1:["message_list","<PB.proto_switch_v3.MergePushRspInfo",null],2:["server_send_time","int64",{low:0,high:0,unsigned:!1}]}},MergePushRspInfo:{$m:{1:["sub_cmd","uint32",0],2:["sub_seq","uint32",0]}},NetType:{$e:{NT_NONE:0,NT_LINE:1,NT_WIFI:2,NT_2G:3,NT_3G:4,NT_4G:5,NT_UNKNOWN:32}},PushKickout:{$m:{1:["reason","uint32",0],2:["message","string",""],3:["is_need_relogin","uint32",0]}},PushReq:{$m:{1:["head","PB.proto_switch_v3.PushReqHead",null],2:["msg_body","bytes",[]]}},PushReqHead:{$m:{1:["sub_cmd","uint32",0],2:["qos_flag","uint32",0],3:["send_time","int64",{low:0,high:0,unsigned:!1}]}},PushRsp:{$m:{1:["code","uint32",0],2:["message","string",""],3:["sub_cmd","uint32",0],4:["server_send_time","int64",{low:0,high:0,unsigned:!1}]}},RelateResult:{$m:{1:["service","string",""],2:["relate_result","uint32",0]}},RspHead:{$m:{1:["code","uint32",0],2:["message","string",""]}},SdkConnType:{$e:{SdkConnType_None:0,SdkConnType_Tcp:1,SdkConnType_Websocket:2}},StreamInfo:{$m:{1:["stream_id","bytes",[]],2:["stream_sid","string",""],3:["id_name","bytes",[]],4:["nick_name","bytes",[]],5:["create_time","int64",{low:0,high:0,unsigned:!1}],6:["extra_info","bytes",[]],7:["title","bytes",[]],8:["stream_ver","uint32",0],9:["stream_attr","bytes",[]],10:["stream_src","uint32",0],11:["stream_state","uint32",0],12:["stream_type","uint32",0],13:["stream_nid","uint32",0],14:["need_gather","uint32",0]}},TermType:{$e:{TT_NONE:0,TT_PC:1,TT_IOS:2,TT_ANDROID:3,TT_MAC:4,TT_LINUX:5,TT_WEB:6,TT_MINI_PROGRAM:7,TT_UNKNOWN:32}},TransChannel:{$m:{1:["trans_channel","bytes",[]],2:["trans_seq_list","<PB.proto_switch_v3.TransSeq",null]}},TransSeq:{$m:{1:["trans_type","bytes",[]],2:["trans_seq","uint32",0]}}}}},"",rn,!1),nn.util.global.PB=rn.PB,t=rn.PB;var dn,fn={1002:"LoginRoomRsp",1004:"LogoutRoomRsp",1101:"PushReq",1103:"MergePushReq",1105:"PushKickout",10001:"PushUserInfoUpdated",10002:"PushUserKickout",10003:"PushUserLogReport",10004:"PushUserTokenExpire",12001:"PushStream",12002:"PushStream",12003:"PushStream",13001:"PushIm",14001:"PushBigIm",15001:"PushTrans",15002:"PushUserTrans",301002:"EnterRoomRsp",301004:"QuitRoomRsp",301006:"HbRsp",301008:"RenewTokenRsp",301012:"SetTransRsp",301014:"GetTransRsp",302002:"AddStreamRsp",302004:"DeleteStreamRsp",302006:"UpdateStreamRsp",302008:"GetStreamListRsp",303002:"SendImRsp",303006:"SendBigImRsp",303010:"SignalLiveRequestRsp",303012:"SignalLiveResultRsp",303014:"SignalLiveInviteRsp",303016:"SignalLiveStopRsp",303018:"SignalLiveCustomRsp",304002:"GetUserlistRsp"},pn=((pn=dn=dn||{})[pn.LoginRoomReq=1001]="LoginRoomReq",pn[pn.LoginRoomRsp=1002]="LoginRoomRsp",pn[pn.LogoutRoomReq=1003]="LogoutRoomReq",pn[pn.LogoutRoomRsp=1004]="LogoutRoomRsp",pn[pn.PushReq=1101]="PushReq",pn[pn.PushRsp=1102]="PushRsp",pn[pn.MergePushReq=1103]="MergePushReq",pn[pn.MergePushRsp=1104]="MergePushRsp",pn[pn.PushKickout=1105]="PushKickout",pn[pn.PushUserInfoUpdated=10001]="PushUserInfoUpdated",pn[pn.PushUserKickout=10002]="PushUserKickout",pn[pn.PushUserLogReport=10003]="PushUserLogReport",pn[pn.PushUserTokenExpire=10004]="PushUserTokenExpire",pn[pn.PushIm=13001]="PushIm",pn[pn.PushBigIm=14001]="PushBigIm",pn[pn.PushTrans=15001]="PushTrans",pn[pn.PushUserTrans=15002]="PushUserTrans",pn[pn.EnterRoomReq=301001]="EnterRoomReq",pn[pn.EnterRoomRsp=301002]="EnterRoomRsp",pn[pn.QuitRoomReq=301003]="QuitRoomReq",pn[pn.QuitRoomRsp=301004]="QuitRoomRsp",pn[pn.HbReq=301005]="HbReq",pn[pn.HbRsp=301006]="HbRsp",pn[pn.RenewTokenReq=301007]="RenewTokenReq",pn[pn.RenewTokenRsp=301008]="RenewTokenRsp",pn[pn.SetUserAttrReq=301009]="SetUserAttrReq",pn[pn.SetUserAttrRsp=301010]="SetUserAttrRsp",pn[pn.SetTransReq=301011]="SetTransReq",pn[pn.SetTransRsp=301012]="SetTransRsp",pn[pn.GetTransReq=301013]="GetTransReq",pn[pn.GetTransRsp=301014]="GetTransRsp",pn[pn.GetUserTransReq=301015]="GetUserTransReq",pn[pn.GetUserTransRsp=301016]="GetUserTransRsp",pn[pn.AddStreamReq=302001]="AddStreamReq",pn[pn.AddStreamRsp=302002]="AddStreamRsp",pn[pn.DeleteStreamReq=302003]="DeleteStreamReq",pn[pn.DeleteStreamRsp=302004]="DeleteStreamRsp",pn[pn.UpdateStreamReq=302005]="UpdateStreamReq",pn[pn.UpdateStreamRsp=302006]="UpdateStreamRsp",pn[pn.GetStreamListReq=302007]="GetStreamListReq",pn[pn.GetStreamListRsp=302008]="GetStreamListRsp",pn[pn.SendImReq=303001]="SendImReq",pn[pn.SendImRsp=303002]="SendImRsp",pn[pn.GetImReq=303003]="GetImReq",pn[pn.GetImRsp=303004]="GetImRsp",pn[pn.SendBigImReq=303005]="SendBigImReq",pn[pn.SendBigImRsp=303006]="SendBigImRsp",pn[pn.SignalLiveRequestReq=303009]="SignalLiveRequestReq",pn[pn.SignalLiveRequestRsp=303010]="SignalLiveRequestRsp",pn[pn.SignalLiveResultReq=303011]="SignalLiveResultReq",pn[pn.SignalLiveResultRsp=303012]="SignalLiveResultRsp",pn[pn.SignalLiveInviteReq=303013]="SignalLiveInviteReq",pn[pn.SignalLiveInviteRsp=303014]="SignalLiveInviteRsp",pn[pn.SignalLiveStopReq=303015]="SignalLiveStopReq",pn[pn.SignalLiveStopRsp=303016]="SignalLiveStopRsp",pn[pn.SignalLiveCustomReq=303017]="SignalLiveCustomReq",pn[pn.SignalLiveCustomRsp=303018]="SignalLiveCustomRsp",pn[pn.SignalTransmitReq=303019]="SignalTransmitReq",pn[pn.SignalTransmitRsp=303020]="SignalTransmitRsp",pn[pn.GetUserlistReq=304001]="GetUserlistReq",pn[pn.GetUserlistRsp=304002]="GetUserlistRsp",n(2)),gn=n(12),mn=n.n(gn),_n=(gn=n(4),n.n(gn)),yn=(vn.prototype.md5Bytes=function(e){return this.wordArray2Uint8Array(_n()(this.uint8Array2WordArray(e)))},vn.prototype.wordArray2Uint8Array=function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t[i>>>2]>>>24-i%4*8&255;return r},vn.prototype.uint8Array2WordArray=function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e[r])<<24-r%4*8;return mn.a.create(n,t)},vn);function vn(){}function bn(e){var t=unescape||window.unescape;return Uint8Array.from(Array.from(t(encodeURIComponent(e))).map((function(e){return e.charCodeAt(0)})))}function Sn(e){var t=escape||window.escape;return decodeURIComponent(t(String.fromCharCode.apply(String,Array.from(e))))}gn=n(0);var En,Tn=n.n(gn),wn=function(){return(wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Cn=(pn.util.Long=Tn.a,pn.configure(),t),In=t.liveroom_cs_v3,Rn=t.proto_switch_v3,kn=((gn=En=En||{})[gn.disconnected=0]="disconnected",gn[gn.broken=1]="broken",gn[gn.connected=2]="connected",Object.defineProperty(Nn.prototype,"nickName",{get:function(){return bn(this.stateCenter.nickName)},enumerable:!1,configurable:!0}),Object.defineProperty(Nn.prototype,"TermType",{get:function(){return this.stateCenter.ENV%2==0?o.TT_WEB:o.TT_MINIPROGRAM},enumerable:!1,configurable:!0}),Nn.prototype.isDisConnect=function(){return this.state!==En.connected},Nn.prototype.getHeader=function(e,t){return e={cmd:e,seq:++this.seq,timestamp:(new Date).getTime()},this.controls&&(e.controls=this.controls),null!=t&&t.contextKey&&(e.context_key=null==t?void 0:t.contextKey),t=Rn.Header.create(e),t=Rn.Header.encode(t).finish(),[e.seq,t]},Nn.prototype.isUaConnect=function(){return this.ua.isConnect()},Nn.prototype.sendMessage=function(e,t,n,r,i,o,s){var a=this;if(void 0===o&&(o={timeout:6e3}),void 0===s&&(s=!0),this.logger.info(Le+" call"),"LoginRoomReq"!==e&&this.state!==En.connected)return this.logger.warn(Le+" state "+this.state),-1;if("number"==typeof e)l=e;else if(void 0===(l=dn[e]))return this.logger.warn(Le+" cmd not found "+e),-1;var u=0,c=void 0!==(null==i?void 0:i.roomID)?null==i?void 0:i.roomID:null==(c=this.stateCenter.roomModulesList[0])?void 0:c.roomID,l=("LoginRoomReq"!==e&&c&&(u=this.roomIDKeys[c]),c=this.getHeader(l,{contextKey:u}))[1];return t=this.getHead(l.length,(u=t).length),t=new Uint8Array(Array.from(t).concat(Array.from(l)).concat(Array.from(u))),s&&(l={seq:this.seq,deleted:!1,sendTime:Date.parse(new Date+""),timeout:o.timeout,success:n,error:function(e,t,n){var i;if(a.logger.info(Le+" seq: "+t+" "+JSON.stringify(e)+" "+JSON.stringify(n)),(null==(i=null==e?void 0:e.header)?void 0:i.cmd)!==dn.LoginRoomRsp&&-1<[1002,105].indexOf(null==(i=null==e?void 0:e.body)?void 0:i.err_code))return(null==(i=null==e?void 0:e.header)?void 0:i.cmd)===dn.EnterRoomRsp&&null!=n&&n.roomID?(i=a.stateCenter.roomModulesList.find((function(e){return e.roomID==n.roomID})))?void i.retryRoom():void a.logger.error(Le+" room no found ignore "):void a.rtm.retryRoom();[207,208].indexOf(null==(i=null==e?void 0:e.body)?void 0:i.err_code),r&&r(e,t)},params:i},u=this.sendCommandList.push(l),this.sendCommandMap[l.seq]=u),this.logger.info(Le+" seq: "+c[0]+" cmd: "+e),null!=(s=this.liveroomRequest)&&s.sendRequest({payload:t,ack:"LoginRoomReq"===e},(function(e){a.logger.info(Le+" fail")}),(function(){a.logger.info(Le+" ack")}),{}),c[0]},Nn.prototype.getHead=function(e,t){var n=new Uint8Array(7);return n[0]=49,n[1]=e>>8,n[2]=e-(n[1]<<8),n.set(new Uint8Array(Int32Array.from([t]).buffer).reverse(),3),n},Nn.prototype.handlePush=function(e,t){var n,r,i;49===e[0]&&(n=Rn.Header.decode(e.slice(7,7+(i=(e[1]<<8)+e[2]))),e=e.slice(7+i),fn[n.cmd]?(i=this.decodeResponseBody(n,e),this.swPushCmdList.includes(n.cmd)?this.handleSwitchPush(n,i):(this.logger.info("zm.lrh.hp down "+(r=fn[n.cmd]||n.cmd)+" "+JSON.stringify(this.transBuf(i))),r={header:this.transHeader(n),body:this.transRsp(i)},void 0!==(i=this.roomKeyIDs[n.context_key])&&(r.header.room_id=i),this.handleSendCommandMsgRsp(r))):(this.logger.info("zm.lrh.hp cmd is not rtc"),this.onSwitchMessage(n,e)))},Nn.prototype.handleSwitchPush=function(e,t){var n,r,i=this.roomKeyIDs[e.context_key];if(i||this.noContextKeyCmdList.includes(e.cmd))if(e.cmd===dn.PushReq)if((r=this.transRsp(t.head)).room_id=i,this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}))){var o,s,a={header:r,body:this.unStructCmdList.includes(t.head.sub_cmd)?{signal_msg:Sn(t.msg_body),sub_cmd:t.head.sub_cmd}:11005===t.head.sub_cmd?{custommsg:Sn(t.msg_body)}:fn[t.head.sub_cmd]?this.transRsp(this.decode(In[fn[t.head.sub_cmd]],t.msg_body)):{}};if(this.logger.info(Ae+" push "+JSON.stringify(this.transBuf(a))),this.rtcPushCmdList.includes(t.head.sub_cmd))switch(t.head.sub_cmd){case dn.PushUserInfoUpdated:this.handlePushUserStateUpdateMsg(a);break;case dn.PushUserKickout:this.transKeysName(a.body,this.loginKeyTransMap),this.handlePushKickout(a,!1);break;case dn.PushTrans:this.handlePushTransMsg(a);break;case dn.PushIm:this.handlePushRoomMsg(a);break;case 11005:this.handlePushCustomMsg(a);break;case 12001:case 12002:case 12003:this.handlePushStreamMsg(a);break;case 11001:case 11002:case 11003:case 11004:this.handlePushSignalMsg(a);break;case dn.PushUserTokenExpire:this.handlePushTokenExpire(a)}else this.logger.info(Ae+" white "),this.onSwitchMessage(e,t);1==t.head.qos_flag&&(o=Rn.PushRsp.create({code:0,message:"",sub_cmd:t.head.sub_cmd,server_send_time:t.head.send_time}),s=Rn.PushRsp.encode(o).finish(),this.sendMessage("PushRsp",s,void 0,void 0))}else this.logger.warn(Ae+" room no found ignore ");else e.cmd===dn.MergePushReq?((r=this.transRsp(t.head)).room_id=i,this.stateCenter.roomModulesList.find((function(e){return e.roomID==i}))?(n=[],t.message_list.forEach((function(e){var t;n.push({sub_cmd:e.sub_cmd,sub_seq:e.sub_seq}),e.sub_cmd===dn.PushBigIm&&(t=In.PushBigIm.decode(e.msg_body),e.msg_body=t)})),delete(r={header:r,body:this.transRsp(t)}).body.head,this.handlePushMergeMsg(r),1==t.head.qos_flag&&(o=Rn.MergePushRsp.create({messages:n,server_send_time:t.head.send_time}),s=Rn.MergePushRsp.encode(o).finish(),this.sendMessage("MergePushRsp",s,void 0,void 0))):this.logger.warn(Ae+" room no found ignore ")):e.cmd===dn.PushKickout&&this.handlePushKickout({header:e,body:{reason:900<t.reason?t.reason-900:t.reason,msg:t.message,need_relogin:void 0!==t.is_need_relogin?t.is_need_relogin:0}},!0);else this.logger.warn(Ae+" ctx key not found")},Nn.prototype.handlePushTokenExpire=function(e){},Nn.prototype.handlePushKickout=function(e,t){},Nn.prototype.handlePushStreamMsg=function(e){},Nn.prototype.handlePushSignalMsg=function(e){},Nn.prototype.handlePushMergeMsg=function(e){},Nn.prototype.handlePushCustomMsg=function(e){},Nn.prototype.handlePushRoomMsg=function(e){},Nn.prototype.handlePushTransMsg=function(e){},Nn.prototype.onSwitchMessage=function(e,t){},Nn.prototype.decodeResponseBody=function(e,t){var n=this.onSwitchCmdList.includes(e.cmd)?"proto_switch_v3":"liveroom_cs_v3";return this.decode(this.protoInstance[n][fn[e.cmd]],t)},Nn.prototype.handlePushUserStateUpdateMsg=function(e){},Nn.prototype.login=function(e,t,n){var r,i,o,s=this,a=(this.state==En.disconnected&&(this.logger.info(xe+" state disconnect"),this.closeRequest()),(new Date).getTime()+""),u={net_type:W.getNetTypeNum(),room_id:bn(e.roomID),room_name:bn(e.roomName),nick_name:this.nickName,role:this.stateCenter.role,third_token:bn(e.token),room_create_flag:this.stateCenter.roomCreateFlag,user_state_flag:e.userStateUpdate?1:0,user_count_limit:e.maxMemberCount,relate_service:this.stateCenter.relateService.join()||""};e.isMulti?(i=wn(wn({},u),{conn_type:2}),r=wn(wn({},i),{room_id:e.roomID,room_name:e.roomName,third_token:e.token}),this.logger.info(xe+" enter "+JSON.stringify(r)),i=In.EnterRoomReq.create(i),o=In.EnterRoomReq.encode(i).finish(),this.sendMessage("EnterRoomReq",o,(function(n,r){s.transLoginRspKeys(n,e),t&&t(n,r)}),(function(e,t){n&&n(e,t)}),{roomID:e.roomID})):(u=wn(wn({},u),{app_id:this.stateCenter.appid,id_name:bn(this.stateCenter.idName),device_id:this.stateCenter.deviceID,term_type:this.TermType,sdk_version:this.getNumSDKVersion(),client_stamp:bn(a),relogin_token:this.switchSessionID.notEquals(Tn.a.fromInt(0))?bn(this.reloginToken):"",switch_session_id:this.switchSessionID,user_session_id:null!=(u=e.longSid)?u:Tn.a.fromInt(0),biz_type:0,biz_version:this.stateCenter.bizVersion||"",login_logic:this.stateCenter.isMultiRoom?3:1,sdk_conn_type:2}),r=wn(wn({},u),{id_name:this.stateCenter.idName,nick_name:this.stateCenter.nickName,client_stamp:a,k1_sign:void 0,relogin_token:this.reloginToken,room_id:e.roomID,room_name:e.roomName,third_token:e.token,user_session_id:e.longSid}),this.logoutCheckToken=e.token,this.logger.info(xe+" login "+JSON.stringify(r)),i=Rn.LoginRoomReq.create(u),o=Rn.LoginRoomReq.encode(i).finish(),this.sendMessage("LoginRoomReq",o,(function(n,r){var i;s.logger.info(xe+" login rsp"),s.switchSessionID=n.body.switch_session_id,s.reloginToken=n.body.relogin_token,null!=(i=null==n?void 0:n.header)&&i.controls&&(s.controls=null==(i=null==n?void 0:n.header)?void 0:i.controls),s.transLoginRspKeys(n,e),t&&t(n,r)}),(function(e,t){n&&n(e,t)})))},Nn.prototype.transLoginRspKeys=function(e,t){null!=(n=e.header)&&n.context_key&&(this.roomIDKeys[t.roomID]=null==(n=e.header)?void 0:n.context_key,this.roomKeyIDs[null==(n=e.header)?void 0:n.context_key]=t.roomID,e.header.room_id=t.roomID),this.longToStringNumber(e.body,["ret_timestamp"],"toString"),this.transKeysName(e.body,this.loginKeyTransMap),this.keysExist(e.body,["token_remain_time","stream_seq"]);var n={anchor_id_name:e.body.anchor_info.id_name,anchor_id:e.body.anchor_info.user_id,anchor_nick_name:e.body.anchor_info.nick_name};e.body.anchor_info=n},Nn.prototype.transKeysName=function(e,t){t.forEach((function(t){void 0!==e[t[0]]&&(e[t[1]]=e[t[0]],delete e[t[0]])}))},Nn.prototype.keysExist=function(e,t){t.forEach((function(t){void 0===e[t]&&(e[t]=0)}))},Nn.prototype.longToStringNumber=function(e,t,n){t.forEach((function(t){Tn.a.isLong(e[t])&&(e[t]=e[t][n]())}))},Nn.prototype.logout=function(e,t,n){var r,i,o,s;return e.isMulti?(r={},this.logger.info(Ze+" quit "+e.roomID),o=In.QuitRoomReq.create(r),s=In.QuitRoomReq.encode(o).finish(),this.sendMessage("QuitRoomReq",s,t,n,{roomID:null==e?void 0:e.roomID})):(r={logout_code:0,logout_check:this.crypto.md5Bytes(bn(this.logoutCheckToken)),user_session_id:e.longSid,logout_logic:this.stateCenter.isMultiRoom?3:1},i=this.transBuf(r),this.logger.info(Ze+" logout "+JSON.stringify(i)),o=Rn.LogoutRoomReq.create(r),s=Rn.LogoutRoomReq.encode(o).finish(),this.sendMessage("LogoutRoomReq",s,t,n,{roomID:null==e?void 0:e.roomID}))},Nn.prototype.checkSendMessageList=function(e){for(var t=e.getFirst();null!=t;)e.remove(t),t._data&&t._data.error&&setTimeout((function(){t&&t._data&&t._data.error&&t._data.error(N.TIMEOUT,t._data.seq)}),0),t=e.getFirst()},Nn.prototype.checkMessageListTimeout=function(e,t){for(var n=e.getFirst(),r=Date.parse(new Date+""),i=0,o=this;null!=n&&"break"!==function(){var s,a;return n._data&&n._data.sendTime+n._data.timeout>r||(n._data&&delete t[n._data.seq],e.remove(n),n._data&&null==n._data.error||n._data&&n._data.sendTime+o.sendDataDropTimeout<r||(s=n&&n._data&&n._data.error,a=n&&n._data&&n._data.seq,setTimeout((function(){s&&s(N.TIMEOUT,a)}),0)),++i>=o.sendDataCheckOnceCount)?"break":void(n=e.getFirst())}(););},Nn.prototype.startCheck=function(){var e=this;this.checkMessageListTimeout(this.sendCommandList,this.sendCommandMap),this.sendDataCheckTimer=setTimeout((function(){e.startCheck()}),this.sendDataCheckInterval)},Nn.prototype.stopCheck=function(){this.checkSendMessageList(this.sendCommandList),clearTimeout(this.sendDataCheckTimer)},Nn.prototype.handleSendCommandMsgRsp=function(e){var t,n,r=this.sendCommandMap[e.header.seq];null!=r&&(n=null==(t=r._data)?void 0:t.params,delete this.sendCommandMap[e.header.seq],this.sendCommandList.remove(r),0===e.body.err_code?setTimeout((function(){t&&null!=t.success&&t.success(e,e.header.seq)}),0):setTimeout((function(){t&&null!=t.error&&t.error(e,e.header.seq,n)}),0))},Nn.prototype.getReqHead=function(e){return{}},Nn.prototype.heartBeat=function(e,t,n){var r=this,i=In.HbReq.create({});i=In.HbReq.encode(i).finish(),this.sendMessage("HbReq",i,(function(t,n){r.transKeysName(t.body,[["hb_interval","hearbeat_interval"],["hb_timeout","hearbeat_timeout"],["big_im_time_window","bigim_time_window"],["trans_channel_list","trans_seqs"]]),t.body.server_user_seq=t.body.user_seq.toNumber(),r.longToStringNumber(t.body,["ret_timestamp"],"toNumber"),e&&e(t,n)}),t,{roomID:null==n?void 0:n.roomID})},Nn.prototype.fetchUserList=function(e,t,n,r){var i=this,o=(e=wn({},e),this.transBuf(e));return this.logger.info(Pe+" "+JSON.stringify(o)),o=In.GetUserlistReq.create(e),e=In.GetUserlistReq.encode(o).finish(),this.sendMessage("GetUserlistReq",e,(function(e,n){i.logger.info(Pe+" suc "+n),i.transKeysName(e.body,[["user_base_info_list","user_baseinfos"]]),i.longToStringNumber(e.body,["server_user_seq","server_user_index","ret_user_index"],"toNumber"),t&&t(e,n)}),n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.sendRoomMsg=function(e,t,n,r){var i=this,o=(e={msg_category:e.msg_category,msg_type:e.msg_type,msg_content:bn(e.msg_content)},this.transBuf(e));return this.logger.info("zm.lrh.srm.1 "+JSON.stringify(o)),o=In.SendImReq.create(e),e=In.SendImReq.encode(o).finish(),this.sendMessage("SendImReq",e,(function(e,n){i.longToStringNumber(e.body,["msg_id"],"toNumber"),t&&t(e,n)}),n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.sendReliableMessage=function(e,t,n,r){e={trans_type:bn(e.trans_type),trans_data:bn(e.trans_data),trans_local_seq:e.trans_local_seq,trans_channel:bn(e.trans_channel)};var i=this.transBuf(e);return this.logger.info("zm.lrh.srm.0 "+JSON.stringify(i)),i=In.SetTransReq.create(e),e=In.SetTransReq.encode(i).finish(),this.sendMessage("SetTransReq",e,t,n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.fetchReliableMessage=function(e,t,n,r){var i=e.fetch_array.map((function(e){return{trans_type:bn(e.trans_type),trans_local_seq:e.trans_seq}}));return e={trans_channel:bn(e.trans_channel),trans_list:i},i=this.transBuf(e),this.logger.info("zm.lrh.frm "+JSON.stringify(i)),i=In.GetTransReq.create(e),e=In.GetTransReq.encode(i).finish(),this.sendMessage("GetTransReq",e,t,n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.sendCustomCommand=function(e,t,n,r){var i=this,o=e.dest_id_name.map((function(e){return{id_name:bn(e)}}));return o=wn({to_user_list:o,push_message:bn(e.custom_msg)},e),e=this.transBuf(o),this.logger.info("zm.lrh.scc "+JSON.stringify(e)),e=In.SignalLiveCustomReq.create(o),o=In.SignalLiveCustomReq.encode(e).finish(),this.sendMessage("SignalLiveCustomReq",o,(function(e,n){t&&t(i.transRsp(e),n)}),(function(e,t){n&&n(e,t)}),{roomID:null==r?void 0:r.roomID})},Nn.prototype.sendBigRoomMessage=function(e,t,n,r){e={msg_list:e.msgs.map((function(e){return{msg_category:e.msg_category,msg_type:e.msg_type,msg_timestamp:Tn.a.fromNumber(Date.now()),msg_content:bn(e.msg_content),msg_client_id:bn(e.bigmsg_client_id)}}))};var i=this.transBuf(e);return this.logger.info("zm.lrh.sbrm "+JSON.stringify(i)),i=In.SendBigImReq.create(e),e=In.SendBigImReq.encode(i).finish(),this.sendMessage("SendBigImReq",e,t,n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.sendSignalCmd=function(e,t,n,r){var i="";switch(e.sub_cmd){case 1003:i="SignalLiveInviteReq";break;case 1001:i="SignalLiveRequestReq";break;case 1002:i="SignalLiveResultReq";break;case 1004:i="SignalLiveStopReq"}var o=e.dest_id_name.map((function(e){return{id_name:bn(e)}}));return e={push_message:bn(e.signal_msg),to_user_list:o},o=this.transBuf(e),this.logger.info("zm.lrh.ssc "+JSON.stringify(o)),o=In[i].create(e),e=In[i].encode(o).finish(),this.sendMessage(i,e,t,n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.sendStreamUpdate=function(e,t,n,r){var i,o=this;try{i=JSON.parse(e.stream_msg)}catch(e){}var s,a="",u=(this.logger.info(Me+" "+JSON.stringify(e)),this.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID})));if(!u)return this.logger.error(Me+" room no found ignore "),-1;switch(e.sub_cmd){case 2001:a="AddStreamReq",s={stream_id:bn(i.stream_id),extra_info:bn(i.extra_info),client_req_seq:this.seq+1,third_token:bn(e.third_token||"")};break;case 2002:a="DeleteStreamReq",s={stream_id:bn(i.stream_id),stream_sid:i.stream_sid,client_req_seq:this.seq+1};break;case 2003:a="UpdateStreamReq",s={stream_id:bn(i.stream_id),stream_sid:i.stream_sid,client_req_seq:this.seq+1,extra_info:bn(i.extra_info)}}var c=this.transBuf(s);return this.logger.info(Me+" "+JSON.stringify(c)),c=In[a].create(s),c=In[a].encode(c).finish(),this.sendMessage(a,c,(function(e,n){o.logger.info(Me+" suc "+a+" "+JSON.stringify(e)),e.header.room_id=u.roomID,t&&t(e,n)}),(function(e,t){o.logger.info(Me+" fail "+a+" "+JSON.stringify(e)),n&&n(e,t)}),{roomID:null==r?void 0:r.roomID})},Nn.prototype.getStreamList=function(e,t,n,r){var i,o,s=this;this.stateCenter.roomModulesList.find((function(e){return e.roomID==r.roomID}))?(i=this.transBuf(o={}),this.logger.info("zm.lrh.gs "+JSON.stringify(i)),i=In.GetStreamListReq.create(o),o=In.GetStreamListReq.encode(i).finish(),this.sendMessage("GetStreamListReq",o,(function(e,n){var r;null!=(r=e.body)&&r.stream_info_list.forEach((function(e){e.create_time=e.create_time.toNumber()})),s.transKeysName(e.body,[["stream_list_seq","stream_seq"],["stream_info_list","stream_info"]]),t&&t(e,n)}),(function(e,t){n&&n(e,t)}),{roomID:null==r?void 0:r.roomID})):this.logger.error("zm.lrh.gs room no found ignore "+r.roomID)},Nn.prototype.transBuf=function(e){var t=this,n={};return Object.keys(e).forEach((function(r){["logout_check","k2_sign","k1_sign"].includes(r)?n[r]=e[r]:t.transReqBytes(n,e,r)})),n},Nn.prototype.transReqBytes=function(e,t,n){var r=this;if(Tn.a.isLong(t[n]))e[n]=t[n].toString();else if("[object Object]"===Object.prototype.toString.call(t[n]))e[n]={},Object.keys(t[n]).forEach((function(i){return r.transReqBytes(e[n],t[n],i)}));else if("[object Array]"===Object.prototype.toString.call(t[n])&&"[object Object]"===Object.prototype.toString.call(t[n][0])){e[n]=[];for(var i=0;i<t[n].length;i++)!function(i){var o={};Object.keys(t[n][i]).forEach((function(e){r.transReqBytes(o,t[n][i],e)})),e[n].push(o)}(i)}else e[n]="[object Uint8Array]"===Object.prototype.toString.call(t[n])?Sn(t[n]):t[n]},Nn.prototype.transHeader=function(e){return e.timestamp=Tn.a.isLong(e.timestamp)?e.timestamp.toString():e.timestamp,e},Nn.prototype.transRsp=function(e){var t=this,n=e&&e.rsp_head?this.transRspHead(e.rsp_head):{},r=wn(wn({},e),n),i=(delete r.rsp_head,{});return Object.keys(r).forEach((function(e){"k2_sign"===e?i[e]=r[e]:t.transBytes(i,r,e)})),i},Nn.prototype.transBytes=function(e,t,n){var r=this;if(Tn.a.isLong(t[n]))e[n]=t[n];else if("[object Object]"===Object.prototype.toString.call(t[n]))e[n]={},Object.keys(t[n]).forEach((function(i){return r.transBytes(e[n],t[n],i)}));else if("[object Array]"===Object.prototype.toString.call(t[n])&&"[object Object]"===Object.prototype.toString.call(t[n][0])){e[n]=[];for(var i=0;i<t[n].length;i++)!function(i){var o={};Object.keys(t[n][i]).forEach((function(e){r.transBytes(o,t[n][i],e)})),e[n].push(o)}(i)}else e[n]="[object Uint8Array]"===Object.prototype.toString.call(t[n])?Sn(t[n]):t[n]},Nn.prototype.transRspHead=function(e){return e?{err_code:e.code||0,err_message:e.message}:{}},Nn.prototype.decode=function(e,t){return wn({},e.decode(t))},Nn.prototype.handleDisconnected=function(e,t){var n=this;this.logger.info(De+" call"),this.state=En.disconnected,this.stateCenter.useNetAgent&&e===E.TIMEOUT&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&(n.ua.isConnect()?(n.logger.info(De+" ua is connect"),e.roomTryHandler.active()):(n.logger.info(De+" ua is disconnect"),n.ua.connectUa()))}))},Nn.prototype.handleBroken=function(){var e=this;this.logger.info("zm.lrh.hb call"),this.state=En.broken,this.stateCenter.useNetAgent&&this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&(t.roomTryHandler.invalid(),t.roomTryHandler.onactive=function(n,r){e.logger.info("zm.lrh.hb onactive"),t.roomHandler.transError(r),t.roomHandler.disconnectedHandle(r)},t.roomTryHandler.startMaxTime(),t.roomHandler.roomStateHandle("CONNECTING",w.Reconnecting,N.NETWORK_BROKEN))}))},Nn.prototype.handleConnected=function(e){var t=this;this.logger.info("zm.lrh.hc call "+e),this.state=En.connected,this.stateCenter.useNetAgent&&e===v.AUTO&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&t.ua.isConnect()&&e.roomTryHandler.active()}))},Nn.prototype.renewToken=function(e,t,n,r){var i=this,o=In.RenewTokenReq.create(e={token:e.token});o=In.RenewTokenReq.encode(o).finish(),e=this.transBuf(e),this.logger.info("zm.lrh.rt "+JSON.stringify(e)),this.sendMessage("RenewTokenReq",o,(function(e,n){i.keysExist(e.body,["token_remain_time"]),t&&t(e,n)}),n,{roomID:null==r?void 0:r.roomID})},Nn.prototype.reset=function(){this.logger.info("zm.lrh.r.0 call "),this.state=En.disconnected,this.switchSessionID=Tn.a.fromInt(0),this.sendDataCheckTimer&&clearTimeout(this.sendDataCheckTimer)},Nn.prototype.closeRequest=function(){var e;null!=(e=this.liveroomRequest)&&e.closeRequest()},Nn.prototype.resetSessionInfo=function(){this.switchSessionID=Tn.a.fromInt(0)},Nn.prototype.getNumSDKVersion=function(){var e=0===this.stateCenter.ENV?6:7,t=this.rtm.version.split(".").map((function(e){return parseInt(e)}));return e<<28|t[0]<<20|t[1]<<8|t[2]},Nn);function Nn(e,t,n,r,i){var o=this;this.logger=e,this.stateCenter=t,this.ua=n,this.dataReport=r,this.rtm=i,this.seq=0,this.sendCommandList=new _,this.sendCommandMap={},this.logoutCheckToken="",this.zPushSid="0",this.loginKeyTransMap=[["user_session_id","session_id"],["liveroom_hb_interval","hearbeat_interval"],["liveroom_hb_timeout","hearbeat_timeout"],["big_im_time_window","bigim_time_window"],["trans_channel_list","trans_seqs"],["stream_list_seq","stream_seq"],["stream_info_list","stream_info"]],this.sendDataCheckOnceCount=100,this.sendDataDropTimeout=1e4,this.sendDataCheckInterval=2e3,this.protoInstance=Cn,this.roomKeyIDs={},this.roomIDKeys={},this.swPushCmdList=[dn.PushReq,dn.MergePushReq,dn.PushKickout],this.onSwitchCmdList=[dn.LoginRoomRsp,dn.LogoutRoomRsp,dn.PushKickout,dn.PushReq,dn.MergePushReq],this.noContextKeyCmdList=[1105],this.rtcPushCmdList=[10001,10002,10004,11001,11002,11003,11004,11005,12001,12002,12003,13001,15001],this.state=En.disconnected,this.unStructCmdList=[11001,11002,11003,11004],this.reloginToken="",this.crypto=new yn,this.liveroomRequest=this.ua.getPCRequest(T.SERVICE_SWITCH4LIVEROOM),this.switchSessionID=Tn.a.fromInt(0),null!=(e=this.liveroomRequest)&&e.on("connected",(function(e){o.handleConnected(e)})),null!=(t=this.liveroomRequest)&&t.on("broken",(function(e){o.handleBroken()})),null!=(n=this.liveroomRequest)&&n.on("disconnected",(function(e,t){o.handleDisconnected(e,t)})),null!=(r=this.liveroomRequest)&&r.on("downLoadMessage",(function(e,t){o.handlePush(e,t)})),null!=(i=this.liveroomRequest)&&i.on("exception",(function(e,t){o.logger.info("zm.lrh.o.0 except "+JSON.stringify(e))})),null!=(e=this.liveroomRequest)&&e.on("pcBrokenEvent",(function(e){var t=Nt,n=o.stateCenter.reporter.createSpan(a.H,{key:_t},{key:""},t.event);n.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),n.end()})),null!=(t=this.liveroomRequest)&&t.on("pcDisconnectedEvent",(function(e){var t=Ot,n=o.stateCenter.reporter.createSpan(a.H,{key:_t},{key:""},t.event);n.setAttributes({service_no:t.service_no(null==e?void 0:e.service_no)}),n.end()})),null!=(n=this.liveroomRequest)&&n.on("pcConnectedEvent",(function(e){var t=kt,n=o.stateCenter.reporter.createSpan(a.H,{key:_t},{key:""},t.event);n.setAttributes({service_no:t.service_no(e.service_no),recv_time:t.recv_time((new Date).getTime()),proxy_link_sources:t.proxy_link_sources(e.proxy_link_sources),connect_stream:t.connect_stream(e.connect_stream)}),n.end()}))}var On=(Ln.prototype.listenCallBack=function(){var e=this;this.roomServicer.handlePushCustomMsg=function(t){e.handlePushCustomMsg(t)},this.roomServicer.handlePushTokenExpire=function(t){var n,r=null==(r=null==(r=null==t?void 0:t.body)?void 0:r.stop_stream)?void 0:r.stream_id_list.map(Sn);null!=(n=null==(n=null==t?void 0:t.body)?void 0:n.stop_stream)&&(n.stream_id_list=r),e.stateCenter.actionListener("_tokenExpired",t)},this.roomServicer.handlePushKickout=function(t,n){var r;n?function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],e.stateCenter.roomModulesList,!0).forEach((function(e){e.roomHandler.handlePushKickout(t,!0,!0)})):(r=null==(n=null==t?void 0:t.header)?void 0:n.room_id,n=e.stateCenter.roomModulesList.find((function(e){return e.roomID==r})),e.roomServicer.longToStringNumber(t.body,["session_id"],"toString"),n?n.roomHandler.handlePushKickout(t):e.logger.error("zm.lrh.pk room no found ignore "+JSON.stringify(null==(n=t.header)?void 0:n.room_id)))},this.roomServicer.handlePushStreamMsg=function(t){e.handlePushStreamMsg(t)},this.roomServicer.handlePushSignalMsg=function(t){e.handlePushSignalMsg(t)},this.roomServicer.handlePushMergeMsg=function(t){e.handlePushMergeMsg(t)},this.roomServicer.handlePushRoomMsg=function(t){e.handlePushRoomMsg(t)},this.roomServicer.handlePushTransMsg=function(t){e.handlePushTransMsg(t)},this.roomServicer.onSwitchMessage=function(t,n){e.onSwitchMessage(t,n)},this.roomServicer.handlePushUserStateUpdateMsg=function(t){var n,r,i,o=null==(s=null==t?void 0:t.header)?void 0:s.room_id,s=e.stateCenter.roomModulesList.find((function(e){return e.roomID==o}));s?(i=t.body.user_action_list.map((function(e){return{Action:e.action,IdName:e.id_name,NickName:e.nick_name,Role:e.role,LoginTime:e.login_time.toString()}})),r=e.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:o},{key:""},ut.event),i={body:{user_actions:i,user_list_seq:t.body.server_user_seq.toNumber(),room_id:o}},r.setAttributes({user_list_seq:null==(n=null===i?void 0:i.body)?void 0:n.user_list_seq,update_user:null==(n=null===i?void 0:i.body)?void 0:n.user_actions}),r.end(),s.userHandler.handlePushUserStateUpdateMsg(i)):e.logger.error("zm.lrh.puu room no found ignore "+JSON.stringify(t))}},Ln.prototype.isDisConnect=function(){return!!this.roomServicer&&this.roomServicer.isDisConnect()},Ln.prototype.isUaConnect=function(){var e;return null==(e=this.roomServicer)?void 0:e.isUaConnect()},Ln.prototype.sendMessage=function(e,t,n,r,i,o,s){var a;return null==(a=this.roomServicer)?void 0:a.sendMessage(e,t,n,r,i,o)},Ln.prototype.handlePushTokenExpire=function(e){},Ln.prototype.handlePushKickout=function(e,t){},Ln.prototype.handlePushStreamMsg=function(e){},Ln.prototype.handlePushSignalMsg=function(e){},Ln.prototype.handlePushMergeMsg=function(e){},Ln.prototype.handlePushCustomMsg=function(e){},Ln.prototype.handlePushRoomMsg=function(e){},Ln.prototype.handlePushTransMsg=function(e){},Ln.prototype.onSwitchMessage=function(e,t){},Ln.prototype.handlePushUserStateUpdateMsg=function(e){},Ln.prototype.login=function(e,t,n){var r;null!=(r=this.roomServicer)&&r.login(e,t,n)},Ln.prototype.logout=function(e,t,n){var r;return null==(r=this.roomServicer)?void 0:r.logout(e,t,n)},Ln.prototype.startCheck=function(){var e;null!=(e=this.roomServicer)&&e.startCheck()},Ln.prototype.stopCheck=function(){var e;null!=(e=this.roomServicer)&&e.stopCheck()},Ln.prototype.getReqHead=function(e){var t;return null==(t=this.roomServicer)?void 0:t.getReqHead(e)},Ln.prototype.heartBeat=function(e,t,n){var r;null!=(r=this.roomServicer)&&r.heartBeat(e,t,n)},Ln.prototype.fetchUserList=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.fetchUserList(e,t,n,r)},Ln.prototype.sendRoomMsg=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.sendRoomMsg(e,t,n,r)},Ln.prototype.sendReliableMessage=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.sendReliableMessage(e,t,n,r)},Ln.prototype.fetchReliableMessage=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.fetchReliableMessage(e,t,n,r)},Ln.prototype.sendCustomCommand=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.sendCustomCommand(e,t,n,r)},Ln.prototype.sendBigRoomMessage=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.sendBigRoomMessage(e,t,n,r)},Ln.prototype.sendSignalCmd=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.sendSignalCmd(e,t,n,r)},Ln.prototype.sendStreamUpdate=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.sendStreamUpdate(e,t,n,r)},Ln.prototype.getStreamList=function(e,t,n,r){var i;return null==(i=this.roomServicer)?void 0:i.getStreamList(e,t,n,r)},Ln.prototype.renewToken=function(e,t,n,r){var i;null!=(i=this.roomServicer)&&i.renewToken(e,t,n,r)},Ln.prototype.reset=function(){var e;null!=(e=this.roomServicer)&&e.reset()},Ln.prototype.closeRequest=function(){var e;null!=(e=this.roomServicer)&&e.closeRequest()},Ln);function Ln(e,t,n,r,i){this.logger=e,this.stateCenter=t,this.ua=n,this.dataReport=r,this.rtm=i,this.roomServicer=new kn(e,t,n,r,i),this.listenCallBack()}var An=n(11),xn=(Pn.prototype.setLog=function(e){this.zegoSetting.setLog(e)},Pn.prototype.init=function(e){this.zegoSetting.init(e)},Pn.prototype.setEnvVariable=function(e,t){this.zegoSetting.setEnvVariable(e,t)},Pn.prototype.getEnvVariables=function(){return this.zegoSetting.getEnvVariables()},Pn.prototype.fetchSetting=function(e,t,n){return this.zegoSetting.fetchSetting(e,t,n)},Pn.prototype.fetchMultiSetting=function(e,t,n){return this.zegoSetting.fetchMultiSetting(e,t,n)},Pn.prototype.setOptions=function(e){return this.zegoSetting.setOptions(e)},Pn.prototype.getSettingCache=function(e){return this.zegoSetting.getSettingCache(e)},Pn.prototype.setToken=function(e){this.zegoSetting.setToken(e)},Pn.prototype.setUserID=function(e){this.zegoSetting.setUserID(e)},Pn.prototype.activePolling=function(){this.zegoSetting.activePolling()},Pn.prototype.uninit=function(){var e;null!=(e=this.zegoSetting)&&e.uninit()},Pn.prototype.getEnvVariable=function(e){this.zegoSetting.getEnvVariable(e)},Pn);function Pn(){this.isLoad=!1,this.callBackList=[],this.zegoSetting=new An.ZegoSetting}var Zn=function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Mn=function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}},Dn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Un=(Object.defineProperty(Bn.prototype,"modules",{get:function(){return{service:this.service}},enumerable:!1,configurable:!0}),Object.defineProperty(Bn.prototype,"isUseNetAgent",{get:function(){return this.stateCenter.useNetAgent},enumerable:!1,configurable:!0}),Bn.prototype.destroyRTM=function(){this.stateCenter.roomModulesList.some((function(e){return!(null!=e&&e.isLogout()||"DISCONNECTED"===e.roomState)}))&&this.logoutRoom(),this.stateCenter.reporter.setUnloadState(a.I),this.reporter.destroy()},Bn.prototype.getSettingUnify=function(e){var t=this.stateCenter.settingConfig.getSetting("unify",e=void 0!==e&&e);return this.logger.info("zm.gsu "+e+" "+JSON.stringify(t)),t?(e=t.enable,t=t.sdk_conn_ver,!!(e&&t<=j.connectVer)):this.isUseNetAgent},Bn.prototype.initCallback=function(){this.proxyRes=W.proxyRes,this.actionSuccessCallback=W.actionSuccessCallback,this.actionErrorCallback=W.actionErrorCallback,this.getServerError=W.getServerError,this.generateRandumNumber=W.generateRandumNumber,this.unregisterCallback=W.unregisterCallback,this.logReportCallback=W.logReportCallback,this.registerCallback=W.registerCallback},Bn.prototype.initSpans=function(){this.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:Be},Be,!0).end()},Bn.prototype.handleZipLogUrl=function(){var e,t="";null!=(e=this.stateCenter.geoFencing)&&e.detaillog&&""!==(null==(e=this.stateCenter.geoFencing)?void 0:e.detaillog)?(t="https://".concat(null==(e=this.stateCenter.geoFencing)?void 0:e.detaillog,"/log/userupload"),this.logger.info(fe+" set detaillog url by geoFencing "+t),this.logger.setZipLogUploadUrl(t)):(e=this.stateCenter.settingConfig.getSetting("detaillog_domain"))&&""!==e&&(t="https://".concat(e,"/log/userupload"),this.logger.info(fe+" set detaillog url by cloudsetting "+t),this.logger.setZipLogUploadUrl(t))},Bn.prototype.getStoreAppConfig=function(){if(this.logger.info(de+" call"),null!=(e=this.stateCenter.geoFencing)&&e.logreport&&this.handleLogUpload(),null!=(e=this.stateCenter.geoFencing)&&e.detaillog&&this.handleZipLogUrl(),localStorage){var e=B(Y+"_"+this.getAppID()+"_"+(this.stateCenter.mode||j.modeNo));if(e){var t=B(K+"_"+this.getAppID()+"_"+(this.stateCenter.mode||j.modeNo));t||this.logger.info(de+" no store config etag");try{var n,r=M(e,F);r?(this.stateCenter.appConfig=JSON.parse(r),this.stateCenter.reporter.spanSetAttributes({key:Ue.event},{is_from_cache:Ue.is_from_cache(!0)}),this.stateCenter.actionListener("_appConfigRsp"),this.handleLogUpload()):localStorage.removeItem(Y+"_"+this.getAppID()+"_"+(this.stateCenter.mode||j.modeNo)),t&&(n=M(t,F),this.stateCenter.appConfigEtag=parseInt(n))}catch(e){this.logger.warn(de+" "+JSON.stringify(e))}}else this.logger.info(de+" no store config")}else this.logger.warn(de+" no localstorage")},Bn.prototype.createNetAgent=function(){var e=this,t=(this.logger.info(he+" call"),this.netAgent.on("disconnected",(function(t){e.logger.info("".concat(he," netAgent disconnect"))})),this.netAgent.on("connected",(function(){e.logger.info("".concat(he," netAgent connect")),e.stateCenter.reporter.setNetStateCheck(),e.isUseNetAgent?(e.fetchAppConfig(),e.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&t.roomTryHandler.active(!0)}))):e.logger.info("".concat(he," unify false"))})),this.netAgent.on("broken",(function(t){e.logger.info("".concat(he," netAgent broken")),t===b.CLOSE&&e.stateCenter.roomModulesList.forEach((function(e){e.resetSessionInfo()}))})),this.netAgent.on("dispatchEvent",(function(t,n,r){var i;e.logger.info("".concat(he," dispatch")),"start"===n?(i=e.stateCenter.reporter.createSpan(a.H,{key:_t},{key:""},"/zegoconn/auto_dispatch"),e.stateCenter.requestList[t]=i):"end"===n&&(i=e.stateCenter.requestList[t])&&(i.setAttributes({domain_list:r.domains}),i.end())})),this.netAgent.on("dispatchResultUpdate",(function(t){var n,r=t.servers;t=t.domains,e.logger.info("".concat(he," dispatchResult ").concat(JSON.stringify(r),", ").concat(JSON.stringify(t))),null!=(n=e.stateCenter.geoFencing)&&n.id?(t&&t[0]&&(e.stateCenter.netGeoFencing.accesshub=t[0]),e.setLocalGeoFencing()):(n=Z(JSON.stringify(r),F),U(X+"_"+e.stateCenter.appid+"_"+(e.stateCenter.mode||j.modeNo),n))})),this.netAgent.on("connectedEvent",(function(t,n,r){var i;e.logger.info("".concat(he," connect")),"start"===n?(i=e.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:_t},_t,!0),e.stateCenter.requestList[t]=i):"end"===n&&(i=e.stateCenter.requestList[t])&&(i.setAttributes({request_count:vt(r.count),connect_id:yt(r.connectid),events:bt(r.connectEvents)}),i.end())})),this.netAgent.on("requestEvent",(function(t,n,r){var i;e.logger.info("".concat(he," request")),"start"===n?(i=e.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:wt},wt,!0),e.stateCenter.requestList[t]=i):"end"===n&&(i=e.stateCenter.requestList[t])&&(i.setAttributes({req_location:Ct(r.na_req_location),http_code:r.status_code,error:r.err_code}),i.end())})),this.netAgent.on("disConnectedEvent",(function(t){var n=t.duration,r=t.server,i=(t=t.connectid,e.logger.info("".concat(he," disconnect")),e.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:""},"/zegoconn/disconnect"));i.setAttributes({url:Et(r),connect_duration:Tt(n),connect_id:St(t)}),i.end()})),null!=(t=this.netAgent)&&t.on("clientInfo",(function(t){var n=t.timeOffset;t=t.geofencingID,"number"==typeof n&&e.stateCenter.reporter.setTimeOffset(n),e.updateTimeOffsetInterval(),"number"==typeof t&&(e.stateCenter.netGeoFencing.id=t,e.setLocalGeoFencing())})),j.domains);if(Bn.geoFenceType&&Bn.geoFenceAreaList){this.logger.info("".concat(he," geo type ").concat(Bn.geoFenceType," area ").concat(Bn.geoFenceAreaList.join(",")));var n=void 0,r=[],i=this.getGeoFencingIDAndDomain(Bn.geoFenceType,Bn.geoFenceAreaList);if(!i)throw this.logger.warn("".concat(he," geofencing not exist")),N.GEO_SET_ERROR;var o,s=this.getLocalGeoFencing(),u=!1;null!=s&&s.id&&(o=i.find((function(e){return e.id===(null==s?void 0:s.id)})))&&(u=!0,n={id:null==s?void 0:s.id,accesshub:(null==s?void 0:s.accesshub)||(null==o?void 0:o.accesshub),logreport:null==o?void 0:o.logreport,detaillog:null==o?void 0:o.detaillog},null!=s&&s.accesshub&&r.push(null==s?void 0:s.accesshub),r.push(null==o?void 0:o.accesshub)),u||(n={id:(o=i[0]).id,accesshub:u=o.accesshub,logreport:o.logreport,detaillog:o.detaillog},r.push(u)),this.stateCenter.geoFencing=n,this.logger.info("".concat(he," use geo ").concat(JSON.stringify(this.stateCenter.geoFencing))),t=r}this.logger.info("".concat(he," domains ").concat(JSON.stringify(t))),i=t.map((function(e){return"wss://".concat(e,"/accesshub")})),this.netAgent.setBackupDomains(j.primaryDomains),this.netAgent.setNetAgentDefaultServers(i),!this.stateCenter.geoFencing&&null!=(o=this.options)&&o.accessURL&&this.netAgent.setNetAgentSpecifiedServers([null==(u=this.options)?void 0:u.accessURL]),null!=(n=this.options)&&n.customDomain&&(r="wss://accesshub-wss."+this.options.customDomain+"/accesshub",this.stateCenter.geoFencing&&(this.replaceMainDomain(this.options.customDomain),r="wss://".concat(null==(t=this.stateCenter.geoFencing)?void 0:t.accesshub,"/accesshub")),this.netAgent.setNetAgentSpecifiedServers([r])),this.dispatchServers=[],this.dispatchServers=this.stateCenter.geoFencing?i:this.getDispatchUrl(),this.netAgent.setDispatchConnectServers(this.dispatchServers)},Bn.prototype.getMainDomain=function(e){return(e=e.split("."))[e.length-2]+"."+e[e.length-1]},Bn.prototype.replaceMainDomain=function(e){var t,n;this.stateCenter.geoFencing&&(n=this.getMainDomain(null==(n=this.stateCenter.geoFencing)?void 0:n.accesshub),this.stateCenter.geoFencing.accesshub=null==(t=this.stateCenter.geoFencing)?void 0:t.accesshub.replace(n,e),this.stateCenter.geoFencing.logreport=null==(t=this.stateCenter.geoFencing)?void 0:t.logreport.replace(n,e),this.stateCenter.geoFencing.detaillog=null==(t=this.stateCenter.geoFencing)?void 0:t.detaillog.replace(n,e))},Bn.prototype.getDispatchUrl=function(){var e=B(X+"_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||j.modeNo));if(e&&(e=M(e,F)))try{return JSON.parse(e)}catch(e){}return[]},Bn.prototype.bindWindowListener=function(){var e=this,t=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),n=x(),r="micromessenger"==(i=navigator.userAgent).toLowerCase().match(/MicroMessenger/i),i=-1<i.indexOf("Android")||-1<i.indexOf("Adr"),o=t||r&&i?"pagehide":"Firefox"===n?"beforeunload":"unload";window.addEventListener(o,(function(){return Zn(e,void 0,void 0,(function(){return Mn(this,(function(e){switch(e.label){case 0:return this.logger.info(ie+" "+o),this.stateCenter.reporter.setUnloadState(a.I),this._onBeforePageUnload?[4,this._onBeforePageUnload()]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.logoutRoom(),[2]}}))}))})),window.addEventListener("offline",(function(){e.netOffLineHandle()})),window.addEventListener("online",(function(){e.netOnLineHandle()}))},Bn.prototype.retryRoom=function(){var e=this;this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.netAgent.isConnect()&&(t.resetSessionInfo(),t.roomTryHandler.active(!0))}))},Bn.prototype.netOnLineHandle=function(){var e=this;this.logger.info(ie+" network is online"),this.stateCenter.networkState=u.online,this.isUseNetAgent||this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&e.service.isDisConnect()?t.roomTryHandler.active():t.roomTryHandler&&(t.roomTryHandler.stopMaxTime(),t.roomHandler.roomStateHandle("CONNECTED",w.Reconnected,{code:0,msg:""}))}))},Bn.prototype.netOffLineHandle=function(){var e=this;this.logger.info(ie+" network is broken"),this.stateCenter.networkState=u.offline,this.isUseNetAgent||this.stateCenter.roomModulesList.forEach((function(t){t.roomTryHandler&&(t.roomTryHandler.invalid(),t.roomTryHandler.onactive=function(n,r){e.logger.info(ie+" onactive"),t.roomHandler.transError(r),t.roomHandler.disconnectedHandle(r)},t.roomTryHandler.startMaxTime(),t.roomHandler.roomStateHandle("CONNECTING",w.Reconnecting,N.NETWORK_BROKEN))}))},Bn.prototype.setLogConfig=function(e){this.logger.info(oe+" call");var t,n=this.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:He.event},He.event);if(e.logLevel&&["debug","info","warn","error","report","disable"].includes(e.logLevel)&&(this.logger.setLogLevel(e.logLevel),n.setAttributes({log_level:He.log_level(e.logLevel)})),e.remoteLogLevel&&["debug","info","warn","error","report","disable"].includes(e.remoteLogLevel)&&n.setAttributes({remote_log_level:He.remote_log_level(e.remoteLogLevel)}),"string"==typeof e.logURL&&(e.logURL.startsWith("wss://")||e.logURL.startsWith("https://")))null!=(t=this.stateCenter.geoFencing)&&t.logreport?this.logger.info(oe+" geo exist"):(this.logger.setLogServer(e.logURL),0===this.stateCenter.ENV&&(this.stateCenter.logDomain=null==(t=this.logger.url)?void 0:t.split("/")[2],this.stateCenter.reporter.setConfig({serverUrl:"wss://"+this.stateCenter.logDomain+"/zglog/tlog"}))),n.setAttributes({log_url:He.log_url(e.logURL)}),n.end();else if(e.logURL)return this.logger.error(oe+"log url must be a wss or https url"),this.stateCenter.reporter.setError(n,He.error.kInvalidParamError),!1;return this.logger.info(oe+" call success"),n.end(),!0},Bn.prototype.setDebugVerbose=function(e){var t=this.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:Ge},Ge);"boolean"==typeof e&&(this.stateCenter.debug=e,this.stateCenter.debugCustom=!0,t.setAttributes({debug:We(e?"true":"false")})),t.end(),this.logger.info("zm.sdv call success")},Bn.prototype.setDebug=function(e){"string"==typeof e&&-1<e.indexOf("wss")?this.stateCenter.debug=W.isTestEnv(e):Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("wss")}))?this.stateCenter.debug=W.isTestEnv(e[0]):this.logger.info("zm.0 server wrong"),this.stateCenter.testEnvironment=this.stateCenter.debug},Bn.prototype.renewToken=function(e,t){var n,r,i,o,s=this,u=this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:t},{key:""},Je.event);return void 0===t||"string"==typeof t&&""!=t?(r=this.getRoomModules(t)||this.stateCenter.roomModulesList[0])?"string"==typeof e&&r.roomTryHandler?(e===r.roomTryHandler.token?(this.logger.info(ge+" token has not changed"),u.setAttributes({error:Je.error.INPUT_PARAM.code,message:"token has not changed"}),u.end()):(u.setAttributes({token:Je.token(e)}),this.stateCenter.configRoomAuth?(i=function(t){var n;null!=(n=r.roomTryHandler)&&n.renewLocalToken(e,null==(n=null==t?void 0:t.body)?void 0:n.token_remain_time),s.cloudSetting.setToken(e),s.reporter.setReporterInfo(s.stateCenter.idName||"",e),s.stateCenter.configCheckToken=!0,u.end(),s.logger.info(ge+" "+JSON.stringify(t))},o=function(t){var n=null==(n=null==t?void 0:t.body)?void 0:n.err_code;s.stateCenter.reporter.setError(u,t),!n||1000002014!==n&&2014!==n?s.logger.error(ge+" "+JSON.stringify(t)):(s.stateCenter.configCheckToken=!1,null!=(n=r.roomTryHandler)&&n.renewLocalToken(e),s.cloudSetting.setToken(e),s.logger.warn(ge+" "+JSON.stringify(t)))},this.isUseNetAgent?null!=(n=this.liveRoomHandler)&&n.renewToken({token:e},i,o,r):this.service.sendMessage("renew_token",{token:e},i,o,void 0,{sessionID:r.sessionID,roomID:t,roomSessionID:r.roomSessionID})):(null!=(n=r.roomTryHandler)&&n.renewLocalToken(e),this.cloudSetting.setToken(e),this.reporter.setReporterInfo(this.stateCenter.idName||"",e),u.end())),!0):("string"!=typeof e||r.roomTryHandler?(this.logger.error(ge+" token must be string and not empty"),this.stateCenter.reporter.setError(u,Je.error.INPUT_PARAM)):(this.logger.error(ge+" calling must after loginRoom"),this.stateCenter.reporter.setError(u,Je.error.NOT_LOGIN)),!1):(this.logger.error(ge+" calling must after loginRoom"),this.stateCenter.reporter.setError(u,Je.error.NOT_LOGIN),!1):(this.logger.error(ge+" roomID must be string and no empty"),!1)},Bn.prototype.setCloudSettingURLs=function(e){var t=this;this.logger.info("zm.scsu call "),Array.isArray(e)&&0<e.length&&e.every((function(e){return"string"==typeof e&&-1<e.indexOf("http")}))&&this.cloudSetting.init({productNum:1,appID:this.stateCenter.appid,env:this.stateCenter.ENV,pollingNotify:function(e,n){t.logger.info("zm.scsu"," setting file changed "+e+" "+JSON.stringify(n)),t.stateCenter.actionListener("_cloudSettingNotify",e,n)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.isUseNetAgent,connection:this.netAgent})},Bn.prototype.loginRoom=function(e,t,n,r){var i=this;return this.logger.info(se+" call by user "+(null==n?void 0:n.userID)+" "+e+" "+this.version),new Promise((function(o,a){return Zn(i,void 0,void 0,(function(){var i,c,l,h,d;return Mn(this,(function(f){switch(f.label){case 0:return 1!==this.stateCenter.ENV?[3,2]:[4,new Promise((function(e){}))];case 1:f.sent(),f.label=2;case 2:return c=this.loginReport(o,a,e,t,r),h=c.interResolve,i=c.interReject,c=c.loginSpan,(r=r||{}).maxMemberCount||(r.maxMemberCount=0),l=this.getRoomModules(e),d=Fe.error,l?(this.logger.setSessionInfo(this.stateCenter.appid,e,"",n.userID,"",this.stateCenter.sdKVersion),i(d.REPEATEDLY_LOGIN)):((l=new Yt(e,this.stateCenter,this.logger,this.dataReport,this,this.liveRoomHandler,this.service)).roomTryHandler||(l.roomTryHandler=new Pt(this.logger,this.stateCenter,l)),l.roomTryHandler.init(this.stateCenter.roomRetryTime),l.roomTryHandler.initRoom(l.roomHandler,e,t,n,this.stateCenter.server,this.stateCenter.serverBak,r),l.roomTryHandler.setLoginRoomCallback(h,i),l.roomHandler.roomStateHandle("CONNECTING",w.Logining,{code:0,msg:""}),(h=function(e,t){var n,r,i=[],o={};for(n in e)o[e[n].order]=e[n],e[n].key=n;for(r in o)i.push(o[r]);for(var s=0;s<i.length;s++)for(var a=i[s].rules,u=0;u<a.length;u++){var c={key:i[s].key,value:i[s].value,action:t.action,logger:t.logger},l=c.value,h=a[u].name?""+a[u].name:"";if((void 0===l&&h===xt.NOT_EMPTY||void 0!==l)&&Dt[h]&&(h=Dt[h](c.key,l,c.action,c.logger,a[u]))!=Mt)return h}return Mt}({roomID:{order:0,value:e,rules:[{name:xt.NOT_EMPTY,error:d.ROOM_ID_NULL},{name:xt.TYPE_STRING,error:d.INPUT_PARAM,extMsg:"roomID must be string"},{name:xt.MAX_LENGTH_128,error:d.ROOM_ID_TOO_LONG},{name:xt.ILLEGAL_CHARACTERS,error:d.ROOM_ID_INVALID_CHARACTER}]},token:{order:1,value:t,rules:[{name:xt.NOT_EMPTY,error:d.INPUT_PARAM},{name:xt.TYPE_STRING,error:d.INPUT_PARAM}]},user:{order:2,value:n,rules:[{name:xt.NOT_EMPTY,error:d.INPUT_PARAM,extMsg:" param user error."},{name:xt.TYPE_OBJECT,error:d.INPUT_PARAM,extMsg:" param user error."}]},"user.userID":{order:3,value:n.userID,rules:[{name:xt.NOT_EMPTY,error:d.USER_ID_NULL,extMsg:" param user error."},{name:xt.TYPE_STRING,error:d.INPUT_PARAM,extMsg:" param userID error."},{name:xt.MAX_LENGTH_64,error:d.USER_ID_TOO_LONG},{name:xt.ILLEGAL_CHARACTERS,error:d.USER_ID_INVALID_CHARACTER}]},"user.userName":{order:4,value:n.userName,rules:[{name:xt.TYPE_STRING,error:d.INPUT_PARAM,extMsg:" userName must be string."},{name:xt.MAX_LENGTH_256,error:d.USER_NAME_TOO_LONG}]},config:{order:5,value:r,rules:[]},"config.maxMemberCount":{order:6,value:r.maxMemberCount,rules:[{name:xt.TYPE_INTEGER,error:d.INPUT_PARAM,extMsg:" maxMemberCount must be integer number."}]}},{action:se,logger:this.logger}))!==Mt?(l.roomHandler.roomStateHandle("DISCONNECTED",w.LoginFailed,h.error,h.extMsg),i(h.error,h.extMsg)):(this.logger.setSessionInfo(this.stateCenter.appid,"","",n.userID,"",this.version),0<this.stateCenter.roomModulesList.length&&1==this.stateCenter.isMultiRoom?l.isMulti=!0:Dn([],this.stateCenter.roomModulesList,!0).forEach((function(e){return e.roomHandler.logout()})),r&&(l.config=r),this.stateCenter.roomModulesList.push(l),this.netAgent&&(this.stateCenter.idName=n.userID,this.netAgent.setUserInfo(n.userID),this.stateCenter.actionListener("_roomLogin",e,t),this.netAgent.isConnect())&&this.fetchAppConfig(t),this.cloudSetting.setUserID(n.userID),this.cloudSetting.setToken(t),this.cloudSetting.activePolling(),this.stateCenter.reporter.setCommonAttributes({id_name:n.userID}),this.stateCenter.reporter.setReporterInfo(n.userID,t),this.logger.setTokenInfo(t,n.userID),this.stateCenter.reporter.setSpanInMap(c,{key:Fe.event,par:e}),d=this.stateCenter.settingConfig.getSetting("room_server",!0),Array.isArray(d)&&0<d.length&&(this.logger.info(se," setting room_server "+d),this.stateCenter.server=d[0],this.stateCenter.serverBak=d[1]||d[0]),this.stateCenter.setMultiRoom=!0,l.roomTryHandler.startMaxTime(),this.isUseNetAgent&&!this.netAgent.isConnect()?(this.logger.info(se," us is not connected"),l.roomHandler.setRunState(s.trylogin),this.netAgent.connectUa()):(this.isUseNetAgent&&(this.stateCenter.networkState=u.online),l.roomTryHandler.active(!0)))),[2]}}))}))}))},Bn.prototype.handleLogUpload=function(e){var t="";e&&e.app_config?t=e.app_config.domain:this.stateCenter.appConfig&&this.stateCenter.appConfig.app_config&&(t=this.stateCenter.appConfig.app_config.domain),this.logger.info(le+" call"),this.logger.url?this.logger.info(le+" log is connected"):(null!=(e=this.stateCenter.geoFencing)&&e.logreport?(this.stateCenter.logDomain=null==(e=this.stateCenter.geoFencing)?void 0:e.logreport,t=this.getMainDomain(null==(e=this.stateCenter.geoFencing)?void 0:e.logreport)):this.stateCenter.testEnvironment?(this.stateCenter.logDomain="weblogger-hk-test.zegocloud.com",t="zegocloud.com"):this.stateCenter.logDomain="weblogger".concat(this.stateCenter.appid,"-api.").concat(t),t?(e="",0===this.stateCenter.ENV?(e="wss://".concat(this.stateCenter.logDomain,"/log"),this.reporter.setConfig({serverUrl:"wss://".concat(this.stateCenter.logDomain,"/zglog/tlog")})):e="https://".concat(this.stateCenter.logDomain,"/httplog"),this.logger.setLogServer(e)):this.logger.warn(le+" appconfig no domain"))},Bn.prototype.fetchAppConfigByTargetToken=function(e,t){return Zn(this,void 0,void 0,(function(){var n,r,i,o,s;return Mn(this,(function(a){switch(a.label){case 0:if(this.logger.info(ce+" call"),!t)return this.logger.warn(ce+" user not exist"),[2];if(n=this.getUserID(),r="",i=null,e)r=e;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(ce+" token not exist"),[2];r=this.getToken()}this.logger.roomid||this.logger.setSessionInfo(this.stateCenter.appid,"player-no-room","",t,"",this.stateCenter.sdKVersion),a.label=1;case 1:return a.trys.push([1,3,4,5]),this.netAgent.setUserInfo(t),[4,this.netAgent.getAppConfigByAgent("init",r,5e3)];case 2:return o=a.sent(),s=o.data,0===o.code&&(this.handleLogUpload(s),i=s),[3,5];case 3:return a.sent(),this.logger.error(ce+" token not validated"),[3,5];case 4:return n&&this.netAgent.setUserInfo(n),this.logger.info(ce+" call success"),[2,i];case 5:return[2]}}))}))},Bn.prototype.fetchAppConfig=function(e){return Zn(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c;return Mn(this,(function(l){switch(l.label){case 0:if(this.stateCenter.appConfigFetched)return this.logger.warn(ue+" config fetched"),[2];if(!this.getUserID())return this.logger.warn(ue+" user not exist"),[2];if(t="",e)t=e;else{if(!(0<this.stateCenter.roomModulesList.length))return this.logger.warn(ue+" token not exist"),[2];t=this.getToken()}n=this.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:""},"/sdk_config/init"),this.logger.info(se+" initConfig etag: "+this.stateCenter.appConfigEtag),r=!!this.stateCenter.appConfig,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.netAgent.getAppConfigByAgent("init",t,5e3,this.stateCenter.appConfigEtag)];case 2:if(o=l.sent(),u=o.code,c=o.data,i=o.etag,o=o.retryCount,n.setAttributes({trigger_reason:It(this.stateCenter.appConfig?"refresh":"normal"),try_count:Rt(o||0)}),n.end(),this.stateCenter.appConfigFetched=!0,this.logger.info(se+" initConfig code:"+u+" data: "+JSON.stringify(c)+" etag: "+i),this.stateCenter.appConfigEtag!==i){if(0==Object.keys(c).length)return this.logger.info(se+" initConfig data null"),[2];this.stateCenter.appConfig={app_config:o=c.app_config,media_config:{publish_config:s=(u=c.media_config).publish_config,play_config:u=u.play_config},speedlog_config:{charge_info_report_no_playing:(c=c.speedlog_config.charge_info_report_no_playing)||0}},this.stateCenter.appConfigEtag=i,o=JSON.stringify(this.stateCenter.appConfig),s=Z(o,F),U(Y+"_"+this.getAppID()+"_"+(this.stateCenter.mode||j.modeNo),s),u=Z(this.stateCenter.appConfigEtag+"",F),U(K+"_"+this.getAppID()+"_"+(this.stateCenter.mode||j.modeNo),u)}return this.handleLogUpload(),!r&&this.stateCenter.appConfig&&this.stateCenter.actionListener("_appConfigRsp"),!this.stateCenter.netAppConfig&&this.stateCenter.appConfig&&(this.stateCenter.netAppConfig=Object.assign(this.stateCenter.appConfig),this.stateCenter.actionListener("_netAppConfigRsp",this.stateCenter.netAppConfig),this._onAppConfigUpdate)&&this._onAppConfigUpdate(this.stateCenter.netAppConfig),[3,4];case 3:return c=l.sent(),this.logger.error(se+" fail "+JSON.stringify(c)),n.setAttributes({error:null==c?void 0:c.code}),n.end(),[20012,20008].includes(null==c?void 0:c.code)&&this.stateCenter.roomModulesList.forEach((function(e){e.roomTryHandler&&e.roomTryHandler.loginFail(N.APPID_INVALID)})),[3,4];case 4:return[2]}}))}))},Bn.prototype.getCloudSetting=function(){var e,t=this;null!=(e=this.cloudSetting)&&e.fetchMultiSetting([V,"room","rtc"]).then((function(e){var n,r;t.logger.info(se," settingConfig "+JSON.stringify(e)),e&&(t.stateCenter.settingConfig.setSetting(null==(r=null==e?void 0:e.init)?void 0:r.setting,["remote_log_level","zip_log","detaillog_domain"]),t.stateCenter.actionListener("_settingCanFetch",null==e?void 0:e.rtc),(r=t.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(t.logger.info("".concat(se,"  setting remote_log_level ").concat(r)),t.logger.setRemoteLogLevel(r)),void 0!==(e=t.stateCenter.settingConfig.getSetting("zip_log"))&&(t.logger.info("".concat(re," force setting zip_log ").concat(e)),t.logger.setZipLogConfig(e,!0)),t.handleZipLogUrl(),(r=t.stateCenter.settingConfig.getSetting("unify",t.stateCenter.netHasSet))&&(t.logger.info("".concat(se," unify ").concat(JSON.stringify(r))),e=r.enable,r=r.sdk_conn_ver,n=!0,n=!!(e&&r<=j.connectVer),!0===t.isUseNetAgent)&&!1===n&&(t.cloudSetting.setOptions({unify:!1}),"connecting"!==t.stateCenter.connectState&&(t.stateCenter.connectState="connecting",t.stateCenter.actionListener("_connectChanged","connecting")),e=Dn([],t.stateCenter.roomModulesList,!0),Dn([],t.stateCenter.roomModulesList,!0).forEach((function(e){e.roomHandler.logout(!0,!0)})),t.stateCenter.useNetAgent=n,e.forEach((function(e){var n;t.stateCenter.roomModulesList.push(e),e.roomTryHandler||(e.roomTryHandler=new Pt(t.logger,t.stateCenter,e)),e.roomTryHandler.init(t.stateCenter.roomRetryTime),e.roomTryHandler.initRoom(e.roomHandler,e.roomID,e.token,{userID:t.stateCenter.idName,userName:t.stateCenter.nickName},t.stateCenter.server,t.stateCenter.serverBak,e.config),null!=(n=e.roomTryHandler)&&n.startMaxTime(),e.roomTryHandler.onactive=function(n,r){n?"connected"!==t.stateCenter.connectState&&(t.stateCenter.connectState="connected",t.stateCenter.actionListener("_connectChanged","connected",{roomID:e.roomID})):(t.logger.info(se," onactive"),e.roomHandler.transError(r),e.roomHandler.disconnectedHandle(r))},null!=(n=e.roomTryHandler)&&n.active()}))),r=t.stateCenter.settingConfig.getSetting("report_script"))&&(n=r.url,e=r.key,r=r.hash,t.logger.info("".concat(se," report script ").concat(n," ").concat(e," ").concat(r)),t.stateCenter.reporter.loadScript(!0,n,e,r))})).catch((function(e){t.logger.warn(se," settingConfig "+JSON.stringify(e))})),this.stateCenter.onListener("_cloudSettingNotify",(function(e,n){var r=t.cloudSetting.getEnvVariables()||{},i=t.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:""},"/cloud_setting/refresh");i.setAttributes({request_kv:ht(r),files:dt([{name:e,content:n.setting,versions:n.versions,code:null==n?void 0:n.code,message:null==n?void 0:n.message}])}),i.end(),e===V&&(t.stateCenter.settingConfig.setSetting(null==n?void 0:n.setting,["remote_log_level"]),r=t.stateCenter.settingConfig.getSetting("remote_log_level"))&&(t.logger.info(se," setting remote_log_level "+r),t.logger.setRemoteLogLevel(r))}))},Bn.prototype.cloudReportNotify=function(e,t,n){0!==(null==n?void 0:n.code)||!1===(null==n?void 0:n.polling)?"request_start"===t?this.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:ft,par:e+""},ft,!0):"request_end"===t&&this.stateCenter.reporter.spanEnd({key:ft,par:e+""},{request_detail:pt(null==n?void 0:n.reportData),files:gt(null==n?void 0:n.files),code:null==n?void 0:n.code,request_params:null==n?void 0:n.params,request_kv:null==n?void 0:n.requestKV}):this.logger.info("zm.crn not report")},Bn.prototype.loginReport=function(e,t,n,r,i){var o=this,s=Fe,u=this.stateCenter.reporter.createSpan(a.I,{key:Ue.event},{key:""},s.event);return u.setAttributes({svr_env:s.svr_env(this.stateCenter.testEnvironment?"test":"online"),token:s.token(r)}),i&&("boolean"==typeof i.userUpdate&&u.setAttribute("user_state_update",s.user_state_update(i.userUpdate?1:0)),"number"==typeof i.maxMemberCount)&&u.setAttributes({max_member_cnt:s.max_member_cnt(i.maxMemberCount)}),{interResolve:function(t){var r=o.getRoomSessionID(n),i=o.getRoomModules(n),a=o.getSessionId(n);u.setAttributes({room_id:s.room_id(n),room_sid_string:s.room_sid_string(r),liveroom_sid_string:s.liveroom_sid_string(a),try_cnt:s.try_cnt(null==(r=null==i?void 0:i.roomTryHandler)?void 0:r.retryActiveCount),server:s.server(null==(a=null==i?void 0:i.roomHandler)?void 0:a.server),room_mode:s.room_mode(o.stateCenter.isMultiRoom?1:0),role:s.role(o.stateCenter.role),audience_create_room:s.audience_create_room(o.stateCenter.roomCreateFlag?1:0),max_member_cnt:s.max_member_cnt((null==i?void 0:i.maxMemberCount)||0)}),u.end(),e(t)},interReject:function(e,r){var i,a;void 0===r&&(r=""),u.setAttributes({room_id:s.room_id(n)}),e.code<2e9&&1e9<e.code||e.code<1e6?(i=W.decodeServerError(e.code,e.msg),a=W.getLiveRoomError(e.code,o.isUseNetAgent)):i={code:e.code,message:e.msg},i&&o.stateCenter.reporter.setError(u,{code:i.code,msg:i.message+r}),a&&N[a]&&(e.code=N[a].code,e.msg.includes("unknown"))&&(e.msg=N[a].msg),t(e.code&&e.msg&&""!==r?{code:e.code,msg:e.msg+r}:e)},loginSpan:u}},Bn.prototype.logoutRoom=function(e){var t,n=this;this.logger.info(ae+" call by user "+e),this.stateCenter.roomModulesList.length?void 0===e?(Dn([],this.stateCenter.roomModulesList,!0).forEach((function(e){n.logoutSpan(e),e.roomHandler.logout(!0)})),this.cloudSetting.uninit()):"string"!=typeof e||""==e?(this.logger.error(ae+" roomID must be string and not empty"),this.logoutSpan(void 0,Qe.error.INPUT_PARAM)):(t=this.getRoomModules(e))?(this.logoutSpan(t),t.roomHandler.logout(),0===this.stateCenter.roomModulesList.length&&this.cloudSetting.uninit()):(this.logger.error(ae+" room not exist"),this.logoutSpan(void 0,Qe.error.ROOM_NOT_EXIST,e)):this.logger.warn(ae+" no room")},Bn.prototype.uploadLog=function(){var e=this;return new Promise((function(t,n){e.logger.info("zm.zip.udlg call"),e.logger.uploadStorageLog().then((function(){e.logger.info("zm.zip.udlg call success"),t({errorCode:0,extendedData:"upload logs success!"})})).catch((function(t){e.logger.error("zm.zip.udlg upload zip log failed, result: "+((null==t?void 0:t.message)||"unknown")),n({errorCode:N.UPLOAD_LOG_ERROR.code,extendedData:N.UPLOAD_LOG_ERROR.msg+", result: "+((null==t?void 0:t.message)||"unknown")})}))}))},Bn.prototype.sendCustomCommand=function(e,t,n){return new Promise((function(e,t){console.error(C),t()}))},Bn.prototype._sendCustomCommand=function(e,t,n){return new Promise((function(e,t){console.error(C),t()}))},Bn.prototype.sendBroadcastMessage=function(e,t){return new Promise((function(e,t){console.error(C),t()}))},Bn.prototype._sendBroadcastMessage=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=1),new Promise((function(e,t){console.error(C),t()}))},Bn.prototype.setRoomExtraInfo=function(e,t,n){return new Promise((function(e,t){console.error(C),t()}))},Bn.prototype._setRoomExtraInfo=function(e,t,n){return new Promise((function(e,t){console.error(C),t()}))},Bn.prototype.sendBarrageMessage=function(e,t){return new Promise((function(e,t){console.error(C),t()}))},Bn.prototype._sendBarrageMessage=function(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=1),new Promise((function(e,t){console.error(C),t()}))},Bn.prototype.sendRelayMessage=function(e,t,n,r,i){console.error(C)},Bn.prototype.requestJoinLive=function(e,t,n,r,i){return console.error(C),!1},Bn.prototype.inviteJoinLive=function(e,t,n,r,i){return console.error(C),!1},Bn.prototype.endJoinLive=function(e,t,n,r){return console.error(C),!1},Bn.prototype.respondJoinLive=function(e,t,n,r,i){return console.error(C),!1},Bn.prototype.getVersion=function(){return this.version},Bn.prototype.setSdkBizVersion=function(e){"string"==typeof e&&""!==e&&(this.stateCenter.bizVersion=e)},Bn.prototype.on=function(e,t){var n=this.stateCenter.reporter.createSpan(a.H,{key:Be},{key:""},ze.event);return n.setAttributes({listener:ze.listener(e)}),this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(pe+" listener callBack must be funciton"),this.stateCenter.reporter.setError(n,ze.error.INPUT_PARAM," listener callBack must be function"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),n.end(),!0):(this.logger.error(pe+" event "+e+" no found"),this.stateCenter.reporter.setError(n,ze.error.INPUT_PARAM," event "+e+" no found"),!1)},Bn.prototype.off=function(e,t){var n,r=this.stateCenter.reporter.createSpan(a.H,{key:Be},{key:""},"/sdk/off_listener");return r.setAttributes({listener:Ve(e)}),this.stateCenter.listenerList[e]?(n=this.stateCenter.listenerList[e],t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],r.end(),!0):(this.logger.error("zm.off listener no found"),this.stateCenter.reporter.setError(r,ze.error.INPUT_PARAM," event "+e+" no found"),!1)},Bn.prototype._on=function(e,t){return this.stateCenter.listenerList[e]?"function"!=typeof t?(this.logger.error(pe+" listener callBack must be funciton"),!1):(-1==this.stateCenter.listenerList[e].indexOf(t)&&this.stateCenter.listenerList[e].push(t),!0):(this.logger.error(pe+" event "+e+" no found"),!1)},Bn.prototype._off=function(e,t){var n;return this.stateCenter.listenerList[e]?(n=this.stateCenter.listenerList[e],t?n.splice(n.indexOf(t),1):this.stateCenter.listenerList[e]=[],!0):(this.logger.error("zm.off listener no found"),!1)},Bn.prototype.isTestEnvironment=function(){return this.stateCenter.testEnvironment},Bn.prototype.isLogin=function(e){return!!(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&e.isLogin()},Bn.prototype.getMultiRoom=function(){return this.stateCenter.isMultiRoom},Bn.prototype.getAppID=function(){return this.stateCenter.appid},Bn.prototype.getUserID=function(){return this.stateCenter.idName},Bn.prototype.getUserName=function(){return this.stateCenter.nickName},Bn.prototype.getToken=function(e){return(this.getRoomModules(e)||this.stateCenter.roomModulesList[0]).token},Bn.prototype.setRoomCreateFlag=function(e){this.stateCenter.roomCreateFlag=e},Bn.prototype.setRole=function(e){this.stateCenter.role=e},Bn.prototype.getSessionId=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.userSidString:"0"},Bn.prototype.getRoomSessionID=function(e){return(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])?e.roomSidString:"0"},Bn.prototype.getAppConfig=function(){return this.stateCenter.appConfig},Bn.prototype.setTestPackageSize=function(e){this.cloudSetting.zegoSetting.settingFetchHandler.testNetPackageSize=e,this.stateCenter.testNetPackageSize=e},Bn.prototype.setAccess=function(e){this.stateCenter.configOK&&(this.stateCenter.netHasSet=!0,this.stateCenter.useNetAgent=e,this.stateCenter.useNetAgent=this.getSettingUnify(!0),this.netAgent.setAccess(this.isUseNetAgent),this.cloudSetting.setOptions({unify:this.isUseNetAgent}))},Bn.prototype.enableMultiRoom=function(e){var t=this.stateCenter.reporter.createSpan(a.H,{key:Ue.event},{key:""},ct.event);return"boolean"!=typeof e?(this.logger.error("zm.emr param must be boolean"),this.stateCenter.reporter.setError(t,ct.error.kAlreadyLoginError),!1):(t.setAttribute("is_multi",ct.is_multi(e)),0<this.stateCenter.roomModulesList.length||this.stateCenter.setMultiRoom?(this.logger.error("zm.emr multi room can only be set once before first login"),this.stateCenter.reporter.setError(t,ct.error.kInvalidParamError),!1):(t.end(),this.stateCenter.isMultiRoom=e,this.stateCenter.setMultiRoom=!0))},Bn.prototype.getRoomModules=function(e){return this.stateCenter.roomModulesList.find((function(t){return t.roomID==e}))},Bn.prototype._onAppConfigUpdate=function(e){},Bn.prototype._onBeforePageUnload=function(){},Bn.use=function(e){switch(e.type){case"message":case"live":e.install(Bn,Yt,qt,On)}},Bn.setGeoFence=function(e,t){if(![0,1,2].includes(e))throw new Error("GeoFencing set Error");if(!t.every((function(e){return Q.find((function(t){return t===e}))})))throw new Error("GeoFencing set Error");Bn.geoFenceType=e,Bn.geoFenceAreaList=t},Bn.setEngineOptions=function(e){if(e.geoFenceType){if(![0,1,2].includes(e.geoFenceType))throw new Error("GeoFencing set Error");Bn.geoFenceType=e.geoFenceType}if(e.geoFenceAreaList){if(!e.geoFenceAreaList.every((function(e){return J.find((function(t){return t.id===e}))})))throw new Error("GeoFencing set Error");Bn.geoFenceAreaList=e.geoFenceAreaList}Bn.engineOptions=e},Bn.prototype.resetRoomTokenTimer=function(e,t){(e=this.getRoomModules(e)||this.stateCenter.roomModulesList[0])&&t&&0<t&&e.roomHandler.resetTokenTimer(1e3*t)},Bn.prototype.isDisConnect=function(){return(this.isUseNetAgent?this.liveRoomHandler:this.service).isDisConnect()},Bn.prototype.sendMessage=function(e,t,n,r){(this.isUseNetAgent?this.liveRoomHandler:this.service).sendMessage(e,t,n,r)},Bn.prototype.getNetworkInfo=function(){return this.netAgent.getNTP()},Bn.prototype.setProtoFormat=function(e){if(!["json","pb"].includes(e=void 0===e?"json":e))throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");this.stateCenter.protoFormat=e},Bn.prototype.setSdkLoginRelateService=function(e){Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&(this.stateCenter.relateService=e)},Bn.prototype.sendMessageByService=function(e,t,n,r,i,o){return this.service.sendMessage(e,t,n,r,i,o)},Bn.prototype.getHeader=function(e){var t=this.stateCenter.roomModulesList[0];if(t&&t.isLogin())return this.service.getHeader(e,t.sessionID,t.roomID,t=t.roomSessionID);this.logger.error("zm.gh room no found or no login")},Bn.prototype.sendPB=function(e){return e instanceof Uint8Array?this.service.sendPB(e):(this.logger.error("zm.spb type error"),!1)},Bn.prototype.onPushBizChannel=function(e){e&&this.service.on("push_biz_channel",e)},Bn.prototype.getRoomID=function(){return this.stateCenter.roomid},Bn.prototype.getServerTimeOffset=function(){return this.stateCenter.serverTimeOffset},Bn.prototype.getReqHead=function(e){return e="string"==typeof e&&""!==e&&this.getRoomModules(e)||this.stateCenter.roomModulesList[0],this.liveRoomHandler.getReqHead(e)},Bn.prototype.sendSwitchMessage=function(e,t){throw this.logger.error("".concat("zm.ssm"," ").concat(N.WHITE_BOARD_VERSION_ERROR.msg)),N.WHITE_BOARD_VERSION_ERROR},Bn.prototype.onSwitchMessage=function(e){e&&this.liveRoomHandler&&(this.liveRoomHandler.onSwitchMessage=e)},Bn.prototype.onAppConfigUpdate=function(e){e&&(this._onAppConfigUpdate=e)},Bn.prototype.onBeforePageUnload=function(e){e&&(this._onBeforePageUnload=e)},Bn.prototype.getProtoVer=function(){return r.SWITCH_TWO},Bn.prototype.sendBusinessMessage=function(e,t,n){return"number"==typeof e&&t?this.liveRoomHandler.sendMessage(e,t,void 0,void 0,n,void 0,!1):-1},Bn.prototype.logoutSpan=function(e,t,n){var r=this,i=this.stateCenter.reporter.createSpan(a.I,{key:Ue.event},{key:Qe.event,par:null==e?void 0:e.roomID},Qe.event,!0);i.setAttributes({is_multi:Qe.is_multi(this.stateCenter.isMultiRoom),is_send_cmd_net:Qe.is_send_cmd_net(!0)}),e?i.setAttributes({room_id:Qe.room_id(null==e?void 0:e.roomID),room_sid_string:Qe.room_sid_string(null==e?void 0:e.roomSidString),liveroom_sid_string:Qe.liveroom_sid_string(null==e?void 0:e.userSidString)}):"string"==typeof n&&i.setAttributes({room_id:Qe.room_id(n)}),t?this.stateCenter.reporter.setError(i,t):i.end(),setTimeout((function(){r.reporter.flush()}),200)},Bn.prototype.getMsgSpan=function(e,t,n){return this.stateCenter.reporter.createSpan(a.H,{key:Fe.event,par:t},{key:e,par:t},e,n=void 0!==n&&n)},Bn.prototype.updateTimeOffsetInterval=function(){var e=this;"number"==typeof this.netAgent.timeOffset&&this.stateCenter.reporter.setTimeOffset(this.netAgent.timeOffset),this.timeOffsetUpdateTimer=setTimeout((function(){e.updateTimeOffsetInterval()}),9e5)},Bn.prototype.setLocalGeoFencing=function(){var e;null!=(e=this.stateCenter.netGeoFencing)&&e.id&&null!=(e=this.stateCenter.netGeoFencing)&&e.accesshub&&(e=Z(JSON.stringify(this.stateCenter.netGeoFencing),F),U("z_geos_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||j.modeNo),e),this.stateCenter.netGeoFencing={})},Bn.prototype.getLocalGeoFencing=function(){var e=B("z_geos_"+this.stateCenter.appid+"_"+(this.stateCenter.mode||j.modeNo));if(e){if(e=M(e,F))try{return JSON.parse(e)}catch(e){this.logger.warn("zm.glgf local geo descrypt fail")}}else this.logger.info("zm.glgf no local geo");return null},Bn.prototype.getGeoFencingIDAndDomain=function(e,t){var n=[];return 1===e?t.forEach((function(e){var t=J.find((function(t){return t.id===e}));t&&n.push(t)})):2===e&&(n=JSON.parse(JSON.stringify(J)),t.forEach((function(e){var t=J.find((function(t){return t.id===e}));t&&(n=n.filter((function(e){return e.id!==(null==t?void 0:t.id)})),t.relative_geofencings.forEach((function(e){n=n.filter((function(t){return t.id!==e}))})))}))),0<n.length?n:null},Bn.rtmVersion="2.0.0",Bn);function Bn(e,t,n,r,o,s,c,l){var h,d,g,m=this,_=(this.logger=n,this.dataReport=r,this.reporter=o,this.version=s,this.options=l,this.roomLoginResponseListener=function(){clearTimeout(m.cloudSettingTimer),m.cloudSettingTimer=setTimeout((function(){m.logger.info(se+" fetch cloud setting"),m.getCloudSetting()}),100)},this.stateCenter=new Ut(this.logger,this.dataReport),this.stateCenter.ENV=c,this.stateCenter.product=z.product,this.cloudSetting=new xn,this.getReportSeq=p,this.getSeq=f,this.initCallback(),this.stateCenter.deviceID=W.generateUUID(c),this.logger.info("".concat(re," device ID is ").concat(this.stateCenter.deviceID)),this.reporter.init(e,c,this.stateCenter.deviceID),this.reporter.setLogger(this.logger),this.stateCenter.reporter=this.reporter,Ue),y=this.stateCenter.reporter.createSpan(a.H,{key:""},{key:_.event},_.event,!0);0!=c&&1!=c||this.setDebug(t),n="Express",null!=(r=this.options)&&r.reportData&&(h=null==(s=null==(o=this.options)?void 0:o.reportData)?void 0:s.version,n=(null==(r=null==(l=this.options)?void 0:l.reportData)?void 0:r.project)||n),y.setAttributes({biz_type:_.biz_type(0),project:_.project(n),servers:_.servers("string"==typeof t?[t]:t),liveroom_version:_.liveroom_version(h),is_from_cache:_.is_from_cache(!1),sev_env:_.sev_env(this.stateCenter.testEnvironment?"test":"online")}),W.checkConfigParam(e,t,this.logger)?(this.stateCenter.appid=e,this.stateCenter.configOK=!0,this.stateCenter.sdKVersion=this.version,this.stateCenter.testEnvironment&&(this.stateCenter.mode=S.MODE_TEST),this.netAgent=new R,this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version),this.netAgent.init(),this.netAgent.setLogger(this.logger),o={appID:this.stateCenter.appid,env:this.stateCenter.ENV,mode:this.stateCenter.mode},Bn.geoFenceType&&Bn.geoFenceAreaList&&(o.geoFencing={type:Bn.geoFenceType,list:Bn.geoFenceAreaList}),this.netAgent.setAppInfo(o),this.liveRoomHandler=new On(this.logger,this.stateCenter,this.netAgent,this.dataReport,this),this.service=new qt(this.stateCenter,this.logger,this),s="",0===c?s="rtc":1===c&&(s="ali"),this.stateCenter.settingConfig=new en,this.cloudSetting.setLog(this.logger),this.cloudSetting.init({productNum:1,appID:e,env:c,pollingNotify:function(e,t){m.logger.info(re," setting file changed "+e+" "+JSON.stringify(t)),m.stateCenter.actionListener("_cloudSettingNotify",e,t)},reportNotify:this.cloudReportNotify.bind(this),online:!this.stateCenter.testEnvironment,unify:this.isUseNetAgent,connection:this.netAgent}),(l=this.stateCenter.settingConfig.getSetting("remote_log_level"))&&(this.logger.info("".concat(re," setting remote_log_level default ").concat(l)),this.logger.setRemoteLogLevel(l)),void 0!==(r=this.stateCenter.settingConfig.getSetting("zip_log"))&&(this.logger.info("".concat(re," setting zip_log default ").concat(r)),this.logger.setZipLogConfig(r)),this.cloudSetting.setEnvVariable("environment",s),n=this.cloudSetting.getSettingCache(V),h=this.cloudSetting.getSettingCache("room"),d=!1,g=setTimeout((function(){m.logger.warn("".concat(re," time out, get cache settings failed!")),m.isUseNetAgent&&(d=!0,m.createNetAgent(),m.getStoreAppConfig()),y.setAttributes({use_na:_.use_na(m.isUseNetAgent?1:0)}),y.end()}),3e3),Promise.all([n,h]).then((function(n){g&&clearTimeout(g);var r=null==n?void 0:n[0],i=(void 0!==(m.stateCenter.settingConfig.setSetting(null==r?void 0:r.setting),m.stateCenter.useNetAgent=m.getSettingUnify(m.stateCenter.netHasSet),m.cloudSetting.setOptions({unify:m.isUseNetAgent}),m.isUseNetAgent&&!d&&(m.createNetAgent(),m.getStoreAppConfig()),(s=m.stateCenter.settingConfig.getSetting("remote_log_level",!0))&&(m.logger.info("".concat(re,"  setting remote_log_level ").concat(s)),m.logger.setRemoteLogLevel(s)),m.handleZipLogUrl(),s=m.stateCenter.settingConfig.getSetting("zip_log"))&&(m.logger.info("".concat(re," setting zip_log ").concat(s)),m.logger.setZipLogConfig(s)),(s=m.stateCenter.settingConfig.getSetting("report_script"))?(i=s.url,o=s.key,s=s.hash,m.logger.info("".concat(re," report script ").concat(i," ").concat(o," ").concat(s)),m.stateCenter.reporter.loadScript(!1,i,o,s),y.setAttributes({lua_md5:_.lua_md5(s)})):m.stateCenter.reporter.loadScript(!1,"","",""),null==n?void 0:n[1]),o=(m.stateCenter.settingConfig.setSetting(null==i?void 0:i.setting),m.stateCenter.reporter.createSpan(a.H,{key:_.event},{key:""},"/cloud_setting/cache")),s=(o.setAttributes({files:lt([{name:V,content:JSON.stringify(null==r?void 0:r.setting),versions:JSON.stringify(null==r?void 0:r.versions),code:0,message:""},{name:"room",content:JSON.stringify(null==i?void 0:i.setting),versions:JSON.stringify(null==i?void 0:i.versions),code:0,message:""}])}),o.end(),y.setAttributes({use_na:_.use_na(m.isUseNetAgent?1:0)}),y.end(),Array.isArray(t)?t[0]:t);if(!m.isUseNetAgent&&!D(s,e))throw m.logger.error("".concat(re," the server does not match the appID")),new Error("The server does not match the appID")})).catch((function(e){if(g&&clearTimeout(g),y.setAttributes({use_na:_.use_na(m.isUseNetAgent?1:0)}),y.end(),m.logger.warn("".concat(re,"  initConfig ").concat(JSON.stringify(e))),(null==e?void 0:e.code)===N.GEO_SET_ERROR.code)throw Error("GeoFencing set Error")})),"string"==typeof t?(this.stateCenter.server=t,this.stateCenter.serverBak=t):Array.isArray(t)&&0<t.length&&(this.stateCenter.server=t[0],this.stateCenter.serverBak=t[1]||t[0]),this.logger.info("".concat(re,"  ").concat(null===navigator||void 0===navigator?void 0:navigator.appVersion," ").concat(this.version," rtmVersion: ").concat(Bn.rtmVersion," logVersion:").concat(i.ZegoLogger.logVersion)),this.bindWindowListener(),this.stateCenter.networkState=!navigator||navigator.onLine?u.online:u.offline,o="Firefox"===x()?null===navigator||void 0===navigator?void 0:navigator.userAgent:null===navigator||void 0===navigator?void 0:navigator.appVersion,y.setAttribute("sys_info",o||""),this.initSpans(),this.logger.setSessionInfo(this.stateCenter.appid,"","","","",this.version)):(this.logger.error("".concat(re," init sdk error")),this.stateCenter.reporter.setError(y,_.error.kInvalidParamError)),this.stateCenter.onListener("roomLoginResponse",this.roomLoginResponseListener)}var Gn=n(7),Wn=function(){return(Wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Hn=(zn.prototype.init=function(e,t,n){var r=this;this.tracer.init({product:this.product,version:"1.0.0",env:t,appID:e,deviceID:n,importantLevel:z.importLevel,levels:z.levels,bps:z.bps,spanStart:function(e){try{"function"==typeof scriptSpanStart&&scriptSpanStart(r.commonStates,r.tracer,e)}catch(e){r.logger.warn("zm.tc.ii dy span start ",JSON.stringify(e))}},spanBeforeEnd:function(e){e.setAttribute("ntype_end",P())},spanEnd:function(e,t){try{"function"==typeof scriptSpanEnd&&scriptSpanEnd(r.commonStates,r.tracer,e)}catch(e){r.logger.warn("zm.tc.ii dy span end ",JSON.stringify(e))}},resources:{product:this.product,appid:e,device_id:n,console:0==t?"rtc":"ali"}})},zn.prototype.setConfig=function(e){this.tracer.setConfig(e)},zn.prototype.loadScript=function(e,t,n,r){return function(e,t,n,r){return new(n=n||Promise)((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}(this,void 0,void 0,(function(){var i;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){var c=[a,u];if(n)throw new TypeError("Generator is already executing.");for(;o=s&&c[s=0]?0:o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,(c=i?[2&c[0],i.value]:c)[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3]))o.label=c[1];else if(6===c[0]&&o.label<i[1])o.label=i[1],i=c;else{if(!(i&&o.label<i[2])){i[2]&&o.ops.pop(),o.trys.pop();continue}o.label=i[2],o.ops.push(c)}}c=t.call(e,o)}catch(u){c=[6,u],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.tracer.loadJs(e,t,n,r,"\nfunction scriptSpanStart(states, tracer, span) {\n    \n}\nfunction scriptSpanEnd(states, tracer, span) {\n    if (span['tags']['msg_content']) {\n        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;\n        delete span['tags']['msg_content'];\n    }\n    delete span['tags']['resp'];\n    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];\n    if (filterSpans.includes(span.name)) {\n        console.log(span.name + ' do not report');\n        span.droped = true;\n    }\n}\nfunction scriptInit(states, tracer) {\n\n}\n\n",{})];case 1:return o.sent(),"function"==typeof scriptInit&&scriptInit(this.commonStates,this.tracer),[3,3];case 2:return i=o.sent(),this.logger.warn("zm.tc.ls"," load script fail "+JSON.stringify(i)),[3,3];case 3:return[2]}}))}))},zn.prototype.setReporterInfo=function(e,t){var n=new Map;n.set("userID",e),n.set("token",t),this.tracer.startReport(n)},zn.prototype.flush=function(e){this.tracer.flush(e)},zn.prototype.destroy=function(){this.tracer.destroy()},zn.prototype.setCommonStates=function(e){this.commonStates=e},zn.prototype.setResource=function(e){this.tracer.setResource(e)},zn.prototype.setCommonAttributes=function(e){this.commonAttrs=Object.assign({},this.commonAttrs,e)},zn.prototype.createSpan=function(e,t,n){return(e=this.tracer.createSpan(e,t,{parent:n})).setAttributes(Wn({ntype:P(),error:0,message:""},this.commonAttrs)),e},zn.prototype.spanEnd=function(e,t){e&&t&&e.setAttributes(Wn({},t)),e&&e.end()},zn.prototype.spanSetAttributes=function(e,t){e&&e.setAttributes(t)},zn.prototype.spanAppendAttribute=function(e,t,n){e&&e.appendAttribute(t,n)},zn.prototype.setError=function(e,t,n){e.setAttributes({error:t.code||t.errorCode,message:(t.msg||t.message||t.extendedData)+" "+(n=void 0===n?"":n)}),e.end()},zn.prototype.setLogger=function(e){this.tracer.setLogger(e)},zn.prototype.setTimeOffset=function(e){this.tracer.setTimeOffset(e)},zn.prototype.setUnloadState=function(e){this.isUnload=!0,this.tracer.setUnloadState(e)},zn.prototype.setNetStateCheck=function(){this.tracer.setNetStateCheck()},zn);function zn(e){this.logger=e,this.product=z.product,this.commonAttrs={},this.commonStates={},this.isUnload=!1,new Gn.DynamicCode,this.tracer=new Gn.ZegoTracer,this.tracer.setSampleConfig({level:a.L})}var Vn=["/sdk/start_publish","/publish/start","/publish/restart"],Fn=["/sdk/start_play","/play/start","/play/restart"],Xn=(Yn.prototype.init=function(e,t,n){this.tracerHandler.init(e,t,n)},Yn.prototype.setConfig=function(e){this.tracerHandler.setConfig(e)},Yn.prototype.loadScript=function(e,t,n,r){return this.tracerHandler.loadScript(e,t,n,r)},Yn.prototype.setReporterInfo=function(e,t){this.tracerHandler.setReporterInfo(e,t)},Yn.prototype.flush=function(e){this.tracerHandler.flush(e)},Yn.prototype.destroy=function(){this.tracerHandler.destroy()},Yn.prototype.setCommonStates=function(e){this.tracerHandler.setCommonStates(e)},Yn.prototype.setResource=function(e){this.tracerHandler.setResource(e)},Yn.prototype.setCommonAttributes=function(e){this.tracerHandler.setCommonAttributes(e)},Yn.prototype.setPublicPros=function(e){this.publicPros=Object.assign({},this.publicPros,e)},Yn.prototype.createSpan=function(e,t,n,r,i){var o;t&&t.key&&t.par?(s=t.par1?"_"+t.par1:"",!(o=null==(o=this.reportList[t.key])?void 0:o[t.par+s])&&t.bak_key&&(o=null==(a=this.reportList[t.bak_key])?void 0:a[t.par+s])):t&&!(o=this.reportList[t.key])&&t.bak_key&&(o=this.reportList[t.bak_key]);var s,a=this.tracerHandler.createSpan(e,r,o=o||this.reportList[Ue.event]);return"/sdk/login"===t.key&&(a.setAttribute("room_id",t.par),this.publicPros[t.par])&&a.setAttributes(this.publicPros[t.par]),(Vn.includes(t.key)||Fn.includes(t.key))&&a.setAttribute("stream_id",t.par),Vn.includes(t.key)&&this.publicPros["_publish_"+t.par]&&a.setAttributes(this.publicPros["_publish_"+t.par]),Fn.includes(t.key)&&this.publicPros["_play_"+t.par]&&a.setAttributes(this.publicPros["_play_"+t.par]),i&&(n.par?(this.reportList[n.key]||(this.reportList[n.key]={}),this.reportList[n.key][n.par+(s=n.par1?"_"+n.par1:"")]=a):this.reportList[n.key]=a),a},Yn.prototype.setSpanInMap=function(e,t){t.par?(this.reportList[t.key]||(this.reportList[t.key]={}),this.reportList[t.key][t.par+(t.par2?"_"+t.par2:"")]=e):this.reportList[t.key]=e},Yn.prototype.spanEnd=function(e,t,n){var r;e.par?(r=e.par1?"_"+e.par1:"",r=this.reportList[e.key]&&this.reportList[e.key][e.par+r],this.reportList[e.key]&&!n&&delete this.reportList[e.key][e.par]):(r=this.reportList[e.key],n||delete this.reportList[e.key]),this.tracerHandler.spanEnd(r,t)},Yn.prototype.spanSetAttributes=function(e,t){var n,r;e.par?(n=e.par1?"_"+e.par1:"",!(r=this.reportList[e.key]&&this.reportList[e.key][e.par+n])&&e.bak_key&&(r=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+n])):!(r=this.reportList[e.key])&&e.bak_key&&(r=this.reportList[e.key]),this.tracerHandler.spanSetAttributes(r,t)},Yn.prototype.spanAppendAttribute=function(e,t,n){var r,i;e.par?(r=e.par1?"_"+e.par1:"",!(i=this.reportList[e.key]&&this.reportList[e.key][e.par+r])&&e.bak_key&&(i=this.reportList[e.bak_key]&&this.reportList[e.bak_key][e.par+r])):!(i=this.reportList[e.key])&&e.bak_key&&(i=this.reportList[e.key]),this.tracerHandler.spanAppendAttribute(i,t,n)},Yn.prototype.setError=function(e,t,n){this.tracerHandler.setError(e,t,n)},Yn.prototype.setLogger=function(e){this.tracerHandler.setLogger(e)},Yn.prototype.setTimeOffset=function(e){this.tracerHandler.setTimeOffset(e)},Yn.prototype.setUnloadState=function(e){this.tracerHandler.setUnloadState(e)},Yn.prototype.setNetStateCheck=function(){this.tracerHandler.setNetStateCheck()},Yn);function Yn(e){this.logger=e,this.reportList={},this.publicPros={},this.tracerHandler=new Hn(e)}jn.prototype.enableMultiRoom=function(e){return this.zegoWebRTM.enableMultiRoom(e)},jn.prototype.loginRoom=function(e,t,n,r){return this.zegoWebRTM.loginRoom(e,t,n,r)},jn.prototype.logoutRoom=function(e){return this.zegoWebRTM.logoutRoom(e)},jn.prototype.renewToken=function(e,t){return this.zegoWebRTM.renewToken(e,t)},jn.prototype.sendBarrageMessage=function(e,t){return this.zegoWebRTM.sendBarrageMessage(e,t)},jn.prototype.sendBroadcastMessage=function(e,t){return this.zegoWebRTM.sendBroadcastMessage(e,t)},jn.prototype.sendCustomCommand=function(e,t,n){return this.zegoWebRTM.sendCustomCommand(e,t,n)},jn.prototype.setRoomExtraInfo=function(e,t,n){return this.zegoWebRTM.setRoomExtraInfo(e,t,n)},jn.prototype.setLogConfig=function(e){return this.zegoWebRTM.setLogConfig(e)},jn.prototype.setDebugVerbose=function(e){return this.zegoWebRTM.setDebugVerbose(e)},jn.prototype.on=function(e,t){return this.zegoWebRTM.on(e,t)},jn.prototype.getVersion=function(){return this.zegoWebRTM.getVersion()},jn.prototype.off=function(e,t){return this.zegoWebRTM.off(e,t)},jn.use=function(e){Un.use(e)},jn.setGeoFence=function(e,t){Un.setGeoFence(e,t)},jn.setEngineOptions=function(e){Un.setEngineOptions(e)},jn.version="2.0.0";var Kn=jn;function jn(e,t,n,r){this.logger=new i.ZegoLogger(n=void 0===n?0:n),this.dataReport=new i.ZegoDataReport(this.logger),this.reporter=new Xn(this.logger),this.zegoWebRTM=new Un(e,t,this.logger,this.dataReport,this.reporter,jn.version,n,r)}}],i={},n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19);function n(e){var t;return(i[e]||(t=i[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,n),t.l=!0,t)).exports}var r,i}(n(782),n(13))},1679:function(e){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))}},1420:function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),i=new Array(123),o=0;o<64;)i[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var i,o=null,s=[],a=0,u=0;t<n;){var c=e[t++];switch(u){case 0:s[a++]=r[c>>2],i=(3&c)<<4,u=1;break;case 1:s[a++]=r[i|c>>4],i=(15&c)<<2,u=2;break;case 2:s[a++]=r[i|c>>6],s[a++]=r[63&c],u=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=r[i],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";n.decode=function(e,t,n){for(var r,o=n,a=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&a>1)break;if(void 0===(c=i[c]))throw Error(s);switch(a){case 0:r=c,a=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,a=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,a=3;break;case 3:t[n++]=(3&r)<<6|c,a=0}}if(1===a)throw Error(s);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},138:function(e){"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},3209:function(e){"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function s(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,s=8388607&r;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,r),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,i,o){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(a=r*Math.pow(2,-u))>>>0,i,o+t),e((s<<31|u+1023<<20|1048576*a&1048575)>>>0,i,o+n)}}}function s(e,t,n,r,i){var o=e(r,i+t),s=e(r,i+n),a=2*(s>>31)+1,u=s>>>20&2047,c=4294967296*(1048575&s)+o;return 2047===u?c?NaN:a*(1/0):0===u?5e-324*a*c:a*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function n(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},4556:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},3794:function(e){"use strict";e.exports=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){if(n<1||n>i)return e(n);s+n>r&&(o=e(r),s=0);var a=t.call(o,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},2482:function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],s=0;t<n;)(r=e[t++])<128?o[s++]=r:r>191&&r<224?o[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(++s,t[n++]=(r=65536+((1023&r)<<10)+(1023&i))>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},13:function(e,t,n){
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
e.exports=function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,(function(e){var n=t[s][1][e];return i(n||e)}),c,c.exports,e,t,n,r)}return n[s].exports}for(var o=void 0,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,s=new i(l),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,n=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}function h(e){1!==c.push(e)||r||n()}t.exports=h}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var o={},s=["REJECTED"],a=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function l(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}function s(){t(i,r)}var a=p(s);"error"===a.status&&r(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}function g(e){return e instanceof this?e:o.resolve(new this(i),e)}function m(e){var t=new this(i);return o.reject(t,e)}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,u=-1,c=new this(i);++u<n;)l(e[u],u);return c;function l(e,i){function u(e){s[i]=e,++a!==n||r||(r=!0,o.resolve(c,s))}t.resolve(e).then(u,(function(e){r||(r=!0,o.reject(c,e))}))}}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var s=-1,a=new this(i);++s<n;)u(e[s]);return a;function u(e){t.resolve(e).then((function(e){r||(r=!0,o.resolve(a,e))}),(function(e){r||(r=!0,o.reject(a,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===s)return this;var n=new this.constructor(i);return this.state!==u?h(n,this.state===a?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){o.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)f(e,r);else{e.state=a,e.outcome=t;for(var i=-1,s=e.queue.length;++i<s;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=s,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=g,c.reject=m,c.all=_,c.race=y},{1:1}],3:[function(e,t,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var s=o();function a(){try{if(!s||!s.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function h(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function d(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function f(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",g=void 0,m={},_=Object.prototype.toString,y="readonly",v="readwrite";function b(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function S(e){return new c((function(t){var n=e.transaction(p,v),r=u([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function E(e){return"boolean"==typeof g?c.resolve(g):S(e).then((function(e){return g=e}))}function T(e){var t=m[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady=t.dbReady?t.dbReady.then((function(){return n.promise})):n.promise}function w(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function C(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function I(e,t){return new c((function(n,r){if(m[e.name]=m[e.name]||M(),e.db){if(!t)return n(e.db);T(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=s.open.apply(s,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(e){e.preventDefault(),r(o.error)},o.onsuccess=function(){var t=o.result;t.onversionchange=function(e){e.target.close()},n(t),w(e)}}))}function R(e){return I(e,!1)}function k(e){return I(e,!0)}function N(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version>e.db.version;if(e.version<e.db.version&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),r||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function O(e){return new c((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function L(e){return u([b(atob(e.data))],{type:e.type})}function A(e){return e&&e.__local_forage_encoded_blob}function x(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return h(n,e,e),n}function P(e){T(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,R(e).then((function(t){return e.db=t,N(e)?k(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw C(e,t),t}))}function Z(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),k(e)})).then((function(){return P(e).then((function(){Z(e,t,n,r-1)}))})).catch(n);n(i)}}function M(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function D(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=m[n.name];i||(i=M(),m[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=x);var o=[];function s(){return c.resolve()}for(var a=0;a<i.forages.length;a++){var u=i.forages[a];u!==t&&o.push(u._initReady().catch(s))}var l=i.forages.slice(0);return c.all(o).then((function(){return n.db=i.db,R(n)})).then((function(e){return n.db=e,N(n,t._defaultConfig.version)?k(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var o=l[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))}function U(e,t){var n=this;e=d(e);var r=new c((function(t,r){n.ready().then((function(){Z(n._dbInfo,y,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).get(e);s.onsuccess=function(){var e=s.result;void 0===e&&(e=null),A(e)&&(e=L(e)),t(e)},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function B(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){Z(n._dbInfo,y,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).openCursor(),a=1;s.onsuccess=function(){var n=s.result;if(n){var r=n.value;A(r)&&(r=L(r));var i=e(r,n.key,a++);void 0!==i?t(i):n.continue()}else t()},s.onerror=function(){r(s.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function G(e,t,n){var r=this;e=d(e);var i=new c((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===_.call(t)?E(o.db).then((function(e){return e?t:O(t)})):t})).then((function(t){Z(r._dbInfo,v,(function(o,s){if(o)return i(o);try{var a=s.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var u=a.put(t,e);s.oncomplete=function(){void 0===t&&(t=null),n(t)},s.onabort=s.onerror=function(){i(u.error?u.error:u.transaction.error)}}catch(e){i(e)}}))})).catch(i)}));return l(i,n),i}function W(e,t){var n=this;e=d(e);var r=new c((function(t,r){n.ready().then((function(){Z(n._dbInfo,v,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(s.error)},o.onabort=function(){r(s.error?s.error:s.transaction.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function H(e){var t=this,n=new c((function(e,n){t.ready().then((function(){Z(t._dbInfo,v,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){n(o.error?o.error:o.transaction.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function z(e){var t=this,n=new c((function(e,n){t.ready().then((function(){Z(t._dbInfo,y,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function V(e,t){var n=this,r=new c((function(t,r){e<0?t(null):n.ready().then((function(){Z(n._dbInfo,y,(function(i,o){if(i)return r(i);try{var s=o.objectStore(n._dbInfo.storeName),a=!1,u=s.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===e||a?t(n.key):(a=!0,n.advance(e)):t(null)},u.onerror=function(){r(u.error)}}catch(e){r(e)}}))})).catch(r)}));return l(r,t),r}function F(e){var t=this,n=new c((function(e,n){t.ready().then((function(){Z(t._dbInfo,y,(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openKeyCursor(),s=[];o.onsuccess=function(){var t=o.result;t?(s.push(t.key),t.continue()):e(s)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return l(n,e),n}function X(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;if(e.name){var o=e.name===n.name&&i._dbInfo.db?c.resolve(i._dbInfo.db):R(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=o.then(e.storeName?function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;T(e);var r=m[e.name],i=r.forages;t.close();for(var o=0;o<i.length;o++){var a=i[o];a._dbInfo.db=null,a._dbInfo.version=n}var u=new c((function(t,r){var i=s.open(e.name,n);i.onerror=function(e){i.result.close(),r(e)},i.onupgradeneeded=function(){i.result.deleteObjectStore(e.storeName)},i.onsuccess=function(){var e=i.result;e.close(),t(e)}}));return u.then((function(e){r.db=e;for(var t=0;t<i.length;t++){var n=i[t];n._dbInfo.db=e,w(n._dbInfo)}})).catch((function(t){throw(C(e,t)||c.resolve()).catch((function(){})),t}))}}:function(t){T(e);var n=m[e.name],r=n.forages;t.close();for(var i=0;i<r.length;i++)r[i]._dbInfo.db=null;var o=new c((function(t,n){var r=s.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return o.then((function(e){n.db=e;for(var t=0;t<r.length;t++)w(r[t]._dbInfo)})).catch((function(t){throw(C(e,t)||c.resolve()).catch((function(){})),t}))})}else r=c.reject("Invalid arguments");return l(r,t),r}var Y={_driver:"asyncStorage",_initStorage:D,_support:a(),iterate:B,getItem:U,setItem:G,removeItem:W,clear:H,length:z,key:V,keys:F,dropInstance:X};function K(){return"function"==typeof openDatabase}var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,q="__lfsc__:",$=q.length,ee="arbf",te="blob",ne="si08",re="ui08",ie="uic8",oe="si16",se="si32",ae="ur16",ue="ui32",ce="fl32",le="fl64",he=$+ee.length,de=Object.prototype.toString;function fe(e){var t,n,r,i,o,s=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),l=new Uint8Array(c);for(t=0;t<a;t+=4)n=j.indexOf(e[t]),r=j.indexOf(e[t+1]),i=j.indexOf(e[t+2]),o=j.indexOf(e[t+3]),l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=j[n[t]>>2],r+=j[(3&n[t])<<4|n[t+1]>>4],r+=j[(15&n[t+1])<<2|n[t+2]>>6],r+=j[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}function ge(e,t){var n="";if(e&&(n=de.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===de.call(e.buffer))){var r,i=q;e instanceof ArrayBuffer?(r=e,i+=ee):(r=e.buffer,"[object Int8Array]"===n?i+=ne:"[object Uint8Array]"===n?i+=re:"[object Uint8ClampedArray]"===n?i+=ie:"[object Int16Array]"===n?i+=oe:"[object Uint16Array]"===n?i+=ae:"[object Int32Array]"===n?i+=se:"[object Uint32Array]"===n?i+=ue:"[object Float32Array]"===n?i+=ce:"[object Float64Array]"===n?i+=le:t(new Error("Failed to get type for BinaryArray"))),t(i+pe(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=J+e.type+"~"+pe(this.result);t(q+te+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}}function me(e){if(e.substring(0,$)!==q)return JSON.parse(e);var t,n=e.substring(he),r=e.substring($,he);if(r===te&&Q.test(n)){var i=n.match(Q);t=i[1],n=n.substring(i[0].length)}var o=fe(n);switch(r){case ee:return o;case te:return u([o],{type:t});case ne:return new Int8Array(o);case re:return new Uint8Array(o);case ie:return new Uint8ClampedArray(o);case oe:return new Int16Array(o);case ae:return new Uint16Array(o);case se:return new Int32Array(o);case ue:return new Uint32Array(o);case ce:return new Float32Array(o);case le:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}var _e={serialize:ge,deserialize:me,stringToBuffer:fe,bufferToString:pe};function ye(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ve(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new c((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(i){ye(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=_e,i}function be(e,t,n,r,i,o){e.executeSql(n,r,i,(function(e,s){s.code===s.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,a){a.rows.length?o(e,s):ye(e,t,(function(){e.executeSql(n,r,i,o)}),o)}),o):o(e,s)}),o)}function Se(e,t){var n=this;e=d(e);var r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){be(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ee(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){be(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,s=o.length,a=0;a<s;a++){var u=o.item(a),c=u.value;if(c&&(c=i.serializer.deserialize(c)),void 0!==(c=e(c,u.key,a+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Te(e,t,n,r){var i=this;e=d(e);var o=new c((function(o,s){i.ready().then((function(){void 0===t&&(t=null);var a=t,u=i._dbInfo;u.serializer.serialize(t,(function(t,c){c?s(c):u.db.transaction((function(n){be(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(a)}),(function(e,t){s(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(Te.apply(i,[e,a,n,r-1]));s(t)}}))}))})).catch(s)}));return l(o,n),o}function we(e,t,n){return Te.apply(this,[e,t,n,1])}function Ce(e,t){var n=this;e=d(e);var r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){be(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ie(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Re(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function ke(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){be(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ne(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){be(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Oe(e){return new c((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Le(e,t){t=f.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return l(r=e.name?new c((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),t(e.storeName?{db:r,storeNames:[e.storeName]}:Oe(r))})).then((function(e){return new c((function(t,n){e.db.transaction((function(r){function i(e){return new c((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],s=0,a=e.storeNames.length;s<a;s++)o.push(i(e.storeNames[s]));c.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),t),r}var Ae={_driver:"webSQLStorage",_initStorage:ve,_support:K(),iterate:Ee,getItem:Se,setItem:we,removeItem:Ce,clear:Ie,length:Re,key:ke,keys:Ne,dropInstance:Le};function xe(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Pe(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Ze(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}function Me(){return!Ze()||localStorage.length>0}function De(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Pe(e,t._defaultConfig),Me()?(t._dbInfo=n,n.serializer=_e,c.resolve()):c.reject()}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return l(n,e),n}function Be(e,t){var n=this;e=d(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return l(r,t),r}function Ge(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,s=1,a=0;a<o;a++){var u=localStorage.key(a);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(i),s++)))return c}}}));return l(r,t),r}function We(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return l(r,t),r}function He(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return l(n,e),n}function ze(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function Ve(e,t){var n=this;e=d(e);var r=n.ready().then((function(){localStorage.removeItem(n._dbInfo.keyPrefix+e)}));return l(r,t),r}function Fe(e,t,n){var r=this;e=d(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(i,o){var s=r._dbInfo;s.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(s.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return l(i,n),i}function Xe(e,t){if(t=f.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return r=e.name?new c((function(t){t(e.storeName?Pe(e,i._defaultConfig):e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),l(r,t),r}var Ye={_driver:"localStorageWrapper",_initStorage:De,_support:xe(),iterate:Ge,getItem:Be,setItem:Fe,removeItem:Ve,clear:Ue,length:ze,key:We,keys:He,dropInstance:Xe},Ke=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},je=function(e,t){for(var n=e.length,r=0;r<n;){if(Ke(e[r],t))return!0;r++}return!1},Je=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Qe={},qe={},$e={INDEXEDDB:Y,WEBSQL:Ae,LOCALSTORAGE:Ye},et=[$e.INDEXEDDB._driver,$e.WEBSQL._driver,$e.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function it(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function ot(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(arguments[0][n]=Je(t[n])?t[n].slice():t[n])}return arguments[0]}var st=function(){function e(t){for(var n in i(this,e),$e)if($e.hasOwnProperty(n)){var r=$e[n],o=r._driver;this[n]=o,Qe[o]||this.defineDriver(r)}this._defaultConfig=ot({},rt),this._config=ot({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new c((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=nt.concat("_initStorage"),s=0,a=o.length;s<a;s++){var u=o[s];if((!je(tt,u)||e[u])&&"function"!=typeof e[u])return void n(i)}var h=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return l(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var i=tt[n];e[i]||(e[i]=t(i))}};h();var d=function(n){Qe[r]&&console.info("Redefining LocalForage driver: "+r),Qe[r]=e,qe[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(d,n):d(!!e._support):d(!0)}catch(e){n(e)}}));return h(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Qe[e]?c.resolve(Qe[e]):c.reject(new Error("Driver not found."));return h(r,t,n),r},e.prototype.getSerializer=function(e){var t=c.resolve(_e);return h(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return h(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Je(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function s(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}function a(e){return function(){var t=0;function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}o();var a=new Error("No available storage method found.");return r._driverSet=c.reject(a),r._driverSet}return n()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=a(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=c.reject(e),r._driverSet})),h(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!qe[e]},e.prototype._extend=function(e){ot(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)it(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),at=new st;t.exports=at},{3:3}]},{},[4])(4)},782:function(e,t,n){"use strict";e.exports=n(4656)},4656:function(e,t,n){"use strict";var r=t;function i(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(8401),r.BufferWriter=n(4927),r.Reader=n(4961),r.BufferReader=n(6794),r.util=n(7775),r.rpc=n(2786),r.roots=n(8885),r.configure=i,i()},4961:function(e,t,n){"use strict";e.exports=u;var r,i=n(7775),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}var c,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")},h=function(){return i.Buffer?function(e){return(u.create=function(e){return i.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}u.create=h(),u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){r=e,u.create=h(),r._configure();var t=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},6794:function(e,t,n){"use strict";e.exports=o;var r=n(4961);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(7775);function o(e){r.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},8885:function(e){"use strict";e.exports={}},2786:function(e,t,n){"use strict";t.Service=n(1266)},1266:function(e,t,n){"use strict";e.exports=i;var r=n(7775);function i(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,n,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof i))try{n=i[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},3686:function(e,t,n){"use strict";e.exports=i;var r=n(7775);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(r.isString(e)){if(!r.Long)return i.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},7775:function(e,t,n){"use strict";var r=t;function i(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function o(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(1679),r.base64=n(1420),r.EventEmitter=n(138),r.float=n(3209),r.inquire=n(4556),r.utf8=n(2482),r.pool=n(3794),r.LongBits=n(3686),r.isNode=Boolean(void 0!==n.g&&n.g&&n.g.process&&n.g.process.versions&&n.g.process.versions.node),r.global=r.isNode&&n.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=i,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=o,r.ProtocolError=o("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&null!=this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},8401:function(e,t,n){"use strict";e.exports=h;var r,i=n(7775),o=i.LongBits,s=i.base64,a=i.utf8;function u(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new r})()}:function(){return new h}};function f(e,t,n){t[n]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function m(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,n){return this.tail=this.tail.next=new u(e,t,n),this.len+=t,this},(p.prototype=Object.create(u.prototype)).fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.int64=h.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},h.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(f,1,e?1:0)},h.prototype.sfixed32=h.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},h.prototype.sfixed64=h.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var _=i.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var n=h.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(_,t,e)},h.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},h.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},h._configure=function(e){r=e,h.create=d(),r._configure()}},4927:function(e,t,n){"use strict";e.exports=o;var r=n(8401);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(7775);function o(){r.call(this)}function s(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},3828:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return function(){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BackgroundProcess:function(){return qe}});var e,t,n={code:1103054,message:"no preview"},r={code:1000018,message:"local stream wrong"},i={code:1100001,message:"input param error."},o={code:1103090,message:"background blur model failed to init."},s={code:1103091,message:"use background blur before loading model"},a={code:1103094,message:"localstream video is muted, please open it with api 'mutePublishStreamVideo'."},u={code:1103095,message:"background blur process node is not inited."},c={code:1103096,message:"background blur not support."},l={code:1103097,message:"background blur track error"},h={code:1103098,message:"background effect overload"},d={code:1103070,message:"background process is start, but not subscribe yet"},f=function(e){return e},p="/sdk/init",g="/sdk/init_background_process",m=f,_="/sdk/enable_background_process",y=function(e){return e},v=function(e){return e},b=f,S="zc.p.0.bbm.0",E="zc.p.0.ebbr",T="zc.p.0.bbp.da",w="zc.p.0.bbp.ea",C="zc.p.0.bbp.0",I=function(){function e(){}return e.createError=function(e,t){return{code:e.code,message:e.message+(t?" "+t:"")}},e}(),R=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},k=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},N=function(){function e(){}return e.prototype.connect=function(e){return R(this,void 0,void 0,(function(){return k(this,(function(t){switch(t.label){case 0:return this.next=e,this.output?[4,e.setInput(this.output)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,e]}}))}))},e.prototype.disconnect=function(){return R(this,void 0,void 0,(function(){return k(this,(function(e){switch(e.label){case 0:return this.next?[4,this.next.setInput(null)]:[3,2];case 1:e.sent(),this.next=void 0,e.label=2;case 2:return[2]}}))}))},e}(),O=function(){function e(e){this.gl=e,this.program=null,this.program=null}return e.prototype.createProgram=function(e,t){var n=this.gl,r=this.loadShader(n.VERTEX_SHADER,e),i=this.loadShader(n.FRAGMENT_SHADER,t);if(!r||!i)return null;var o=n.createProgram();return o?(this.program=o,n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),o):null},e.prototype.loadShader=function(e,t){var n=this.gl,r=n.createShader(e);return null==r?null:(n.shaderSource(r,t),n.compileShader(r),r)},e.prototype.deleteProgram=function(){var e;this.program&&(null===(e=this.gl)||void 0===e||e.deleteProgram(this.program))},e}(),L="\nattribute vec4 aPosition;\nattribute vec2 aTexCoord;\nattribute vec2 aTexCoord2;\n\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\n\nvoid main(){\n    gl_Position = aPosition;\n    vTexCoord = aTexCoord;\n    vTexCoord2 = aTexCoord2;\n}\n",A=__webpack_require__(4407),x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Z="zc.p.0.sbe.4",M=function(){function e(e,t){this.stateCenter=e,this.logger=t,this.recordedFrameCount=0,this.targetFrameRate=0,this.recordingDuration=0,this.modelTimes={max:0,a:0,b:0,c:0,d:0,count:0},this.renderTimes={max:0,count:0},this.recordAnalysisInterval=30,this.enableStat=!1}return e.prototype.startRecordBackgroundEffectOutput=function(e){return x(this,void 0,void 0,(function(){var t,n,r,i=this;return P(this,(function(o){switch(o.label){case 0:return this.enableStat=!!this.stateCenter.settingConfig.getSetting("bg_fps_stat"),this.enableStat&&(this.recordTimer=setTimeout((function(){i.recordFps()}),1e3*this.recordAnalysisInterval)),t=6,this.recordID?(this.logger.warn(Z+" detector is already recording"),[2,{result:!0}]):(n=(new Date).getTime(),this.recordID=n,this.targetFrameRate=e,this.recordedFrameCount=0,this.recordingDuration=t,[4,new Promise((function(e){window.setTimeout(e,1e3*i.recordingDuration)}))]);case 1:return o.sent(),this.recordID!==n?(this.recordID=void 0,[2,{result:!0}]):(this.recordID=void 0,r=this.recordedFrameCount/t,this.recordedFrameCount<this.targetFrameRate*this.recordingDuration/2?(this.logger.warn(Z+" detect effect overload: current fps: "+r),[2,{result:!1,targetFPS:this.targetFrameRate,currentFPS:r}]):(this.logger.info(Z+" detect effect current fps: "+r),[2,{result:!0}]))}}))}))},e.prototype.recordFps=function(){var e=this;this.recordTimer&&(clearTimeout(this.recordTimer),this.recordTimer=null);var t=this.renderTimes.count/this.recordAnalysisInterval;this.logger.info(Z+" bgd m: "+this.modelTimes.max+" mf: "+this.modelTimes.count/this.recordAnalysisInterval+" "+JSON.stringify([this.modelTimes.a,this.modelTimes.b,this.modelTimes.c,this.modelTimes.d])+"; r: "+this.renderTimes.max+" rf: "+t),this.clearData(),this.recordTimer=setTimeout((function(){e.recordFps()}),1e3*this.recordAnalysisInterval)},e.prototype.stopRecordFps=function(){this.recordTimer&&(clearTimeout(this.recordTimer),this.recordTimer=null),this.clearData()},e.prototype.clearData=function(){this.modelTimes.count=0,this.modelTimes.a=this.modelTimes.b=this.modelTimes.c=this.modelTimes.d=0,this.renderTimes.count=0,this.modelTimes.max=0,this.renderTimes.max=0},e.prototype.stopRecordBeautyEffectOutput=function(){this.recordedFrameCount=this.targetFrameRate=0,this.recordID=void 0,this.stopRecordFps()},e.prototype.addFrame=function(){this.recordID&&(this.recordedFrameCount+=1)},e.prototype.addFrameTime=function(e,t){this.enableStat&&("model"===e?(this.modelTimes.max=Math.max(this.modelTimes.max,t),this.modelTimes.count++,this.distributeStat(this.modelTimes,t)):"render"===e&&(this.renderTimes.max=Math.max(this.renderTimes.max,t),this.renderTimes.count++))},e.prototype.distributeStat=function(e,t){switch(!0){case t<=20&&t>0:e.a++;break;case t<=35&&t>20:e.b++;break;case t<=50&&t>35:e.c++;break;case t>50:e.d++}},e}();__webpack_require__(4545);!function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error",e[e.report=99]="report",e[e.disable=100]="disable"}(e||(e={})),function(e){e[e.CN=2]="CN",e[e.NA=3]="NA",e[e.EU=4]="EU",e[e.AS=5]="AS",e[e.IN=6]="IN",e[e.NCN=7]="NCN"}(t||(t={}));var D,U;!function(e){e[e.disable=0]="disable",e[e.websocket=1]="websocket",e[e.https=2]="https"}(D||(D={})),function(e){e[e.SDKProject_Other=0]="SDKProject_Other",e[e.SDKProject_ZegoExpressVideo=1]="SDKProject_ZegoExpressVideo",e[e.SDKProject_ZegoExpressAudio=2]="SDKProject_ZegoExpressAudio",e[e.SDKProject_ZegoLiveRoom=3]="SDKProject_ZegoLiveRoom",e[e.SDKProject_ZegoAudioRoom=4]="SDKProject_ZegoAudioRoom",e[e.SDKProject_ZegoAVKit=5]="SDKProject_ZegoAVKit",e[e.SDKProject_ZegoWebRTC=6]="SDKProject_ZegoWebRTC",e[e.SDKProject_ZegoMiniProgram=7]="SDKProject_ZegoMiniProgram"}(U||(U={}));var B;!function(e){e[e.disconnected=0]="disconnected",e[e.connecting=1]="connecting",e[e.connected=2]="connected"}(B||(B={}));var G,W,H;!function(e){e[e.tryProbe=0]="tryProbe",e[e.probed=2]="probed"}(G||(G={})),function(e){e[e.CDN=0]="CDN",e[e.RTC=1]="RTC",e[e.L3=2]="L3",e[e.DG=3]="DG"}(W||(W={})),function(e){e[e.UDP=0]="UDP",e[e.RTMP=1]="RTMP",e[e.FLV=2]="FLV",e[e.HLS=3]="HLS",e[e.WEBRTC=4]="WEBRTC"}(H||(H={}));var z,V,F;!function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login"}(z||(z={})),function(e){e[e.logout=0]="logout",e[e.trylogin=1]="trylogin",e[e.login=2]="login",e[e.reconnect=3]="reconnect"}(V||(V={})),function(e){e[e.offline=0]="offline",e[e.online=1]="online"}(F||(F={}));var X;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CDN=1]="CDN",e[e.RTC=2]="RTC",e[e.L3=3]="L3"}(X||(X={}));var Y;!function(e){e[e.low=1]="low",e[e.stantard=2]="stantard",e[e.hight=3]="hight",e[e.custome=4]="custome"}(Y||(Y={}));var K,j,J,Q,q,$;!function(e){e[e.captureFpsToLow=1001]="captureFpsToLow",e[e.captureVolumeToLow=1002]="captureVolumeToLow",e[e.sendVideoBitrateToLow=1003]="sendVideoBitrateToLow",e[e.sendFpsToLow=1004]="sendFpsToLow",e[e.sendAudioBitrateToLow=1005]="sendAudioBitrateToLow",e[e.receiveVolumeToLow=1006]="receiveVolumeToLow",e[e.receiveAudioDecodedFail=1007]="receiveAudioDecodedFail",e[e.receiveVideoDecodedFail=1008]="receiveVideoDecodedFail",e[e.receiveVideoFpsDecodedToLow=1009]="receiveVideoFpsDecodedToLow",e[e.renderVideoFpsToLow=1010]="renderVideoFpsToLow",e[e.captureFpsNormal=2001]="captureFpsNormal",e[e.captureVolumeNormal=2002]="captureVolumeNormal",e[e.sendVideoBitrateNormal=2003]="sendVideoBitrateNormal",e[e.sendFpsNormal=2004]="sendFpsNormal",e[e.sendAudioBitrateNormal=2005]="sendAudioBitrateNormal",e[e.receiveVolumeNormal=2006]="receiveVolumeNormal",e[e.receiveAudioDecodedNormal=2007]="receiveAudioDecodedNormal",e[e.receiveVideoDecodedNormal=2008]="receiveVideoDecodedNormal",e[e.receiveVideoFpsDecodedNormal=2009]="receiveVideoFpsDecodedNormal",e[e.renderVideoFpsNormal=2010]="renderVideoFpsNormal"}(K||(K={})),function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra"}(j||(j={})),function(e){e[e.stop=0]="stop",e[e.start=1]="start"}(J||(J={})),function(e){e[e.cdn=0]="cdn",e[e.ultra=1]="ultra",e[e.customUrl=2]="customUrl"}(Q||(Q={})),function(e){e[e.CDN=0]="CDN",e[e.BGP=1]="BGP"}(q||(q={})),function(e){e[e.ClientType_None=0]="ClientType_None",e[e.ClientType_H5=1]="ClientType_H5",e[e.ClientType_SmallPragram=2]="ClientType_SmallPragram",e[e.ClientType_Webrtc=3]="ClientType_Webrtc"}($||($={}));var ee,te,ne,re,ie,oe,se,ae,ue,ce,le,he,de=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this._id=null,this.next=null,this.prev=null,this._id=e,this._data=t}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id?this._id:null},set:function(e){this._id=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e},enumerable:!1,configurable:!0}),e.prototype.hasNext=function(){return this.next&&this.next.id},e.prototype.hasPrev=function(){return this.prev&&this.prev.id},e}();!function(){function e(){this.start=new de,this.end=new de,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}e.prototype.insertBefore=function(e,t){var n=new de(this._idCounter,t);return n.next=e,n.prev=e.prev,e.prev&&(e.prev.next=n),e.prev=n,++this._idCounter,++this._numNodes,n},e.prototype.addLast=function(e){return this.insertBefore(this.end,e)},e.prototype.add=function(e){return this.addLast(e)},e.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},e.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},e.prototype.size=function(){return this._numNodes},e.prototype.getFromFirst=function(e){var t=0,n=this.start.next;if(e>=0)for(;t<e&&null!==n;)n=n.next,++t;else n=null;if(null===n)throw"Index out of bounds.";return n},e.prototype.get=function(e){return 0===e?this.getFirst():e===this._numNodes-1?this.getLast():this.getFromFirst(e)},e.prototype.remove=function(e){return e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),--this._numNodes,e},e.prototype.removeFirst=function(){var e=null;return this._numNodes>0&&this.start.next&&(e=this.remove(this.start.next)),e},e.prototype.removeLast=function(){var e=null;return this._numNodes>0&&this.end.prev&&(e=this.remove(this.end.prev)),e},e.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},e.prototype.each=function(e){for(var t=this.start;t.hasNext();)e(t=t.next)},e.prototype.find=function(e){for(var t=this.start,n=!1,r=null;t.hasNext()&&!n;)e(t=t.next)&&(r=t,n=!0);return r},e.prototype.map=function(e){for(var t=this.start,n=[];t.hasNext();)e(t=t.next)&&n.push(t);return n},e.prototype.push=function(e){return this.addLast(e)},e.prototype.unshift=function(e){this.insertBefore(this._numNodes>0?this.start.next:this.end,e)},e.prototype.pop=function(){return this.removeLast()},e.prototype.shift=function(){return this.removeFirst()}}();!function(e){e[e.Unknown=-1]="Unknown",e[e.Excellent=0]="Excellent",e[e.Good=1]="Good",e[e.Middle=2]="Middle",e[e.Poor=3]="Poor",e[e.Die=4]="Die"}(ee||(ee={})),function(e){e[e.MinQuality=0]="MinQuality",e[e.DieQuality=0]="DieQuality",e[e.PoorMinQuality=1]="PoorMinQuality",e[e.MiddleMinQuality=30]="MiddleMinQuality",e[e.GoodMinQuality=60]="GoodMinQuality",e[e.ExcellentMinQuality=85]="ExcellentMinQuality",e[e.MaxQuality=100]="MaxQuality"}(te||(te={})),function(e){e[e.ZegoDefined=0]="ZegoDefined",e[e.UserUnregister=1]="UserUnregister"}(ne||(ne={})),function(e){e[e.CDN=0]="CDN",e[e.L3=1]="L3"}(re||(re={})),function(e){e[e.RTC=0]="RTC",e[e.CDN=1]="CDN",e[e.L3=2]="L3",e[e.DG=3]="DG"}(ie||(ie={})),function(e){e[e.PortraitSegmentation=0]="PortraitSegmentation"}(oe||(oe={})),function(e){e[e.Default=3]="Default",e[e.StandardVideoCall=4]="StandardVideoCall",e[e.HighVideoCall=5]="HighVideoCall",e[e.StandardChatroom=6]="StandardChatroom",e[e.HighQualityChatroom=7]="HighQualityChatroom",e[e.Broadcast=8]="Broadcast"}(se||(se={})),function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(ae||(ae={})),function(e){e[e.BASE_LINE=1]="BASE_LINE",e[e.MAIN=2]="MAIN",e[e.HIGH=3]="HIGH"}(ue||(ue={})),function(e){e.ONLY_BASELINE="only_baseline",e.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first",e.HIGH_PROFILE_FIRST="high_profile_first"}(ce||(ce={})),function(e){e[e.useAnalyzer=0]="useAnalyzer",e[e.useWorklet=1]="useWorklet"}(le||(le={})),function(e){e[e.None=0]="None",e[e.Vocalist=1]="Vocalist",e[e.BackingSinging=2]="BackingSinging"}(he||(he={}));var fe;!function(e){e.WIN32="WIN32",e.MAC="Mac",e.ANDROID="Android",e.LINUX="Linux",e.IOS="iOS",e.UNKNOWN="WTF"}(fe||(fe={}));var pe,ge=(pe=function(e,t){return pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},pe(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}pe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),me=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},_e=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},ye=I.createError,ve={contain:0,cover:1,fill:2},be=function(e){function t(t,n,r,i){var o=e.call(this)||this;o.logger=t,o.stateCenter=n,o.preview=r,o.onnxs=i,o.gl=null,o.videoTexture=null,o.bgImgTexture=null,o.alphaDataType=Ue,o.focalNum=25,o.shouldRun=!1,o.renderId=0,o.runErrorCounter=0,o.lastRenderTime=0,o.isRending=!1,o.vertices=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]),o.options={type:"blur",objectFit:"cover"},o.fps=15,o.fit=1,o.videoInited=!1,o.vw=0,o.vh=0,o.renderQueue=[],o.renderCount=0,o.isRelease=!1,o.failedTimes=0,o.canvas=document.createElement("canvas"),o.imgCanvas=document.createElement("canvas"),o.imgCanvas.width=Me,o.imgCanvas.height=De,o.imgCtx=o.imgCanvas.getContext("2d",{willReadFrequently:!0}),o.fitCanvas=document.createElement("canvas"),o.input=r.videoTrack,o.modelTime=document.getElementById("model_time"),"Safari"==n.browserInfo.name&&(o.renTime=document.createElement("label"),o.renTime.setAttribute("style","visibility:hidden"),document.body.append(o.renTime));var s,a,u,c=(u=document.createElement("video"),s&&(u.style.width=s+"px;"),a&&(u.style.height=a+"px;"),u.setAttribute("muted",""),u.setAttribute("autoplay",""),u.muted=!0,u.autoplay=!0,u.setAttribute("playsinline",""),u.setAttribute("webkit-playsinline",""),u);return o.video=c,o.detector=new M(n,t),o.logger.info(C+" background blur node inited"),o}return ge(t,e),Object.defineProperty(t.prototype,"frameGap",{get:function(){return 1e3/this.fps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){return this.canvasTrack&&"live"===this.canvasTrack.readyState||(this.canvasTrack=this.getCanvasTrack(this.canvas)),this.canvasTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderCanvas",{get:function(){return this.canvas},enumerable:!1,configurable:!0}),t.prototype.connect=function(e){return me(this,void 0,void 0,(function(){return _e(this,(function(t){return this.next=e,this.clearCanvas(),this.canvasTrack=this.getCanvasTrack(this.canvas),this.isRending&&this.outputChange(),[2,e]}))}))},t.prototype.outputChange=function(){var e;return me(this,void 0,void 0,(function(){return _e(this,(function(t){switch(t.label){case 0:return this.output?[4,null===(e=this.next)||void 0===e?void 0:e.setInput(this.canvasTrack)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},Object.defineProperty(t.prototype,"enabled",{get:function(){return this.shouldRun},enumerable:!1,configurable:!0}),t.prototype.updateCanvasTrack=function(){this.canvasTrack=this.getCanvasTrack(this.canvas),this.replaceNextNodeTrack(this.canvasTrack)},t.prototype.videoPlaying=function(){return me(this,void 0,void 0,(function(){var e=this;return _e(this,(function(t){switch(t.label){case 0:if(this.logger.info(C+" wait video playing call "+this.video.paused),!this.video.paused)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,new Promise((function(t,n){var r=null,i=function(){e.video.removeEventListener("playing",i),e.logger.info(C+" video playing."),r&&window.clearTimeout(r),setTimeout((function(){t()}),"firefox"===e.stateCenter.browser?100:0)};e.video.addEventListener("playing",i),e.video.play(),r=window.setTimeout((function(){r&&(clearTimeout(r),r=null),e.video.play().catch((function(e){console.error(e)})),r=window.setTimeout((function(){e.logger.warn(C+" video track error"),n()}),1e3)}),1e3)}))];case 2:return t.sent(),[3,4];case 3:throw t.sent(),ye(l);case 4:this.logger.info(C+" wait video playing end"),t.label=5;case 5:return[2]}}))}))},t.prototype.resetTexture=function(e){if(this.gl){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null)}},t.prototype.setRenderResolution=function(e,t){this.vw=e,this.vh=t,this.canvas.width=e,this.canvas.height=t,this.fitCanvas.width=e,this.fitCanvas.height=t,this.width=e,this.height=t},t.prototype.initVideo=function(e){return me(this,void 0,void 0,(function(){var t,n,r,i;return _e(this,(function(o){switch(o.label){case 0:return this.video?(this.video.srcObject?((t=this.video.srcObject).getTracks().forEach((function(e){return t.removeTrack(e)})),t.addTrack(e)):this.video.srcObject=new MediaStream([e]),[4,this.videoPlaying()]):[2];case 1:return o.sent(),n=e.getSettings().width||this.video.videoWidth,r=e.getSettings().height||this.video.videoHeight,this.setRenderResolution(n,r),this.initWebGL(n,r),this.logger.info(C+" iv "+n+" "+r),"number"==typeof(i=e.getSettings().frameRate)&&i!==this.fps&&(this.fps=i),this.videoInited=!0,this.setBackgroundImgTexture(),this.logger.info(C+" video inited."),[2]}}))}))},t.prototype.getCanvasTrack=function(e){return e.captureStream(this.fps).getVideoTracks()[0]},t.prototype.replaceOutputTrack=function(){this.isRending||(this.isRending=!0,this.outputChange())},t.prototype.render=function(e){var t=this;this.requestAnimationTimer&&(clearTimeout(this.requestAnimationTimer),this.requestAnimationTimer=null);var n=0===this.lastRenderTime,r=Date.now();this.lastRenderTime=r,this.runTask().then((function(){var i=Date.now();n&&t.executeRenderingTasks();var o=i-r;t.detector.addFrameTime("model",o),t.shouldRun&&t.renderId==e&&(t.requestAnimationTimer=setTimeout((function(){t.render(e)}),o<t.frameGap?t.frameGap-o:0))})).catch((function(e){-1===(null==e?void 0:e.code)&&"firefox"===t.stateCenter.browser&&(t.requestAnimationTimer=setTimeout((function(){t.stopRendering(),t.startRendering()}),100))}))},t.prototype.runTask=function(){return this.runAlphaDatas()},t.prototype.runAlphaDatas=function(){return me(this,void 0,void 0,(function(){var e=this;return _e(this,(function(t){return[2,new Promise((function(t,n){if(e.gl){var r=e.gl;if(e.checkResolution(e.video),0!=e.video.videoWidth&&0!=e.video.videoHeight){r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1);var i=r.createTexture();i&&(r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e.video),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),e.getAlphaDatas().then((function(n){e.isRelease||(e.renderQueue.length>0&&e.renderQueue.pop(),e.renderQueue.push({vTexture:i,alphas:n}),t())})).catch((function(e){console.debug(e),n(e)})))}else n({code:-1})}}))]}))}))},t.prototype.renderImage=function(e,t,n){var r,i;this.renderCount++;var o=Date.now();"blur"===this.options.type?(this.setBackgroundBlur(e,n),this.drawBlurs(t,null===(r=this.blurUpInfo)||void 0===r?void 0:r.texture,n)):"img"===this.options.type?this.drawBlurs(t,null===(i=this.fitFrameInfo)||void 0===i?void 0:i.texture,n):"none"===this.options.type&&this.drawNoBgs(t,n);var s=Date.now()-o;this.detector.addFrameTime("render",s),this.renTime&&(this.renTime.innerHTML=s+""),this.detector.addFrame(),this.renderCount>=("firefox"===this.stateCenter.browser?4:3)&&this.replaceOutputTrack()},t.prototype.startRendering=function(){return me(this,void 0,void 0,(function(){var e=this;return _e(this,(function(t){return this.logger.info(C+" start render"),this.shouldRun=!0,this.renderId++,this.renderCount=0,this.render(this.renderId),this.detector.startRecordBackgroundEffectOutput(this.fps).then((function(t){!t.result&&e.onError&&e.onError(h,{targetFPS:t.targetFPS,currentFPS:t.currentFPS})})),[2]}))}))},t.prototype.setProcessConfig=function(e){if([0,1].includes(null==e?void 0:e.segmentation)&&0===(null==e?void 0:e.segmentation)){if(!this.onnxs.realSegOnnx)throw ye(s);0==this.alphaDataType?(this.onnxSession=this.onnxs.realSegOnnx.session,this.tensors=this.onnxs.realSegOnnx.tensors):(this.seg=this.onnxs.realSegOnnx.seg,this.worker=this.onnxs.worker)}},t.prototype.enable=function(){return me(this,void 0,void 0,(function(){return _e(this,(function(e){switch(e.label){case 0:if(this.logger.info(C+" enable call"),!this.originalTrack)throw ye(u);return this.enabled?(this.logger.info(C+" enabled"),[2]):[4,this.startRendering()];case 1:return e.sent(),this.logger.info(C+" background blur node enabled"),[2]}}))}))},t.prototype.disable=function(){if(this.logger.info(T+" call"),!this.originalTrack)throw ye(u);this.enabled&&(this.stopRendering(),this.logger.info(T+" background blur node disabled"))},t.prototype.replaceNextNodeTrack=function(e){return me(this,void 0,void 0,(function(){return _e(this,(function(t){switch(t.label){case 0:return this.next?(this.logger.info(C+" replace next node track"),[4,this.next.setInput(e)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.stopRendering=function(){this.shouldRun=!1,this.requestAnimationTimer&&clearTimeout(this.requestAnimationTimer),this.requestAnimationTimer=null,this.renderQueue=[],this.lastRenderTime=0,this.replaceTrackTimer&&clearTimeout(this.replaceTrackTimer),this.replaceTrackTimer=null,this.renderCount=0,this.isRending=!1,this.detector.stopRecordBeautyEffectOutput()},t.prototype.clearCanvas=function(){this.logger.info(C+" clearCanvas call ".concat(this.canvas.width," ").concat(this.canvas.height))},t.prototype.reset=function(e){return me(this,void 0,void 0,(function(){return _e(this,(function(t){switch(t.label){case 0:return this.logger.info(C+" reset video start"),this.originalTrack=e,[4,this.initVideo(e)];case 1:return t.sent(),this.logger.info(C+" reset video end"),[2]}}))}))},t.prototype.setInput=function(e){return me(this,void 0,void 0,(function(){return _e(this,(function(t){switch(t.label){case 0:return this.logger.info(C+" set input call "),null===e?(this.disable(),[2]):this.originalTrack===e?[3,2]:[4,this.reset(e)];case 1:t.sent(),t.label=2;case 2:return[4,this.enable()];case 3:return t.sent(),this.canvasTrack&&"live"===this.canvasTrack.readyState||this.updateCanvasTrack(),this.logger.info(C+" set input track: "+e.id+" track enabled "+e.enabled+" track readyState "+e.readyState),[2]}}))}))},t.prototype.releaseGLResource=function(e){var t,n;(null==e?void 0:e.frameBuffer)&&(null===(t=this.gl)||void 0===t||t.deleteFramebuffer(null==e?void 0:e.frameBuffer)),(null==e?void 0:e.texture)&&(null===(n=this.gl)||void 0===n||n.deleteTexture(null==e?void 0:e.texture))},t.prototype.releaseGL=function(){var e,t,n,r,i,o;this.releaseGLResource(this.blurDownInfo),this.releaseGLResource(this.blurUpInfo),this.releaseGLResource(this.fitFrameInfo),null===(e=this.blurDownShader)||void 0===e||e.deleteProgram(),null===(t=this.blurUpShader)||void 0===t||t.deleteProgram(),null===(n=this.fitShader)||void 0===n||n.deleteProgram(),null===(r=this.blurShader)||void 0===r||r.deleteProgram(),null===(i=this.noBgShader)||void 0===i||i.deleteProgram(),null===(o=this.gl)||void 0===o||o.deleteBuffer(this.vertexBufferObject),this.gl=null,this.canvasTrack=null,this.input=null},t.prototype.release=function(){var e=this,t=setTimeout((function(){var n;clearTimeout(t),e.stopRendering(),e.releaseGL(),null===(n=e.worker)||void 0===n||n.release(),e.canvas.remove(),e.video.pause(),e.video.remove(),e.video.srcObject=null,e.video=null,e.worker=null,e.isRelease=!0,e.logger.info(C+" background blur node destroied.")}),0)},t.prototype.setOptions=function(e){var t;return me(this,void 0,void 0,(function(){return _e(this,(function(n){if(this.options=Object.assign(this.options,e),"blur"===this.options.type)switch(e.blurDegree){case 1:this.focalNum=25;break;case 2:this.focalNum=35;break;case 3:this.focalNum=50}else"img"===(null===(t=this.options)||void 0===t?void 0:t.type)?this.setBackgroundImgTexture():this.options;return[2]}))}))},t.prototype.setBackgroundImgTexture=function(){var e;if("img"===(null===(e=this.options)||void 0===e?void 0:e.type)){if(this.options.objectFit){var t=ve[this.options.objectFit];this.fit=[0,1,2].includes(t)?t:this.fit}this.options.source&&this.options.source instanceof HTMLImageElement&&this.options.source.naturalWidth||this.logger.error(C+" options source must be image and loaded"),this.options.source&&this.videoInited&&this.loadImageTexture()}},t.prototype.handleInitError=function(){if(this.failedTimes++,this.failedTimes>30)throw this.failedTimes=0,this.logger.error(C+" get webgl context failed"),ye(c)},t.prototype.initWebGL=function(e,t){return me(this,void 0,void 0,(function(){return _e(this,(function(n){if(!(void 0!==window.WebGLRenderingContext))throw this.logger.error(C+" not support webgl!"),ye(c);return this.gl=this.canvas.getContext("webgl"),this.gl?(this.width=e,this.height=t,this.initGL(e,t),this.initShaders(),[2]):(this.handleInitError(),[2])}))}))},t.prototype.initShaders=function(){this.gl&&(this.blurDownShader=new O(this.gl),this.blurDownShader.createProgram(L,"\n      precision highp float;\n      uniform sampler2D u_ColorSampler;\n      uniform float imageWidth;\n      uniform float imageHeight;\n      uniform int focal;\n      varying vec2 vTexCoord;\n      vec4 blur(int blurRadius,sampler2D sampler,float width,float height){\n        const float PI = 3.14159265;\n        const int maxBlur = 100;\n\n        int center = blurRadius;\n\n        float sita = pow(float(blurRadius) / 6.0, 2.0);\n        float radio = sqrt(0.5 / PI / sita);\n        float sum = 0.0;\n        vec4 sumVec4 = vec4(0.0);\n\n        for(int i = 0; i < maxBlur; i++) if(i<center + 1){\n            \n            float weight =  radio * exp(-pow(float(i), 2.0) / sita / 2.0);\n            float ii = float(i);\n            if(i == 0){\n                vec4 color = texture2D(sampler, vTexCoord);\n                sumVec4 += color * weight;\n                sum += weight;\n            }else{\n                vec4 left = texture2D(sampler, vec2( vTexCoord.x - ii/width, vTexCoord.y));\n                vec4 right = texture2D(sampler, vec2( vTexCoord.x + ii/width, vTexCoord.y));\n                sumVec4 += left * weight;\n                sumVec4 += right * weight;\n                sum += 2.0 * weight;\n            }\n\n        }\n        return vec4(sumVec4.r/sum, sumVec4.g/sum, sumVec4.b/sum, sumVec4.a/sum);\n      }\n      void main(){\n        gl_FragColor = blur(focal, u_ColorSampler, imageWidth, imageHeight);\n      }\n"),this.blurUpShader=new O(this.gl),this.blurUpShader.createProgram(L,"\n    precision highp float;\n    uniform sampler2D u_ColorSampler;\n    uniform float imageWidth;\n    uniform float imageHeight;\n    uniform int focal;\n    varying vec2 vTexCoord;\n    vec4 blur(int blurRadius,sampler2D sampler,float width,float height){\n        const float PI = 3.14159265;\n        const int maxBlur = 100;\n\n        if(blurRadius > maxBlur){\n            blurRadius = maxBlur;\n        }\n        int center = blurRadius;\n\n        float sita = pow(float(blurRadius) / 6.0, 2.0);\n        float radio = sqrt(0.5 / PI / sita);\n        float sum = 0.0;\n        vec4 sumVec4 = vec4(0.0);\n\n        for(int i = 0; i < maxBlur; i++) if(i<center + 1){\n\n            float weight =  radio * exp(-pow(float(i), 2.0) / sita / 2.0);\n            float ii = float(i);\n            if(i == 0){\n                vec4 color = texture2D(sampler, vTexCoord);\n                sumVec4 += color * weight;\n                sum += weight;\n            }else{\n                vec4 left = texture2D(sampler, vec2( vTexCoord.x, vTexCoord.y - ii/height));\n                vec4 right = texture2D(sampler, vec2( vTexCoord.x, vTexCoord.y + ii/height));\n                sumVec4 += left * weight;\n                sumVec4 += right * weight;\n                sum += 2.0 * weight;\n            }\n\n        }\n        return vec4(sumVec4.r/sum, sumVec4.g/sum, sumVec4.b/sum, sumVec4.a/sum);\n    }\n    void main(){\n        gl_FragColor = blur(focal, u_ColorSampler, imageWidth, imageHeight);\n    }\n"),this.blurShader=new O(this.gl),this.blurShader.createProgram(L,"\n  precision highp float;\n  uniform sampler2D u_ColorSampler;\n  uniform sampler2D aSampler;\n  uniform sampler2D vSampler;\n  varying vec2 vTexCoord;\n  varying vec2 vTexCoord2;\n  void main(){\n      vec4 uTexture = texture2D(u_ColorSampler, vTexCoord);\n      vec4 vTexture = texture2D(vSampler, vTexCoord2);\n      vec4 aTexture = texture2D(aSampler, vTexCoord2);\n\n      aTexture.a = (aTexture.a - 0.3) * 2.0;\n      if (aTexture.a < 0.0) {\n          aTexture.a = 0.0;\n      } else if (aTexture.a > 1.0) {\n          aTexture.a = 1.0;\n      }\n      gl_FragColor = vec4((vTexture.rgb * aTexture.a + uTexture.rgb * (1.0 - aTexture.a)), 1.0);\n      // if (aTexture.a > 0.0) {\n      //     gl_FragColor = vTexture;\n      // } else {\n      //     gl_FragColor = uTexture;\n      // }\n  }\n"),this.fitShader=new O(this.gl),this.fitShader.createProgram(L,"\n    precision highp float;\n\n    uniform sampler2D imgSampler;\n    uniform int fit;\n    uniform float bg_ratio;\n    varying vec2 vTexCoord;\n\n    void main() {\n        vec2 uv_scale = vTexCoord;\n        if (fit == 0) {\n            if (bg_ratio <= 1.0) {\n                uv_scale = vec2(vTexCoord.x / bg_ratio, vTexCoord.y);\n                uv_scale.x -= (1.0 - bg_ratio) / bg_ratio / 2.0;\n                if (vTexCoord.x > (1.0 - bg_ratio) / 2.0 && vTexCoord.x < (1.0 + bg_ratio) / 2.0) {\n                    gl_FragColor = texture2D(imgSampler, uv_scale);\n                } else {\n                    gl_FragColor = vec4(0, 0, 0, 1.0);\n                }\n            } else {\n                float y_bg_ratio = 1.0 / bg_ratio;\n                uv_scale = vec2(vTexCoord.x, vTexCoord.y / y_bg_ratio);\n                uv_scale.y -= (1.0 - y_bg_ratio) / y_bg_ratio / 2.0;\n                if (vTexCoord.y > (1.0 - y_bg_ratio) / 2.0 && vTexCoord.y < (1.0 + y_bg_ratio) / 2.0) {\n                    gl_FragColor = texture2D(imgSampler, uv_scale);\n                } else {\n                    gl_FragColor = vec4(0, 0, 0, 1.0);\n                }\n            }\n        } else if (fit == 1) {\n            if (bg_ratio <= 1.0) {\n                uv_scale = vec2(vTexCoord.x, vTexCoord.y * bg_ratio);\n                uv_scale.y += (1.0 - bg_ratio) / 2.0;\n                gl_FragColor = texture2D(imgSampler, uv_scale);\n            } else {\n                float y_bg_ratio = 1.0 / bg_ratio;\n                uv_scale = vec2(vTexCoord.x * y_bg_ratio, vTexCoord.y);\n                uv_scale.x += (1.0 - y_bg_ratio) / 2.0;\n                gl_FragColor = texture2D(imgSampler, uv_scale);\n            }\n        } else {\n            gl_FragColor = texture2D(imgSampler, vTexCoord);\n        }\n    }"),this.noBgShader=new O(this.gl),this.noBgShader.createProgram(L,"\n  precision highp float;\n  uniform sampler2D aSampler;\n  uniform sampler2D vSampler;\n  varying vec2 vTexCoord;\n  varying vec2 vTexCoord2;\n  void main(){\n      vec4 vTexture = texture2D(vSampler, vTexCoord);\n      vec4 aTexture = texture2D(aSampler, vTexCoord2);\n\n      aTexture.a = (aTexture.a - 0.3) * 2.0;\n      if (aTexture.a > 0.0) {\n          gl_FragColor = vTexture;\n      } else {\n          gl_FragColor = vec4(0, 0, 0, 0);\n      }\n  }\n"))},t.prototype.initGL=function(e,t){var n=this.gl;if(!n)return this.logger.error(C+" webgl context not found");this.blurDownInfo=this.createFrameBuffer(),this.blurUpInfo=this.createFrameBuffer(),this.fitFrameInfo=this.createFrameBuffer(),this.FSIZE=this.vertices.BYTES_PER_ELEMENT,this.vertexBufferObject=n.createBuffer(),n.viewport(0,0,e,t)},t.prototype.checkResolution=function(e){if((this.vw!==e.videoWidth||this.vh!==e.videoHeight)&&(Math.abs(this.vw-e.videoWidth)>2||Math.abs(this.vh-e.videoHeight)>2)){if(0===e.videoHeight||0===e.videoWidth)return;this.logger.info(C+" resolution changed to ".concat(e.videoWidth,"x").concat(e.videoHeight,", reset resolution.")),this.resetResolution(e.videoWidth,e.videoHeight),"img"===this.options.type&&this.loadImageTexture()}},t.prototype.resetResolution=function(e,t){var n,r,i,o,s,a,u;this.logger.info(C+" reset resolution"),this.setRenderResolution(e,t),(null===(n=this.blurDownInfo)||void 0===n?void 0:n.texture)&&this.resetTexture(null===(r=this.blurDownInfo)||void 0===r?void 0:r.texture),(null===(i=this.blurUpInfo)||void 0===i?void 0:i.texture)&&this.resetTexture(null===(o=this.blurUpInfo)||void 0===o?void 0:o.texture),(null===(s=this.fitFrameInfo)||void 0===s?void 0:s.texture)&&this.resetTexture(null===(a=this.fitFrameInfo)||void 0===a?void 0:a.texture),null===(u=this.gl)||void 0===u||u.viewport(0,0,this.width,this.height)},t.prototype.setBackgroundBlur=function(e,t){var n,r;return this.drawBuffer(e,this.blurDownShader,this.blurDownInfo,t),this.drawBuffer(e,this.blurUpShader,this.blurUpInfo,null===(n=this.blurDownInfo)||void 0===n?void 0:n.texture),null===(r=this.blurUpInfo)||void 0===r?void 0:r.texture},t.prototype.loadImageTexture=function(){if(this.options.source){var e=this.gl;if(e){var t=this.fitShader.program;if(t)if(this.width&&this.height){e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.useProgram(t),e.bindFramebuffer(e.FRAMEBUFFER,this.fitFrameInfo.frameBuffer),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBufferObject),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW);var n=e.getAttribLocation(t,"aPosition"),r=e.getAttribLocation(t,"aTexCoord");e.vertexAttribPointer(n,2,e.FLOAT,!1,4*this.FSIZE,0),e.vertexAttribPointer(r,2,e.FLOAT,!1,4*this.FSIZE,2*this.FSIZE),e.enableVertexAttribArray(n),e.enableVertexAttribArray(r);var i=e.getUniformLocation(t,"imgSampler"),o=e.getUniformLocation(t,"fit");this.logger.info(C+" fit ".concat(this.fit)),e.uniform1i(o,this.fit);var s=e.getUniformLocation(t,"bg_ratio");e.uniform1f(s,this.options.source.naturalWidth*this.height/this.options.source.naturalHeight/this.width);var a=e.createTexture();e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.options.source),e.uniform1i(i,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a)}else this.logger.info(C+" load img width: ".concat(this.width," height: ").concat(this.height))}}},t.prototype.drawBuffer=function(e,t,n,r){var i=t.program;if(!i)return this.logger.info(C+" shader has no program"),null;e.useProgram(i),e.bindFramebuffer(e.FRAMEBUFFER,n.frameBuffer),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBufferObject),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.STATIC_DRAW);var o=e.getAttribLocation(i,"aPosition"),s=e.getAttribLocation(i,"aTexCoord");e.vertexAttribPointer(o,2,e.FLOAT,!1,4*this.FSIZE,0),e.vertexAttribPointer(s,2,e.FLOAT,!1,4*this.FSIZE,2*this.FSIZE),e.enableVertexAttribArray(o),e.enableVertexAttribArray(s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),r&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));var a=e.getUniformLocation(i,"u_ColorSampler"),u=e.getUniformLocation(i,"imageWidth"),c=e.getUniformLocation(i,"imageHeight"),l=e.getUniformLocation(i,"focal");return e.uniform1i(a,0),e.uniform1f(u,this.width),e.uniform1f(c,this.height),e.uniform1i(l,this.focalNum),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,1),e.clearColor(1,1,1,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindFramebuffer(e.FRAMEBUFFER,null),n.texture},t.prototype.createFrameBuffer=function(){var e=this.gl;if(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);var n=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.bindFramebuffer(e.FRAMEBUFFER,null),{texture:t,frameBuffer:n}}},t.prototype.getAlphaDatas=function(){return me(this,void 0,void 0,(function(){var e=this;return _e(this,(function(t){return[2,new Promise((function(t,n){return me(e,void 0,void 0,(function(){var e;return _e(this,(function(r){return this.imgCtx?(this.imgCtx.drawImage(this.video,0,0,this.imgCanvas.width,this.imgCanvas.height),this.imgData=null===(e=this.imgCtx.getImageData(0,0,this.imgCanvas.width,this.imgCanvas.height))||void 0===e?void 0:e.data,this.worker.runFeeds(this.imgData.buffer,this.seg,this.width,this.height).then((function(e){var n=new Uint8Array(e);t(n)})).catch((function(e){n(e)})),this.executeRenderingTasks(),[2]):[2]}))}))}))]}))}))},t.prototype.drawBack=function(){},t.prototype.executeRenderingTasks=function(){if(this.renderQueue.length>0){var e=this.renderQueue.pop();if(e)this.renderImage(this.gl,e.alphas,e.vTexture),this.drawBack()}},t.prototype.getAlphaData=function(){return me(this,void 0,void 0,(function(){var e=this;return _e(this,(function(t){return[2,new Promise((function(t,n){var r,i,o,s,a;if(e.imgCtx){e.imgCtx.drawImage(e.video,0,0,e.imgCanvas.width,e.imgCanvas.height),e.imgData=null===(r=e.imgCtx.getImageData(0,0,e.imgCanvas.width,e.imgCanvas.height))||void 0===r?void 0:r.data,e.imgFloatData=Float32Array.from(e.imgData);var u=new Float32Array([e.height,e.width]),c=new A.Tensor("float32",u,[1,2]);e.imgTensor=new A.Tensor("float32",e.imgFloatData,[1,e.imgCanvas.height,e.imgCanvas.width,4]);var l={src:e.imgTensor,dim:c,r1:null===(i=e.tensors)||void 0===i?void 0:i.r1,r2:null===(o=e.tensors)||void 0===o?void 0:o.r2,r3:null===(s=e.tensors)||void 0===s?void 0:s.r3,r4:null===(a=e.tensors)||void 0===a?void 0:a.r4};(new Date).getTime();e.onnxSession.run(l).then((function(n){(new Date).getTime();e.tensors.r1=n.o1,e.tensors.r2=n.o2,e.tensors.r3=n.o3,e.tensors.r4=n.o4;var r=new Uint8Array(n.res.data);t(r)})).catch((function(e){n(e)}))}}))]}))}))},t.prototype.loadOnnxTexture=function(e,t){if(!this.gl)return null;var n=this.gl,r=n.getUniformLocation(t,"aSampler");n.clearColor(1,1,1,0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var i=n.createTexture();return n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,i),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,this.width,this.height,0,n.ALPHA,n.UNSIGNED_BYTE,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.uniform1i(r,1),i},t.prototype.drawBlurs=function(e,t,n){var r=this.gl;if(r){var i=this.blurShader.program;if(i){r.useProgram(i);var o=this.loadOnnxTexture(e,i);r.viewport(0,0,this.width,this.height),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBufferObject),r.bufferData(r.ARRAY_BUFFER,this.vertices,r.STATIC_DRAW);var s=r.getAttribLocation(i,"aPosition"),a=r.getAttribLocation(i,"aTexCoord"),u=r.getAttribLocation(i,"aTexCoord2");r.vertexAttribPointer(s,2,r.FLOAT,!1,4*this.FSIZE,0),r.vertexAttribPointer(a,2,r.FLOAT,!1,4*this.FSIZE,2*this.FSIZE),r.vertexAttribPointer(u,2,r.FLOAT,!1,4*this.FSIZE,2*this.FSIZE),r.enableVertexAttribArray(s),r.enableVertexAttribArray(a),r.enableVertexAttribArray(u);var c=r.getUniformLocation(i,"u_ColorSampler");r.clearColor(1,1,1,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t),r.uniform1i(c,0);var l=r.getUniformLocation(i,"vSampler");r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.uniform1i(l,2),r.drawArrays(r.TRIANGLE_STRIP,0,4),r.deleteTexture(o),r.deleteTexture(n)}}},t.prototype.drawNoBgs=function(e,t){var n=this.gl;if(n){var r=this.noBgShader.program;if(r){n.useProgram(r);var i=this.loadOnnxTexture(e,r);n.viewport(0,0,this.width,this.height),n.bindBuffer(n.ARRAY_BUFFER,this.vertexBufferObject),n.bufferData(n.ARRAY_BUFFER,this.vertices,n.STATIC_DRAW);var o=n.getAttribLocation(r,"aPosition"),s=n.getAttribLocation(r,"aTexCoord"),a=n.getAttribLocation(r,"aTexCoord2");n.vertexAttribPointer(o,2,n.FLOAT,!1,4*this.FSIZE,0),n.vertexAttribPointer(s,2,n.FLOAT,!1,4*this.FSIZE,2*this.FSIZE),n.vertexAttribPointer(a,2,n.FLOAT,!1,4*this.FSIZE,2*this.FSIZE),n.enableVertexAttribArray(o),n.enableVertexAttribArray(s),n.enableVertexAttribArray(a);var u=n.getUniformLocation(r,"vSampler");n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.uniform1i(u,2),n.drawArrays(n.TRIANGLE_STRIP,0,4),n.deleteTexture(i),n.deleteTexture(t)}}},t.prototype.onError=function(e,t){this.stateCenter.actionListener("backgroundEffectError",this.preview.localStream,e.code,e.message)},t}(N),Se=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ee=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Te=function(){function e(e,t,n,r){this.logger=e,this.stateCenter=t,this.preview=n,this._enabled=!1,this.processNode=new be(e,t,this.preview,r)}return Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoNodeQueue",{get:function(){return this.preview.videoNodeQueue},enumerable:!1,configurable:!0}),e.prototype.enable=function(e){return Se(this,void 0,void 0,(function(){return Ee(this,(function(t){switch(t.label){case 0:return this.logger.info(w+" call"),this.enabled?[2]:(e&&this.processNode.setProcessConfig(e),this.videoNodeQueue.isConnected(this.processNode)?[3,2]:[4,this.videoNodeQueue.pushBack(this.processNode)]);case 1:t.sent(),t.label=2;case 2:return this._enabled=!0,this.logger.info(w+" background blur processor enabled"),[2]}}))}))},e.prototype.disable=function(){return Se(this,void 0,void 0,(function(){return Ee(this,(function(e){switch(e.label){case 0:return this.logger.info(T+" call"),this.enabled?[4,this.videoNodeQueue.remove(this.processNode)]:[2];case 1:return e.sent(),this._enabled=!1,this.logger.info(T+" background blur processor disabled"),[2]}}))}))},e.prototype.setOptions=function(e){this.processNode.setOptions(e)},e.prototype.getCanvas=function(){return this.processNode.renderCanvas},e.prototype.setDrawBack=function(e){this.processNode.drawBack=e},e.prototype.release=function(){this.processNode.release(),this.processNode=null},e}(),we=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ce=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ie=function(){function e(e){var t=this;this.stateCenter=e,this.sessionMap={},this.rADataMap={},this.gADataMap={},this.seq=0;var n=this.worker=this.createWorker((function(){var e,t={};self.onmessage=function(n){var r,i,o,s,a,u,c,l,h=n.data[n.data.length-1];if("session"===h){var d=n.data,f=d[0],p=d[2],g=d[3],m=function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);var i=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(i)}(d[1]);self.importScripts(m);var _=URL.createObjectURL(p);ort.env.wasm.numThreads=1,ort.env.wasm.wasmPaths={"ort-wasm.wasm":_,"ort-wasm-simd.wasm":_},0===g&&ort.InferenceSession.create(f,{executionProviders:["wasm"]}).then((function(e){var n,r,i,o,s,a,u,c=(n=new Float32Array(50176).fill(0),r=new ort.Tensor("float32",n,[1,16,56,56]),i=new Float32Array(15680).fill(0),o=new ort.Tensor("float32",i,[1,20,28,28]),s=new Float32Array(7840).fill(0),a=new ort.Tensor("float32",s,[1,40,14,14]),u=new Float32Array(2352).fill(0),{r1:r,r2:o,r3:a,r4:new ort.Tensor("float32",u,[1,48,7,7])});t[g]={s:e,t:c},self.postMessage([g,"sessionInited"])})).catch((function(e){self.postMessage([e,g,"sessionFail"])}))}else if("feeds"===h){var y=n.data,v=y[1],b=y[2],S=y[3],E=y[4];e=new ort.Tensor("float32",Float32Array.from(new Uint8ClampedArray(y[0])),[1,112,112,4]);var T=new Float32Array([S,b]),w=new ort.Tensor("float32",T,[1,2]),C={src:e,dim:w,r1:null===(i=null===(r=t[E])||void 0===r?void 0:r.t)||void 0===i?void 0:i.r1,r2:null===(s=null===(o=t[E])||void 0===o?void 0:o.t)||void 0===s?void 0:s.r2,r3:null===(u=null===(a=t[E])||void 0===a?void 0:a.t)||void 0===u?void 0:u.r3,r4:null===(l=null===(c=t[E])||void 0===c?void 0:c.t)||void 0===l?void 0:l.r4};t[E].s.run(C).then((function(e){t[E].t.r1=e.o1,t[E].t.r2=e.o2,t[E].t.r3=e.o3,t[E].t.r4=e.o4;var n=new Uint8Array(e.res.data).buffer;self.postMessage([n,v,E,"feeds"],[n])})).catch((function(e){}))}}}));n.postMessage("Hello World"),n.onmessage=function(e){var n=e.data[e.data.length-1],r=e.data[e.data.length-2];if("sessionInited"===n)t.sessionMap[r]&&t.sessionMap[r].suc(),delete t.sessionMap[r];else if("sessionFail"===n){t.sessionMap[r]&&t.sessionMap[r].fail(e.data[0]),delete t.sessionMap[r]}else if("feeds"===n){var i=e.data,o=i[1];0==r&&t.rADataMap[o]&&(t.rADataMap[o](i[0]),delete t.rADataMap[o])}}}return e.prototype.createWorker=function(e){var t=new Blob(["("+e.toString()+")()"],{type:"application/javascript"}),n=window.URL.createObjectURL(t);return new Worker(n)},e.prototype.createSession=function(e,t,n){var r=this;return new Promise((function(i,o){var s=t.buffer,a=r.stateCenter.browserInfo,u=a.version.split("."),c="Safari"===a.name||"Chrome"===a.name&&parseInt(u[0])<91?"zego-wasm.wasm":"zego-wasm-simd.wasm",l=n.endsWith("/")?"":"/";fetch(n+l+c).then((function(t){return we(r,void 0,void 0,(function(){var n;return Ce(this,(function(r){switch(r.label){case 0:return[4,t.blob()];case 1:return n=r.sent(),this.worker.postMessage([s,"LyohCiogT05OWCBSdW50aW1lIFdlYiB2MS4xNS4wCiogQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLgoqLwohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5vcnQ9dCgpOmUub3J0PXQoKX0oc2VsZiwoKCk9PigoKT0+e3ZhciBlPXs0NTM6KGUsdCxuKT0+eyJ1c2Ugc3RyaWN0IjtuLnIodCksbi5kKHQse0luZmVyZW5jZVNlc3Npb246KCk9PnAsVGVuc29yOigpPT5kLGVudjooKT0+YSxyZWdpc3RlckJhY2tlbmQ6KCk9Pml9KTtjb25zdCByPXt9LG89W10saT0oZSx0LG4pPT57aWYoIXR8fCJmdW5jdGlvbiIhPXR5cGVvZiB0LmluaXR8fCJmdW5jdGlvbiIhPXR5cGVvZiB0LmNyZWF0ZVNlc3Npb25IYW5kbGVyKXRocm93IG5ldyBUeXBlRXJyb3IoIm5vdCBhIHZhbGlkIGJhY2tlbmQiKTt7Y29uc3QgaT1yW2VdO2lmKHZvaWQgMD09PWkpcltlXT17YmFja2VuZDp0LHByaW9yaXR5Om59O2Vsc2V7aWYoaS5wcmlvcml0eT5uKXJldHVybjtpZihpLnByaW9yaXR5PT09biYmaS5iYWNrZW5kIT09dCl0aHJvdyBuZXcgRXJyb3IoYGNhbm5vdCByZWdpc3RlciBiYWNrZW5kICIke2V9IiB1c2luZyBwcmlvcml0eSAke259YCl9aWYobj49MCl7Y29uc3QgdD1vLmluZGV4T2YoZSk7LTEhPT10JiZvLnNwbGljZSh0LDEpO2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKWlmKHJbb1t0XV0ucHJpb3JpdHk8PW4pcmV0dXJuIHZvaWQgby5zcGxpY2UodCwwLGUpO28ucHVzaChlKX19fSxhPW5ldyBjbGFzc3tjb25zdHJ1Y3Rvcigpe3RoaXMud2FzbT17fSx0aGlzLndlYmdsPXt9LHRoaXMubG9nTGV2ZWxJbnRlcm5hbD0id2FybmluZyJ9c2V0IGxvZ0xldmVsKGUpe2lmKHZvaWQgMCE9PWUpe2lmKCJzdHJpbmciIT10eXBlb2YgZXx8LTE9PT1bInZlcmJvc2UiLCJpbmZvIiwid2FybmluZyIsImVycm9yIiwiZmF0YWwiXS5pbmRleE9mKGUpKXRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgbG9nZ2luZyBsZXZlbDogJHtlfWApO3RoaXMubG9nTGV2ZWxJbnRlcm5hbD1lfX1nZXQgbG9nTGV2ZWwoKXtyZXR1cm4gdGhpcy5sb2dMZXZlbEludGVybmFsfX0scz0idW5kZWZpbmVkIiE9dHlwZW9mIEJpZ0ludDY0QXJyYXkmJiJmdW5jdGlvbiI9PXR5cGVvZiBCaWdJbnQ2NEFycmF5LmZyb20sdT0idW5kZWZpbmVkIiE9dHlwZW9mIEJpZ1VpbnQ2NEFycmF5JiYiZnVuY3Rpb24iPT10eXBlb2YgQmlnVWludDY0QXJyYXkuZnJvbSxsPW5ldyBNYXAoW1siZmxvYXQzMiIsRmxvYXQzMkFycmF5XSxbInVpbnQ4IixVaW50OEFycmF5XSxbImludDgiLEludDhBcnJheV0sWyJ1aW50MTYiLFVpbnQxNkFycmF5XSxbImludDE2IixJbnQxNkFycmF5XSxbImludDMyIixJbnQzMkFycmF5XSxbImJvb2wiLFVpbnQ4QXJyYXldLFsiZmxvYXQ2NCIsRmxvYXQ2NEFycmF5XSxbInVpbnQzMiIsVWludDMyQXJyYXldXSksYz1uZXcgTWFwKFtbRmxvYXQzMkFycmF5LCJmbG9hdDMyIl0sW1VpbnQ4QXJyYXksInVpbnQ4Il0sW0ludDhBcnJheSwiaW50OCJdLFtVaW50MTZBcnJheSwidWludDE2Il0sW0ludDE2QXJyYXksImludDE2Il0sW0ludDMyQXJyYXksImludDMyIl0sW0Zsb2F0NjRBcnJheSwiZmxvYXQ2NCJdLFtVaW50MzJBcnJheSwidWludDMyIl1dKTtzJiYobC5zZXQoImludDY0IixCaWdJbnQ2NEFycmF5KSxjLnNldChCaWdJbnQ2NEFycmF5LCJpbnQ2NCIpKSx1JiYobC5zZXQoInVpbnQ2NCIsQmlnVWludDY0QXJyYXkpLGMuc2V0KEJpZ1VpbnQ2NEFycmF5LCJ1aW50NjQiKSk7Y2xhc3MgZntjb25zdHJ1Y3RvcihlLHQsbil7bGV0IHIsbyxpO2lmKCJzdHJpbmciPT10eXBlb2YgZSlpZihyPWUsaT1uLCJzdHJpbmciPT09ZSl7aWYoIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcigiQSBzdHJpbmcgdGVuc29yJ3MgZGF0YSBtdXN0IGJlIGEgc3RyaW5nIGFycmF5LiIpO289dH1lbHNle2NvbnN0IG49bC5nZXQoZSk7aWYodm9pZCAwPT09bil0aHJvdyBuZXcgVHlwZUVycm9yKGBVbnN1cHBvcnRlZCB0ZW5zb3IgdHlwZTogJHtlfS5gKTtpZihBcnJheS5pc0FycmF5KHQpKW89bi5mcm9tKHQpO2Vsc2V7aWYoISh0IGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihgQSAke3J9IHRlbnNvcidzIGRhdGEgbXVzdCBiZSB0eXBlIG9mICR7bn1gKTtvPXR9fWVsc2UgaWYoaT10LEFycmF5LmlzQXJyYXkoZSkpe2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBuZXcgVHlwZUVycm9yKCJUZW5zb3IgdHlwZSBjYW5ub3QgYmUgaW5mZXJyZWQgZnJvbSBhbiBlbXB0eSBhcnJheS4iKTtjb25zdCB0PXR5cGVvZiBlWzBdO2lmKCJzdHJpbmciPT09dClyPSJzdHJpbmciLG89ZTtlbHNle2lmKCJib29sZWFuIiE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBlbGVtZW50IHR5cGUgb2YgZGF0YSBhcnJheTogJHt0fS5gKTtyPSJib29sIixvPVVpbnQ4QXJyYXkuZnJvbShlKX19ZWxzZXtjb25zdCB0PWMuZ2V0KGUuY29uc3RydWN0b3IpO2lmKHZvaWQgMD09PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihgVW5zdXBwb3J0ZWQgdHlwZSBmb3IgdGVuc29yIGRhdGE6ICR7ZS5jb25zdHJ1Y3Rvcn0uYCk7cj10LG89ZX1pZih2b2lkIDA9PT1pKWk9W28ubGVuZ3RoXTtlbHNlIGlmKCFBcnJheS5pc0FycmF5KGkpKXRocm93IG5ldyBUeXBlRXJyb3IoIkEgdGVuc29yJ3MgZGltcyBtdXN0IGJlIGEgbnVtYmVyIGFycmF5Iik7Y29uc3QgYT0oZT0+e2xldCB0PTE7Zm9yKGxldCBuPTA7bjxlLmxlbmd0aDtuKyspe2NvbnN0IHI9ZVtuXTtpZigibnVtYmVyIiE9dHlwZW9mIHJ8fCFOdW1iZXIuaXNTYWZlSW50ZWdlcihyKSl0aHJvdyBuZXcgVHlwZUVycm9yKGBkaW1zWyR7bn1dIG11c3QgYmUgYW4gaW50ZWdlciwgZ290OiAke3J9YCk7aWYocjwwKXRocm93IG5ldyBSYW5nZUVycm9yKGBkaW1zWyR7bn1dIG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciwgZ290OiAke3J9YCk7dCo9cn1yZXR1cm4gdH0pKGkpO2lmKGEhPT1vLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoYFRlbnNvcidzIHNpemUoJHthfSkgZG9lcyBub3QgbWF0Y2ggZGF0YSBsZW5ndGgoJHtvLmxlbmd0aH0pLmApO3RoaXMuZGltcz1pLHRoaXMudHlwZT1yLHRoaXMuZGF0YT1vLHRoaXMuc2l6ZT1hfXN0YXRpYyBidWZmZXJUb1RlbnNvcihlLHQpe2lmKHZvaWQgMD09PWUpdGhyb3cgbmV3IEVycm9yKCJJbWFnZSBidWZmZXIgbXVzdCBiZSBkZWZpbmVkIik7aWYodm9pZCAwPT09dC5oZWlnaHR8fHZvaWQgMD09PXQud2lkdGgpdGhyb3cgbmV3IEVycm9yKCJJbWFnZSBoZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgZGVmaW5lZCIpO2NvbnN0e2hlaWdodDpuLHdpZHRoOnJ9PXQsbz10Lm5vcm07bGV0IGksYTtpPXZvaWQgMD09PW98fHZvaWQgMD09PW8ubWVhbj8yNTU6by5tZWFuLGE9dm9pZCAwPT09b3x8dm9pZCAwPT09by5iaWFzPzA6by5iaWFzO2NvbnN0IHM9dm9pZCAwIT09dC5iaXRtYXBGb3JtYXQ/dC5iaXRtYXBGb3JtYXQ6IlJHQkEiLHU9dm9pZCAwIT09dC50ZW5zb3JGb3JtYXQmJnZvaWQgMCE9PXQudGVuc29yRm9ybWF0P3QudGVuc29yRm9ybWF0OiJSR0IiLGw9bipyLGM9IlJHQkEiPT09dT9uZXcgRmxvYXQzMkFycmF5KDQqbCk6bmV3IEZsb2F0MzJBcnJheSgzKmwpO2xldCBkPTQsaD0wLHA9MSxnPTIsbT0zLHk9MCx3PWwsdj0yKmwsYj0tMTsiUkdCIj09PXMmJihkPTMsaD0wLHA9MSxnPTIsbT0tMSksIlJHQkEiPT09dT9iPTMqbDoiUkJHIj09PXU/KHk9MCx2PWwsdz0yKmwpOiJCR1IiPT09dSYmKHY9MCx3PWwseT0yKmwpO2ZvcihsZXQgdD0wO3Q8bDt0KyssaCs9ZCxnKz1kLHArPWQsbSs9ZCljW3krK109KGVbaF0rYSkvaSxjW3crK109KGVbcF0rYSkvaSxjW3YrK109KGVbZ10rYSkvaSwtMSE9PWImJi0xIT09bSYmKGNbYisrXT0oZVttXSthKS9pKTtyZXR1cm4gbmV3IGYoImZsb2F0MzIiLGMsIlJHQkEiPT09dT9bMSw0LG4scl06WzEsMyxuLHJdKX1zdGF0aWMgYXN5bmMgZnJvbUltYWdlKGUsdCl7Y29uc3Qgbj0idW5kZWZpbmVkIiE9dHlwZW9mIEhUTUxJbWFnZUVsZW1lbnQmJmUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50LHI9InVuZGVmaW5lZCIhPXR5cGVvZiBJbWFnZURhdGEmJmUgaW5zdGFuY2VvZiBJbWFnZURhdGEsbz0idW5kZWZpbmVkIiE9dHlwZW9mIEltYWdlQml0bWFwJiZlIGluc3RhbmNlb2YgSW1hZ2VCaXRtYXAsaT0idW5kZWZpbmVkIiE9dHlwZW9mIFN0cmluZyYmKGUgaW5zdGFuY2VvZiBTdHJpbmd8fCJzdHJpbmciPT10eXBlb2YgZSk7bGV0IGEscz17fTtpZihuKXtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO24ud2lkdGg9ZS53aWR0aCxuLmhlaWdodD1lLmhlaWdodDtjb25zdCByPW4uZ2V0Q29udGV4dCgiMmQiKTtpZihudWxsPT1yKXRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBhY2Nlc3MgaW1hZ2UgZGF0YSIpO3tsZXQgbj1lLmhlaWdodCxvPWUud2lkdGg7aWYodm9pZCAwIT09dCYmdm9pZCAwIT09dC5yZXNpemVkSGVpZ2h0JiZ2b2lkIDAhPT10LnJlc2l6ZWRXaWR0aCYmKG49dC5yZXNpemVkSGVpZ2h0LG89dC5yZXNpemVkV2lkdGgpLHZvaWQgMCE9PXQpe2lmKHM9dCx2b2lkIDAhPT10LnRlbnNvckZvcm1hdCl0aHJvdyBuZXcgRXJyb3IoIkltYWdlIGlucHV0IGNvbmZpZyBmb3JtYXQgbXVzdCBiZSBSR0JBIGZvciBIVE1MSW1hZ2VFbGVtZW50Iik7aWYocy50ZW5zb3JGb3JtYXQ9IlJHQkEiLHZvaWQgMCE9PXQuaGVpZ2h0JiZ0LmhlaWdodCE9PW4pdGhyb3cgbmV3IEVycm9yKCJJbWFnZSBpbnB1dCBjb25maWcgaGVpZ2h0IGRvZXNuJ3QgbWF0Y2ggSFRNTEltYWdlRWxlbWVudCBoZWlnaHQiKTtpZihzLmhlaWdodD1uLHZvaWQgMCE9PXQud2lkdGgmJnQud2lkdGghPT1vKXRocm93IG5ldyBFcnJvcigiSW1hZ2UgaW5wdXQgY29uZmlnIHdpZHRoIGRvZXNuJ3QgbWF0Y2ggSFRNTEltYWdlRWxlbWVudCB3aWR0aCIpO3Mud2lkdGg9b31lbHNlIHMudGVuc29yRm9ybWF0PSJSR0JBIixzLmhlaWdodD1uLHMud2lkdGg9bztyLmRyYXdJbWFnZShlLDAsMCksYT1yLmdldEltYWdlRGF0YSgwLDAsbyxuKS5kYXRhfX1lbHNle2lmKCFyKXtpZihvKXtpZih2b2lkIDA9PT10KXRocm93IG5ldyBFcnJvcigiUGxlYXNlIHByb3ZpZGUgaW1hZ2UgY29uZmlnIHdpdGggZm9ybWF0IGZvciBJbWFnZWJpdG1hcCIpO2lmKHZvaWQgMCE9PXQuYml0bWFwRm9ybWF0KXRocm93IG5ldyBFcnJvcigiSW1hZ2UgaW5wdXQgY29uZmlnIGZvcm1hdCBtdXN0IGJlIGRlZmluZWQgZm9yIEltYWdlQml0bWFwIik7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpO2lmKG51bGwhPW4pe2NvbnN0IHI9ZS5oZWlnaHQsbz1lLndpZHRoO2lmKG4uZHJhd0ltYWdlKGUsMCwwLG8sciksYT1uLmdldEltYWdlRGF0YSgwLDAsbyxyKS5kYXRhLHZvaWQgMCE9PXQpe2lmKHZvaWQgMCE9PXQuaGVpZ2h0JiZ0LmhlaWdodCE9PXIpdGhyb3cgbmV3IEVycm9yKCJJbWFnZSBpbnB1dCBjb25maWcgaGVpZ2h0IGRvZXNuJ3QgbWF0Y2ggSW1hZ2VCaXRtYXAgaGVpZ2h0Iik7aWYocy5oZWlnaHQ9cix2b2lkIDAhPT10LndpZHRoJiZ0LndpZHRoIT09byl0aHJvdyBuZXcgRXJyb3IoIkltYWdlIGlucHV0IGNvbmZpZyB3aWR0aCBkb2Vzbid0IG1hdGNoIEltYWdlQml0bWFwIHdpZHRoIik7cy53aWR0aD1vfWVsc2Ugcy5oZWlnaHQ9cixzLndpZHRoPW87cmV0dXJuIGYuYnVmZmVyVG9UZW5zb3IoYSxzKX10aHJvdyBuZXcgRXJyb3IoIkNhbiBub3QgYWNjZXNzIGltYWdlIGRhdGEiKX1pZihpKXJldHVybiBuZXcgUHJvbWlzZSgoKG4scik9Pntjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLGk9by5nZXRDb250ZXh0KCIyZCIpO2lmKCFlfHwhaSlyZXR1cm4gcigpO2NvbnN0IGE9bmV3IEltYWdlO2EuY3Jvc3NPcmlnaW49IkFub255bW91cyIsYS5zcmM9ZSxhLm9ubG9hZD0oKT0+e28ud2lkdGg9YS53aWR0aCxvLmhlaWdodD1hLmhlaWdodCxpLmRyYXdJbWFnZShhLDAsMCxvLndpZHRoLG8uaGVpZ2h0KTtjb25zdCBlPWkuZ2V0SW1hZ2VEYXRhKDAsMCxvLndpZHRoLG8uaGVpZ2h0KTtpZih2b2lkIDAhPT10KXtpZih2b2lkIDAhPT10LmhlaWdodCYmdC5oZWlnaHQhPT1vLmhlaWdodCl0aHJvdyBuZXcgRXJyb3IoIkltYWdlIGlucHV0IGNvbmZpZyBoZWlnaHQgZG9lc24ndCBtYXRjaCBJbWFnZUJpdG1hcCBoZWlnaHQiKTtpZihzLmhlaWdodD1vLmhlaWdodCx2b2lkIDAhPT10LndpZHRoJiZ0LndpZHRoIT09by53aWR0aCl0aHJvdyBuZXcgRXJyb3IoIkltYWdlIGlucHV0IGNvbmZpZyB3aWR0aCBkb2Vzbid0IG1hdGNoIEltYWdlQml0bWFwIHdpZHRoIik7cy53aWR0aD1vLndpZHRofWVsc2Ugcy5oZWlnaHQ9by5oZWlnaHQscy53aWR0aD1vLndpZHRoO24oZi5idWZmZXJUb1RlbnNvcihlLmRhdGEscykpfX0pKTt0aHJvdyBuZXcgRXJyb3IoIklucHV0IGRhdGEgcHJvdmlkZWQgaXMgbm90IHN1cHBvcnRlZCAtIGFib3J0ZWQgdGVuc29yIGNyZWF0aW9uIil9e2NvbnN0IG49IlJHQkEiO2xldCByLG87aWYodm9pZCAwIT09dCYmdm9pZCAwIT09dC5yZXNpemVkV2lkdGgmJnZvaWQgMCE9PXQucmVzaXplZEhlaWdodD8ocj10LnJlc2l6ZWRIZWlnaHQsbz10LnJlc2l6ZWRXaWR0aCk6KHI9ZS5oZWlnaHQsbz1lLndpZHRoKSx2b2lkIDAhPT10KXtpZihzPXQsdm9pZCAwIT09dC5iaXRtYXBGb3JtYXQmJnQuYml0bWFwRm9ybWF0IT09bil0aHJvdyBuZXcgRXJyb3IoIkltYWdlIGlucHV0IGNvbmZpZyBmb3JtYXQgbXVzdCBiZSBSR0JBIGZvciBJbWFnZURhdGEiKTtzLmJpdG1hcEZvcm1hdD0iUkdCQSJ9ZWxzZSBzLmJpdG1hcEZvcm1hdD0iUkdCQSI7aWYocy5oZWlnaHQ9cixzLndpZHRoPW8sdm9pZCAwIT09dCl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTt0LndpZHRoPW8sdC5oZWlnaHQ9cjtjb25zdCBuPXQuZ2V0Q29udGV4dCgiMmQiKTtpZihudWxsPT1uKXRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBhY2Nlc3MgaW1hZ2UgZGF0YSIpO24ucHV0SW1hZ2VEYXRhKGUsMCwwKSxhPW4uZ2V0SW1hZ2VEYXRhKDAsMCxvLHIpLmRhdGF9ZWxzZSBhPWUuZGF0YX19aWYodm9pZCAwIT09YSlyZXR1cm4gZi5idWZmZXJUb1RlbnNvcihhLHMpO3Rocm93IG5ldyBFcnJvcigiSW5wdXQgZGF0YSBwcm92aWRlZCBpcyBub3Qgc3VwcG9ydGVkIC0gYWJvcnRlZCB0ZW5zb3IgY3JlYXRpb24iKX10b0ltYWdlRGF0YShlKXt2YXIgdCxuO2NvbnN0IHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTtsZXQgbztpZihudWxsPT1yKXRocm93IG5ldyBFcnJvcigiQ2FuIG5vdCBhY2Nlc3MgaW1hZ2UgZGF0YSIpO3tjb25zdCBpPXRoaXMuZGltc1szXSxhPXRoaXMuZGltc1syXSxzPXRoaXMuZGltc1sxXSx1PXZvaWQgMCE9PWUmJnZvaWQgMCE9PWUuZm9ybWF0P2UuZm9ybWF0OiJSR0IiLGw9dm9pZCAwIT09ZSYmdm9pZCAwIT09KG51bGw9PT0odD1lLm5vcm0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm1lYW4pP2Uubm9ybS5tZWFuOjI1NSxjPXZvaWQgMCE9PWUmJnZvaWQgMCE9PShudWxsPT09KG49ZS5ub3JtKXx8dm9pZCAwPT09bj92b2lkIDA6bi5iaWFzKT9lLm5vcm0uYmlhczowLGY9YSppO2lmKHZvaWQgMCE9PWUpe2lmKHZvaWQgMCE9PWUuaGVpZ2h0JiZlLmhlaWdodCE9PWEpdGhyb3cgbmV3IEVycm9yKCJJbWFnZSBvdXRwdXQgY29uZmlnIGhlaWdodCBkb2Vzbid0IG1hdGNoIHRlbnNvciBoZWlnaHQiKTtpZih2b2lkIDAhPT1lLndpZHRoJiZlLndpZHRoIT09aSl0aHJvdyBuZXcgRXJyb3IoIkltYWdlIG91dHB1dCBjb25maWcgd2lkdGggZG9lc24ndCBtYXRjaCB0ZW5zb3Igd2lkdGgiKTtpZih2b2lkIDAhPT1lLmZvcm1hdCYmND09PXMmJiJSR0JBIiE9PWUuZm9ybWF0fHwzPT09cyYmIlJHQiIhPT1lLmZvcm1hdCYmIkJHUiIhPT1lLmZvcm1hdCl0aHJvdyBuZXcgRXJyb3IoIlRlbnNvciBmb3JtYXQgZG9lc24ndCBtYXRjaCBpbnB1dCB0ZW5zb3IgZGltcyIpfWNvbnN0IGQ9NDtsZXQgaD0wLHA9MSxnPTIsbT0zLHk9MCx3PWYsdj0yKmYsYj0tMTsiUkdCQSI9PT11Pyh5PTAsdz1mLHY9MipmLGI9MypmKToiUkdCIj09PXU/KHk9MCx3PWYsdj0yKmYpOiJSQkciPT09dSYmKHk9MCx2PWYsdz0yKmYpLG89ci5jcmVhdGVJbWFnZURhdGEoaSxhKTtmb3IobGV0IGU9MDtlPGEqaTtoKz1kLHArPWQsZys9ZCxtKz1kLGUrKylvLmRhdGFbaF09KHRoaXMuZGF0YVt5KytdLWMpKmwsby5kYXRhW3BdPSh0aGlzLmRhdGFbdysrXS1jKSpsLG8uZGF0YVtnXT0odGhpcy5kYXRhW3YrK10tYykqbCxvLmRhdGFbbV09LTE9PT1iPzI1NToodGhpcy5kYXRhW2IrK10tYykqbH1yZXR1cm4gb31yZXNoYXBlKGUpe3JldHVybiBuZXcgZih0aGlzLnR5cGUsdGhpcy5kYXRhLGUpfX1jb25zdCBkPWY7Y2xhc3MgaHtjb25zdHJ1Y3RvcihlKXt0aGlzLmhhbmRsZXI9ZX1hc3luYyBydW4oZSx0LG4pe2NvbnN0IHI9e307bGV0IG89e307aWYoIm9iamVjdCIhPXR5cGVvZiBlfHxudWxsPT09ZXx8ZSBpbnN0YW5jZW9mIGR8fEFycmF5LmlzQXJyYXkoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiJ2ZlZWRzJyBtdXN0IGJlIGFuIG9iamVjdCB0aGF0IHVzZSBpbnB1dCBuYW1lcyBhcyBrZXlzIGFuZCBPbm54VmFsdWUgYXMgY29ycmVzcG9uZGluZyB2YWx1ZXMuIik7bGV0IGk9ITA7aWYoIm9iamVjdCI9PXR5cGVvZiB0KXtpZihudWxsPT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmV4cGVjdGVkIGFyZ3VtZW50WzFdOiBjYW5ub3QgYmUgbnVsbC4iKTtpZih0IGluc3RhbmNlb2YgZCl0aHJvdyBuZXcgVHlwZUVycm9yKCInZmV0Y2hlcycgY2Fubm90IGJlIGEgVGVuc29yIik7aWYoQXJyYXkuaXNBcnJheSh0KSl7aWYoMD09PXQubGVuZ3RoKXRocm93IG5ldyBUeXBlRXJyb3IoIidmZXRjaGVzJyBjYW5ub3QgYmUgYW4gZW1wdHkgYXJyYXkuIik7aT0hMTtmb3IoY29uc3QgZSBvZiB0KXtpZigic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcigiJ2ZldGNoZXMnIG11c3QgYmUgYSBzdHJpbmcgYXJyYXkgb3IgYW4gb2JqZWN0LiIpO2lmKC0xPT09dGhpcy5vdXRwdXROYW1lcy5pbmRleE9mKGUpKXRocm93IG5ldyBSYW5nZUVycm9yKGAnZmV0Y2hlcycgY29udGFpbnMgaW52YWxpZCBvdXRwdXQgbmFtZTogJHtlfS5gKTtyW2VdPW51bGx9aWYoIm9iamVjdCI9PXR5cGVvZiBuJiZudWxsIT09bilvPW47ZWxzZSBpZih2b2lkIDAhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoIidvcHRpb25zJyBtdXN0IGJlIGFuIG9iamVjdC4iKX1lbHNle2xldCBlPSExO2NvbnN0IGE9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModCk7Zm9yKGNvbnN0IG4gb2YgdGhpcy5vdXRwdXROYW1lcylpZigtMSE9PWEuaW5kZXhPZihuKSl7Y29uc3Qgbz10W25dOyhudWxsPT09b3x8byBpbnN0YW5jZW9mIGQpJiYoZT0hMCxpPSExLHJbbl09byl9aWYoZSl7aWYoIm9iamVjdCI9PXR5cGVvZiBuJiZudWxsIT09bilvPW47ZWxzZSBpZih2b2lkIDAhPT1uKXRocm93IG5ldyBUeXBlRXJyb3IoIidvcHRpb25zJyBtdXN0IGJlIGFuIG9iamVjdC4iKX1lbHNlIG89dH19ZWxzZSBpZih2b2lkIDAhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIlVuZXhwZWN0ZWQgYXJndW1lbnRbMV06IG11c3QgYmUgJ2ZldGNoZXMnIG9yICdvcHRpb25zJy4iKTtmb3IoY29uc3QgdCBvZiB0aGlzLmlucHV0TmFtZXMpaWYodm9pZCAwPT09ZVt0XSl0aHJvdyBuZXcgRXJyb3IoYGlucHV0ICcke3R9JyBpcyBtaXNzaW5nIGluICdmZWVkcycuYCk7aWYoaSlmb3IoY29uc3QgZSBvZiB0aGlzLm91dHB1dE5hbWVzKXJbZV09bnVsbDtjb25zdCBhPWF3YWl0IHRoaXMuaGFuZGxlci5ydW4oZSxyLG8pLHM9e307Zm9yKGNvbnN0IGUgaW4gYSlPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChhLGUpJiYoc1tlXT1uZXcgZChhW2VdLnR5cGUsYVtlXS5kYXRhLGFbZV0uZGltcykpO3JldHVybiBzfXN0YXRpYyBhc3luYyBjcmVhdGUoZSx0LG4saSl7bGV0IGEscz17fTtpZigic3RyaW5nIj09dHlwZW9mIGUpe2lmKGE9ZSwib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPT10KXM9dDtlbHNlIGlmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiJ29wdGlvbnMnIG11c3QgYmUgYW4gb2JqZWN0LiIpfWVsc2UgaWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe2lmKGE9ZSwib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPT10KXM9dDtlbHNlIGlmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiJ29wdGlvbnMnIG11c3QgYmUgYW4gb2JqZWN0LiIpfWVsc2V7aWYoIShlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fCJ1bmRlZmluZWQiIT10eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXImJmUgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcikpdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5leHBlY3RlZCBhcmd1bWVudFswXTogbXVzdCBiZSAncGF0aCcgb3IgJ2J1ZmZlcicuIik7e2NvbnN0IHI9ZTtsZXQgbz0wLHU9ZS5ieXRlTGVuZ3RoO2lmKCJvYmplY3QiPT10eXBlb2YgdCYmbnVsbCE9PXQpcz10O2Vsc2UgaWYoIm51bWJlciI9PXR5cGVvZiB0KXtpZihvPXQsIU51bWJlci5pc1NhZmVJbnRlZ2VyKG8pKXRocm93IG5ldyBSYW5nZUVycm9yKCInYnl0ZU9mZnNldCcgbXVzdCBiZSBhbiBpbnRlZ2VyLiIpO2lmKG88MHx8bz49ci5ieXRlTGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKGAnYnl0ZU9mZnNldCcgaXMgb3V0IG9mIHJhbmdlIFswLCAke3IuYnl0ZUxlbmd0aH0pLmApO2lmKHU9ZS5ieXRlTGVuZ3RoLW8sIm51bWJlciI9PXR5cGVvZiBuKXtpZih1PW4sIU51bWJlci5pc1NhZmVJbnRlZ2VyKHUpKXRocm93IG5ldyBSYW5nZUVycm9yKCInYnl0ZUxlbmd0aCcgbXVzdCBiZSBhbiBpbnRlZ2VyLiIpO2lmKHU8PTB8fG8rdT5yLmJ5dGVMZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoYCdieXRlTGVuZ3RoJyBpcyBvdXQgb2YgcmFuZ2UgKDAsICR7ci5ieXRlTGVuZ3RoLW99XS5gKTtpZigib2JqZWN0Ij09dHlwZW9mIGkmJm51bGwhPT1pKXM9aTtlbHNlIGlmKHZvaWQgMCE9PWkpdGhyb3cgbmV3IFR5cGVFcnJvcigiJ29wdGlvbnMnIG11c3QgYmUgYW4gb2JqZWN0LiIpfWVsc2UgaWYodm9pZCAwIT09bil0aHJvdyBuZXcgVHlwZUVycm9yKCInYnl0ZUxlbmd0aCcgbXVzdCBiZSBhIG51bWJlci4iKX1lbHNlIGlmKHZvaWQgMCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiJ29wdGlvbnMnIG11c3QgYmUgYW4gb2JqZWN0LiIpO2E9bmV3IFVpbnQ4QXJyYXkocixvLHUpfX1jb25zdCB1PShzLmV4ZWN1dGlvblByb3ZpZGVyc3x8W10pLm1hcCgoZT0+InN0cmluZyI9PXR5cGVvZiBlP2U6ZS5uYW1lKSksbD1hd2FpdChhc3luYyBlPT57Y29uc3QgdD0wPT09ZS5sZW5ndGg/bzplLG49W107Zm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD1yW2VdO2lmKHQpe2lmKHQuaW5pdGlhbGl6ZWQpcmV0dXJuIHQuYmFja2VuZDtpZih0LmFib3J0ZWQpY29udGludWU7Y29uc3Qgcj0hIXQuaW5pdFByb21pc2U7dHJ5e3JldHVybiByfHwodC5pbml0UHJvbWlzZT10LmJhY2tlbmQuaW5pdCgpKSxhd2FpdCB0LmluaXRQcm9taXNlLHQuaW5pdGlhbGl6ZWQ9ITAsdC5iYWNrZW5kfWNhdGNoKG8pe3J8fG4ucHVzaCh7bmFtZTplLGVycjpvfSksdC5hYm9ydGVkPSEwfWZpbmFsbHl7ZGVsZXRlIHQuaW5pdFByb21pc2V9fX10aHJvdyBuZXcgRXJyb3IoYG5vIGF2YWlsYWJsZSBiYWNrZW5kIGZvdW5kLiBFUlI6ICR7bi5tYXAoKGU9PmBbJHtlLm5hbWV9XSAke2UuZXJyfWApKS5qb2luKCIsICIpfWApfSkodSksYz1hd2FpdCBsLmNyZWF0ZVNlc3Npb25IYW5kbGVyKGEscyk7cmV0dXJuIG5ldyBoKGMpfXN0YXJ0UHJvZmlsaW5nKCl7dGhpcy5oYW5kbGVyLnN0YXJ0UHJvZmlsaW5nKCl9ZW5kUHJvZmlsaW5nKCl7dGhpcy5oYW5kbGVyLmVuZFByb2ZpbGluZygpfWdldCBpbnB1dE5hbWVzKCl7cmV0dXJuIHRoaXMuaGFuZGxlci5pbnB1dE5hbWVzfWdldCBvdXRwdXROYW1lcygpe3JldHVybiB0aGlzLmhhbmRsZXIub3V0cHV0TmFtZXN9fWNvbnN0IHA9aH0sOTMyOihlLHQsbik9Pnt2YXIgX3NjcmlwdERpcixyPShfc2NyaXB0RGlyPShfc2NyaXB0RGlyPSJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJmRvY3VtZW50LmN1cnJlbnRTY3JpcHQ/ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM6dm9pZCAwKXx8Ii9pbmRleC5qcyIsZnVuY3Rpb24oZT17fSl7dmFyIHQscixvO3R8fCh0PXZvaWQgMCE9PWU/ZTp7fSksdC5yZWFkeT1uZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSx0KXtyPWUsbz10fSkpO3ZhciBpLGEscyx1PU9iamVjdC5hc3NpZ24oe30sdCksbD0iLi90aGlzLnByb2dyYW0iLGM9Im9iamVjdCI9PXR5cGVvZiB3aW5kb3csZj0iZnVuY3Rpb24iPT10eXBlb2YgaW1wb3J0U2NyaXB0cyxkPSJvYmplY3QiPT10eXBlb2YgcHJvY2VzcyYmIm9iamVjdCI9PXR5cGVvZiBwcm9jZXNzLnZlcnNpb25zJiYic3RyaW5nIj09dHlwZW9mIHByb2Nlc3MudmVyc2lvbnMubm9kZSxoPSIiO2lmKGQpe3ZhciBwPW4oMzg0KSxnPW4oOTA4KTtoPWY/Zy5kaXJuYW1lKGgpKyIvIjoiLy8iLGk9KGUsdCk9PihlPWUuc3RhcnRzV2l0aCgiZmlsZTovLyIpP25ldyBVUkwoZSk6Zy5ub3JtYWxpemUoZSkscC5yZWFkRmlsZVN5bmMoZSx0P3ZvaWQgMDoidXRmOCIpKSxzPWU9PigoZT1pKGUsITApKS5idWZmZXJ8fChlPW5ldyBVaW50OEFycmF5KGUpKSxlKSxhPShlLHQsbik9PntlPWUuc3RhcnRzV2l0aCgiZmlsZTovLyIpP25ldyBVUkwoZSk6Zy5ub3JtYWxpemUoZSkscC5yZWFkRmlsZShlLChmdW5jdGlvbihlLHIpe2U/bihlKTp0KHIuYnVmZmVyKX0pKX0sMTxwcm9jZXNzLmFyZ3YubGVuZ3RoJiYobD1wcm9jZXNzLmFyZ3ZbMV0ucmVwbGFjZSgvXFwvZywiLyIpKSxwcm9jZXNzLmFyZ3Yuc2xpY2UoMikscHJvY2Vzcy5vbigidW5jYXVnaHRFeGNlcHRpb24iLChmdW5jdGlvbihlKXt0aHJvdyBlfSkpLDE1PnByb2Nlc3MudmVyc2lvbnMubm9kZS5zcGxpdCgiLiIpWzBdJiZwcm9jZXNzLm9uKCJ1bmhhbmRsZWRSZWplY3Rpb24iLChmdW5jdGlvbihlKXt0aHJvdyBlfSkpLHQuaW5zcGVjdD1mdW5jdGlvbigpe3JldHVybiJbRW1zY3JpcHRlbiBNb2R1bGUgb2JqZWN0XSJ9fWVsc2UoY3x8ZikmJihmP2g9c2VsZi5sb2NhdGlvbi5ocmVmOiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJmRvY3VtZW50LmN1cnJlbnRTY3JpcHQmJihoPWRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjKSxfc2NyaXB0RGlyJiYoaD1fc2NyaXB0RGlyKSxoPTAhPT1oLmluZGV4T2YoImJsb2I6Iik/aC5zdWJzdHIoMCxoLnJlcGxhY2UoL1s/I10uKi8sIiIpLmxhc3RJbmRleE9mKCIvIikrMSk6IiIsaT1lPT57dmFyIHQ9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiB0Lm9wZW4oIkdFVCIsZSwhMSksdC5zZW5kKG51bGwpLHQucmVzcG9uc2VUZXh0fSxmJiYocz1lPT57dmFyIHQ9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiB0Lm9wZW4oIkdFVCIsZSwhMSksdC5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIix0LnNlbmQobnVsbCksbmV3IFVpbnQ4QXJyYXkodC5yZXNwb25zZSl9KSxhPShlLHQsbik9Pnt2YXIgcj1uZXcgWE1MSHR0cFJlcXVlc3Q7ci5vcGVuKCJHRVQiLGUsITApLHIucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciIsci5vbmxvYWQ9KCk9PnsyMDA9PXIuc3RhdHVzfHwwPT1yLnN0YXR1cyYmci5yZXNwb25zZT90KHIucmVzcG9uc2UpOm4oKX0sci5vbmVycm9yPW4sci5zZW5kKG51bGwpfSk7dmFyIG0seT10LnByaW50fHxjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLHc9dC5wcmludEVycnx8Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSk7T2JqZWN0LmFzc2lnbih0LHUpLHU9bnVsbCx0LnRoaXNQcm9ncmFtJiYobD10LnRoaXNQcm9ncmFtKSx0Lndhc21CaW5hcnkmJihtPXQud2FzbUJpbmFyeSksdC5ub0V4aXRSdW50aW1lLCJvYmplY3QiIT10eXBlb2YgV2ViQXNzZW1ibHkmJkgoIm5vIG5hdGl2ZSB3YXNtIHN1cHBvcnQgZGV0ZWN0ZWQiKTt2YXIgdixiLE8sQSxFLFM9ITEsXz0idW5kZWZpbmVkIiE9dHlwZW9mIFRleHREZWNvZGVyP25ldyBUZXh0RGVjb2RlcigidXRmOCIpOnZvaWQgMDtmdW5jdGlvbiBUKGUsdCxuKXt2YXIgcj0odD4+Pj0wKStuO2ZvcihuPXQ7ZVtuXSYmIShuPj1yKTspKytuO2lmKDE2PG4tdCYmZS5idWZmZXImJl8pcmV0dXJuIF8uZGVjb2RlKGUuc3ViYXJyYXkodCxuKSk7Zm9yKHI9IiI7dDxuOyl7dmFyIG89ZVt0KytdO2lmKDEyOCZvKXt2YXIgaT02MyZlW3QrK107aWYoMTkyPT0oMjI0Jm8pKXIrPVN0cmluZy5mcm9tQ2hhckNvZGUoKDMxJm8pPDw2fGkpO2Vsc2V7dmFyIGE9NjMmZVt0KytdOzY1NTM2PihvPTIyND09KDI0MCZvKT8oMTUmbyk8PDEyfGk8PDZ8YTooNyZvKTw8MTh8aTw8MTJ8YTw8Nnw2MyZlW3QrK10pP3IrPVN0cmluZy5mcm9tQ2hhckNvZGUobyk6KG8tPTY1NTM2LHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8bz4+MTAsNTYzMjB8MTAyMyZvKSl9fWVsc2Ugcis9U3RyaW5nLmZyb21DaGFyQ29kZShvKX1yZXR1cm4gcn1mdW5jdGlvbiBJKGUsdCl7cmV0dXJuKGU+Pj49MCk/VChPLGUsdCk6IiJ9ZnVuY3Rpb24gUChlLHQsbixyKXtpZighKDA8cikpcmV0dXJuIDA7dmFyIG89bj4+Pj0wO3I9bityLTE7Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDsrK2kpe3ZhciBhPWUuY2hhckNvZGVBdChpKTtpZig1NTI5Njw9YSYmNTczNDM+PWEmJihhPTY1NTM2KygoMTAyMyZhKTw8MTApfDEwMjMmZS5jaGFyQ29kZUF0KCsraSkpLDEyNz49YSl7aWYobj49cilicmVhazt0W24rKz4+PjBdPWF9ZWxzZXtpZigyMDQ3Pj1hKXtpZihuKzE+PXIpYnJlYWs7dFtuKys+Pj4wXT0xOTJ8YT4+Nn1lbHNle2lmKDY1NTM1Pj1hKXtpZihuKzI+PXIpYnJlYWs7dFtuKys+Pj4wXT0yMjR8YT4+MTJ9ZWxzZXtpZihuKzM+PXIpYnJlYWs7dFtuKys+Pj4wXT0yNDB8YT4+MTgsdFtuKys+Pj4wXT0xMjh8YT4+MTImNjN9dFtuKys+Pj4wXT0xMjh8YT4+NiY2M310W24rKz4+PjBdPTEyOHw2MyZhfX1yZXR1cm4gdFtuPj4+MF09MCxuLW99ZnVuY3Rpb24gUihlKXtmb3IodmFyIHQ9MCxuPTA7bjxlLmxlbmd0aDsrK24pe3ZhciByPWUuY2hhckNvZGVBdChuKTsxMjc+PXI/dCsrOjIwNDc+PXI/dCs9Mjo1NTI5Njw9ciYmNTczNDM+PXI/KHQrPTQsKytuKTp0Kz0zfXJldHVybiB0fWZ1bmN0aW9uIE0oKXt2YXIgZT12LmJ1ZmZlcjt0LkhFQVA4PWI9bmV3IEludDhBcnJheShlKSx0LkhFQVAxNj1uZXcgSW50MTZBcnJheShlKSx0LkhFQVAzMj1BPW5ldyBJbnQzMkFycmF5KGUpLHQuSEVBUFU4PU89bmV3IFVpbnQ4QXJyYXkoZSksdC5IRUFQVTE2PW5ldyBVaW50MTZBcnJheShlKSx0LkhFQVBVMzI9RT1uZXcgVWludDMyQXJyYXkoZSksdC5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkoZSksdC5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkoZSl9dmFyIEY9W10seD1bXSxDPVtdO2Z1bmN0aW9uIFUoKXt2YXIgZT10LnByZVJ1bi5zaGlmdCgpO0YudW5zaGlmdChlKX12YXIgaixMPTAsRD1udWxsLEI9bnVsbDtmdW5jdGlvbiBIKGUpe3Rocm93IHQub25BYm9ydCYmdC5vbkFib3J0KGUpLHcoZT0iQWJvcnRlZCgiK2UrIikiKSxTPSEwLGU9bmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcihlKyIuIEJ1aWxkIHdpdGggLXNBU1NFUlRJT05TIGZvciBtb3JlIGluZm8uIiksbyhlKSxlfWZ1bmN0aW9uIFcoZSl7cmV0dXJuIGUuc3RhcnRzV2l0aCgiZGF0YTphcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07YmFzZTY0LCIpfWlmKCFXKGo9Im9ydC13YXNtLndhc20iKSl7dmFyIGs9ajtqPXQubG9jYXRlRmlsZT90LmxvY2F0ZUZpbGUoayxoKTpoK2t9ZnVuY3Rpb24geihlKXt0cnl7aWYoZT09aiYmbSlyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobSk7aWYocylyZXR1cm4gcyhlKTt0aHJvdyJib3RoIGFzeW5jIGFuZCBzeW5jIGZldGNoaW5nIG9mIHRoZSB3YXNtIGZhaWxlZCJ9Y2F0Y2goZSl7SChlKX19ZnVuY3Rpb24gJChlLHQsbil7cmV0dXJuIGZ1bmN0aW9uKGUpe2lmKCFtJiYoY3x8Zikpe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBmZXRjaCYmIWUuc3RhcnRzV2l0aCgiZmlsZTovLyIpKXJldHVybiBmZXRjaChlLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbigoZnVuY3Rpb24odCl7aWYoIXQub2spdGhyb3ciZmFpbGVkIHRvIGxvYWQgd2FzbSBiaW5hcnkgZmlsZSBhdCAnIitlKyInIjtyZXR1cm4gdC5hcnJheUJ1ZmZlcigpfSkpLmNhdGNoKChmdW5jdGlvbigpe3JldHVybiB6KGUpfSkpO2lmKGEpcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe2EoZSwoZnVuY3Rpb24oZSl7dChuZXcgVWludDhBcnJheShlKSl9KSxuKX0pKX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24oKXtyZXR1cm4geihlKX0pKX0oZSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGUsdCl9KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSkudGhlbihuLChmdW5jdGlvbihlKXt3KCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK2UpLEgoZSl9KSl9ZnVuY3Rpb24gRyhlKXtmb3IoOzA8ZS5sZW5ndGg7KWUuc2hpZnQoKSh0KX1mdW5jdGlvbiBOKGUpe3RoaXMubmE9ZS0yNCx0aGlzLnhhPWZ1bmN0aW9uKGUpe0VbdGhpcy5uYSs0Pj4yPj4+MF09ZX0sdGhpcy51YT1mdW5jdGlvbihlKXtFW3RoaXMubmErOD4+Mj4+PjBdPWV9LHRoaXMudmE9ZnVuY3Rpb24oKXtBW3RoaXMubmE+PjI+Pj4wXT0wfSx0aGlzLnRhPWZ1bmN0aW9uKCl7Ylt0aGlzLm5hKzEyPj4wPj4+MF09MH0sdGhpcy53YT1mdW5jdGlvbigpe2JbdGhpcy5uYSsxMz4+MD4+PjBdPTB9LHRoaXMucmE9ZnVuY3Rpb24oZSx0KXt0aGlzLnNhKCksdGhpcy54YShlKSx0aGlzLnVhKHQpLHRoaXMudmEoKSx0aGlzLnRhKCksdGhpcy53YSgpfSx0aGlzLnNhPWZ1bmN0aW9uKCl7RVt0aGlzLm5hKzE2Pj4yPj4+MF09MH19ZnVuY3Rpb24gWShlKXtyZXR1cm4gMD09ZSU0JiYoMCE9ZSUxMDB8fDA9PWUlNDAwKX12YXIgVj1bMCwzMSw2MCw5MSwxMjEsMTUyLDE4MiwyMTMsMjQ0LDI3NCwzMDUsMzM1XSxxPVswLDMxLDU5LDkwLDEyMCwxNTEsMTgxLDIxMiwyNDMsMjczLDMwNCwzMzRdO2Z1bmN0aW9uIFgoZSl7cmV0dXJuKFkoZS5nZXRGdWxsWWVhcigpKT9WOnEpW2UuZ2V0TW9udGgoKV0rZS5nZXREYXRlKCktMX1mdW5jdGlvbiBKKGUpe3ZhciB0PVIoZSkrMSxuPWFlKHQpO3JldHVybiBuJiZQKGUsYixuLHQpLG59dmFyIFo9e307ZnVuY3Rpb24gSygpe2lmKCFRKXt2YXIgZSx0PXtVU0VSOiJ3ZWJfdXNlciIsTE9HTkFNRToid2ViX3VzZXIiLFBBVEg6Ii8iLFBXRDoiLyIsSE9NRToiL2hvbWUvd2ViX3VzZXIiLExBTkc6KCJvYmplY3QiPT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzJiZuYXZpZ2F0b3IubGFuZ3VhZ2VzWzBdfHwiQyIpLnJlcGxhY2UoIi0iLCJfIikrIi5VVEYtOCIsXzpsfHwiLi90aGlzLnByb2dyYW0ifTtmb3IoZSBpbiBaKXZvaWQgMD09PVpbZV0/ZGVsZXRlIHRbZV06dFtlXT1aW2VdO3ZhciBuPVtdO2ZvcihlIGluIHQpbi5wdXNoKGUrIj0iK3RbZV0pO1E9bn1yZXR1cm4gUX12YXIgUSxlZT1bbnVsbCxbXSxbXV0sdGU9WzMxLDI5LDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXSxuZT1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdO2Z1bmN0aW9uIHJlKGUsdCxuLHIpe2Z1bmN0aW9uIG8oZSx0LG4pe2ZvcihlPSJudW1iZXIiPT10eXBlb2YgZT9lLnRvU3RyaW5nKCk6ZXx8IiI7ZS5sZW5ndGg8dDspZT1uWzBdK2U7cmV0dXJuIGV9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBvKGUsdCwiMCIpfWZ1bmN0aW9uIGEoZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybiAwPmU/LTE6MDxlPzE6MH12YXIgcjtyZXR1cm4gMD09PShyPW4oZS5nZXRGdWxsWWVhcigpLXQuZ2V0RnVsbFllYXIoKSkpJiYwPT09KHI9bihlLmdldE1vbnRoKCktdC5nZXRNb250aCgpKSkmJihyPW4oZS5nZXREYXRlKCktdC5nZXREYXRlKCkpKSxyfWZ1bmN0aW9uIHMoZSl7c3dpdGNoKGUuZ2V0RGF5KCkpe2Nhc2UgMDpyZXR1cm4gbmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLTEsMTEsMjkpO2Nhc2UgMTpyZXR1cm4gZTtjYXNlIDI6cmV0dXJuIG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSwwLDMpO2Nhc2UgMzpyZXR1cm4gbmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLDAsMik7Y2FzZSA0OnJldHVybiBuZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksMCwxKTtjYXNlIDU6cmV0dXJuIG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKS0xLDExLDMxKTtjYXNlIDY6cmV0dXJuIG5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKS0xLDExLDMwKX19ZnVuY3Rpb24gdShlKXt2YXIgdD1lLmxhO2ZvcihlPW5ldyBEYXRlKG5ldyBEYXRlKGUubWErMTkwMCwwLDEpLmdldFRpbWUoKSk7MDx0Oyl7dmFyIG49ZS5nZXRNb250aCgpLHI9KFkoZS5nZXRGdWxsWWVhcigpKT90ZTpuZSlbbl07aWYoISh0PnItZS5nZXREYXRlKCkpKXtlLnNldERhdGUoZS5nZXREYXRlKCkrdCk7YnJlYWt9dC09ci1lLmdldERhdGUoKSsxLGUuc2V0RGF0ZSgxKSwxMT5uP2Uuc2V0TW9udGgobisxKTooZS5zZXRNb250aCgwKSxlLnNldEZ1bGxZZWFyKGUuZ2V0RnVsbFllYXIoKSsxKSl9cmV0dXJuIG49bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpKzEsMCw0KSx0PXMobmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLDAsNCkpLG49cyhuKSwwPj1hKHQsZSk/MD49YShuLGUpP2UuZ2V0RnVsbFllYXIoKSsxOmUuZ2V0RnVsbFllYXIoKTplLmdldEZ1bGxZZWFyKCktMX12YXIgbD1BW3IrNDA+PjI+Pj4wXTtmb3IodmFyIGMgaW4gcj17QWE6QVtyPj4yPj4+MF0semE6QVtyKzQ+PjI+Pj4wXSxvYTpBW3IrOD4+Mj4+PjBdLHFhOkFbcisxMj4+Mj4+PjBdLHBhOkFbcisxNj4+Mj4+PjBdLG1hOkFbcisyMD4+Mj4+PjBdLGhhOkFbcisyND4+Mj4+PjBdLGxhOkFbcisyOD4+Mj4+PjBdLENhOkFbciszMj4+Mj4+PjBdLHlhOkFbciszNj4+Mj4+PjBdLEJhOmw/SShsKToiIn0sbj1JKG4pLGw9eyIlYyI6IiVhICViICVkICVIOiVNOiVTICVZIiwiJUQiOiIlbS8lZC8leSIsIiVGIjoiJVktJW0tJWQiLCIlaCI6IiViIiwiJXIiOiIlSTolTTolUyAlcCIsIiVSIjoiJUg6JU0iLCIlVCI6IiVIOiVNOiVTIiwiJXgiOiIlbS8lZC8leSIsIiVYIjoiJUg6JU06JVMiLCIlRWMiOiIlYyIsIiVFQyI6IiVDIiwiJUV4IjoiJW0vJWQvJXkiLCIlRVgiOiIlSDolTTolUyIsIiVFeSI6IiV5IiwiJUVZIjoiJVkiLCIlT2QiOiIlZCIsIiVPZSI6IiVlIiwiJU9IIjoiJUgiLCIlT0kiOiIlSSIsIiVPbSI6IiVtIiwiJU9NIjoiJU0iLCIlT1MiOiIlUyIsIiVPdSI6IiV1IiwiJU9VIjoiJVUiLCIlT1YiOiIlViIsIiVPdyI6IiV3IiwiJU9XIjoiJVciLCIlT3kiOiIleSJ9KW49bi5yZXBsYWNlKG5ldyBSZWdFeHAoYywiZyIpLGxbY10pO3ZhciBmPSJTdW5kYXkgTW9uZGF5IFR1ZXNkYXkgV2VkbmVzZGF5IFRodXJzZGF5IEZyaWRheSBTYXR1cmRheSIuc3BsaXQoIiAiKSxkPSJKYW51YXJ5IEZlYnJ1YXJ5IE1hcmNoIEFwcmlsIE1heSBKdW5lIEp1bHkgQXVndXN0IFNlcHRlbWJlciBPY3RvYmVyIE5vdmVtYmVyIERlY2VtYmVyIi5zcGxpdCgiICIpO2ZvcihjIGluIGw9eyIlYSI6ZnVuY3Rpb24oZSl7cmV0dXJuIGZbZS5oYV0uc3Vic3RyaW5nKDAsMyl9LCIlQSI6ZnVuY3Rpb24oZSl7cmV0dXJuIGZbZS5oYV19LCIlYiI6ZnVuY3Rpb24oZSl7cmV0dXJuIGRbZS5wYV0uc3Vic3RyaW5nKDAsMyl9LCIlQiI6ZnVuY3Rpb24oZSl7cmV0dXJuIGRbZS5wYV19LCIlQyI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoKGUubWErMTkwMCkvMTAwfDAsMil9LCIlZCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZS5xYSwyKX0sIiVlIjpmdW5jdGlvbihlKXtyZXR1cm4gbyhlLnFhLDIsIiAiKX0sIiVnIjpmdW5jdGlvbihlKXtyZXR1cm4gdShlKS50b1N0cmluZygpLnN1YnN0cmluZygyKX0sIiVHIjpmdW5jdGlvbihlKXtyZXR1cm4gdShlKX0sIiVIIjpmdW5jdGlvbihlKXtyZXR1cm4gaShlLm9hLDIpfSwiJUkiOmZ1bmN0aW9uKGUpe3JldHVybiAwPT0oZT1lLm9hKT9lPTEyOjEyPGUmJihlLT0xMiksaShlLDIpfSwiJWoiOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49MDtuPD1lLnBhLTE7dCs9KFkoZS5tYSsxOTAwKT90ZTpuZSlbbisrXSk7cmV0dXJuIGkoZS5xYSt0LDMpfSwiJW0iOmZ1bmN0aW9uKGUpe3JldHVybiBpKGUucGErMSwyKX0sIiVNIjpmdW5jdGlvbihlKXtyZXR1cm4gaShlLnphLDIpfSwiJW4iOmZ1bmN0aW9uKCl7cmV0dXJuIlxuIn0sIiVwIjpmdW5jdGlvbihlKXtyZXR1cm4gMDw9ZS5vYSYmMTI+ZS5vYT8iQU0iOiJQTSJ9LCIlUyI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZS5BYSwyKX0sIiV0IjpmdW5jdGlvbigpe3JldHVybiJcdCJ9LCIldSI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuaGF8fDd9LCIlVSI6ZnVuY3Rpb24oZSl7cmV0dXJuIGkoTWF0aC5mbG9vcigoZS5sYSs3LWUuaGEpLzcpLDIpfSwiJVYiOmZ1bmN0aW9uKGUpe3ZhciB0PU1hdGguZmxvb3IoKGUubGErNy0oZS5oYSs2KSU3KS83KTtpZigyPj0oZS5oYSszNzEtZS5sYS0yKSU3JiZ0KyssdCk1Mz09dCYmKDQ9PShuPShlLmhhKzM3MS1lLmxhKSU3KXx8Mz09biYmWShlLm1hKXx8KHQ9MSkpO2Vsc2V7dD01Mjt2YXIgbj0oZS5oYSs3LWUubGEtMSklNzsoND09bnx8NT09biYmWShlLm1hJTQwMC0xKSkmJnQrK31yZXR1cm4gaSh0LDIpfSwiJXciOmZ1bmN0aW9uKGUpe3JldHVybiBlLmhhfSwiJVciOmZ1bmN0aW9uKGUpe3JldHVybiBpKE1hdGguZmxvb3IoKGUubGErNy0oZS5oYSs2KSU3KS83KSwyKX0sIiV5IjpmdW5jdGlvbihlKXtyZXR1cm4oZS5tYSsxOTAwKS50b1N0cmluZygpLnN1YnN0cmluZygyKX0sIiVZIjpmdW5jdGlvbihlKXtyZXR1cm4gZS5tYSsxOTAwfSwiJXoiOmZ1bmN0aW9uKGUpe3ZhciB0PTA8PShlPWUueWEpO3JldHVybiBlPU1hdGguYWJzKGUpLzYwLCh0PyIrIjoiLSIpK1N0cmluZygiMDAwMCIrKGUvNjAqMTAwK2UlNjApKS5zbGljZSgtNCl9LCIlWiI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuQmF9LCIlJSI6ZnVuY3Rpb24oKXtyZXR1cm4iJSJ9fSxuPW4ucmVwbGFjZSgvJSUvZywiXDBcMCIpLGwpbi5pbmNsdWRlcyhjKSYmKG49bi5yZXBsYWNlKG5ldyBSZWdFeHAoYywiZyIpLGxbY10ocikpKTtyZXR1cm4gYz1mdW5jdGlvbihlKXt2YXIgdD1BcnJheShSKGUpKzEpO3JldHVybiBQKGUsdCwwLHQubGVuZ3RoKSx0fShuPW4ucmVwbGFjZSgvXDBcMC9nLCIlIikpLGMubGVuZ3RoPnQ/MDooYi5zZXQoYyxlPj4+MCksYy5sZW5ndGgtMSl9dmFyIG9lPXthOmZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgTihlKS5yYSh0LG4pLGV9LG06ZnVuY3Rpb24oKXtIKCJUbyB1c2UgZGxvcGVuLCB5b3UgbmVlZCBlbmFibGUgZHluYW1pYyBsaW5raW5nLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Vtc2NyaXB0ZW4tY29yZS9lbXNjcmlwdGVuL3dpa2kvTGlua2luZyIpfSxlOmZ1bmN0aW9uKCl7cmV0dXJuIDB9LEo6ZnVuY3Rpb24oKXt9LHc6ZnVuY3Rpb24oKXt9LHk6ZnVuY3Rpb24oKXt9LHA6ZnVuY3Rpb24oKXtyZXR1cm4gMH0sSDpmdW5jdGlvbigpe30sQzpmdW5jdGlvbigpe30sRzpmdW5jdGlvbigpe30sZzpmdW5jdGlvbigpe30seDpmdW5jdGlvbigpe30sdDpmdW5jdGlvbigpe30sSTpmdW5jdGlvbigpe30sdjpmdW5jdGlvbigpe30sSzpmdW5jdGlvbigpe3JldHVybiEwfSxpOmZ1bmN0aW9uKGUsdCl7ZT1uZXcgRGF0ZSgxZTMqKEVbZT4+PjJdKzQyOTQ5NjcyOTYqQVtlKzQ+Pj4yXSkpLEFbdD4+Mj4+PjBdPWUuZ2V0VVRDU2Vjb25kcygpLEFbdCs0Pj4yPj4+MF09ZS5nZXRVVENNaW51dGVzKCksQVt0Kzg+PjI+Pj4wXT1lLmdldFVUQ0hvdXJzKCksQVt0KzEyPj4yPj4+MF09ZS5nZXRVVENEYXRlKCksQVt0KzE2Pj4yPj4+MF09ZS5nZXRVVENNb250aCgpLEFbdCsyMD4+Mj4+PjBdPWUuZ2V0VVRDRnVsbFllYXIoKS0xOTAwLEFbdCsyND4+Mj4+PjBdPWUuZ2V0VVRDRGF5KCksQVt0KzI4Pj4yPj4+MF09KGUuZ2V0VGltZSgpLURhdGUuVVRDKGUuZ2V0VVRDRnVsbFllYXIoKSwwLDEsMCwwLDAsMCkpLzg2NGU1fDB9LGo6ZnVuY3Rpb24oZSx0KXtlPW5ldyBEYXRlKDFlMyooRVtlPj4+Ml0rNDI5NDk2NzI5NipBW2UrND4+PjJdKSksQVt0Pj4yPj4+MF09ZS5nZXRTZWNvbmRzKCksQVt0KzQ+PjI+Pj4wXT1lLmdldE1pbnV0ZXMoKSxBW3QrOD4+Mj4+PjBdPWUuZ2V0SG91cnMoKSxBW3QrMTI+PjI+Pj4wXT1lLmdldERhdGUoKSxBW3QrMTY+PjI+Pj4wXT1lLmdldE1vbnRoKCksQVt0KzIwPj4yPj4+MF09ZS5nZXRGdWxsWWVhcigpLTE5MDAsQVt0KzI0Pj4yPj4+MF09ZS5nZXREYXkoKSxBW3QrMjg+PjI+Pj4wXT0wfFgoZSksQVt0KzM2Pj4yPj4+MF09LTYwKmUuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgbj1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksNiwxKS5nZXRUaW1lem9uZU9mZnNldCgpLHI9bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLDAsMSkuZ2V0VGltZXpvbmVPZmZzZXQoKTtBW3QrMzI+PjI+Pj4wXT0wfChuIT1yJiZlLmdldFRpbWV6b25lT2Zmc2V0KCk9PU1hdGgubWluKHIsbikpfSxrOmZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBEYXRlKEFbZSsyMD4+Mj4+PjBdKzE5MDAsQVtlKzE2Pj4yPj4+MF0sQVtlKzEyPj4yPj4+MF0sQVtlKzg+PjI+Pj4wXSxBW2UrND4+Mj4+PjBdLEFbZT4+Mj4+PjBdLDApLG49QVtlKzMyPj4yPj4+MF0scj10LmdldFRpbWV6b25lT2Zmc2V0KCksbz1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksNiwxKS5nZXRUaW1lem9uZU9mZnNldCgpLGk9bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLDAsMSkuZ2V0VGltZXpvbmVPZmZzZXQoKSxhPU1hdGgubWluKGksbyk7cmV0dXJuIDA+bj9BW2UrMzI+PjI+Pj4wXT1OdW1iZXIobyE9aSYmYT09cik6MDxuIT0oYT09cikmJihvPU1hdGgubWF4KGksbyksdC5zZXRUaW1lKHQuZ2V0VGltZSgpKzZlNCooKDA8bj9hOm8pLXIpKSksQVtlKzI0Pj4yPj4+MF09dC5nZXREYXkoKSxBW2UrMjg+PjI+Pj4wXT0wfFgodCksQVtlPj4yPj4+MF09dC5nZXRTZWNvbmRzKCksQVtlKzQ+PjI+Pj4wXT10LmdldE1pbnV0ZXMoKSxBW2UrOD4+Mj4+PjBdPXQuZ2V0SG91cnMoKSxBW2UrMTI+PjI+Pj4wXT10LmdldERhdGUoKSxBW2UrMTY+PjI+Pj4wXT10LmdldE1vbnRoKCksQVtlKzIwPj4yPj4+MF09dC5nZXRZZWFyKCksdC5nZXRUaW1lKCkvMWUzfDB9LEE6ZnVuY3Rpb24oKXtyZXR1cm4tNTJ9LEI6ZnVuY3Rpb24oKXt9LGw6ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIHIoZSl7cmV0dXJuKGU9ZS50b1RpbWVTdHJpbmcoKS5tYXRjaCgvXCgoW0EtWmEteiBdKylcKSQvKSk/ZVsxXToiR01UIn12YXIgbz0obmV3IERhdGUpLmdldEZ1bGxZZWFyKCksaT1uZXcgRGF0ZShvLDAsMSksYT1uZXcgRGF0ZShvLDYsMSk7bz1pLmdldFRpbWV6b25lT2Zmc2V0KCk7dmFyIHM9YS5nZXRUaW1lem9uZU9mZnNldCgpO0VbZT4+Mj4+PjBdPTYwKk1hdGgubWF4KG8scyksQVt0Pj4yPj4+MF09TnVtYmVyKG8hPXMpLGU9cihpKSx0PXIoYSksZT1KKGUpLHQ9Sih0KSxzPG8/KEVbbj4+Mj4+PjBdPWUsRVtuKzQ+PjI+Pj4wXT10KTooRVtuPj4yPj4+MF09dCxFW24rND4+Mj4+PjBdPWUpfSxjOmZ1bmN0aW9uKCl7SCgiIil9LEQ6ZnVuY3Rpb24oKXtIKCJUbyB1c2UgZGxvcGVuLCB5b3UgbmVlZCBlbmFibGUgZHluYW1pYyBsaW5raW5nLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2Vtc2NyaXB0ZW4tY29yZS9lbXNjcmlwdGVuL3dpa2kvTGlua2luZyIpfSxoOmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCl9LHI6ZnVuY3Rpb24oKXtyZXR1cm4gNDI5NDkwMTc2MH0sYjpkPygpPT57dmFyIGU9cHJvY2Vzcy5ocnRpbWUoKTtyZXR1cm4gMWUzKmVbMF0rZVsxXS8xZTZ9OigpPT5wZXJmb3JtYW5jZS5ub3coKSx6OmZ1bmN0aW9uKGUsdCxuKXtPLmNvcHlXaXRoaW4oZT4+PjAsdD4+PjAsdCtuPj4+MCl9LHE6ZnVuY3Rpb24oZSl7dmFyIHQ9Ty5sZW5ndGg7aWYoNDI5NDkwMTc2MDwoZT4+Pj0wKSlyZXR1cm4hMTtmb3IodmFyIG49MTs0Pj1uO24qPTIpe3ZhciByPXQqKDErLjIvbik7cj1NYXRoLm1pbihyLGUrMTAwNjYzMjk2KTt2YXIgbz1NYXRoLGk9by5taW47cj1NYXRoLm1heChlLHIpLHIrPSg2NTUzNi1yJTY1NTM2KSU2NTUzNjtlOnt2YXIgYT12LmJ1ZmZlcjt0cnl7di5ncm93KGkuY2FsbChvLDQyOTQ5MDE3NjAsciktYS5ieXRlTGVuZ3RoKzY1NTM1Pj4+MTYpLE0oKTt2YXIgcz0xO2JyZWFrIGV9Y2F0Y2goZSl7fXM9dm9pZCAwfWlmKHMpcmV0dXJuITB9cmV0dXJuITF9LEU6ZnVuY3Rpb24oZSx0KXt2YXIgbj0wO3JldHVybiBLKCkuZm9yRWFjaCgoZnVuY3Rpb24ocixvKXt2YXIgaT10K247Zm9yKG89RVtlKzQqbz4+Mj4+PjBdPWksaT0wO2k8ci5sZW5ndGg7KytpKWJbbysrPj4wPj4+MF09ci5jaGFyQ29kZUF0KGkpO2Jbbz4+MD4+PjBdPTAsbis9ci5sZW5ndGgrMX0pKSwwfSxGOmZ1bmN0aW9uKGUsdCl7dmFyIG49SygpO0VbZT4+Mj4+PjBdPW4ubGVuZ3RoO3ZhciByPTA7cmV0dXJuIG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7cis9ZS5sZW5ndGgrMX0pKSxFW3Q+PjI+Pj4wXT1yLDB9LGQ6ZnVuY3Rpb24oKXtyZXR1cm4gNTJ9LGY6ZnVuY3Rpb24oKXtyZXR1cm4gNTJ9LG46ZnVuY3Rpb24oKXtyZXR1cm4gNzB9LHM6ZnVuY3Rpb24oZSx0LG4scil7Zm9yKHZhciBvPTAsaT0wO2k8bjtpKyspe3ZhciBhPUVbdD4+Mj4+PjBdLHM9RVt0KzQ+PjI+Pj4wXTt0Kz04O2Zvcih2YXIgdT0wO3U8czt1Kyspe3ZhciBsPU9bYSt1Pj4+MF0sYz1lZVtlXTswPT09bHx8MTA9PT1sPygoMT09PWU/eTp3KShUKGMsMCkpLGMubGVuZ3RoPTApOmMucHVzaChsKX1vKz1zfXJldHVybiBFW3I+PjI+Pj4wXT1vLDB9LHU6cmUsbzpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gcmUoZSx0LG4scil9fTshZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe2lmKGU9ZS5leHBvcnRzLHQuYXNtPWUsdj10LmFzbS5MLE0oKSx4LnVuc2hpZnQodC5hc20uTSksTC0tLHQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyYmdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzKEwpLDA9PUwmJihudWxsIT09RCYmKGNsZWFySW50ZXJ2YWwoRCksRD1udWxsKSxCKSl7dmFyIG49QjtCPW51bGwsbigpfXJldHVybiBlfXZhciBuPXthOm9lfTtpZihMKyssdC5tb25pdG9yUnVuRGVwZW5kZW5jaWVzJiZ0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMoTCksdC5pbnN0YW50aWF0ZVdhc20pdHJ5e3JldHVybiB0Lmluc3RhbnRpYXRlV2FzbShuLGUpfWNhdGNoKGUpe3coIk1vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICIrZSksbyhlKX0oZnVuY3Rpb24oZSx0KXt2YXIgbj1qO3JldHVybiBtfHwiZnVuY3Rpb24iIT10eXBlb2YgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmd8fFcobil8fG4uc3RhcnRzV2l0aCgiZmlsZTovLyIpfHxkfHwiZnVuY3Rpb24iIT10eXBlb2YgZmV0Y2g/JChuLGUsdCk6ZmV0Y2gobix7Y3JlZGVudGlhbHM6InNhbWUtb3JpZ2luIn0pLnRoZW4oKGZ1bmN0aW9uKHIpe3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhyLGUpLnRoZW4odCwoZnVuY3Rpb24ocil7cmV0dXJuIHkoIndhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiAiK3IpLHkoImZhbGxpbmcgYmFjayB0byBBcnJheUJ1ZmZlciBpbnN0YW50aWF0aW9uIiksJChuLGUsdCl9KSl9KSl9KShuLChmdW5jdGlvbih0KXtlKHQuaW5zdGFuY2UpfSkpLmNhdGNoKG8pfSgpLHQuX09ydEluaXQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0SW5pdD10LmFzbS5OKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydENyZWF0ZVNlc3Npb25PcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX09ydENyZWF0ZVNlc3Npb25PcHRpb25zPXQuYXNtLk8pLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0QXBwZW5kRXhlY3V0aW9uUHJvdmlkZXI9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0QXBwZW5kRXhlY3V0aW9uUHJvdmlkZXI9dC5hc20uUCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9PcnRBZGRTZXNzaW9uQ29uZmlnRW50cnk9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0QWRkU2Vzc2lvbkNvbmZpZ0VudHJ5PXQuYXNtLlEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0UmVsZWFzZVNlc3Npb25PcHRpb25zPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX09ydFJlbGVhc2VTZXNzaW9uT3B0aW9ucz10LmFzbS5SKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydENyZWF0ZVNlc3Npb249ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0Q3JlYXRlU2Vzc2lvbj10LmFzbS5TKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydFJlbGVhc2VTZXNzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX09ydFJlbGVhc2VTZXNzaW9uPXQuYXNtLlQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0R2V0SW5wdXRDb3VudD1mdW5jdGlvbigpe3JldHVybih0Ll9PcnRHZXRJbnB1dENvdW50PXQuYXNtLlUpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0R2V0T3V0cHV0Q291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0R2V0T3V0cHV0Q291bnQ9dC5hc20uVikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9PcnRHZXRJbnB1dE5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0R2V0SW5wdXROYW1lPXQuYXNtLlcpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0R2V0T3V0cHV0TmFtZT1mdW5jdGlvbigpe3JldHVybih0Ll9PcnRHZXRPdXRwdXROYW1lPXQuYXNtLlgpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0RnJlZT1mdW5jdGlvbigpe3JldHVybih0Ll9PcnRGcmVlPXQuYXNtLlkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fT3J0Q3JlYXRlVGVuc29yPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX09ydENyZWF0ZVRlbnNvcj10LmFzbS5aKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydEdldFRlbnNvckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0R2V0VGVuc29yRGF0YT10LmFzbS5fKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydFJlbGVhc2VUZW5zb3I9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0UmVsZWFzZVRlbnNvcj10LmFzbS4kKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydENyZWF0ZVJ1bk9wdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0Q3JlYXRlUnVuT3B0aW9ucz10LmFzbS5hYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9PcnRBZGRSdW5Db25maWdFbnRyeT1mdW5jdGlvbigpe3JldHVybih0Ll9PcnRBZGRSdW5Db25maWdFbnRyeT10LmFzbS5iYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9PcnRSZWxlYXNlUnVuT3B0aW9ucz1mdW5jdGlvbigpe3JldHVybih0Ll9PcnRSZWxlYXNlUnVuT3B0aW9ucz10LmFzbS5jYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9PcnRSdW49ZnVuY3Rpb24oKXtyZXR1cm4odC5fT3J0UnVuPXQuYXNtLmRhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX09ydEVuZFByb2ZpbGluZz1mdW5jdGlvbigpe3JldHVybih0Ll9PcnRFbmRQcm9maWxpbmc9dC5hc20uZWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07dmFyIGllLGFlPXQuX21hbGxvYz1mdW5jdGlvbigpe3JldHVybihhZT10Ll9tYWxsb2M9dC5hc20uZmEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07ZnVuY3Rpb24gc2UoKXtyZXR1cm4oc2U9dC5hc20uaWEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiB1ZSgpe3JldHVybih1ZT10LmFzbS5qYSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIGxlKCl7cmV0dXJuKGxlPXQuYXNtLmthKS5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gY2UoKXtmdW5jdGlvbiBlKCl7aWYoIWllJiYoaWU9ITAsdC5jYWxsZWRSdW49ITAsIVMpKXtpZihHKHgpLHIodCksdC5vblJ1bnRpbWVJbml0aWFsaXplZCYmdC5vblJ1bnRpbWVJbml0aWFsaXplZCgpLHQucG9zdFJ1bilmb3IoImZ1bmN0aW9uIj09dHlwZW9mIHQucG9zdFJ1biYmKHQucG9zdFJ1bj1bdC5wb3N0UnVuXSk7dC5wb3N0UnVuLmxlbmd0aDspe3ZhciBlPXQucG9zdFJ1bi5zaGlmdCgpO0MudW5zaGlmdChlKX1HKEMpfX1pZighKDA8TCkpe2lmKHQucHJlUnVuKWZvcigiZnVuY3Rpb24iPT10eXBlb2YgdC5wcmVSdW4mJih0LnByZVJ1bj1bdC5wcmVSdW5dKTt0LnByZVJ1bi5sZW5ndGg7KVUoKTtHKEYpLDA8THx8KHQuc2V0U3RhdHVzPyh0LnNldFN0YXR1cygiUnVubmluZy4uLiIpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9KSwxKSxlKCl9KSwxKSk6ZSgpKX19aWYodC5fZnJlZT1mdW5jdGlvbigpe3JldHVybih0Ll9mcmVlPXQuYXNtLmdhKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuVVRGOFRvU3RyaW5nPUksdC5zdHJpbmdUb1VURjg9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBQKGUsTyx0LG4pfSx0Lmxlbmd0aEJ5dGVzVVRGOD1SLHQuc3RhY2tBbGxvYz1sZSx0LnN0YWNrU2F2ZT1zZSx0LnN0YWNrUmVzdG9yZT11ZSxCPWZ1bmN0aW9uIGUoKXtpZXx8Y2UoKSxpZXx8KEI9ZSl9LHQucHJlSW5pdClmb3IoImZ1bmN0aW9uIj09dHlwZW9mIHQucHJlSW5pdCYmKHQucHJlSW5pdD1bdC5wcmVJbml0XSk7MDx0LnByZUluaXQubGVuZ3RoOyl0LnByZUluaXQucG9wKCkoKTtyZXR1cm4gY2UoKSxlLnJlYWR5fSk7ZS5leHBvcnRzPXJ9LDIwMDooZSx0LG4pPT57InVzZSBzdHJpY3QiO3QuYzg9dC5yWD12b2lkIDA7Y29uc3Qgcj1uKDQ1Myksbz1uKDM4MSksaT1uKDE1NyksYT1uKDMwNik7dC5yWD0oKT0+e2lmKCgibnVtYmVyIiE9dHlwZW9mIHIuZW52Lndhc20uaW5pdFRpbWVvdXR8fHIuZW52Lndhc20uaW5pdFRpbWVvdXQ8MCkmJihyLmVudi53YXNtLmluaXRUaW1lb3V0PTApLCJib29sZWFuIiE9dHlwZW9mIHIuZW52Lndhc20uc2ltZCYmKHIuZW52Lndhc20uc2ltZD0hMCksImJvb2xlYW4iIT10eXBlb2Ygci5lbnYud2FzbS5wcm94eSYmKHIuZW52Lndhc20ucHJveHk9ITEpLCJudW1iZXIiIT10eXBlb2Ygci5lbnYud2FzbS5udW1UaHJlYWRzfHwhTnVtYmVyLmlzSW50ZWdlcihyLmVudi53YXNtLm51bVRocmVhZHMpfHxyLmVudi53YXNtLm51bVRocmVhZHM8PTApe2NvbnN0IGU9InVuZGVmaW5lZCI9PXR5cGVvZiBuYXZpZ2F0b3I/KDAsby5jcHVzKSgpLmxlbmd0aDpuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeTtyLmVudi53YXNtLm51bVRocmVhZHM9TWF0aC5taW4oNCxNYXRoLmNlaWwoKGV8fDEpLzIpKX19LHQuYzg9bmV3IGNsYXNze2FzeW5jIGluaXQoKXsoMCx0LnJYKSgpLGF3YWl0KDAsaS5pbml0V2FzbSkoKX1hc3luYyBjcmVhdGVTZXNzaW9uSGFuZGxlcihlLHQpe2NvbnN0IG49bmV3IGEuT25ueHJ1bnRpbWVXZWJBc3NlbWJseVNlc3Npb25IYW5kbGVyO3JldHVybiBhd2FpdCBuLmxvYWRNb2RlbChlLHQpLFByb21pc2UucmVzb2x2ZShuKX19fSwxODpmdW5jdGlvbihlLHQsbil7InVzZSBzdHJpY3QiO3ZhciByPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixyKXt2b2lkIDA9PT1yJiYocj1uKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik7byYmISgiZ2V0ImluIG8/IXQuX19lc01vZHVsZTpvLndyaXRhYmxlfHxvLmNvbmZpZ3VyYWJsZSl8fChvPXtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIsbyl9OmZ1bmN0aW9uKGUsdCxuLHIpe3ZvaWQgMD09PXImJihyPW4pLGVbcl09dFtuXX0pLG89dGhpcyYmdGhpcy5fX2V4cG9ydFN0YXJ8fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIGUpImRlZmF1bHQiPT09bnx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbil8fHIodCxlLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksbyhuKDQ1MyksdCk7Y29uc3QgaT1uKDQ1Myk7e2NvbnN0IGU9bigyMDApLmM4OygwLGkucmVnaXN0ZXJCYWNrZW5kKSgiY3B1IixlLDEwKSwoMCxpLnJlZ2lzdGVyQmFja2VuZCkoIndhc20iLGUsMTApLCgwLGkucmVnaXN0ZXJCYWNrZW5kKSgieG5ucGFjayIsZSw5KX19LDk2NzooZSx0KT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5pdGVyYXRlRXh0cmFPcHRpb25zPXZvaWQgMCx0Lml0ZXJhdGVFeHRyYU9wdGlvbnM9KGUsbixyLG8pPT57aWYoIm9iamVjdCI9PXR5cGVvZiBlJiZudWxsIT09ZSl7aWYoci5oYXMoZSkpdGhyb3cgbmV3IEVycm9yKCJDaXJjdWxhciByZWZlcmVuY2UgaW4gb3B0aW9ucyIpO3IuYWRkKGUpfU9iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKChbZSxpXSk9Pntjb25zdCBhPW4/bitlOmU7aWYoIm9iamVjdCI9PXR5cGVvZiBpKSgwLHQuaXRlcmF0ZUV4dHJhT3B0aW9ucykoaSxhKyIuIixyLG8pO2Vsc2UgaWYoInN0cmluZyI9PXR5cGVvZiBpfHwibnVtYmVyIj09dHlwZW9mIGkpbyhhLGkudG9TdHJpbmcoKSk7ZWxzZXtpZigiYm9vbGVhbiIhPXR5cGVvZiBpKXRocm93IG5ldyBFcnJvcigiQ2FuJ3QgaGFuZGxlIGV4dHJhIGNvbmZpZyB0eXBlOiAiK3R5cGVvZiBpKTtvKGEsaT8iMSI6IjAiKX19KSl9fSwxNTc6ZnVuY3Rpb24oZSx0LG4peyJ1c2Ugc3RyaWN0Ijt2YXIgcixvPXRoaXMmJnRoaXMuX19jcmVhdGVCaW5kaW5nfHwoT2JqZWN0LmNyZWF0ZT9mdW5jdGlvbihlLHQsbixyKXt2b2lkIDA9PT1yJiYocj1uKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsbik7byYmISgiZ2V0ImluIG8/IXQuX19lc01vZHVsZTpvLndyaXRhYmxlfHxvLmNvbmZpZ3VyYWJsZSl8fChvPXtlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W25dfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHIsbyl9OmZ1bmN0aW9uKGUsdCxuLHIpe3ZvaWQgMD09PXImJihyPW4pLGVbcl09dFtuXX0pLGk9dGhpcyYmdGhpcy5fX3NldE1vZHVsZURlZmF1bHR8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOnR9KX06ZnVuY3Rpb24oZSx0KXtlLmRlZmF1bHQ9dH0pLGE9dGhpcyYmdGhpcy5fX2ltcG9ydFN0YXJ8fGZ1bmN0aW9uKGUpe2lmKGUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgdD17fTtpZihudWxsIT1lKWZvcih2YXIgbiBpbiBlKSJkZWZhdWx0IiE9PW4mJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLG4pJiZvKHQsZSxuKTtyZXR1cm4gaSh0LGUpLHR9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmVuZFByb2ZpbGluZz10LnJ1bj10LnJlbGVhc2VTZXNzaW9uPXQuY3JlYXRlU2Vzc2lvbj10LmNyZWF0ZVNlc3Npb25GaW5hbGl6ZT10LmNyZWF0ZVNlc3Npb25BbGxvY2F0ZT10LmluaXRPcnQ9dC5pbml0V2FzbT12b2lkIDA7Y29uc3Qgcz1uKDQ1MyksdT1hKG4oMzQ5KSksbD1uKDM2MSk7InVuZGVmaW5lZCIhPXR5cGVvZiBkb2N1bWVudCYmKG51bGw9PT0ocj1udWxsPT09ZG9jdW1lbnR8fHZvaWQgMD09PWRvY3VtZW50P3ZvaWQgMDpkb2N1bWVudC5jdXJyZW50U2NyaXB0KXx8dm9pZCAwPT09cnx8ci5zcmMpLHQuaW5pdFdhc209YXN5bmMoKT0+KDAsbC5pbml0aWFsaXplV2ViQXNzZW1ibHkpKHMuZW52Lndhc20pLHQuaW5pdE9ydD1hc3luYyhlLHQpPT57dS5pbml0T3J0KGUsdCl9LHQuY3JlYXRlU2Vzc2lvbkFsbG9jYXRlPWFzeW5jIGU9PnUuY3JlYXRlU2Vzc2lvbkFsbG9jYXRlKGUpLHQuY3JlYXRlU2Vzc2lvbkZpbmFsaXplPWFzeW5jKGUsdCk9PnUuY3JlYXRlU2Vzc2lvbkZpbmFsaXplKGUsdCksdC5jcmVhdGVTZXNzaW9uPWFzeW5jKGUsdCk9PnUuY3JlYXRlU2Vzc2lvbihlLHQpLHQucmVsZWFzZVNlc3Npb249YXN5bmMgZT0+e3UucmVsZWFzZVNlc3Npb24oZSl9LHQucnVuPWFzeW5jKGUsdCxuLHIsbyk9PnUucnVuKGUsdCxuLHIsbyksdC5lbmRQcm9maWxpbmc9YXN5bmMgZT0+e3UuZW5kUHJvZmlsaW5nKGUpfX0sNTg2OihlLHQsbik9PnsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuc2V0UnVuT3B0aW9ucz12b2lkIDA7Y29uc3Qgcj1uKDk2Nyksbz1uKDk4MyksaT1uKDM2MSk7dC5zZXRSdW5PcHRpb25zPWU9Pntjb25zdCB0PSgwLGkuZ2V0SW5zdGFuY2UpKCk7bGV0IG49MDtjb25zdCBhPVtdLHM9ZXx8e307dHJ5e2lmKHZvaWQgMD09PShudWxsPT1lP3ZvaWQgMDplLmxvZ1NldmVyaXR5TGV2ZWwpKXMubG9nU2V2ZXJpdHlMZXZlbD0yO2Vsc2UgaWYoIm51bWJlciIhPXR5cGVvZiBlLmxvZ1NldmVyaXR5TGV2ZWx8fCFOdW1iZXIuaXNJbnRlZ2VyKGUubG9nU2V2ZXJpdHlMZXZlbCl8fGUubG9nU2V2ZXJpdHlMZXZlbDwwfHxlLmxvZ1NldmVyaXR5TGV2ZWw+NCl0aHJvdyBuZXcgRXJyb3IoYGxvZyBzZXJ2ZXJpdHkgbGV2ZWwgaXMgbm90IHZhbGlkOiAke2UubG9nU2V2ZXJpdHlMZXZlbH1gKTtpZih2b2lkIDA9PT0obnVsbD09ZT92b2lkIDA6ZS5sb2dWZXJib3NpdHlMZXZlbCkpcy5sb2dWZXJib3NpdHlMZXZlbD0wO2Vsc2UgaWYoIm51bWJlciIhPXR5cGVvZiBlLmxvZ1ZlcmJvc2l0eUxldmVsfHwhTnVtYmVyLmlzSW50ZWdlcihlLmxvZ1ZlcmJvc2l0eUxldmVsKSl0aHJvdyBuZXcgRXJyb3IoYGxvZyB2ZXJib3NpdHkgbGV2ZWwgaXMgbm90IHZhbGlkOiAke2UubG9nVmVyYm9zaXR5TGV2ZWx9YCk7dm9pZCAwPT09KG51bGw9PWU/dm9pZCAwOmUudGVybWluYXRlKSYmKHMudGVybWluYXRlPSExKTtsZXQgaT0wO2lmKHZvaWQgMCE9PShudWxsPT1lP3ZvaWQgMDplLnRhZykmJihpPSgwLG8uYWxsb2NXYXNtU3RyaW5nKShlLnRhZyxhKSksbj10Ll9PcnRDcmVhdGVSdW5PcHRpb25zKHMubG9nU2V2ZXJpdHlMZXZlbCxzLmxvZ1ZlcmJvc2l0eUxldmVsLCEhcy50ZXJtaW5hdGUsaSksMD09PW4pdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBjcmVhdGUgcnVuIG9wdGlvbnMiKTtyZXR1cm4gdm9pZCAwIT09KG51bGw9PWU/dm9pZCAwOmUuZXh0cmEpJiYoMCxyLml0ZXJhdGVFeHRyYU9wdGlvbnMpKGUuZXh0cmEsIiIsbmV3IFdlYWtTZXQsKChlLHIpPT57Y29uc3QgaT0oMCxvLmFsbG9jV2FzbVN0cmluZykoZSxhKSxzPSgwLG8uYWxsb2NXYXNtU3RyaW5nKShyLGEpO2lmKDAhPT10Ll9PcnRBZGRSdW5Db25maWdFbnRyeShuLGkscykpdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBzZXQgYSBydW4gY29uZmlnIGVudHJ5OiAke2V9IC0gJHtyfWApfSkpLFtuLGFdfWNhdGNoKGUpe3Rocm93IDAhPT1uJiZ0Ll9PcnRSZWxlYXNlUnVuT3B0aW9ucyhuKSxhLmZvckVhY2godC5fZnJlZSksZX19fSwzMDY6KGUsdCxuKT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Pbm54cnVudGltZVdlYkFzc2VtYmx5U2Vzc2lvbkhhbmRsZXI9dm9pZCAwO2NvbnN0IHI9big4MDYpLG89big0NTMpLGk9big4NTApLGE9bigxNTcpO2xldCBzO3QuT25ueHJ1bnRpbWVXZWJBc3NlbWJseVNlc3Npb25IYW5kbGVyPWNsYXNze2FzeW5jIGNyZWF0ZVNlc3Npb25BbGxvY2F0ZShlKXtjb25zdCB0PWF3YWl0IGZldGNoKGUpLG49YXdhaXQgdC5hcnJheUJ1ZmZlcigpO3JldHVybigwLGEuY3JlYXRlU2Vzc2lvbkFsbG9jYXRlKShuZXcgVWludDhBcnJheShuKSl9YXN5bmMgbG9hZE1vZGVsKGUsdCl7aWYoc3x8KGF3YWl0KDAsYS5pbml0T3J0KShvLmVudi53YXNtLm51bVRocmVhZHMsKGU9Pntzd2l0Y2goZSl7Y2FzZSJ2ZXJib3NlIjpyZXR1cm4gMDtjYXNlImluZm8iOnJldHVybiAxO2Nhc2Uid2FybmluZyI6cmV0dXJuIDI7Y2FzZSJlcnJvciI6cmV0dXJuIDM7Y2FzZSJmYXRhbCI6cmV0dXJuIDQ7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIGxvZ2dpbmcgbGV2ZWw6ICR7ZX1gKX19KShvLmVudi5sb2dMZXZlbCkpLHM9ITApLCJzdHJpbmciPT10eXBlb2YgZSlpZigidW5kZWZpbmVkIj09dHlwZW9mIGZldGNoKXtjb25zdCBuPWF3YWl0KDAsaS5wcm9taXNpZnkpKHIucmVhZEZpbGUpKGUpO1t0aGlzLnNlc3Npb25JZCx0aGlzLmlucHV0TmFtZXMsdGhpcy5vdXRwdXROYW1lc109YXdhaXQoMCxhLmNyZWF0ZVNlc3Npb24pKG4sdCl9ZWxzZXtjb25zdCBuPWF3YWl0IHRoaXMuY3JlYXRlU2Vzc2lvbkFsbG9jYXRlKGUpO1t0aGlzLnNlc3Npb25JZCx0aGlzLmlucHV0TmFtZXMsdGhpcy5vdXRwdXROYW1lc109YXdhaXQoMCxhLmNyZWF0ZVNlc3Npb25GaW5hbGl6ZSkobix0KX1lbHNlW3RoaXMuc2Vzc2lvbklkLHRoaXMuaW5wdXROYW1lcyx0aGlzLm91dHB1dE5hbWVzXT1hd2FpdCgwLGEuY3JlYXRlU2Vzc2lvbikoZSx0KX1hc3luYyBkaXNwb3NlKCl7cmV0dXJuKDAsYS5yZWxlYXNlU2Vzc2lvbikodGhpcy5zZXNzaW9uSWQpfWFzeW5jIHJ1bihlLHQsbil7Y29uc3Qgcj1bXSxpPVtdO09iamVjdC5lbnRyaWVzKGUpLmZvckVhY2goKGU9Pntjb25zdCB0PWVbMF0sbj1lWzFdLG89dGhpcy5pbnB1dE5hbWVzLmluZGV4T2YodCk7aWYoLTE9PT1vKXRocm93IG5ldyBFcnJvcihgaW52YWxpZCBpbnB1dCAnJHt0fSdgKTtyLnB1c2gobiksaS5wdXNoKG8pfSkpO2NvbnN0IHM9W107T2JqZWN0LmVudHJpZXModCkuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZVswXSxuPXRoaXMub3V0cHV0TmFtZXMuaW5kZXhPZih0KTtpZigtMT09PW4pdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIG91dHB1dCAnJHt0fSdgKTtzLnB1c2gobil9KSk7Y29uc3QgdT1hd2FpdCgwLGEucnVuKSh0aGlzLnNlc3Npb25JZCxpLHIubWFwKChlPT5bZS50eXBlLGUuZGltcyxlLmRhdGFdKSkscyxuKSxsPXt9O2ZvcihsZXQgZT0wO2U8dS5sZW5ndGg7ZSsrKWxbdGhpcy5vdXRwdXROYW1lc1tzW2VdXV09bmV3IG8uVGVuc29yKHVbZV1bMF0sdVtlXVsyXSx1W2VdWzFdKTtyZXR1cm4gbH1zdGFydFByb2ZpbGluZygpe31lbmRQcm9maWxpbmcoKXsoMCxhLmVuZFByb2ZpbGluZykodGhpcy5zZXNzaW9uSWQpfX19LDkxOTooZSx0LG4pPT57InVzZSBzdHJpY3QiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnNldFNlc3Npb25PcHRpb25zPXZvaWQgMDtjb25zdCByPW4oOTY3KSxvPW4oOTgzKSxpPW4oMzYxKTt0LnNldFNlc3Npb25PcHRpb25zPWU9Pntjb25zdCB0PSgwLGkuZ2V0SW5zdGFuY2UpKCk7bGV0IG49MDtjb25zdCBhPVtdLHM9ZXx8e307KGU9PntlLmV4dHJhfHwoZS5leHRyYT17fSksZS5leHRyYS5zZXNzaW9ufHwoZS5leHRyYS5zZXNzaW9uPXt9KTtjb25zdCB0PWUuZXh0cmEuc2Vzc2lvbjt0LnVzZV9vcnRfbW9kZWxfYnl0ZXNfZGlyZWN0bHl8fCh0LnVzZV9vcnRfbW9kZWxfYnl0ZXNfZGlyZWN0bHk9IjEiKX0pKHMpO3RyeXt2b2lkIDA9PT0obnVsbD09ZT92b2lkIDA6ZS5ncmFwaE9wdGltaXphdGlvbkxldmVsKSYmKHMuZ3JhcGhPcHRpbWl6YXRpb25MZXZlbD0iYWxsIik7Y29uc3QgdT0oZT0+e3N3aXRjaChlKXtjYXNlImRpc2FibGVkIjpyZXR1cm4gMDtjYXNlImJhc2ljIjpyZXR1cm4gMTtjYXNlImV4dGVuZGVkIjpyZXR1cm4gMjtjYXNlImFsbCI6cmV0dXJuIDk5O2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKGB1bnN1cHBvcnRlZCBncmFwaCBvcHRpbWl6YXRpb24gbGV2ZWw6ICR7ZX1gKX19KShzLmdyYXBoT3B0aW1pemF0aW9uTGV2ZWwpO3ZvaWQgMD09PShudWxsPT1lP3ZvaWQgMDplLmVuYWJsZUNwdU1lbUFyZW5hKSYmKHMuZW5hYmxlQ3B1TWVtQXJlbmE9ITApLHZvaWQgMD09PShudWxsPT1lP3ZvaWQgMDplLmVuYWJsZU1lbVBhdHRlcm4pJiYocy5lbmFibGVNZW1QYXR0ZXJuPSEwKSx2b2lkIDA9PT0obnVsbD09ZT92b2lkIDA6ZS5leGVjdXRpb25Nb2RlKSYmKHMuZXhlY3V0aW9uTW9kZT0ic2VxdWVudGlhbCIpO2NvbnN0IGw9KGU9Pntzd2l0Y2goZSl7Y2FzZSJzZXF1ZW50aWFsIjpyZXR1cm4gMDtjYXNlInBhcmFsbGVsIjpyZXR1cm4gMTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgZXhlY3V0aW9uIG1vZGU6ICR7ZX1gKX19KShzLmV4ZWN1dGlvbk1vZGUpO2xldCBjPTA7aWYodm9pZCAwIT09KG51bGw9PWU/dm9pZCAwOmUubG9nSWQpJiYoYz0oMCxvLmFsbG9jV2FzbVN0cmluZykoZS5sb2dJZCxhKSksdm9pZCAwPT09KG51bGw9PWU/dm9pZCAwOmUubG9nU2V2ZXJpdHlMZXZlbCkpcy5sb2dTZXZlcml0eUxldmVsPTI7ZWxzZSBpZigibnVtYmVyIiE9dHlwZW9mIGUubG9nU2V2ZXJpdHlMZXZlbHx8IU51bWJlci5pc0ludGVnZXIoZS5sb2dTZXZlcml0eUxldmVsKXx8ZS5sb2dTZXZlcml0eUxldmVsPDB8fGUubG9nU2V2ZXJpdHlMZXZlbD40KXRocm93IG5ldyBFcnJvcihgbG9nIHNlcnZlcml0eSBsZXZlbCBpcyBub3QgdmFsaWQ6ICR7ZS5sb2dTZXZlcml0eUxldmVsfWApO2lmKHZvaWQgMD09PShudWxsPT1lP3ZvaWQgMDplLmxvZ1ZlcmJvc2l0eUxldmVsKSlzLmxvZ1ZlcmJvc2l0eUxldmVsPTA7ZWxzZSBpZigibnVtYmVyIiE9dHlwZW9mIGUubG9nVmVyYm9zaXR5TGV2ZWx8fCFOdW1iZXIuaXNJbnRlZ2VyKGUubG9nVmVyYm9zaXR5TGV2ZWwpKXRocm93IG5ldyBFcnJvcihgbG9nIHZlcmJvc2l0eSBsZXZlbCBpcyBub3QgdmFsaWQ6ICR7ZS5sb2dWZXJib3NpdHlMZXZlbH1gKTt2b2lkIDA9PT0obnVsbD09ZT92b2lkIDA6ZS5lbmFibGVQcm9maWxpbmcpJiYocy5lbmFibGVQcm9maWxpbmc9ITEpO2xldCBmPTA7aWYoInN0cmluZyI9PXR5cGVvZihudWxsPT1lP3ZvaWQgMDplLm9wdGltaXplZE1vZGVsRmlsZVBhdGgpJiYoZj0oMCxvLmFsbG9jV2FzbVN0cmluZykoZS5vcHRpbWl6ZWRNb2RlbEZpbGVQYXRoLGEpKSxuPXQuX09ydENyZWF0ZVNlc3Npb25PcHRpb25zKHUsISFzLmVuYWJsZUNwdU1lbUFyZW5hLCEhcy5lbmFibGVNZW1QYXR0ZXJuLGwsISFzLmVuYWJsZVByb2ZpbGluZywwLGMscy5sb2dTZXZlcml0eUxldmVsLHMubG9nVmVyYm9zaXR5TGV2ZWwsZiksMD09PW4pdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBjcmVhdGUgc2Vzc2lvbiBvcHRpb25zIik7cmV0dXJuKG51bGw9PWU/dm9pZCAwOmUuZXhlY3V0aW9uUHJvdmlkZXJzKSYmKChlLHQsbik9Pntmb3IoY29uc3QgciBvZiB0KXtsZXQgdD0ic3RyaW5nIj09dHlwZW9mIHI/cjpyLm5hbWU7c3dpdGNoKHQpe2Nhc2UieG5ucGFjayI6dD0iWE5OUEFDSyI7YnJlYWs7Y2FzZSJ3YXNtIjpjYXNlImNwdSI6Y29udGludWU7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYG5vdCBzdXBwb3J0ZWQgRVA6ICR7dH1gKX1jb25zdCBhPSgwLG8uYWxsb2NXYXNtU3RyaW5nKSh0LG4pO2lmKDAhPT0oMCxpLmdldEluc3RhbmNlKSgpLl9PcnRBcHBlbmRFeGVjdXRpb25Qcm92aWRlcihlLGEpKXRocm93IG5ldyBFcnJvcihgQ2FuJ3QgYXBwZW5kIGV4ZWN1dGlvbiBwcm92aWRlcjogJHt0fWApfX0pKG4sZS5leGVjdXRpb25Qcm92aWRlcnMsYSksdm9pZCAwIT09KG51bGw9PWU/dm9pZCAwOmUuZXh0cmEpJiYoMCxyLml0ZXJhdGVFeHRyYU9wdGlvbnMpKGUuZXh0cmEsIiIsbmV3IFdlYWtTZXQsKChlLHIpPT57Y29uc3QgaT0oMCxvLmFsbG9jV2FzbVN0cmluZykoZSxhKSxzPSgwLG8uYWxsb2NXYXNtU3RyaW5nKShyLGEpO2lmKDAhPT10Ll9PcnRBZGRTZXNzaW9uQ29uZmlnRW50cnkobixpLHMpKXRocm93IG5ldyBFcnJvcihgQ2FuJ3Qgc2V0IGEgc2Vzc2lvbiBjb25maWcgZW50cnk6ICR7ZX0gLSAke3J9YCl9KSksW24sYV19Y2F0Y2goZSl7dGhyb3cgMCE9PW4mJnQuX09ydFJlbGVhc2VTZXNzaW9uT3B0aW9ucyhuKSxhLmZvckVhY2godC5fZnJlZSksZX19fSw5ODM6KGUsdCxuKT0+eyJ1c2Ugc3RyaWN0IjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5hbGxvY1dhc21TdHJpbmc9dm9pZCAwO2NvbnN0IHI9bigzNjEpO3QuYWxsb2NXYXNtU3RyaW5nPShlLHQpPT57Y29uc3Qgbj0oMCxyLmdldEluc3RhbmNlKSgpLG89bi5sZW5ndGhCeXRlc1VURjgoZSkrMSxpPW4uX21hbGxvYyhvKTtyZXR1cm4gbi5zdHJpbmdUb1VURjgoZSxpLG8pLHQucHVzaChpKSxpfX0sMzQ5OihlLHQsbik9PnsidXNlIHN0cmljdCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZXh0cmFjdFRyYW5zZmVyYWJsZUJ1ZmZlcnM9dC5lbmRQcm9maWxpbmc9dC5ydW49dC5yZWxlYXNlU2Vzc2lvbj10LmNyZWF0ZVNlc3Npb249dC5jcmVhdGVTZXNzaW9uRmluYWxpemU9dC5jcmVhdGVTZXNzaW9uQWxsb2NhdGU9dC5pbml0T3J0PXZvaWQgMDtjb25zdCByPW4oNTg2KSxvPW4oOTE5KSxpPW4oOTgzKSxhPW4oMzYxKTt0LmluaXRPcnQ9KGUsdCk9Pntjb25zdCBuPSgwLGEuZ2V0SW5zdGFuY2UpKCkuX09ydEluaXQoZSx0KTtpZigwIT09bil0aHJvdyBuZXcgRXJyb3IoYENhbid0IGluaXRpYWxpemUgb25ueHJ1bnRpbWUuIGVycm9yIGNvZGUgPSAke259YCl9O2NvbnN0IHM9bmV3IE1hcDt0LmNyZWF0ZVNlc3Npb25BbGxvY2F0ZT1lPT57Y29uc3QgdD0oMCxhLmdldEluc3RhbmNlKSgpLG49dC5fbWFsbG9jKGUuYnl0ZUxlbmd0aCk7cmV0dXJuIHQuSEVBUFU4LnNldChlLG4pLFtuLGUuYnl0ZUxlbmd0aF19LHQuY3JlYXRlU2Vzc2lvbkZpbmFsaXplPShlLHQpPT57Y29uc3Qgbj0oMCxhLmdldEluc3RhbmNlKSgpO2xldCByPTAsaT0wLHU9W107dHJ5e2lmKFtpLHVdPSgwLG8uc2V0U2Vzc2lvbk9wdGlvbnMpKHQpLHI9bi5fT3J0Q3JlYXRlU2Vzc2lvbihlWzBdLGVbMV0saSksMD09PXIpdGhyb3cgbmV3IEVycm9yKCJDYW4ndCBjcmVhdGUgYSBzZXNzaW9uIil9ZmluYWxseXtuLl9mcmVlKGVbMF0pLG4uX09ydFJlbGVhc2VTZXNzaW9uT3B0aW9ucyhpKSx1LmZvckVhY2gobi5fZnJlZSl9Y29uc3QgbD1uLl9PcnRHZXRJbnB1dENvdW50KHIpLGM9bi5fT3J0R2V0T3V0cHV0Q291bnQociksZj1bXSxkPVtdLGg9W10scD1bXTtmb3IobGV0IGU9MDtlPGw7ZSsrKXtjb25zdCB0PW4uX09ydEdldElucHV0TmFtZShyLGUpO2lmKDA9PT10KXRocm93IG5ldyBFcnJvcigiQ2FuJ3QgZ2V0IGFuIGlucHV0IG5hbWUiKTtkLnB1c2godCksZi5wdXNoKG4uVVRGOFRvU3RyaW5nKHQpKX1mb3IobGV0IGU9MDtlPGM7ZSsrKXtjb25zdCB0PW4uX09ydEdldE91dHB1dE5hbWUocixlKTtpZigwPT09dCl0aHJvdyBuZXcgRXJyb3IoIkNhbid0IGdldCBhbiBvdXRwdXQgbmFtZSIpO3AucHVzaCh0KSxoLnB1c2gobi5VVEY4VG9TdHJpbmcodCkpfXJldHVybiBzLnNldChyLFtyLGQscF0pLFtyLGYsaF19LHQuY3JlYXRlU2Vzc2lvbj0oZSxuKT0+e2NvbnN0IHI9KDAsdC5jcmVhdGVTZXNzaW9uQWxsb2NhdGUpKGUpO3JldHVybigwLHQuY3JlYXRlU2Vzc2lvbkZpbmFsaXplKShyLG4pfSx0LnJlbGVhc2VTZXNzaW9uPWU9Pntjb25zdCB0PSgwLGEuZ2V0SW5zdGFuY2UpKCksbj1zLmdldChlKTtpZighbil0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgc2Vzc2lvbiBpZCIpO2NvbnN0IHI9blswXSxvPW5bMV0saT1uWzJdO28uZm9yRWFjaCh0Ll9PcnRGcmVlKSxpLmZvckVhY2godC5fT3J0RnJlZSksdC5fT3J0UmVsZWFzZVNlc3Npb24ocikscy5kZWxldGUoZSl9O2NvbnN0IHU9ZT0+e3N3aXRjaChlKXtjYXNlImludDgiOnJldHVybiAzO2Nhc2UidWludDgiOnJldHVybiAyO2Nhc2UiYm9vbCI6cmV0dXJuIDk7Y2FzZSJpbnQxNiI6cmV0dXJuIDU7Y2FzZSJ1aW50MTYiOnJldHVybiA0O2Nhc2UiaW50MzIiOnJldHVybiA2O2Nhc2UidWludDMyIjpyZXR1cm4gMTI7Y2FzZSJmbG9hdDMyIjpyZXR1cm4gMTtjYXNlImZsb2F0NjQiOnJldHVybiAxMTtjYXNlInN0cmluZyI6cmV0dXJuIDg7Y2FzZSJpbnQ2NCI6cmV0dXJuIDc7Y2FzZSJ1aW50NjQiOnJldHVybiAxMztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihgdW5zdXBwb3J0ZWQgZGF0YSB0eXBlOiAke2V9YCl9fSxsPWU9Pntzd2l0Y2goZSl7Y2FzZSAzOnJldHVybiJpbnQ4IjtjYXNlIDI6cmV0dXJuInVpbnQ4IjtjYXNlIDk6cmV0dXJuImJvb2wiO2Nhc2UgNTpyZXR1cm4iaW50MTYiO2Nhc2UgNDpyZXR1cm4idWludDE2IjtjYXNlIDY6cmV0dXJuImludDMyIjtjYXNlIDEyOnJldHVybiJ1aW50MzIiO2Nhc2UgMTpyZXR1cm4iZmxvYXQzMiI7Y2FzZSAxMTpyZXR1cm4iZmxvYXQ2NCI7Y2FzZSA4OnJldHVybiJzdHJpbmciO2Nhc2UgNzpyZXR1cm4iaW50NjQiO2Nhc2UgMTM6cmV0dXJuInVpbnQ2NCI7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIGRhdGEgdHlwZTogJHtlfWApfX0sYz1lPT57c3dpdGNoKGUpe2Nhc2UiZmxvYXQzMiI6cmV0dXJuIEZsb2F0MzJBcnJheTtjYXNlInVpbnQ4IjpjYXNlImJvb2wiOnJldHVybiBVaW50OEFycmF5O2Nhc2UiaW50OCI6cmV0dXJuIEludDhBcnJheTtjYXNlInVpbnQxNiI6cmV0dXJuIFVpbnQxNkFycmF5O2Nhc2UiaW50MTYiOnJldHVybiBJbnQxNkFycmF5O2Nhc2UiaW50MzIiOnJldHVybiBJbnQzMkFycmF5O2Nhc2UiZmxvYXQ2NCI6cmV0dXJuIEZsb2F0NjRBcnJheTtjYXNlInVpbnQzMiI6cmV0dXJuIFVpbnQzMkFycmF5O2Nhc2UiaW50NjQiOnJldHVybiBCaWdJbnQ2NEFycmF5O2Nhc2UidWludDY0IjpyZXR1cm4gQmlnVWludDY0QXJyYXk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoYHVuc3VwcG9ydGVkIHR5cGU6ICR7ZX1gKX19O3QucnVuPShlLHQsbixvLGYpPT57Y29uc3QgZD0oMCxhLmdldEluc3RhbmNlKSgpLGg9cy5nZXQoZSk7aWYoIWgpdGhyb3cgbmV3IEVycm9yKCJpbnZhbGlkIHNlc3Npb24gaWQiKTtjb25zdCBwPWhbMF0sZz1oWzFdLG09aFsyXSx5PXQubGVuZ3RoLHc9by5sZW5ndGg7bGV0IHY9MCxiPVtdO2NvbnN0IE89W10sQT1bXTt0cnl7W3YsYl09KDAsci5zZXRSdW5PcHRpb25zKShmKTtmb3IobGV0IGU9MDtlPHk7ZSsrKXtjb25zdCB0PW5bZV1bMF0scj1uW2VdWzFdLG89bltlXVsyXTtsZXQgYSxzO2lmKEFycmF5LmlzQXJyYXkobykpe3M9NCpvLmxlbmd0aCxhPWQuX21hbGxvYyhzKSxBLnB1c2goYSk7bGV0IGU9YS80O2ZvcihsZXQgdD0wO3Q8by5sZW5ndGg7dCsrKXtpZigic3RyaW5nIiE9dHlwZW9mIG9bdF0pdGhyb3cgbmV3IFR5cGVFcnJvcihgdGVuc29yIGRhdGEgYXQgaW5kZXggJHt0fSBpcyBub3QgYSBzdHJpbmdgKTtkLkhFQVBVMzJbZSsrXT0oMCxpLmFsbG9jV2FzbVN0cmluZykob1t0XSxBKX19ZWxzZSBzPW8uYnl0ZUxlbmd0aCxhPWQuX21hbGxvYyhzKSxBLnB1c2goYSksZC5IRUFQVTguc2V0KG5ldyBVaW50OEFycmF5KG8uYnVmZmVyLG8uYnl0ZU9mZnNldCxzKSxhKTtjb25zdCBsPWQuc3RhY2tTYXZlKCksYz1kLnN0YWNrQWxsb2MoNCpyLmxlbmd0aCk7dHJ5e2xldCBlPWMvNDtyLmZvckVhY2goKHQ9PmQuSEVBUDMyW2UrK109dCkpO2NvbnN0IG49ZC5fT3J0Q3JlYXRlVGVuc29yKHUodCksYSxzLGMsci5sZW5ndGgpO2lmKDA9PT1uKXRocm93IG5ldyBFcnJvcigiQ2FuJ3QgY3JlYXRlIGEgdGVuc29yIik7Ty5wdXNoKG4pfWZpbmFsbHl7ZC5zdGFja1Jlc3RvcmUobCl9fWNvbnN0IGU9ZC5zdGFja1NhdmUoKSxhPWQuc3RhY2tBbGxvYyg0KnkpLHM9ZC5zdGFja0FsbG9jKDQqeSksaD1kLnN0YWNrQWxsb2MoNCp3KSxFPWQuc3RhY2tBbGxvYyg0KncpO3RyeXtsZXQgbj1hLzQscj1zLzQsaT1oLzQsdT1FLzQ7Zm9yKGxldCBlPTA7ZTx5O2UrKylkLkhFQVBVMzJbbisrXT1PW2VdLGQuSEVBUFUzMltyKytdPWdbdFtlXV07Zm9yKGxldCBlPTA7ZTx3O2UrKylkLkhFQVBVMzJbaSsrXT0wLGQuSEVBUFUzMlt1KytdPW1bb1tlXV07bGV0IGY9ZC5fT3J0UnVuKHAscyxhLHksRSx3LGgsdik7Y29uc3QgYj1bXTtpZigwPT09Zilmb3IobGV0IGU9MDtlPHc7ZSsrKXtjb25zdCB0PWQuSEVBUFUzMltoLzQrZV0sbj1kLnN0YWNrU2F2ZSgpLHI9ZC5zdGFja0FsbG9jKDE2KTtsZXQgbyxpPTA7dHJ5e2lmKGY9ZC5fT3J0R2V0VGVuc29yRGF0YSh0LHIscis0LHIrOCxyKzEyKSwwIT09Zil0aHJvdyBuZXcgRXJyb3IoYENhbid0IGFjY2VzcyBvdXRwdXQgdGVuc29yIGRhdGEuIGVycm9yIGNvZGUgPSAke2Z9YCk7bGV0IGU9ci80O2NvbnN0IGE9ZC5IRUFQVTMyW2UrK107aT1kLkhFQVBVMzJbZSsrXTtjb25zdCBzPWQuSEVBUFUzMltlKytdLHU9ZC5IRUFQVTMyW2UrK10saD1bXTtmb3IobGV0IGU9MDtlPHU7ZSsrKWgucHVzaChkLkhFQVBVMzJbcy80K2VdKTtkLl9PcnRGcmVlKHMpO2NvbnN0IHA9MD09PWgubGVuZ3RoPzE6aC5yZWR1Y2UoKChlLHQpPT5lKnQpKTtpZihvPWwoYSksInN0cmluZyI9PT1vKXtjb25zdCBlPVtdO2xldCB0PWkvNDtmb3IobGV0IG49MDtuPHA7bisrKXtjb25zdCByPWQuSEVBUFUzMlt0KytdLG89bj09PXAtMT92b2lkIDA6ZC5IRUFQVTMyW3RdLXI7ZS5wdXNoKGQuVVRGOFRvU3RyaW5nKHIsbykpfWIucHVzaChbbyxoLGVdKX1lbHNle2NvbnN0IGU9bmV3KGMobykpKHApO25ldyBVaW50OEFycmF5KGUuYnVmZmVyLGUuYnl0ZU9mZnNldCxlLmJ5dGVMZW5ndGgpLnNldChkLkhFQVBVOC5zdWJhcnJheShpLGkrZS5ieXRlTGVuZ3RoKSksYi5wdXNoKFtvLGgsZV0pfX1maW5hbGx5e2Quc3RhY2tSZXN0b3JlKG4pLCJzdHJpbmciPT09byYmaSYmZC5fZnJlZShpKSxkLl9PcnRSZWxlYXNlVGVuc29yKHQpfX1pZigwPT09ZilyZXR1cm4gYjt0aHJvdyBuZXcgRXJyb3IoYGZhaWxlZCB0byBjYWxsIE9ydFJ1bigpLiBlcnJvciBjb2RlID0gJHtmfS5gKX1maW5hbGx5e2Quc3RhY2tSZXN0b3JlKGUpfX1maW5hbGx5e08uZm9yRWFjaChkLl9PcnRSZWxlYXNlVGVuc29yKSxBLmZvckVhY2goZC5fZnJlZSksZC5fT3J0UmVsZWFzZVJ1bk9wdGlvbnModiksYi5mb3JFYWNoKGQuX2ZyZWUpfX0sdC5lbmRQcm9maWxpbmc9ZT0+e2NvbnN0IHQ9KDAsYS5nZXRJbnN0YW5jZSkoKSxuPXMuZ2V0KGUpO2lmKCFuKXRocm93IG5ldyBFcnJvcigiaW52YWxpZCBzZXNzaW9uIGlkIik7Y29uc3Qgcj1uWzBdLG89dC5fT3J0RW5kUHJvZmlsaW5nKHIpO2lmKDA9PT1vKXRocm93IG5ldyBFcnJvcigiQ2FuJ3QgZ2V0IGFuIHByb2ZpbGUgZmlsZSBuYW1lIik7dC5fT3J0RnJlZShvKX0sdC5leHRyYWN0VHJhbnNmZXJhYmxlQnVmZmVycz1lPT57Y29uc3QgdD1bXTtmb3IoY29uc3QgbiBvZiBlKXtjb25zdCBlPW5bMl07IUFycmF5LmlzQXJyYXkoZSkmJmUuYnVmZmVyJiZ0LnB1c2goZS5idWZmZXIpfXJldHVybiB0fX0sMzYxOmZ1bmN0aW9uKGUsdCxuKXsidXNlIHN0cmljdCI7dmFyIHI9dGhpcyYmdGhpcy5fX2NyZWF0ZUJpbmRpbmd8fChPYmplY3QuY3JlYXRlP2Z1bmN0aW9uKGUsdCxuLHIpe3ZvaWQgMD09PXImJihyPW4pO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxuKTtvJiYhKCJnZXQiaW4gbz8hdC5fX2VzTW9kdWxlOm8ud3JpdGFibGV8fG8uY29uZmlndXJhYmxlKXx8KG89e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbbl19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUscixvKX06ZnVuY3Rpb24oZSx0LG4scil7dm9pZCAwPT09ciYmKHI9biksZVtyXT10W25dfSksbz10aGlzJiZ0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdHx8KE9iamVjdC5jcmVhdGU/ZnVuY3Rpb24oZSx0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiZGVmYXVsdCIse2VudW1lcmFibGU6ITAsdmFsdWU6dH0pfTpmdW5jdGlvbihlLHQpe2UuZGVmYXVsdD10fSksaT10aGlzJiZ0aGlzLl9faW1wb3J0U3Rhcnx8ZnVuY3Rpb24oZSl7aWYoZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciB0PXt9O2lmKG51bGwhPWUpZm9yKHZhciBuIGluIGUpImRlZmF1bHQiIT09biYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJnIodCxlLG4pO3JldHVybiBvKHQsZSksdH0sYT10aGlzJiZ0aGlzLl9faW1wb3J0RGVmYXVsdHx8ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZT9lOntkZWZhdWx0OmV9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5kaXNwb3NlPXQuZ2V0SW5zdGFuY2U9dC5pbml0aWFsaXplV2ViQXNzZW1ibHk9dm9pZCAwLGkobig0NDkpKTtjb25zdCBzPWEobig5MzIpKSx1PXMuZGVmYXVsdDtsZXQgbCxjPSExLGY9ITEsZD0hMTtjb25zdCBoPShlLHQpPT50P2U/Im9ydC13YXNtLXNpbWQtdGhyZWFkZWQud2FzbSI6Im9ydC13YXNtLXRocmVhZGVkLndhc20iOmU/Im9ydC13YXNtLXNpbWQud2FzbSI6Im9ydC13YXNtLndhc20iO3QuaW5pdGlhbGl6ZVdlYkFzc2VtYmx5PWFzeW5jIGU9PntpZihjKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtpZihmKXRocm93IG5ldyBFcnJvcigibXVsdGlwbGUgY2FsbHMgdG8gJ2luaXRpYWxpemVXZWJBc3NlbWJseSgpJyBkZXRlY3RlZC4iKTtpZihkKXRocm93IG5ldyBFcnJvcigicHJldmlvdXMgY2FsbCB0byAnaW5pdGlhbGl6ZVdlYkFzc2VtYmx5KCknIGZhaWxlZC4iKTtmPSEwO2NvbnN0IHQ9ZS5pbml0VGltZW91dCxuPWUubnVtVGhyZWFkcyxyPWUuc2ltZCxvPW4+MSYmKCgpPT57dHJ5e3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXImJigidW5kZWZpbmVkIiE9dHlwZW9mIE1lc3NhZ2VDaGFubmVsJiYobmV3IE1lc3NhZ2VDaGFubmVsKS5wb3J0MS5wb3N0TWVzc2FnZShuZXcgU2hhcmVkQXJyYXlCdWZmZXIoMSkpLFdlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCw1LDQsMSwzLDEsMSwxMCwxMSwxLDksMCw2NSwwLDI1NCwxNiwyLDAsMjYsMTFdKSkpfWNhdGNoKGUpe3JldHVybiExfX0pKCksaT1yJiYoKCk9Pnt0cnl7cmV0dXJuIFdlYkFzc2VtYmx5LnZhbGlkYXRlKG5ldyBVaW50OEFycmF5KFswLDk3LDExNSwxMDksMSwwLDAsMCwxLDQsMSw5NiwwLDAsMywyLDEsMCwxMCwzMCwxLDI4LDAsNjUsMCwyNTMsMTUsMjUzLDEyLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMjUzLDE4NiwxLDI2LDExXSkpfWNhdGNoKGUpe3JldHVybiExfX0pKCksYT0ic3RyaW5nIj09dHlwZW9mIGUud2FzbVBhdGhzP2Uud2FzbVBhdGhzOnZvaWQgMCxwPWgoITEsbyksZz1oKGksbyksbT0ib2JqZWN0Ij09dHlwZW9mIGUud2FzbVBhdGhzP2Uud2FzbVBhdGhzW2ddOnZvaWQgMDtsZXQgeT0hMTtjb25zdCB3PVtdO2lmKHQ+MCYmdy5wdXNoKG5ldyBQcm9taXNlKChlPT57c2V0VGltZW91dCgoKCk9Pnt5PSEwLGUoKX0pLHQpfSkpKSx3LnB1c2gobmV3IFByb21pc2UoKChlLHQpPT57KG8/dTpzLmRlZmF1bHQpKHtsb2NhdGVGaWxlOihlLHQpPT5lPT09cD9udWxsIT1tP206KG51bGwhPWE/YTp0KStnOnQrZX0pLnRoZW4oKHQ9PntmPSExLGM9ITAsbD10LGUoKX0pLChlPT57Zj0hMSxkPSEwLHQoZSl9KSl9KSkpLGF3YWl0IFByb21pc2UucmFjZSh3KSx5KXRocm93IG5ldyBFcnJvcihgV2ViQXNzZW1ibHkgYmFja2VuZCBpbml0aWFsaXppbmcgZmFpbGVkIGR1ZSB0byB0aW1lb3V0OiAke3R9bXNgKX0sdC5nZXRJbnN0YW5jZT0oKT0+e2lmKGMmJmwpcmV0dXJuIGw7dGhyb3cgbmV3IEVycm9yKCJXZWJBc3NlbWJseSBpcyBub3QgaW5pdGlhbGl6ZWQgeWV0LiIpfSx0LmRpc3Bvc2U9KCk9Pnt2YXIgZTshY3x8Znx8ZHx8KGY9ITAsbnVsbD09PShlPWwuUFRocmVhZCl8fHZvaWQgMD09PWV8fGUudGVybWluYXRlQWxsVGhyZWFkcygpLGw9dm9pZCAwLGY9ITEsYz0hMSxkPSEwKX19LDM4NDooKT0+e30sOTA4OigpPT57fSw4MDY6KCk9Pnt9LDQ0OTooKT0+e30sODUwOigpPT57fSwzODE6KCk9Pnt9fSx0PXt9O2Z1bmN0aW9uIG4ocil7dmFyIG89dFtyXTtpZih2b2lkIDAhPT1vKXJldHVybiBvLmV4cG9ydHM7dmFyIGk9dFtyXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbcl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsbiksaS5leHBvcnRzfXJldHVybiBuLmQ9KGUsdCk9Pntmb3IodmFyIHIgaW4gdCluLm8odCxyKSYmIW4ubyhlLHIpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHtlbnVtZXJhYmxlOiEwLGdldDp0W3JdfSl9LG4ubz0oZSx0KT0+T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCksbi5yPWU9PnsidW5kZWZpbmVkIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOiJNb2R1bGUifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pfSxuKDE4KX0pKCkpKTs=",n,e,"session"],[s]),this.sessionMap[e]={suc:i,fail:o},[2]}}))}))})).catch((function(e){o(e)}))}))},e.prototype.runFeeds=function(e,t,n,r){var i=this;return new Promise((function(o,s){i.seq++,0==t&&(i.rADataMap[i.seq]=o),i.worker.postMessage([e,i.seq,n,r,t,"feeds"],[e])}))},e.prototype.release=function(){this.rADataMap={}},e}(),Re=__webpack_require__(8209),ke=__webpack_require__.n(Re),Ne=__webpack_require__(6129),Oe=__webpack_require__.n(Ne),Le=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};ke().enc.u8array={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=new Uint8Array(n),i=0;i<n;i++){r[i]=t[i>>>2]>>>24-i%4*8&255}return r},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e[r])<<24-r%4*8;return ke().lib.WordArray.create(n,t)}};var xe=[12,38,175,226,26,104,22,115,84,19,253,104,183,221,143,160,193,87,166,144,255,205,179,84,97,16,7,213,126,219,30,76,233],Pe=[255,21,76,211,85,254,8,161,1,0,52,171,34,79,19,7],Ze=I.createError,Me=112,De=112,Ue=1,Be=function(){function e(e,t,n){this.logger=e,this.stateCenter=t,this.streamCenter=n,this.modelInputW=Me,this.modelInputH=De,this.alphaDataType=Ue,this.processorMap=null,this.onnxInited=!1}return e.prototype.getPreview=function(e){var t=this.streamCenter.checkPreview(e);if(!t)throw Ze(n);return t},e.prototype.initModule=function(e,t){return Le(this,void 0,void 0,(function(){var n;return Ae(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.initSessions(e,t,this.modelInputW,this.modelInputH)];case 1:return r.sent(),[3,3];case 2:throw n=r.sent(),Ze(o,n.message);case 3:return[2]}}))}))},e.prototype.getProcessor=function(e){return Le(this,void 0,void 0,(function(){return Ae(this,(function(t){if(!this.onnxInited)throw Ze(s,"Background Blur Module has not been loaded.");return this.processorMap||(this.processorMap=new Map),this.processorMap.get(e.id)||this.processorMap.set(e.id,new Te(this.logger,this.stateCenter,this.getPreview(e),{realSegOnnx:this.realSegOnnx,greenOnnx:this.greenOnnx,worker:this.worker})),[2,this.processorMap.get(e.id)]}))}))},e.prototype.initSessions=function(e,t,n,r){return Le(this,void 0,void 0,(function(){var i,o;return Ae(this,(function(s){switch(s.label){case 0:return this.worker=new Ie(this.stateCenter),0!==e?[3,3]:[4,this.getMData(t+"/web.data")];case 1:return i=s.sent(),o=this,[4,this.getSession(t,e,i,n,r)];case 2:o.realSegOnnx=s.sent(),this.onnxInited=!0,s.label=3;case 3:return[2]}}))}))},e.prototype.getMData=function(e){var t=this;return new Promise((function(n,r){return Le(t,void 0,void 0,(function(){var t,i,o,s,a=this;return Ae(this,(function(u){return new(Oe()),t=new Uint8Array(xe),i=new Uint8Array(Pe),o=ke().enc.u8array.parse(t),s=ke().enc.u8array.parse(i),fetch(e).then((function(e){return Le(a,void 0,void 0,(function(){var t,i=this;return Ae(this,(function(a){switch(a.label){case 0:return[4,e.blob()];case 1:return(t=a.sent()).size<1e4&&t.type?(r({message:"can not fetch the data, please check the path is correct"}),[2]):(Oe().loadAsync(t).then((function(e){for(var t in e.files)e.files[t].dir||/\.(txt)$/.test(e.files[t].name)&&e.file(e.files[t].name).async("arraybuffer").then((function(e){var t,r,i,a=new Uint8Array(e),u=(t=a,r=ke().enc.u8array.parse(t).toString(ke().enc.Base64),i=ke().AES.decrypt(r,o,{iv:s,mode:ke().mode.CFB,padding:ke().pad.NoPadding}),ke().enc.u8array.stringify(i));n(u)})).catch((function(e){i.logger.warn(S+" load data "+JSON.stringify(e))}))})),[2])}}))}))})).catch((function(e){a.logger.warn(S+" fetch data "+JSON.stringify(e)),r(e)})),[2]}))}))}))},e.prototype.getSession=function(e,t,n,r,i){return Le(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,d,f,p,g;return Ae(this,(function(m){switch(m.label){case 0:return A.env.wasm.wasmPaths={"ort-wasm.wasm":e+"/zego-wasm.wasm","ort-wasm-simd.wasm":e+"/zego-wasm-simd.wasm"},0!=this.alphaDataType?[3,2]:[4,A.InferenceSession.create(n,{executionProviders:["wasm"],graphOptimizationLevel:"extended",executionMode:"parallel"})];case 1:return r=m.sent(),16,20,40,48,h=(l=(c=(u=this.modelInputW/2)/2)/2)/2,d=new Float32Array(16*u*u).fill(0),i=new A.Tensor("float32",d,[1,16,u,u]),f=new Float32Array(20*c*c).fill(0),o=new A.Tensor("float32",f,[1,20,c,c]),p=new Float32Array(40*l*l).fill(0),s=new A.Tensor("float32",p,[1,40,l,l]),g=new Float32Array(48*h*h).fill(0),a=new A.Tensor("float32",g,[1,48,h,h]),[3,4];case 2:return[4,this.worker.createSession(t,n,e)];case 3:m.sent(),m.label=4;case 4:return this.logger.info(S+" session inited"),[2,{session:r,seg:t,tensors:{r1:i,r2:o,r3:s,r4:a}}]}}))}))},e.prototype.releaseMap=function(e){var t;null===(t=this.processorMap)||void 0===t||t.delete(e.id)},e}();function Ge(e,t){if(e&&!(e instanceof MediaStream)&&e.zegoStream){if(t.info("cu.gs type:zego"),e.stream instanceof MediaStream)return e.stream;throw new Error("The ZegoLocalStream type requires first calling the capture api to capture the stream")}return e}var We,He=function(){return He=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},He.apply(this,arguments)},ze=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ve=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};!function(e){e[e.I=0]="I",e[e.H=10]="H",e[e.M=100]="M",e[e.L=1e3]="L"}(We||(We={}));var Fe=I.createError;function Xe(e,t,n,r,i){return function(o,s){e.error(t+" "+o.message+(s?" "+s:"")),r.setError(i,{code:o.code,message:o.message+(s||"")}),n({errorCode:o.code||-1,extendedData:o.message+(s?" "+s:"")})}}function Ye(e,t,n){return void 0!==e||(n(i," param '".concat(t,"' is needed, cannot be undefined.")),!1)}function Ke(e,t,n,r,o){return"string"==typeof n&&typeof e===n||"object"==typeof e&&e instanceof n||(o(i," param '".concat(t,"' should be the type of '").concat(r,"'")),!1)}function je(e,t){if("Safari"===e.name){var n=e.version.split(".");if(!(parseInt(n[0])>=14&&parseInt(n[1])>=1))return t(c," Not support safari, please switch other browser and retry."),!1}if("micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i))return t(c," Not support the browser, please switch other browser and retry."),!1;var r="undefined"!=typeof WebGLRenderingContext,i="undefined"!=typeof WebAssembly;return r?!!i||(t(c," browser not support WebAssembly, please switch other browser and retry."),!1):(t(c," browser not support webgl, please switch other browser and retry."),!1)}function Je(e,t,n){return t.backgroundBlurManager||(t.backgroundBlurManager=new Be(e,t,n)),t.backgroundBlurManager}var Qe={initBackgroundModule:function(e,t){var n=this;return new Promise((function(r,i){return ze(n,void 0,void 0,(function(){var n,o,s;return Ve(this,(function(a){switch(a.label){case 0:if((n=this.stateCenter.reporter.createSpan(We.H,{key:p},{key:""},g)).setAttributes({segmentation:m(e)}),o=Xe(this.logger,"zc.p.0.lbm",i,this.stateCenter.reporter,n),!je(this.stateCenter.browserInfo,o))return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Je(this.logger,this.stateCenter,this.streamCenter).initModule(e,t)];case 2:return a.sent(),[3,4];case 3:return s=a.sent(),o(s),[2];case 4:return n.end(),r({errorCode:0,extendedData:"Background blur model successfully loaded"}),[2]}}))}))}))},enableBackgroundProcess:function(e,t,i){var o,s,u=this;var c=Ge(e,this.logger),l=function(e){var t=u.streamCenter.checkPreview(e);if(!t)throw Fe(n);return t}(c),h=this.streamCenter.getPublishList(c);if(null===(o=l.streamCompositor)||void 0===o?void 0:o.outputStream){var f=this.streamCenter.getPublishList(null===(s=l.streamCompositor)||void 0===s?void 0:s.outputStream);h.push.apply(h,f)}var g=function(e){return ze(u,void 0,void 0,(function(){return Ve(this,(function(t){switch(t.label){case 0:return[4,Je(this.logger,this.stateCenter,this.streamCenter).getProcessor(e)];case 1:return[2,t.sent()]}}))}))};return new Promise((function(e,n){return ze(u,void 0,void 0,(function(){var o,s,u,f;return Ve(this,(function(m){switch(m.label){case 0:(o=this.stateCenter.reporter.createSpan(We.H,{key:p},{key:""},_)).setAttributes({segmentation:b(i),media_stream_id:y(c.id),enable:v(t)}),s=Xe(this.logger,E,n,this.stateCenter.reporter,o),m.label=1;case 1:return m.trys.push([1,7,,8]),je(this.stateCenter.browserInfo,s)&&Ye(c,"localStream",s)&&Ye(t,"enable",s)&&Ke(c,"localStream",MediaStream,"MediaStream",s)&&Ke(t,"enable","boolean","boolean",s)?0===c.getVideoTracks().length?(s(r,"input stream should have video track"),[2]):l.isVideoEnabled?h.length>0&&!1===this.stateCenter.supportBg?(s(d),[2]):[4,g(c)]:(s(a),[2]):[2];case 2:return u=m.sent(),l.backgroundProcessor=u,t?[4,u.enable({segmentation:i})]:[3,4];case 3:return m.sent(),l.isBackgroundBlur=!0,[3,6];case 4:return[4,u.disable()];case 5:m.sent(),l.isBackgroundBlur=!1,m.label=6;case 6:return[3,8];case 7:return f=m.sent(),this.logger.error(E+" "+f),s(f),[2];case 8:return o.end(),e({errorCode:0,extendedData:"Blur Background"+(t?"enabled.":"disabled.")}),[2]}}))}))}))},setBackgroundBlurOptions:function(e,t){return ze(this,void 0,void 0,(function(){var n,r,i=this;return Ve(this,(function(o){switch(o.label){case 0:n=Ge(e,this.logger),r=function(e){return ze(i,void 0,void 0,(function(){return Ve(this,(function(t){switch(t.label){case 0:return[4,Je(this.logger,this.stateCenter,this.streamCenter).getProcessor(e)];case 1:return[2,t.sent()]}}))}))},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r(n)];case 2:return o.sent().setOptions(He(He({},t),{type:"blur"})),[2,!0];case 3:return o.sent(),[2,!1];case 4:return[2]}}))}))},setVirtualBackgroundOptions:function(e,t){return ze(this,void 0,void 0,(function(){var n,r,i=this;return Ve(this,(function(o){switch(o.label){case 0:if(!t.source&&!t.objectFit)return this.logger.error(E+" options must have source or ObjectFit"),[2,!1];if(t.source&&(!(t.source instanceof HTMLImageElement)||!t.source.naturalWidth))return this.logger.error(E+" options source must be image and loaded"),[2,!1];n=Ge(e,this.logger),r=function(e){return ze(i,void 0,void 0,(function(){return Ve(this,(function(t){switch(t.label){case 0:return[4,Je(this.logger,this.stateCenter,this.streamCenter).getProcessor(e)];case 1:return[2,t.sent()]}}))}))},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,r(n)];case 2:return o.sent().setOptions(He(He({},t),{type:"img"})),[2,!0];case 3:return o.sent(),[2,!1];case 4:return[2]}}))}))},setTransparentBackgroundOptions:function(e){return ze(this,void 0,void 0,(function(){var t,n,r=this;return Ve(this,(function(i){switch(i.label){case 0:t=Ge(e,this.logger),n=function(e){return ze(r,void 0,void 0,(function(){return Ve(this,(function(t){switch(t.label){case 0:return[4,Je(this.logger,this.stateCenter,this.streamCenter).getProcessor(e)];case 1:return[2,t.sent()]}}))}))},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n(t)];case 2:return i.sent().setOptions({type:"none"}),[2,!0];case 3:return i.sent(),[2,!1];case 4:return[2]}}))}))}},qe={install:function(e){for(var t in Qe)Object.defineProperty(e.prototype,t,{value:Qe[t],writable:!1})},get type(){return"BackgroundProcess"}}}(),__webpack_exports__}()}));
